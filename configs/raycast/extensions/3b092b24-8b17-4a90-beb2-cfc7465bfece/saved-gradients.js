var Ht=Object.create;var se=Object.defineProperty;var Yt=Object.getOwnPropertyDescriptor;var qt=Object.getOwnPropertyNames;var Kt=Object.getPrototypeOf,Jt=Object.prototype.hasOwnProperty;var R=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Zt=(e,t)=>{for(var r in t)se(e,r,{get:t[r],enumerable:!0})},Ne=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of qt(t))!Jt.call(e,a)&&a!==r&&se(e,a,{get:()=>t[a],enumerable:!(n=Yt(t,a))||n.enumerable});return e};var oe=(e,t,r)=>(r=e!=null?Ht(Kt(e)):{},Ne(t||!e||!e.__esModule?se(r,"default",{value:e,enumerable:!0}):r,e)),Qt=e=>Ne(se({},"__esModule",{value:!0}),e);var ge=R((_n,je)=>{"use strict";var ir=require("util"),Ve=require("stream"),G=je.exports=function(){Ve.call(this),this._buffers=[],this._buffered=0,this._reads=[],this._paused=!1,this._encoding="utf8",this.writable=!0};ir.inherits(G,Ve);G.prototype.read=function(e,t){this._reads.push({length:Math.abs(e),allowLess:e<0,func:t}),process.nextTick(function(){this._process(),this._paused&&this._reads&&this._reads.length>0&&(this._paused=!1,this.emit("drain"))}.bind(this))};G.prototype.write=function(e,t){if(!this.writable)return this.emit("error",new Error("Stream not writable")),!1;let r;return Buffer.isBuffer(e)?r=e:r=Buffer.from(e,t||this._encoding),this._buffers.push(r),this._buffered+=r.length,this._process(),this._reads&&this._reads.length===0&&(this._paused=!0),this.writable&&!this._paused};G.prototype.end=function(e,t){e&&this.write(e,t),this.writable=!1,this._buffers&&(this._buffers.length===0?this._end():(this._buffers.push(null),this._process()))};G.prototype.destroySoon=G.prototype.end;G.prototype._end=function(){this._reads.length>0&&this.emit("error",new Error("Unexpected end of input")),this.destroy()};G.prototype.destroy=function(){this._buffers&&(this.writable=!1,this._reads=null,this._buffers=null,this.emit("close"))};G.prototype._processReadAllowingLess=function(e){this._reads.shift();let t=this._buffers[0];t.length>e.length?(this._buffered-=e.length,this._buffers[0]=t.slice(e.length),e.func.call(this,t.slice(0,e.length))):(this._buffered-=t.length,this._buffers.shift(),e.func.call(this,t))};G.prototype._processRead=function(e){this._reads.shift();let t=0,r=0,n=Buffer.alloc(e.length);for(;t<e.length;){let a=this._buffers[r++],i=Math.min(a.length,e.length-t);a.copy(n,t,0,i),t+=i,i!==a.length&&(this._buffers[--r]=a.slice(i))}r>0&&this._buffers.splice(0,r),this._buffered-=e.length,e.func.call(this,n)};G.prototype._process=function(){try{for(;this._buffered>0&&this._reads&&this._reads.length>0;){let e=this._reads[0];if(e.allowLess)this._processReadAllowingLess(e);else if(this._buffered>=e.length)this._processRead(e);else break}this._buffers&&!this.writable&&this._end()}catch(e){this.emit("error",e)}}});var ye=R(be=>{"use strict";var H=[{x:[0],y:[0]},{x:[4],y:[0]},{x:[0,4],y:[4]},{x:[2,6],y:[0,4]},{x:[0,2,4,6],y:[2,6]},{x:[1,3,5,7],y:[0,2,4,6]},{x:[0,1,2,3,4,5,6,7],y:[1,3,5,7]}];be.getImagePasses=function(e,t){let r=[],n=e%8,a=t%8,i=(e-n)/8,s=(t-a)/8;for(let c=0;c<H.length;c++){let l=H[c],u=i*l.x.length,f=s*l.y.length;for(let h=0;h<l.x.length&&l.x[h]<n;h++)u++;for(let h=0;h<l.y.length&&l.y[h]<a;h++)f++;u>0&&f>0&&r.push({width:u,height:f,index:c})}return r};be.getInterlaceIterator=function(e){return function(t,r,n){let a=t%H[n].x.length,i=(t-a)/H[n].x.length*8+H[n].x[a],s=r%H[n].y.length,c=(r-s)/H[n].y.length*8+H[n].y[s];return i*4+c*e*4}}});var we=R((An,ze)=>{"use strict";ze.exports=function(t,r,n){let a=t+r-n,i=Math.abs(a-t),s=Math.abs(a-r),c=Math.abs(a-n);return i<=s&&i<=c?t:s<=c?r:n}});var $e=R((vn,He)=>{"use strict";var ar=ye(),sr=we();function We(e,t,r){let n=e*t;return r!==8&&(n=Math.ceil(n/(8/r))),n}var X=He.exports=function(e,t){let r=e.width,n=e.height,a=e.interlace,i=e.bpp,s=e.depth;if(this.read=t.read,this.write=t.write,this.complete=t.complete,this._imageIndex=0,this._images=[],a){let c=ar.getImagePasses(r,n);for(let l=0;l<c.length;l++)this._images.push({byteWidth:We(c[l].width,i,s),height:c[l].height,lineIndex:0})}else this._images.push({byteWidth:We(r,i,s),height:n,lineIndex:0});s===8?this._xComparison=i:s===16?this._xComparison=i*2:this._xComparison=1};X.prototype.start=function(){this.read(this._images[this._imageIndex].byteWidth+1,this._reverseFilterLine.bind(this))};X.prototype._unFilterType1=function(e,t,r){let n=this._xComparison,a=n-1;for(let i=0;i<r;i++){let s=e[1+i],c=i>a?t[i-n]:0;t[i]=s+c}};X.prototype._unFilterType2=function(e,t,r){let n=this._lastLine;for(let a=0;a<r;a++){let i=e[1+a],s=n?n[a]:0;t[a]=i+s}};X.prototype._unFilterType3=function(e,t,r){let n=this._xComparison,a=n-1,i=this._lastLine;for(let s=0;s<r;s++){let c=e[1+s],l=i?i[s]:0,u=s>a?t[s-n]:0,f=Math.floor((u+l)/2);t[s]=c+f}};X.prototype._unFilterType4=function(e,t,r){let n=this._xComparison,a=n-1,i=this._lastLine;for(let s=0;s<r;s++){let c=e[1+s],l=i?i[s]:0,u=s>a?t[s-n]:0,f=s>a&&i?i[s-n]:0,h=sr(u,l,f);t[s]=c+h}};X.prototype._reverseFilterLine=function(e){let t=e[0],r,n=this._images[this._imageIndex],a=n.byteWidth;if(t===0)r=e.slice(1,a+1);else switch(r=Buffer.alloc(a),t){case 1:this._unFilterType1(e,r,a);break;case 2:this._unFilterType2(e,r,a);break;case 3:this._unFilterType3(e,r,a);break;case 4:this._unFilterType4(e,r,a);break;default:throw new Error("Unrecognised filter type - "+t)}this.write(r),n.lineIndex++,n.lineIndex>=n.height?(this._lastLine=null,this._imageIndex++,n=this._images[this._imageIndex]):this._lastLine=r,n?this.read(n.byteWidth+1,this._reverseFilterLine.bind(this)):(this._lastLine=null,this.complete())}});var Ke=R((Sn,qe)=>{"use strict";var or=require("util"),Ye=ge(),cr=$e(),lr=qe.exports=function(e){Ye.call(this);let t=[],r=this;this._filter=new cr(e,{read:this.read.bind(this),write:function(n){t.push(n)},complete:function(){r.emit("complete",Buffer.concat(t))}}),this._filter.start()};or.inherits(lr,Ye)});var ee=R((En,Je)=>{"use strict";Je.exports={PNG_SIGNATURE:[137,80,78,71,13,10,26,10],TYPE_IHDR:1229472850,TYPE_IEND:1229278788,TYPE_IDAT:1229209940,TYPE_PLTE:1347179589,TYPE_tRNS:1951551059,TYPE_gAMA:1732332865,COLORTYPE_GRAYSCALE:0,COLORTYPE_PALETTE:1,COLORTYPE_COLOR:2,COLORTYPE_ALPHA:4,COLORTYPE_PALETTE_COLOR:3,COLORTYPE_COLOR_ALPHA:6,COLORTYPE_TO_BPP_MAP:{0:1,2:3,3:1,4:2,6:4},GAMMA_DIVISION:1e5}});var xe=R((Cn,Ze)=>{"use strict";var ke=[];(function(){for(let e=0;e<256;e++){let t=e;for(let r=0;r<8;r++)t&1?t=3988292384^t>>>1:t=t>>>1;ke[e]=t}})();var _e=Ze.exports=function(){this._crc=-1};_e.prototype.write=function(e){for(let t=0;t<e.length;t++)this._crc=ke[(this._crc^e[t])&255]^this._crc>>>8;return!0};_e.prototype.crc32=function(){return this._crc^-1};_e.crc32=function(e){let t=-1;for(let r=0;r<e.length;r++)t=ke[(t^e[r])&255]^t>>>8;return t^-1}});var Ae=R((Tn,Qe)=>{"use strict";var L=ee(),ur=xe(),U=Qe.exports=function(e,t){this._options=e,e.checkCRC=e.checkCRC!==!1,this._hasIHDR=!1,this._hasIEND=!1,this._emittedHeadersFinished=!1,this._palette=[],this._colorType=0,this._chunks={},this._chunks[L.TYPE_IHDR]=this._handleIHDR.bind(this),this._chunks[L.TYPE_IEND]=this._handleIEND.bind(this),this._chunks[L.TYPE_IDAT]=this._handleIDAT.bind(this),this._chunks[L.TYPE_PLTE]=this._handlePLTE.bind(this),this._chunks[L.TYPE_tRNS]=this._handleTRNS.bind(this),this._chunks[L.TYPE_gAMA]=this._handleGAMA.bind(this),this.read=t.read,this.error=t.error,this.metadata=t.metadata,this.gamma=t.gamma,this.transColor=t.transColor,this.palette=t.palette,this.parsed=t.parsed,this.inflateData=t.inflateData,this.finished=t.finished,this.simpleTransparency=t.simpleTransparency,this.headersFinished=t.headersFinished||function(){}};U.prototype.start=function(){this.read(L.PNG_SIGNATURE.length,this._parseSignature.bind(this))};U.prototype._parseSignature=function(e){let t=L.PNG_SIGNATURE;for(let r=0;r<t.length;r++)if(e[r]!==t[r]){this.error(new Error("Invalid file signature"));return}this.read(8,this._parseChunkBegin.bind(this))};U.prototype._parseChunkBegin=function(e){let t=e.readUInt32BE(0),r=e.readUInt32BE(4),n="";for(let i=4;i<8;i++)n+=String.fromCharCode(e[i]);let a=!!(e[4]&32);if(!this._hasIHDR&&r!==L.TYPE_IHDR){this.error(new Error("Expected IHDR on beggining"));return}if(this._crc=new ur,this._crc.write(Buffer.from(n)),this._chunks[r])return this._chunks[r](t);if(!a){this.error(new Error("Unsupported critical chunk type "+n));return}this.read(t+4,this._skipChunk.bind(this))};U.prototype._skipChunk=function(){this.read(8,this._parseChunkBegin.bind(this))};U.prototype._handleChunkEnd=function(){this.read(4,this._parseChunkEnd.bind(this))};U.prototype._parseChunkEnd=function(e){let t=e.readInt32BE(0),r=this._crc.crc32();if(this._options.checkCRC&&r!==t){this.error(new Error("Crc error - "+t+" - "+r));return}this._hasIEND||this.read(8,this._parseChunkBegin.bind(this))};U.prototype._handleIHDR=function(e){this.read(e,this._parseIHDR.bind(this))};U.prototype._parseIHDR=function(e){this._crc.write(e);let t=e.readUInt32BE(0),r=e.readUInt32BE(4),n=e[8],a=e[9],i=e[10],s=e[11],c=e[12];if(n!==8&&n!==4&&n!==2&&n!==1&&n!==16){this.error(new Error("Unsupported bit depth "+n));return}if(!(a in L.COLORTYPE_TO_BPP_MAP)){this.error(new Error("Unsupported color type"));return}if(i!==0){this.error(new Error("Unsupported compression method"));return}if(s!==0){this.error(new Error("Unsupported filter method"));return}if(c!==0&&c!==1){this.error(new Error("Unsupported interlace method"));return}this._colorType=a;let l=L.COLORTYPE_TO_BPP_MAP[this._colorType];this._hasIHDR=!0,this.metadata({width:t,height:r,depth:n,interlace:!!c,palette:!!(a&L.COLORTYPE_PALETTE),color:!!(a&L.COLORTYPE_COLOR),alpha:!!(a&L.COLORTYPE_ALPHA),bpp:l,colorType:a}),this._handleChunkEnd()};U.prototype._handlePLTE=function(e){this.read(e,this._parsePLTE.bind(this))};U.prototype._parsePLTE=function(e){this._crc.write(e);let t=Math.floor(e.length/3);for(let r=0;r<t;r++)this._palette.push([e[r*3],e[r*3+1],e[r*3+2],255]);this.palette(this._palette),this._handleChunkEnd()};U.prototype._handleTRNS=function(e){this.simpleTransparency(),this.read(e,this._parseTRNS.bind(this))};U.prototype._parseTRNS=function(e){if(this._crc.write(e),this._colorType===L.COLORTYPE_PALETTE_COLOR){if(this._palette.length===0){this.error(new Error("Transparency chunk must be after palette"));return}if(e.length>this._palette.length){this.error(new Error("More transparent colors than palette size"));return}for(let t=0;t<e.length;t++)this._palette[t][3]=e[t];this.palette(this._palette)}this._colorType===L.COLORTYPE_GRAYSCALE&&this.transColor([e.readUInt16BE(0)]),this._colorType===L.COLORTYPE_COLOR&&this.transColor([e.readUInt16BE(0),e.readUInt16BE(2),e.readUInt16BE(4)]),this._handleChunkEnd()};U.prototype._handleGAMA=function(e){this.read(e,this._parseGAMA.bind(this))};U.prototype._parseGAMA=function(e){this._crc.write(e),this.gamma(e.readUInt32BE(0)/L.GAMMA_DIVISION),this._handleChunkEnd()};U.prototype._handleIDAT=function(e){this._emittedHeadersFinished||(this._emittedHeadersFinished=!0,this.headersFinished()),this.read(-e,this._parseIDAT.bind(this,e))};U.prototype._parseIDAT=function(e,t){if(this._crc.write(t),this._colorType===L.COLORTYPE_PALETTE_COLOR&&this._palette.length===0)throw new Error("Expected palette not found");this.inflateData(t);let r=e-t.length;r>0?this._handleIDAT(r):this._handleChunkEnd()};U.prototype._handleIEND=function(e){this.read(e,this._parseIEND.bind(this))};U.prototype._parseIEND=function(e){this._crc.write(e),this._hasIEND=!0,this._handleChunkEnd(),this.finished&&this.finished()}});var ve=R(et=>{"use strict";var Xe=ye(),fr=[function(){},function(e,t,r,n){if(n===t.length)throw new Error("Ran out of data");let a=t[n];e[r]=a,e[r+1]=a,e[r+2]=a,e[r+3]=255},function(e,t,r,n){if(n+1>=t.length)throw new Error("Ran out of data");let a=t[n];e[r]=a,e[r+1]=a,e[r+2]=a,e[r+3]=t[n+1]},function(e,t,r,n){if(n+2>=t.length)throw new Error("Ran out of data");e[r]=t[n],e[r+1]=t[n+1],e[r+2]=t[n+2],e[r+3]=255},function(e,t,r,n){if(n+3>=t.length)throw new Error("Ran out of data");e[r]=t[n],e[r+1]=t[n+1],e[r+2]=t[n+2],e[r+3]=t[n+3]}],hr=[function(){},function(e,t,r,n){let a=t[0];e[r]=a,e[r+1]=a,e[r+2]=a,e[r+3]=n},function(e,t,r){let n=t[0];e[r]=n,e[r+1]=n,e[r+2]=n,e[r+3]=t[1]},function(e,t,r,n){e[r]=t[0],e[r+1]=t[1],e[r+2]=t[2],e[r+3]=n},function(e,t,r){e[r]=t[0],e[r+1]=t[1],e[r+2]=t[2],e[r+3]=t[3]}];function dr(e,t){let r=[],n=0;function a(){if(n===e.length)throw new Error("Ran out of data");let i=e[n];n++;let s,c,l,u,f,h,p,g;switch(t){default:throw new Error("unrecognised depth");case 16:p=e[n],n++,r.push((i<<8)+p);break;case 4:p=i&15,g=i>>4,r.push(g,p);break;case 2:f=i&3,h=i>>2&3,p=i>>4&3,g=i>>6&3,r.push(g,p,h,f);break;case 1:s=i&1,c=i>>1&1,l=i>>2&1,u=i>>3&1,f=i>>4&1,h=i>>5&1,p=i>>6&1,g=i>>7&1,r.push(g,p,h,f,u,l,c,s);break}}return{get:function(i){for(;r.length<i;)a();let s=r.slice(0,i);return r=r.slice(i),s},resetAfterLine:function(){r.length=0},end:function(){if(n!==e.length)throw new Error("extra data found")}}}function pr(e,t,r,n,a,i){let s=e.width,c=e.height,l=e.index;for(let u=0;u<c;u++)for(let f=0;f<s;f++){let h=r(f,u,l);fr[n](t,a,h,i),i+=n}return i}function mr(e,t,r,n,a,i){let s=e.width,c=e.height,l=e.index;for(let u=0;u<c;u++){for(let f=0;f<s;f++){let h=a.get(n),p=r(f,u,l);hr[n](t,h,p,i)}a.resetAfterLine()}}et.dataToBitMap=function(e,t){let r=t.width,n=t.height,a=t.depth,i=t.bpp,s=t.interlace,c;a!==8&&(c=dr(e,a));let l;a<=8?l=Buffer.alloc(r*n*4):l=new Uint16Array(r*n*4);let u=Math.pow(2,a)-1,f=0,h,p;if(s)h=Xe.getImagePasses(r,n),p=Xe.getInterlaceIterator(r,n);else{let g=0;p=function(){let b=g;return g+=4,b},h=[{width:r,height:n}]}for(let g=0;g<h.length;g++)a===8?f=pr(h[g],l,p,i,e,f):mr(h[g],l,p,i,c,u);if(a===8){if(f!==e.length)throw new Error("extra data found")}else c.end();return l}});var Se=R((Rn,tt)=>{"use strict";function gr(e,t,r,n,a){let i=0;for(let s=0;s<n;s++)for(let c=0;c<r;c++){let l=a[e[i]];if(!l)throw new Error("index "+e[i]+" not in palette");for(let u=0;u<4;u++)t[i+u]=l[u];i+=4}}function br(e,t,r,n,a){let i=0;for(let s=0;s<n;s++)for(let c=0;c<r;c++){let l=!1;if(a.length===1?a[0]===e[i]&&(l=!0):a[0]===e[i]&&a[1]===e[i+1]&&a[2]===e[i+2]&&(l=!0),l)for(let u=0;u<4;u++)t[i+u]=0;i+=4}}function yr(e,t,r,n,a){let i=255,s=Math.pow(2,a)-1,c=0;for(let l=0;l<n;l++)for(let u=0;u<r;u++){for(let f=0;f<4;f++)t[c+f]=Math.floor(e[c+f]*i/s+.5);c+=4}}tt.exports=function(e,t,r=!1){let n=t.depth,a=t.width,i=t.height,s=t.colorType,c=t.transColor,l=t.palette,u=e;return s===3?gr(e,u,a,i,l):(c&&br(e,u,a,i,c),n!==8&&!r&&(n===16&&(u=Buffer.alloc(a*i*4)),yr(e,u,a,i,n))),u}});var it=R((In,nt)=>{"use strict";var wr=require("util"),Ee=require("zlib"),rt=ge(),$r=Ke(),kr=Ae(),_r=ve(),xr=Se(),V=nt.exports=function(e){rt.call(this),this._parser=new kr(e,{read:this.read.bind(this),error:this._handleError.bind(this),metadata:this._handleMetaData.bind(this),gamma:this.emit.bind(this,"gamma"),palette:this._handlePalette.bind(this),transColor:this._handleTransColor.bind(this),finished:this._finished.bind(this),inflateData:this._inflateData.bind(this),simpleTransparency:this._simpleTransparency.bind(this),headersFinished:this._headersFinished.bind(this)}),this._options=e,this.writable=!0,this._parser.start()};wr.inherits(V,rt);V.prototype._handleError=function(e){this.emit("error",e),this.writable=!1,this.destroy(),this._inflate&&this._inflate.destroy&&this._inflate.destroy(),this._filter&&(this._filter.destroy(),this._filter.on("error",function(){})),this.errord=!0};V.prototype._inflateData=function(e){if(!this._inflate)if(this._bitmapInfo.interlace)this._inflate=Ee.createInflate(),this._inflate.on("error",this.emit.bind(this,"error")),this._filter.on("complete",this._complete.bind(this)),this._inflate.pipe(this._filter);else{let r=((this._bitmapInfo.width*this._bitmapInfo.bpp*this._bitmapInfo.depth+7>>3)+1)*this._bitmapInfo.height,n=Math.max(r,Ee.Z_MIN_CHUNK);this._inflate=Ee.createInflate({chunkSize:n});let a=r,i=this.emit.bind(this,"error");this._inflate.on("error",function(c){a&&i(c)}),this._filter.on("complete",this._complete.bind(this));let s=this._filter.write.bind(this._filter);this._inflate.on("data",function(c){a&&(c.length>a&&(c=c.slice(0,a)),a-=c.length,s(c))}),this._inflate.on("end",this._filter.end.bind(this._filter))}this._inflate.write(e)};V.prototype._handleMetaData=function(e){this._metaData=e,this._bitmapInfo=Object.create(e),this._filter=new $r(this._bitmapInfo)};V.prototype._handleTransColor=function(e){this._bitmapInfo.transColor=e};V.prototype._handlePalette=function(e){this._bitmapInfo.palette=e};V.prototype._simpleTransparency=function(){this._metaData.alpha=!0};V.prototype._headersFinished=function(){this.emit("metadata",this._metaData)};V.prototype._finished=function(){this.errord||(this._inflate?this._inflate.end():this.emit("error","No Inflate block"))};V.prototype._complete=function(e){if(this.errord)return;let t;try{let r=_r.dataToBitMap(e,this._bitmapInfo);t=xr(r,this._bitmapInfo,this._options.skipRescale),r=null}catch(r){this._handleError(r);return}this.emit("parsed",t)}});var st=R((On,at)=>{"use strict";var B=ee();at.exports=function(e,t,r,n){let a=[B.COLORTYPE_COLOR_ALPHA,B.COLORTYPE_ALPHA].indexOf(n.colorType)!==-1;if(n.colorType===n.inputColorType){let b=(function(){let m=new ArrayBuffer(2);return new DataView(m).setInt16(0,256,!0),new Int16Array(m)[0]!==256})();if(n.bitDepth===8||n.bitDepth===16&&b)return e}let i=n.bitDepth!==16?e:new Uint16Array(e.buffer),s=255,c=B.COLORTYPE_TO_BPP_MAP[n.inputColorType];c===4&&!n.inputHasAlpha&&(c=3);let l=B.COLORTYPE_TO_BPP_MAP[n.colorType];n.bitDepth===16&&(s=65535,l*=2);let u=Buffer.alloc(t*r*l),f=0,h=0,p=n.bgColor||{};p.red===void 0&&(p.red=s),p.green===void 0&&(p.green=s),p.blue===void 0&&(p.blue=s);function g(){let b,m,y,k=s;switch(n.inputColorType){case B.COLORTYPE_COLOR_ALPHA:k=i[f+3],b=i[f],m=i[f+1],y=i[f+2];break;case B.COLORTYPE_COLOR:b=i[f],m=i[f+1],y=i[f+2];break;case B.COLORTYPE_ALPHA:k=i[f+1],b=i[f],m=b,y=b;break;case B.COLORTYPE_GRAYSCALE:b=i[f],m=b,y=b;break;default:throw new Error("input color type:"+n.inputColorType+" is not supported at present")}return n.inputHasAlpha&&(a||(k/=s,b=Math.min(Math.max(Math.round((1-k)*p.red+k*b),0),s),m=Math.min(Math.max(Math.round((1-k)*p.green+k*m),0),s),y=Math.min(Math.max(Math.round((1-k)*p.blue+k*y),0),s))),{red:b,green:m,blue:y,alpha:k}}for(let b=0;b<r;b++)for(let m=0;m<t;m++){let y=g(i,f);switch(n.colorType){case B.COLORTYPE_COLOR_ALPHA:case B.COLORTYPE_COLOR:n.bitDepth===8?(u[h]=y.red,u[h+1]=y.green,u[h+2]=y.blue,a&&(u[h+3]=y.alpha)):(u.writeUInt16BE(y.red,h),u.writeUInt16BE(y.green,h+2),u.writeUInt16BE(y.blue,h+4),a&&u.writeUInt16BE(y.alpha,h+6));break;case B.COLORTYPE_ALPHA:case B.COLORTYPE_GRAYSCALE:{let k=(y.red+y.green+y.blue)/3;n.bitDepth===8?(u[h]=k,a&&(u[h+1]=y.alpha)):(u.writeUInt16BE(k,h),a&&u.writeUInt16BE(y.alpha,h+2));break}default:throw new Error("unrecognised color Type "+n.colorType)}f+=c,h+=l}return u}});var lt=R((Ln,ct)=>{"use strict";var ot=we();function Ar(e,t,r,n,a){for(let i=0;i<r;i++)n[a+i]=e[t+i]}function vr(e,t,r){let n=0,a=t+r;for(let i=t;i<a;i++)n+=Math.abs(e[i]);return n}function Sr(e,t,r,n,a,i){for(let s=0;s<r;s++){let c=s>=i?e[t+s-i]:0,l=e[t+s]-c;n[a+s]=l}}function Er(e,t,r,n){let a=0;for(let i=0;i<r;i++){let s=i>=n?e[t+i-n]:0,c=e[t+i]-s;a+=Math.abs(c)}return a}function Cr(e,t,r,n,a){for(let i=0;i<r;i++){let s=t>0?e[t+i-r]:0,c=e[t+i]-s;n[a+i]=c}}function Tr(e,t,r){let n=0,a=t+r;for(let i=t;i<a;i++){let s=t>0?e[i-r]:0,c=e[i]-s;n+=Math.abs(c)}return n}function Pr(e,t,r,n,a,i){for(let s=0;s<r;s++){let c=s>=i?e[t+s-i]:0,l=t>0?e[t+s-r]:0,u=e[t+s]-(c+l>>1);n[a+s]=u}}function Rr(e,t,r,n){let a=0;for(let i=0;i<r;i++){let s=i>=n?e[t+i-n]:0,c=t>0?e[t+i-r]:0,l=e[t+i]-(s+c>>1);a+=Math.abs(l)}return a}function Ir(e,t,r,n,a,i){for(let s=0;s<r;s++){let c=s>=i?e[t+s-i]:0,l=t>0?e[t+s-r]:0,u=t>0&&s>=i?e[t+s-(r+i)]:0,f=e[t+s]-ot(c,l,u);n[a+s]=f}}function Or(e,t,r,n){let a=0;for(let i=0;i<r;i++){let s=i>=n?e[t+i-n]:0,c=t>0?e[t+i-r]:0,l=t>0&&i>=n?e[t+i-(r+n)]:0,u=e[t+i]-ot(s,c,l);a+=Math.abs(u)}return a}var Lr={0:Ar,1:Sr,2:Cr,3:Pr,4:Ir},Ur={0:vr,1:Er,2:Tr,3:Rr,4:Or};ct.exports=function(e,t,r,n,a){let i;if(!("filterType"in n)||n.filterType===-1)i=[0,1,2,3,4];else if(typeof n.filterType=="number")i=[n.filterType];else throw new Error("unrecognised filter types");n.bitDepth===16&&(a*=2);let s=t*a,c=0,l=0,u=Buffer.alloc((s+1)*r),f=i[0];for(let h=0;h<r;h++){if(i.length>1){let p=1/0;for(let g=0;g<i.length;g++){let b=Ur[i[g]](e,l,s,a);b<p&&(f=i[g],p=b)}}u[c]=f,c++,Lr[f](e,l,s,u,c,a),c+=s,l+=s}return u}});var Ce=R((Un,ut)=>{"use strict";var D=ee(),Mr=xe(),Dr=st(),Nr=lt(),Fr=require("zlib"),Y=ut.exports=function(e){if(this._options=e,e.deflateChunkSize=e.deflateChunkSize||32*1024,e.deflateLevel=e.deflateLevel!=null?e.deflateLevel:9,e.deflateStrategy=e.deflateStrategy!=null?e.deflateStrategy:3,e.inputHasAlpha=e.inputHasAlpha!=null?e.inputHasAlpha:!0,e.deflateFactory=e.deflateFactory||Fr.createDeflate,e.bitDepth=e.bitDepth||8,e.colorType=typeof e.colorType=="number"?e.colorType:D.COLORTYPE_COLOR_ALPHA,e.inputColorType=typeof e.inputColorType=="number"?e.inputColorType:D.COLORTYPE_COLOR_ALPHA,[D.COLORTYPE_GRAYSCALE,D.COLORTYPE_COLOR,D.COLORTYPE_COLOR_ALPHA,D.COLORTYPE_ALPHA].indexOf(e.colorType)===-1)throw new Error("option color type:"+e.colorType+" is not supported at present");if([D.COLORTYPE_GRAYSCALE,D.COLORTYPE_COLOR,D.COLORTYPE_COLOR_ALPHA,D.COLORTYPE_ALPHA].indexOf(e.inputColorType)===-1)throw new Error("option input color type:"+e.inputColorType+" is not supported at present");if(e.bitDepth!==8&&e.bitDepth!==16)throw new Error("option bit depth:"+e.bitDepth+" is not supported at present")};Y.prototype.getDeflateOptions=function(){return{chunkSize:this._options.deflateChunkSize,level:this._options.deflateLevel,strategy:this._options.deflateStrategy}};Y.prototype.createDeflate=function(){return this._options.deflateFactory(this.getDeflateOptions())};Y.prototype.filterData=function(e,t,r){let n=Dr(e,t,r,this._options),a=D.COLORTYPE_TO_BPP_MAP[this._options.colorType];return Nr(n,t,r,this._options,a)};Y.prototype._packChunk=function(e,t){let r=t?t.length:0,n=Buffer.alloc(r+12);return n.writeUInt32BE(r,0),n.writeUInt32BE(e,4),t&&t.copy(n,8),n.writeInt32BE(Mr.crc32(n.slice(4,n.length-4)),n.length-4),n};Y.prototype.packGAMA=function(e){let t=Buffer.alloc(4);return t.writeUInt32BE(Math.floor(e*D.GAMMA_DIVISION),0),this._packChunk(D.TYPE_gAMA,t)};Y.prototype.packIHDR=function(e,t){let r=Buffer.alloc(13);return r.writeUInt32BE(e,0),r.writeUInt32BE(t,4),r[8]=this._options.bitDepth,r[9]=this._options.colorType,r[10]=0,r[11]=0,r[12]=0,this._packChunk(D.TYPE_IHDR,r)};Y.prototype.packIDAT=function(e){return this._packChunk(D.TYPE_IDAT,e)};Y.prototype.packIEND=function(){return this._packChunk(D.TYPE_IEND,null)}});var pt=R((Mn,dt)=>{"use strict";var Br=require("util"),ft=require("stream"),Gr=ee(),Vr=Ce(),ht=dt.exports=function(e){ft.call(this);let t=e||{};this._packer=new Vr(t),this._deflate=this._packer.createDeflate(),this.readable=!0};Br.inherits(ht,ft);ht.prototype.pack=function(e,t,r,n){this.emit("data",Buffer.from(Gr.PNG_SIGNATURE)),this.emit("data",this._packer.packIHDR(t,r)),n&&this.emit("data",this._packer.packGAMA(n));let a=this._packer.filterData(e,t,r);this._deflate.on("error",this.emit.bind(this,"error")),this._deflate.on("data",function(i){this.emit("data",this._packer.packIDAT(i))}.bind(this)),this._deflate.on("end",function(){this.emit("data",this._packer.packIEND()),this.emit("end")}.bind(this)),this._deflate.end(a)}});var $t=R((ie,wt)=>{"use strict";var mt=require("assert").ok,te=require("zlib"),jr=require("util"),gt=require("buffer").kMaxLength;function J(e){if(!(this instanceof J))return new J(e);e&&e.chunkSize<te.Z_MIN_CHUNK&&(e.chunkSize=te.Z_MIN_CHUNK),te.Inflate.call(this,e),this._offset=this._offset===void 0?this._outOffset:this._offset,this._buffer=this._buffer||this._outBuffer,e&&e.maxLength!=null&&(this._maxLength=e.maxLength)}function zr(e){return new J(e)}function bt(e,t){t&&process.nextTick(t),e._handle&&(e._handle.close(),e._handle=null)}J.prototype._processChunk=function(e,t,r){if(typeof r=="function")return te.Inflate._processChunk.call(this,e,t,r);let n=this,a=e&&e.length,i=this._chunkSize-this._offset,s=this._maxLength,c=0,l=[],u=0,f;this.on("error",function(b){f=b});function h(b,m){if(n._hadError)return;let y=i-m;if(mt(y>=0,"have should not go down"),y>0){let k=n._buffer.slice(n._offset,n._offset+y);if(n._offset+=y,k.length>s&&(k=k.slice(0,s)),l.push(k),u+=k.length,s-=k.length,s===0)return!1}return(m===0||n._offset>=n._chunkSize)&&(i=n._chunkSize,n._offset=0,n._buffer=Buffer.allocUnsafe(n._chunkSize)),m===0?(c+=a-b,a=b,!0):!1}mt(this._handle,"zlib binding closed");let p;do p=this._handle.writeSync(t,e,c,a,this._buffer,this._offset,i),p=p||this._writeState;while(!this._hadError&&h(p[0],p[1]));if(this._hadError)throw f;if(u>=gt)throw bt(this),new RangeError("Cannot create final Buffer. It would be larger than 0x"+gt.toString(16)+" bytes");let g=Buffer.concat(l,u);return bt(this),g};jr.inherits(J,te.Inflate);function Wr(e,t){if(typeof t=="string"&&(t=Buffer.from(t)),!(t instanceof Buffer))throw new TypeError("Not a string or buffer");let r=e._finishFlushFlag;return r==null&&(r=te.Z_FINISH),e._processChunk(t,r)}function yt(e,t){return Wr(new J(t),e)}wt.exports=ie=yt;ie.Inflate=J;ie.createInflate=zr;ie.inflateSync=yt});var Te=R((Dn,_t)=>{"use strict";var kt=_t.exports=function(e){this._buffer=e,this._reads=[]};kt.prototype.read=function(e,t){this._reads.push({length:Math.abs(e),allowLess:e<0,func:t})};kt.prototype.process=function(){for(;this._reads.length>0&&this._buffer.length;){let e=this._reads[0];if(this._buffer.length&&(this._buffer.length>=e.length||e.allowLess)){this._reads.shift();let t=this._buffer;this._buffer=t.slice(e.length),e.func.call(this,t.slice(0,e.length))}else break}if(this._reads.length>0)throw new Error("There are some read requests waitng on finished stream");if(this._buffer.length>0)throw new Error("unrecognised content at end of stream")}});var At=R(xt=>{"use strict";var Hr=Te(),Yr=$e();xt.process=function(e,t){let r=[],n=new Hr(e);return new Yr(t,{read:n.read.bind(n),write:function(i){r.push(i)},complete:function(){}}).start(),n.process(),Buffer.concat(r)}});var Ct=R((Fn,Et)=>{"use strict";var vt=!0,St=require("zlib"),qr=$t();St.deflateSync||(vt=!1);var Kr=Te(),Jr=At(),Zr=Ae(),Qr=ve(),Xr=Se();Et.exports=function(e,t){if(!vt)throw new Error("To use the sync capability of this library in old node versions, please pin pngjs to v2.3.0");let r;function n(_){r=_}let a;function i(_){a=_}function s(_){a.transColor=_}function c(_){a.palette=_}function l(){a.alpha=!0}let u;function f(_){u=_}let h=[];function p(_){h.push(_)}let g=new Kr(e);if(new Zr(t,{read:g.read.bind(g),error:n,metadata:i,gamma:f,palette:c,transColor:s,inflateData:p,simpleTransparency:l}).start(),g.process(),r)throw r;let m=Buffer.concat(h);h.length=0;let y;if(a.interlace)y=St.inflateSync(m);else{let v=((a.width*a.bpp*a.depth+7>>3)+1)*a.height;y=qr(m,{chunkSize:v,maxLength:v})}if(m=null,!y||!y.length)throw new Error("bad png - invalid inflate data response");let k=Jr.process(y,a);m=null;let O=Qr.dataToBitMap(k,a);k=null;let I=Xr(O,a,t.skipRescale);return a.data=I,a.gamma=u||0,a}});var It=R((Bn,Rt)=>{"use strict";var Tt=!0,Pt=require("zlib");Pt.deflateSync||(Tt=!1);var en=ee(),tn=Ce();Rt.exports=function(e,t){if(!Tt)throw new Error("To use the sync capability of this library in old node versions, please pin pngjs to v2.3.0");let r=t||{},n=new tn(r),a=[];a.push(Buffer.from(en.PNG_SIGNATURE)),a.push(n.packIHDR(e.width,e.height)),e.gamma&&a.push(n.packGAMA(e.gamma));let i=n.filterData(e.data,e.width,e.height),s=Pt.deflateSync(i,n.getDeflateOptions());if(i=null,!s||!s.length)throw new Error("bad png - invalid compressed data response");return a.push(n.packIDAT(s)),a.push(n.packIEND()),Buffer.concat(a)}});var Ot=R(Pe=>{"use strict";var rn=Ct(),nn=It();Pe.read=function(e,t){return rn(e,t||{})};Pe.write=function(e,t){return nn(e,t)}});var Mt=R(Ut=>{"use strict";var an=require("util"),Lt=require("stream"),sn=it(),on=pt(),cn=Ot(),F=Ut.PNG=function(e){Lt.call(this),e=e||{},this.width=e.width|0,this.height=e.height|0,this.data=this.width>0&&this.height>0?Buffer.alloc(4*this.width*this.height):null,e.fill&&this.data&&this.data.fill(0),this.gamma=0,this.readable=this.writable=!0,this._parser=new sn(e),this._parser.on("error",this.emit.bind(this,"error")),this._parser.on("close",this._handleClose.bind(this)),this._parser.on("metadata",this._metadata.bind(this)),this._parser.on("gamma",this._gamma.bind(this)),this._parser.on("parsed",function(t){this.data=t,this.emit("parsed",t)}.bind(this)),this._packer=new on(e),this._packer.on("data",this.emit.bind(this,"data")),this._packer.on("end",this.emit.bind(this,"end")),this._parser.on("close",this._handleClose.bind(this)),this._packer.on("error",this.emit.bind(this,"error"))};an.inherits(F,Lt);F.sync=cn;F.prototype.pack=function(){return!this.data||!this.data.length?(this.emit("error","No data provided"),this):(process.nextTick(function(){this._packer.pack(this.data,this.width,this.height,this.gamma)}.bind(this)),this)};F.prototype.parse=function(e,t){if(t){let r,n;r=function(a){this.removeListener("error",n),this.data=a,t(null,this)}.bind(this),n=function(a){this.removeListener("parsed",r),t(a,null)}.bind(this),this.once("parsed",r),this.once("error",n)}return this.end(e),this};F.prototype.write=function(e){return this._parser.write(e),!0};F.prototype.end=function(e){this._parser.end(e)};F.prototype._metadata=function(e){this.width=e.width,this.height=e.height,this.emit("metadata",e)};F.prototype._gamma=function(e){this.gamma=e};F.prototype._handleClose=function(){!this._parser.writable&&!this._packer.readable&&this.emit("close")};F.bitblt=function(e,t,r,n,a,i,s,c){if(r|=0,n|=0,a|=0,i|=0,s|=0,c|=0,r>e.width||n>e.height||r+a>e.width||n+i>e.height)throw new Error("bitblt reading outside image");if(s>t.width||c>t.height||s+a>t.width||c+i>t.height)throw new Error("bitblt writing outside image");for(let l=0;l<i;l++)e.data.copy(t.data,(c+l)*t.width+s<<2,(n+l)*e.width+r<<2,(n+l)*e.width+r+a<<2)};F.prototype.bitblt=function(e,t,r,n,a,i,s){return F.bitblt(this,e,t,r,n,a,i,s),this};F.adjustGamma=function(e){if(e.gamma){for(let t=0;t<e.height;t++)for(let r=0;r<e.width;r++){let n=e.width*t+r<<2;for(let a=0;a<3;a++){let i=e.data[n+a]/255;i=Math.pow(i,1/2.2/e.gamma),e.data[n+a]=Math.round(i*255)}}e.gamma=0}};F.prototype.adjustGamma=function(){F.adjustGamma(this)}});var bn={};Zt(bn,{default:()=>jt});module.exports=Qt(bn);var d=require("@raycast/api"),De=require("react");var E=oe(require("react")),x=require("@raycast/api");var Fe=Object.prototype.hasOwnProperty;function ce(e,t){var r,n;if(e===t)return!0;if(e&&t&&(r=e.constructor)===t.constructor){if(r===Date)return e.getTime()===t.getTime();if(r===RegExp)return e.toString()===t.toString();if(r===Array){if((n=e.length)===t.length)for(;n--&&ce(e[n],t[n]););return n===-1}if(!r||typeof e=="object"){n=0;for(r in e)if(Fe.call(e,r)&&++n&&!Fe.call(t,r)||!(r in t)||!ce(e[r],t[r]))return!1;return Object.keys(t).length===n}}return e!==e&&t!==t}var K=oe(require("node:fs")),le=oe(require("node:path"));var Ge=require("react/jsx-runtime");function Xt(e){let t=(0,E.useRef)(e),r=(0,E.useRef)(0);return ce(e,t.current)||(t.current=e,r.current+=1),(0,E.useMemo)(()=>t.current,[r.current])}function W(e){let t=(0,E.useRef)(e);return t.current=e,t}function me(e,t){let r=e instanceof Error?e.message:String(e);return(0,x.showToast)({style:x.Toast.Style.Failure,title:t?.title??"Something went wrong",message:t?.message??r,primaryAction:t?.primaryAction??Be(e),secondaryAction:t?.primaryAction?Be(e):void 0})}var Be=e=>{let t=!0,r="[Extension Name]...",n="";try{let s=JSON.parse((0,K.readFileSync)((0,le.join)(x.environment.assetsPath,"..","package.json"),"utf8"));r=`[${s.title}]...`,n=`https://raycast.com/${s.owner||s.author}/${s.name}`,(!s.owner||s.access==="public")&&(t=!1)}catch{}let a=x.environment.isDevelopment||t,i=e instanceof Error?e?.stack||e?.message||"":String(e);return{title:a?"Copy Logs":"Report Error",onAction(s){s.hide(),a?x.Clipboard.copy(i):(0,x.open)(`https://github.com/raycast/extensions/issues/new?&labels=extension%2Cbug&template=extension_bug_report.yml&title=${encodeURIComponent(r)}&extension-url=${encodeURI(n)}&description=${encodeURIComponent(`#### Error:
\`\`\`
${i}
\`\`\`
`)}`)}}};function er(e,t,r){let n=(0,E.useRef)(0),[a,i]=(0,E.useState)({isLoading:!0}),s=W(e),c=W(r?.abortable),l=W(t||[]),u=W(r?.onError),f=W(r?.onData),h=W(r?.onWillExecute),p=W(r?.failureToastOptions),g=W(a.data),b=(0,E.useRef)(null),m=(0,E.useRef)({page:0}),y=(0,E.useRef)(!1),k=(0,E.useRef)(!0),O=(0,E.useRef)(50),I=(0,E.useCallback)(()=>(c.current&&(c.current.current?.abort(),c.current.current=new AbortController),++n.current),[c]),_=(0,E.useCallback)((...P)=>{let N=I();h.current?.(P),i(A=>({...A,isLoading:!0}));let Z=tr(s.current)(...P);function Q(A){return A.name=="AbortError"||N===n.current&&(u.current?u.current(A):x.environment.launchType!==x.LaunchType.Background&&me(A,{title:"Failed to fetch latest data",primaryAction:{title:"Retry",onAction(q){q.hide(),b.current?.(...l.current||[])}},...p.current}),i({error:A,isLoading:!1})),A}return typeof Z=="function"?(y.current=!0,Z(m.current).then(({data:A,hasMore:q,cursor:zt})=>(N===n.current&&(m.current&&(m.current.cursor=zt,m.current.lastItem=A?.[A.length-1]),f.current&&f.current(A,m.current),q&&(O.current=A.length),k.current=q,i(Wt=>m.current.page===0?{data:A,isLoading:!1}:{data:(Wt.data||[])?.concat(A),isLoading:!1})),A),A=>(k.current=!1,Q(A)))):(y.current=!1,Z.then(A=>(N===n.current&&(f.current&&f.current(A),i({data:A,isLoading:!1})),A),Q))},[f,u,l,s,i,b,h,m,p,I]);b.current=_;let v=(0,E.useCallback)(()=>{m.current={page:0};let P=l.current||[];return _(...P)},[_,l]),w=(0,E.useCallback)(async(P,N)=>{let Z;try{if(N?.optimisticUpdate){I(),typeof N?.rollbackOnError!="function"&&N?.rollbackOnError!==!1&&(Z=structuredClone(g.current?.value));let Q=N.optimisticUpdate;i(A=>({...A,data:Q(A.data)}))}return await P}catch(Q){if(typeof N?.rollbackOnError=="function"){let A=N.rollbackOnError;i(q=>({...q,data:A(q.data)}))}else N?.optimisticUpdate&&N?.rollbackOnError!==!1&&i(A=>({...A,data:Z}));throw Q}finally{N?.shouldRevalidateAfter!==!1&&(x.environment.launchType===x.LaunchType.Background||x.environment.commandMode==="menu-bar"?await v():v())}},[v,g,i,I]),$=(0,E.useCallback)(()=>{m.current.page+=1;let P=l.current||[];_(...P)},[m,l,_]);(0,E.useEffect)(()=>{m.current={page:0},r?.execute!==!1?_(...t||[]):I()},[Xt([t,r?.execute,_]),c,m]),(0,E.useEffect)(()=>()=>{I()},[I]);let S=r?.execute!==!1?a.isLoading:!1,C={...a,isLoading:S},M=y.current?{pageSize:O.current,hasMore:k.current,onLoadMore:$}:void 0;return{...C,revalidate:v,mutate:w,pagination:M}}function tr(e){return e===Promise.all||e===Promise.race||e===Promise.resolve||e===Promise.reject?e.bind(Promise):e}function rr(e,t){let r=this[e];return r instanceof Date?`__raycast_cached_date__${r.toString()}`:Buffer.isBuffer(r)?`__raycast_cached_buffer__${r.toString("base64")}`:t}function nr(e,t){return typeof t=="string"&&t.startsWith("__raycast_cached_date__")?new Date(t.replace("__raycast_cached_date__","")):typeof t=="string"&&t.startsWith("__raycast_cached_buffer__")?Buffer.from(t.replace("__raycast_cached_buffer__",""),"base64"):t}function ue(e,t){let{data:r,isLoading:n,mutate:a}=er(async c=>{let l=await x.LocalStorage.getItem(c);return typeof l<"u"?JSON.parse(l,nr):t},[e]);async function i(c){try{await a(x.LocalStorage.setItem(e,JSON.stringify(c,rr)),{optimisticUpdate(l){return l}})}catch(l){await me(l,{title:"Failed to set value in local storage"})}}async function s(){try{await a(x.LocalStorage.removeItem(e),{optimisticUpdate(){}})}catch(c){await me(c,{title:"Failed to remove value from local storage"})}}return{value:r,setValue:i,removeValue:s,isLoading:n}}var o=require("@raycast/api"),z=require("fs/promises"),Ue=require("path");var T=require("react");var j=oe(Mt()),Ie=e=>{if(!e||typeof e!="string")return!1;let t=e.trim();return/^#([0-9a-fA-F]{6}|[0-9a-fA-F]{3})$/.test(t)},ln=e=>{let t=[];return Array.isArray(e)?(e.length<2&&t.push({field:"stops",message:"At least 2 color stops are required",severity:"error"}),e.length>10&&t.push({field:"stops",message:"Maximum 10 color stops allowed",severity:"warning"}),e.forEach((r,n)=>{Ie(r)||t.push({field:`stop-${n}`,message:`Invalid hex color: ${r}`,severity:"error"})}),t):(t.push({field:"stops",message:"Stops must be an array",severity:"error"}),t)},un=e=>{let t=[];return e==null?t:typeof e!="number"||Number.isNaN(e)?(t.push({field:"angle",message:"Angle must be a valid number",severity:"error"}),t):(e<0&&t.push({field:"angle",message:"Angle cannot be negative",severity:"error"}),e>360&&t.push({field:"angle",message:"Angle cannot exceed 360 degrees",severity:"error"}),t)},re=e=>{let t=ln(e.stops),r=un(e.angle),n=[...t,...r].filter(s=>s.severity==="error"),a=[...t,...r].filter(s=>s.severity==="warning"),i={isValid:n.length===0,errors:n,warnings:a};return{stops:t,angle:r,overall:i}},ne=e=>typeof e!="number"||Number.isNaN(e)?90:e<0?0:e>360?360:e,fe=e=>Ie(e)?e.trim().toUpperCase():"#000000",ae=({type:e,angle:t,stops:r})=>{if(!re({type:e,angle:t,stops:r}).overall.isValid)return"background: #000000; /* Invalid gradient */";let a=ne(t),i=r.map(fe);return`background: ${e==="linear"?`linear-gradient(${a}deg, ${i.join(", ")})`:e==="radial"?`radial-gradient(${i.join(", ")})`:`conic-gradient(${i.join(", ")})`};`},he=({type:e,angle:t,stops:r})=>{if(!re({type:e,angle:t,stops:r}).overall.isValid)return"Color.black /* Invalid gradient */";let a=r.map(fe).map(i=>`Color(hex: "${i}")`).join(", ");if(e==="linear"){let i=ne(t),s={0:{start:".leading",end:".trailing"},45:{start:".bottomLeading",end:".topTrailing"},90:{start:".bottom",end:".top"},135:{start:".bottomTrailing",end:".topLeading"},180:{start:".trailing",end:".leading"},225:{start:".topTrailing",end:".bottomLeading"},270:{start:".top",end:".bottom"},315:{start:".topLeading",end:".bottomTrailing"}},c=Object.keys(s).map(f=>Number(f)).sort((f,h)=>Math.abs(f-i)-Math.abs(h-i)),{start:l,end:u}=s[c[0]??90];return`LinearGradient(gradient: Gradient(colors: [${a}]), startPoint: ${l}, endPoint: ${u})`}return e==="radial"?`RadialGradient(gradient: Gradient(colors: [${a}]), center: .center, startRadius: 0, endRadius: 200)`:`AngularGradient(gradient: Gradient(colors: [${a}]), center: .center)`},de=({type:e,angle:t,stops:r})=>{if(!re({type:e,angle:t,stops:r}).overall.isValid)return"bg-black /* Invalid gradient */";let a=ne(t),i=r.map(fe);return e==="linear"?`bg-[linear-gradient(${a}deg,_${i.join(",_")})]`:e==="radial"?`bg-[radial-gradient(${i.join(",_")})]`:`bg-[conic-gradient(${i.join(",_")})]`};var Oe=({type:e,angle:t,stops:r},n=800,a=400,i="xMidYMid slice")=>{if(!re({type:e,angle:t,stops:r}).overall.isValid)return`<svg width="${n}" height="${a}" viewBox="0 0 ${n} ${a}"><rect width="100%" height="100%" fill="#000" /></svg>`;let c=ne(t),l=r.map(fe),u=()=>{let g=Math.max(2,l.length);return l.map((b,m)=>`<stop offset='${(m/(g-1)*100).toFixed(2)}%' stop-color='${b}' />`).join("")},f=`<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='${n}' height='${a}' viewBox='0 0 ${n} ${a}' preserveAspectRatio='${i}'>`,h="",p="";if(e==="linear")h=`<defs>
      <linearGradient id='g' x1='0%' y1='0%' x2='100%' y2='0%' gradientUnits='objectBoundingBox' gradientTransform='rotate(${c-90}, 0.5, 0.5)'>
        ${u()}
      </linearGradient>
    </defs>`,p="<rect width='100%' height='100%' fill='url(#g)' />";else if(e==="radial")h=`<defs>
      <radialGradient id='g' cx='50%' cy='50%' r='75%'>
        ${u()}
      </radialGradient>
    </defs>`,p="<rect width='100%' height='100%' fill='url(#g)' />";else{let g=`<defs>
      <radialGradient id='fallback' cx='50%' cy='50%' r='75%'>
        ${u()}
      </radialGradient>
    </defs>`,b=`<foreignObject width='100%' height='100%'>
      <div xmlns='http://www.w3.org/1999/xhtml' style='width:100%;height:100%;background: conic-gradient(${l.join(", ")});'></div>
    </foreignObject>`;h=g,p=`<rect width='100%' height='100%' fill='url(#fallback)' />${b}`}return`${f}${h}${p}</svg>`},Nt=()=>`#${Math.floor(Math.random()*16777215).toString(16).padStart(6,"0").toUpperCase()}`;var Dt=e=>{if(!Ie(e))return{r:0,g:0,b:0};let t=e.trim().replace("#",""),r=t.length===3?t.split("").map(a=>a+a).join(""):t,n=parseInt(r,16);return Number.isNaN(n)?{r:0,g:0,b:0}:{r:n>>16&255,g:n>>8&255,b:n&255}},Re=(e,t,r)=>e+(t-e)*r,Ft=e=>e<0?0:e>1?1:e,Bt=(e,t)=>{if(!Array.isArray(e)||e.length<2)return{r:0,g:0,b:0};let r=Math.max(2,e.length),n=Array.from({length:r},(f,h)=>h/(r-1)),a=Math.min(r-2,Math.max(0,Math.floor(t*(r-1)))),i=n[a],s=n[a+1],c=(t-i)/(s-i||1),l=Dt(e[a]),u=Dt(e[a+1]);return{r:Math.round(Re(l.r,u.r,c)),g:Math.round(Re(l.g,u.g,c)),b:Math.round(Re(l.b,u.b,c))}},pe=({type:e,angle:t,stops:r},n=800,a=400)=>{if(!re({type:e,angle:t,stops:r}).overall.isValid)try{let s=new j.PNG({width:n,height:a}),c=0;for(let f=0;f<a;f++)for(let h=0;h<n;h++)s.data[c++]=0,s.data[c++]=0,s.data[c++]=0,s.data[c++]=255;return`data:image/png;base64,${j.PNG.sync.write(s).toString("base64")}`}catch{return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg=="}try{let s=new j.PNG({width:n,height:a}),c=(n-1)/2,l=(a-1)/2,f=ne(t)*Math.PI/180,h=Math.sin(f),p=-Math.cos(f),g=(v,w)=>(v-c)*h+(w-l)*p,b=[g(0,0),g(n-1,0),g(0,a-1),g(n-1,a-1)],m=Math.min(...b),y=Math.max(...b),k=Math.hypot(Math.max(c,n-1-c),Math.max(l,a-1-l)),O=0;for(let v=0;v<a;v++)for(let w=0;w<n;w++){let $=0;if(e==="linear")$=(g(w,v)-m)/(y-m||1);else if(e==="radial"){let C=w-c,M=v-l;$=Math.hypot(C,M)/(k||1)}else{let C=w-c,M=v-l,P=Math.atan2(M,C);P=P-Math.PI/2,P<0&&(P+=2*Math.PI),$=P/(2*Math.PI)}$=Ft($);let S=Bt(r,$);s.data[O++]=S.r,s.data[O++]=S.g,s.data[O++]=S.b,s.data[O++]=255}return`data:image/png;base64,${j.PNG.sync.write(s).toString("base64")}`}catch{return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg=="}};var Gt=({type:e,angle:t,stops:r},n,a,i=2,s=!1)=>{if(!re({type:e,angle:t,stops:r}).overall.isValid)try{let l=new j.PNG({width:n*i,height:a*i}),u=0;for(let f=0;f<a*i;f++)for(let h=0;h<n*i;h++)l.data[u++]=0,l.data[u++]=0,l.data[u++]=0,l.data[u++]=s?0:255;return j.PNG.sync.write(l)}catch{return Buffer.from("iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg==","base64")}try{let l=new j.PNG({width:n*i,height:a*i}),u=(n*i-1)/2,f=(a*i-1)/2,p=ne(t)*Math.PI/180,g=Math.sin(p),b=-Math.cos(p),m=(v,w)=>(v-u)*g+(w-f)*b,y=[m(0,0),m(n*i-1,0),m(0,a*i-1),m(n*i-1,a*i-1)],k=Math.min(...y),O=Math.max(...y),I=Math.hypot(Math.max(u,n*i-1-u),Math.max(f,a*i-1-f)),_=0;for(let v=0;v<a*i;v++)for(let w=0;w<n*i;w++){let $=0;if(e==="linear")$=(m(w,v)-k)/(O-k||1);else if(e==="radial"){let C=w-u,M=v-f;$=Math.hypot(C,M)/(I||1)}else{let C=w-u,M=v-f,P=Math.atan2(M,C);P=P-Math.PI/2,P<0&&(P+=2*Math.PI),$=P/(2*Math.PI)}$=Ft($);let S=Bt(r,$);l.data[_++]=S.r,l.data[_++]=S.g,l.data[_++]=S.b,s&&($<=0||$>=1)?l.data[_++]=0:l.data[_++]=255}return j.PNG.sync.write(l)}catch{return Buffer.from("iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg==","base64")}},Le=[{name:"HD (1600\xD71000)",width:1600,height:1e3},{name:"Full HD (1920\xD71080)",width:1920,height:1080},{name:"2K (2560\xD71440)",width:2560,height:1440},{name:"4K (3840\xD72160)",width:3840,height:2160}];var Vt=e=>({type:e?.type??"linear",angle:e?.angle??90,stops:e?.stops??["#ff0000","#00ff00"],label:e?.label});function Me(e){let{additionalActions:t,isRandomGradient:r,onGenerateRandom:n,...a}=e,i=Vt(a),[s,c]=(0,T.useState)(i),l=(0,o.getPreferenceValues)(),u=l.tailwindOutputMode==="utility";(0,T.useEffect)(()=>{if(a.type||a.angle!==void 0||a.stops){let w=Vt(a);c(w)}},[a.type,a.angle,a.stops]);let{value:f=[],setValue:h}=ue("saved-gradients",[]),p=s.stops.length>=2,g=(0,T.useMemo)(()=>pe(s,800,480),[s]),b=(0,T.useMemo)(()=>ae(s),[s]),m=(0,T.useMemo)(()=>he(s),[s]),y=(0,T.useMemo)(()=>Oe(s,800,480),[s]),k=(0,T.useMemo)(()=>u?de(s):ae(s),[s,u]),O=`# Gradient Preview

![Gradient](${g})

## CSS

\`\`\`css
${b}
\`\`\`

## SwiftUI

\`\`\`swift
${m}
\`\`\`

## Tailwind

\`\`\`${u?"txt":"css"}
${k}
\`\`\``,I=async()=>{let w=[...f,s];await h(w),await(0,o.showToast)({style:o.Toast.Style.Success,title:"Saved Gradient"})},_=()=>{c(w=>({...w,stops:[...w.stops,Nt()]}))},v=async w=>{let $=w.trim();if(!$){await(0,o.showToast)({style:o.Toast.Style.Failure,title:"Label cannot be empty"});return}let S=f.findIndex(C=>C.type===s.type&&C.angle===s.angle&&JSON.stringify(C.stops)===JSON.stringify(s.stops));if(S!==-1){if(f.findIndex((P,N)=>N!==S&&P.label===$)!==-1&&!await(0,o.confirmAlert)({title:"Name Already Exists",message:`A gradient with the label "${$}" already exists. Do you want to overwrite it?`,primaryAction:{title:"Overwrite",style:o.Alert.ActionStyle.Destructive},dismissAction:{title:"Cancel"}}))return;let M=[...f];M[S]={...M[S],label:$},await h(M),await(0,o.showToast)({style:o.Toast.Style.Success,title:"Gradient renamed"})}};return _jsx(o.Detail,{markdown:O,metadata:_jsx(o.Detail.Metadata,null,_jsx(o.Detail.Metadata.TagList,{title:"Type / Angle"},_jsx(o.Detail.Metadata.TagList.Item,{text:s.type}),s.type==="linear"?_jsx(o.Detail.Metadata.TagList.Item,{text:`${s.angle}\xB0`}):null),_jsx(o.Detail.Metadata.TagList,{title:"Stops"},s.stops.map((w,$)=>_jsx(o.Detail.Metadata.TagList.Item,{key:`${$}-${w}`,text:w,color:w}))),p?null:_jsx(o.Detail.Metadata.Label,{title:"Note",text:"At least two color stops are required."}),_jsx(o.Detail.Metadata.Separator,null),_jsx(o.Detail.Metadata.Label,{title:"Size",text:"800 \xD7 480"}),_jsx(o.Detail.Metadata.Separator,null),_jsx(o.Detail.Metadata.Label,{title:"Tailwind Output",text:u?"Utility Classes":"Raw CSS"})),actions:_jsx(o.ActionPanel,null,_jsx(_jsxFragment,null,t,r&&n&&_jsx(o.ActionPanel.Section,{title:"Generate New Gradient"},_jsx(o.Action,{icon:o.Icon.ArrowClockwise,title:"Random (Any)",onAction:()=>n(),shortcut:{modifiers:["cmd"],key:"r"}}),_jsx(o.Action,{icon:o.Icon.ArrowClockwise,title:"Random (2 Stops)",onAction:()=>n(2),shortcut:{modifiers:["cmd"],key:"2"}}),_jsx(o.Action,{icon:o.Icon.ArrowClockwise,title:"Random (3 Stops)",onAction:()=>n(3),shortcut:{modifiers:["cmd"],key:"3"}})),_jsx(o.Action,{icon:o.Icon.Plus,title:"Add Color Stop",onAction:_,shortcut:{modifiers:["cmd","shift"],key:"n"}}),_jsx(o.Action,{icon:o.Icon.Folder,title:"Save Gradient",onAction:I}),_jsx(o.Action.Push,{icon:o.Icon.TextCursor,title:"Save With Label",shortcut:{modifiers:["cmd"],key:"l"},target:_jsx(fn,{initial:s,onSave:async w=>{let $=[...f,w];await h($),await(0,o.showToast)({style:o.Toast.Style.Success,title:"Saved with Label"})}})}),f.some(w=>w.type===s.type&&w.angle===s.angle&&JSON.stringify(w.stops)===JSON.stringify(s.stops))&&_jsx(o.Action.Push,{icon:o.Icon.Text,title:"Rename Gradient",shortcut:{modifiers:["cmd","shift"],key:"r"},target:_jsx(hn,{initialLabel:s.label,onSubmit:v})}),p&&_jsx(_jsxFragment,null,_jsx(o.ActionPanel.Section,{title:"Copy"},_jsx(o.Action.CopyToClipboard,{title:"Copy CSS",content:b,shortcut:{modifiers:["cmd","shift"],key:"c"}}),_jsx(o.Action.CopyToClipboard,{title:"Copy SwiftUI",content:m,shortcut:{modifiers:["cmd","shift"],key:"s"}}),_jsx(o.Action.CopyToClipboard,{title:"Copy Tailwind",content:k,shortcut:{modifiers:["cmd","shift"],key:"t"}}),_jsx(o.Action.CopyToClipboard,{title:"Copy SVG",content:y,shortcut:{modifiers:["cmd","shift"],key:"v"}})),_jsx(o.ActionPanel.Section,{title:"Export Gradient"},_jsx(o.Action.Push,{icon:o.Icon.Download,title:"Save as SVG...",target:_jsx(dn,{gradient:s,onExport:async(w,$)=>{try{if(!l.svgExportDirectory?.trim()){await(0,o.showToast)({style:o.Toast.Style.Failure,title:"Export Directory Not Set",message:"Please set the SVG Export Directory preference in Raycast settings first."});return}let S=l.svgExportDirectory,C=S;try{await(0,z.access)(C)}catch{await(0,z.mkdir)(C,{recursive:!0})}let M=(0,Ue.join)(C,$);await(0,z.writeFile)(M,w,"utf8"),await(0,o.showHUD)(`SVG saved to ${S}/${$}`)}catch(S){await(0,o.showToast)({style:o.Toast.Style.Failure,title:"Failed to save SVG",message:S instanceof Error?S.message:"Unknown error"})}}})}),_jsx(o.Action.Push,{icon:o.Icon.Download,title:"Save as PNG...",target:_jsx(pn,{gradient:s,onExport:async(w,$)=>{try{if(!l.pngExportDirectory?.trim()){await(0,o.showToast)({style:o.Toast.Style.Failure,title:"Export Directory Not Set",message:"Please set the PNG Export Directory preference in Raycast settings first."});return}let S=l.pngExportDirectory,C=S;try{await(0,z.access)(C)}catch{await(0,z.mkdir)(C,{recursive:!0})}let M=(0,Ue.join)(C,$);await(0,z.writeFile)(M,w),await(0,o.showHUD)(`PNG saved to ${S}/${$}`)}catch(S){await(0,o.showToast)({style:o.Toast.Style.Failure,title:"Failed to save PNG",message:S instanceof Error?S.message:"Unknown error"})}}})})),_jsx(o.ActionPanel.Section,{title:"Paste into Active App"},_jsx(o.Action.Paste,{title:"Paste CSS",content:b,shortcut:{modifiers:["cmd","opt"],key:"c"}}),_jsx(o.Action.Paste,{title:"Paste SwiftUI",content:m,shortcut:{modifiers:["cmd","opt"],key:"s"}}),_jsx(o.Action.Paste,{title:"Paste Tailwind",content:k,shortcut:{modifiers:["cmd","opt"],key:"t"}}),_jsx(o.Action.Paste,{title:"Paste SVG",content:y,shortcut:{modifiers:["cmd","opt"],key:"v"}})))))})}function fn({initial:e,onSave:t}){let{pop:r}=(0,o.useNavigation)(),[n,a]=(0,T.useState)("");return _jsx(o.Form,{actions:_jsx(o.ActionPanel,null,_jsx(o.Action,{title:"Save",icon:o.Icon.Folder,onAction:async()=>{await t({...e,label:n.trim()||void 0}),r()}}),_jsx(o.Action,{title:"Cancel",icon:o.Icon.Xmark,onAction:r}))},_jsx(o.Form.Description,{text:"Set a label for this gradient (optional)."}),_jsx(o.Form.TextField,{id:"label",title:"Label",value:n,onChange:a,placeholder:"e.g. Sunset, Brand Accent"}))}function hn({initialLabel:e,onSubmit:t}){let{pop:r}=(0,o.useNavigation)(),[n,a]=(0,T.useState)(e??"");return _jsx(o.Form,{actions:_jsx(o.ActionPanel,null,_jsx(o.Action,{title:"Rename",icon:o.Icon.Text,onAction:async()=>{await t(n),r()}}),_jsx(o.Action,{title:"Cancel",icon:o.Icon.Xmark,onAction:r}))},_jsx(o.Form.Description,{text:"Rename this gradient."}),_jsx(o.Form.TextField,{id:"label",title:"New Label",value:n,onChange:a,placeholder:"e.g. Sunset, Brand Accent"}))}function dn({gradient:e,onExport:t}){let{pop:r}=(0,o.useNavigation)(),[n,a]=(0,T.useState)("800"),[i,s]=(0,T.useState)("400"),[c,l]=(0,T.useState)("xMidYMid slice"),[u,f]=(0,T.useState)("gradient.svg"),[h,p]=(0,T.useState)(!1),g=async()=>{let b=parseInt(n,10),m=parseInt(i,10);if(isNaN(b)||isNaN(m)||b<=0||m<=0){await(0,o.showToast)({style:o.Toast.Style.Failure,title:"Invalid dimensions",message:"Width and height must be positive numbers"});return}if(!u.trim()){await(0,o.showToast)({style:o.Toast.Style.Failure,title:"Invalid filename",message:"Filename cannot be empty"});return}let y=Oe(e,b,m,c);await(0,o.showToast)({style:o.Toast.Style.Animated,title:"Generating SVG...",message:"Please wait while the file is being created"}),p(!0),await t(y,u),r()};return _jsx(o.Form,{actions:_jsx(o.ActionPanel,null,_jsx(o.Action,{title:h?"Generating SVG...":"Save SVG with Settings",icon:h?o.Icon.Clock:o.Icon.Download,onAction:g}),_jsx(o.Action,{title:"Cancel",icon:o.Icon.Xmark,onAction:r}))},_jsx(o.Form.Description,{text:"Configure SVG export settings. The SVG will be saved to your configured export directory with the specified filename."}),_jsx(o.Form.TextField,{id:"width",title:"Width",value:n,onChange:a,placeholder:"800"}),_jsx(o.Form.TextField,{id:"height",title:"Height",value:i,onChange:s,placeholder:"400"}),_jsx(o.Form.Dropdown,{id:"preserveAspectRatio",title:"Preserve Aspect Ratio",value:c,onChange:l},_jsx(o.Form.Dropdown.Item,{value:"xMidYMid slice",title:"Slice (crop to fit)"}),_jsx(o.Form.Dropdown.Item,{value:"xMidYMid meet",title:"Meet (fit within bounds)"}),_jsx(o.Form.Dropdown.Item,{value:"none",title:"None (stretch)"})),_jsx(o.Form.TextField,{id:"filename",title:"Filename",value:u,onChange:f,placeholder:"gradient.svg"}),h&&_jsx(o.Form.Description,{text:"\u{1F504} Generating SVG... Please wait while the file is being created."}))}function pn({gradient:e,onExport:t}){let{pop:r}=(0,o.useNavigation)(),[n,a]=(0,T.useState)("1"),[i,s]=(0,T.useState)("1920"),[c,l]=(0,T.useState)("1080"),[u,f]=(0,T.useState)("2"),[h,p]=(0,T.useState)(!1),[g,b]=(0,T.useState)("gradient.png"),[m,y]=(0,T.useState)(!1),k=async()=>{let O,I;if(n==="custom"){let w=parseInt(i,10),$=parseInt(c,10);if(isNaN(w)||isNaN($)||w<=0||$<=0){await(0,o.showToast)({style:o.Toast.Style.Failure,title:"Invalid dimensions",message:"Width and height must be positive numbers"});return}O=w,I=$}else{let w=parseInt(n,10),$=Le[w];O=$.width,I=$.height}let _=parseInt(u,10);if(isNaN(_)||_<=0){await(0,o.showToast)({style:o.Toast.Style.Failure,title:"Invalid DPR",message:"Device Pixel Ratio must be a positive number"});return}if(!g.trim()){await(0,o.showToast)({style:o.Toast.Style.Failure,title:"Invalid filename",message:"Filename cannot be empty"});return}let v=Gt(e,O,I,_,h);y(!0),await t(v,g),r()};return _jsx(o.Form,{actions:_jsx(o.ActionPanel,null,_jsx(o.Action,{title:m?"Generating PNG...":"Export PNG",icon:m?o.Icon.Clock:o.Icon.Download,onAction:k}),_jsx(o.Action,{title:"Cancel",icon:o.Icon.Xmark,onAction:r}))},_jsx(o.Form.Description,{text:"Configure PNG export settings. The PNG will be saved to your configured export directory with the specified filename."}),_jsx(o.Form.Dropdown,{id:"preset",title:"Size Preset",value:n,onChange:a},Le.map((O,I)=>_jsx(o.Form.Dropdown.Item,{key:I,title:O.name,value:I.toString()})),_jsx(o.Form.Dropdown.Item,{value:"custom",title:"Custom..."})),n==="custom"&&_jsx(_jsxFragment,null,_jsx(o.Form.TextField,{id:"customWidth",title:"Width",value:i,onChange:s,placeholder:"1920"}),_jsx(o.Form.TextField,{id:"customHeight",title:"Height",value:c,onChange:l,placeholder:"1080"})),_jsx(o.Form.Dropdown,{id:"dpr",title:"Device Pixel Ratio (DPR)",value:u,onChange:f},_jsx(o.Form.Dropdown.Item,{value:"1",title:"1\xD7 (Standard)"}),_jsx(o.Form.Dropdown.Item,{value:"2",title:"2\xD7 (Retina - Default)"})),_jsx(o.Form.Checkbox,{id:"transparentBackground",title:"Transparent Background",value:h,onChange:p,label:"Make background transparent instead of white"}),_jsx(o.Form.TextField,{id:"filename",title:"Filename",value:g,onChange:b,placeholder:"gradient.png"}),m&&_jsx(o.Form.Description,{text:"\u{1F504} Generating PNG... Please wait while the image is being created."}))}function jt(){let{value:e=[],setValue:t,isLoading:r}=ue("saved-gradients",[]),n=async i=>{let s=e.filter((c,l)=>l!==i);await t(s)},a=async(i,s)=>{let c=s.trim();if(!c){await(0,d.showToast)({style:d.Toast.Style.Failure,title:"Label cannot be empty"});return}let l=e.findIndex((u,f)=>f!==i&&u.label===c);if(l!==-1){if(!await(0,d.confirmAlert)({title:"Name Already Exists",message:`A gradient with the label "${c}" already exists. Do you want to overwrite it?`,primaryAction:{title:"Overwrite",style:d.Alert.ActionStyle.Destructive},dismissAction:{title:"Cancel"}}))return;let f=[...e];f.splice(l,1);let h=l<i?i-1:i;f[h]={...f[h],label:c},await t(f)}else{let u=[...e];u[i]={...u[i],label:c},await t(u)}await(0,d.showToast)({style:d.Toast.Style.Success,title:"Gradient renamed"})};return _jsx(d.List,{isLoading:r,searchBarPlaceholder:"Search saved gradients\u2026"},_jsx(d.List.Section,{title:"My Gradients",subtitle:`${e.length}`},e.map((i,s)=>{let c={source:pe(i,88,56),mask:d.Image.Mask.RoundedRectangle},l=ae(i),u=he(i),f=de(i);return _jsx(d.List.Item,{key:`${s}-${i.type}-${i.angle??0}`,title:i.label??(i.type==="linear"?`${i.type} (${i.angle??90}\xB0)`:i.type),subtitle:i.type==="linear"?`${i.type} \u2022 ${i.angle??90}\xB0`:i.type,icon:c,accessories:i.stops.slice(0,3).map(h=>({tag:{value:h,color:h}})),actions:_jsx(d.ActionPanel,null,_jsx(d.Action.Push,{title:"Open Preview",target:_jsx(Me,{...i})}),_jsx(d.ActionPanel.Section,{title:"Label"},_jsx(d.Action.Push,{title:"Quick Rename",icon:d.Icon.Text,shortcut:{modifiers:["cmd"],key:"r"},target:_jsx(gn,{initialLabel:i.label,onSubmit:h=>a(s,h)})}),_jsx(d.Action.Push,{title:"Edit Label",icon:d.Icon.Text,target:_jsx(mn,{initialLabel:i.label,onSubmit:async h=>{let p=[...e];p[s]={...i,label:h.trim()||void 0},await t(p),await(0,d.showToast)({style:d.Toast.Style.Success,title:"Label updated"})}})}),i.label?_jsx(d.Action,{title:"Clear Label",icon:d.Icon.Xmark,onAction:async()=>{let h=[...e];h[s]={...i,label:void 0},await t(h),await(0,d.showToast)({style:d.Toast.Style.Success,title:"Label cleared"})}}):null),_jsx(d.ActionPanel.Section,{title:"Copy"},_jsx(d.Action.CopyToClipboard,{title:"Copy CSS",content:l,shortcut:{modifiers:["cmd","shift"],key:"c"}}),_jsx(d.Action.CopyToClipboard,{title:"Copy SwiftUI",content:u,shortcut:{modifiers:["cmd","shift"],key:"s"}}),_jsx(d.Action.CopyToClipboard,{title:"Copy Tailwind",content:f,shortcut:{modifiers:["cmd","shift"],key:"t"}})),_jsx(d.Action,{icon:d.Icon.Trash,style:d.Action.Style.Destructive,title:"Delete",onAction:async()=>{await(0,d.confirmAlert)({title:"Delete Gradient?",message:i.label??i.stops.join(" \u2192 "),primaryAction:{title:"Delete",style:d.Alert.ActionStyle.Destructive},dismissAction:{title:"Cancel"}})&&await n(s)}}))})})))}function mn({initialLabel:e,onSubmit:t}){let{pop:r}=(0,d.useNavigation)(),[n,a]=(0,De.useState)(e??"");return _jsx(d.Form,{actions:_jsx(d.ActionPanel,null,_jsx(d.Action,{title:"Save",icon:d.Icon.Folder,onAction:async()=>{await t(n),r()}}),_jsx(d.Action,{title:"Cancel",icon:d.Icon.Xmark,onAction:r}))},_jsx(d.Form.Description,{text:"Set a label for this gradient (optional)."}),_jsx(d.Form.TextField,{id:"label",title:"Label",value:n,onChange:a,placeholder:"e.g. Sunset, Brand Accent"}))}function gn({initialLabel:e,onSubmit:t}){let{pop:r}=(0,d.useNavigation)(),[n,a]=(0,De.useState)(e??"");return _jsx(d.Form,{actions:_jsx(d.ActionPanel,null,_jsx(d.Action,{title:"Save",icon:d.Icon.Folder,onAction:async()=>{await t(n),r()}}),_jsx(d.Action,{title:"Cancel",icon:d.Icon.Xmark,onAction:r}))},_jsx(d.Form.Description,{text:"Set a label for this gradient (optional)."}),_jsx(d.Form.TextField,{id:"label",title:"Label",value:n,onChange:a,placeholder:"e.g. Sunset, Brand Accent"}))}
