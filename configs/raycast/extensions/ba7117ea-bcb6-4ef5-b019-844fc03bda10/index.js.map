{
  "version": 3,
  "sources": ["../src/index.ts"],
  "sourcesContent": ["import { Toast, getApplications, getPreferenceValues, getSelectedFinderItems, open, showToast } from \"@raycast/api\";\n\nimport { exec } from \"child_process\";\n\ninterface OpenCursorPreferences {\n  CursorVariant: string;\n}\n\n/**\n * Gets the selected Finder window.\n * @throws \u2014 An error when Finder is not the frontmost application.\n * @returns A Promise that resolves with the selected Finder window's path.\n */\nconst getSelectedFinderWindow = (): Promise<string> => {\n  const appleScript = `\n  if application \"Finder\" is running and frontmost of application \"Finder\" then\n    tell app \"Finder\"\n      set finderWindow to window 1\n      set finderWindowPath to (POSIX path of (target of finderWindow as alias))\n      return finderWindowPath\n    end tell\n  else \n    error \"Could not get the selected Finder window\"\n  end if\n `;\n  return new Promise((resolve, reject) => {\n    const child = exec(`osascript -e '${appleScript}'`, (error, stdout, stderr) => {\n      if (error || stderr) reject(Error(\"Could not get the selected Finder window\"));\n      resolve(stdout.trim());\n    });\n\n    child.on(\"close\", () => {\n      child.kill();\n    });\n  });\n};\n\nexport default async () => {\n  const preferences = getPreferenceValues<OpenCursorPreferences>();\n  const applications = await getApplications();\n  const cursorApplication = applications.find((app) => app.bundleId === preferences.CursorVariant);\n\n  if (!cursorApplication) {\n    await showToast({\n      style: Toast.Style.Failure,\n      title: \"Cursor is not installed\",\n      primaryAction: {\n        title: \"Install Cursor\",\n        onAction: () => open(\"https://www.cursor.com/\"),\n      },\n    });\n    return;\n  }\n\n  try {\n    const selectedFinderItems = await getSelectedFinderItems();\n    if (selectedFinderItems.length) {\n      for (const finderItem of selectedFinderItems) {\n        await open(finderItem.path, cursorApplication);\n      }\n      return;\n    }\n    const selectedFinderWindow = await getSelectedFinderWindow();\n    await open(selectedFinderWindow, cursorApplication);\n    return;\n  } catch (error: any) {\n    await showToast({\n      style: Toast.Style.Failure,\n      title: \"No Finder items or window selected\",\n    });\n  }\n};\n"],
  "mappings": "yaAAA,IAAAA,EAAA,GAAAC,EAAAD,EAAA,aAAAE,IAAA,eAAAC,EAAAH,GAAA,IAAAI,EAAqG,wBAErGC,EAAqB,yBAWfC,EAA0B,IAAuB,CACrD,IAAMC,EAAc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAWpB,OAAO,IAAI,QAAQ,CAACC,EAASC,IAAW,CACtC,IAAMC,KAAQ,QAAK,iBAAiBH,CAAW,IAAK,CAACI,EAAOC,EAAQC,IAAW,EACzEF,GAASE,IAAQJ,EAAO,MAAM,0CAA0C,CAAC,EAC7ED,EAAQI,EAAO,KAAK,CAAC,CACvB,CAAC,EAEDF,EAAM,GAAG,QAAS,IAAM,CACtBA,EAAM,KAAK,CACb,CAAC,CACH,CAAC,CACH,EAEOR,EAAQ,SAAY,CACzB,IAAMY,KAAc,uBAA2C,EAEzDC,GADe,QAAM,mBAAgB,GACJ,KAAMC,GAAQA,EAAI,WAAaF,EAAY,aAAa,EAE/F,GAAI,CAACC,EAAmB,CACtB,QAAM,aAAU,CACd,MAAO,QAAM,MAAM,QACnB,MAAO,0BACP,cAAe,CACb,MAAO,iBACP,SAAU,OAAM,QAAK,yBAAyB,CAChD,CACF,CAAC,EACD,MACF,CAEA,GAAI,CACF,IAAME,EAAsB,QAAM,0BAAuB,EACzD,GAAIA,EAAoB,OAAQ,CAC9B,QAAWC,KAAcD,EACvB,QAAM,QAAKC,EAAW,KAAMH,CAAiB,EAE/C,MACF,CACA,IAAMI,EAAuB,MAAMb,EAAwB,EAC3D,QAAM,QAAKa,EAAsBJ,CAAiB,EAClD,MACF,MAAqB,CACnB,QAAM,aAAU,CACd,MAAO,QAAM,MAAM,QACnB,MAAO,oCACT,CAAC,CACH,CACF",
  "names": ["index_exports", "__export", "index_default", "__toCommonJS", "import_api", "import_child_process", "getSelectedFinderWindow", "appleScript", "resolve", "reject", "child", "error", "stdout", "stderr", "preferences", "cursorApplication", "app", "selectedFinderItems", "finderItem", "selectedFinderWindow"]
}
