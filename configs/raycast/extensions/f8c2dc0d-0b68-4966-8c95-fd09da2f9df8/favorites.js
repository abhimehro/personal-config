"use strict";var kt=Object.create;var ne=Object.defineProperty;var vt=Object.getOwnPropertyDescriptor;var xt=Object.getOwnPropertyNames;var St=Object.getPrototypeOf,At=Object.prototype.hasOwnProperty;var N=(t,r)=>()=>(r||t((r={exports:{}}).exports,r),r.exports),Pt=(t,r)=>{for(var n in r)ne(t,n,{get:r[n],enumerable:!0})},ve=(t,r,n,e)=>{if(r&&typeof r=="object"||typeof r=="function")for(let a of xt(r))!At.call(t,a)&&a!==n&&ne(t,a,{get:()=>r[a],enumerable:!(e=vt(r,a))||e.enumerable});return t};var Z=(t,r,n)=>(n=t!=null?kt(St(t)):{},ve(r||!t||!t.__esModule?ne(n,"default",{value:t,enumerable:!0}):n,t)),Et=t=>ve(ne({},"__esModule",{value:!0}),t);var Fe=N((fe,Le)=>{"use strict";Object.defineProperty(fe,"__esModule",{value:!0});fe.default=jt;var Oe=function(r,n){return Math.round(Math.abs(r-n)/1e3)};function jt(t){return function(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Date;n instanceof Date||(n=new Date(n));var a=null,s=60,o=s*60,c=o*24,i=c*7,f=c*30,d=c*365;a=Oe(e,n),a>c&&a<i&&(n=new Date(n.getFullYear(),n.getMonth(),n.getDate(),0,0,0),a=Oe(e,n));var l=function(m,b,p){var w=void 0;m==="justNow"?w=m:e>=n?w=m+"Ago":w=m+"FromNow";var x=t[w];return typeof x=="function"?x(b,p):x.replace("{{time}}",b)};switch(!1){case!(a<30):return l("justNow",a,a);case!(a<s):return l("seconds",a,a);case!(a<2*s):return l("aMinute",1,a);case!(a<o):return l("minutes",Math.floor(a/s),a);case Math.floor(a/o)!==1:return l("anHour",Math.floor(a/s),a);case!(a<c):return l("hours",Math.floor(a/o),a);case!(a<c*2):return l("aDay",1,a);case!(a<i):return l("days",Math.floor(a/c),a);case Math.floor(a/i)!==1:return l("aWeek",1,a);case!(a<f):return l("weeks",Math.floor(a/i),a);case Math.floor(a/f)!==1:return l("aMonth",1,a);case!(a<d):return l("months",Math.floor(a/f),a);case Math.floor(a/d)!==1:return l("aYear",1,a);default:return l("overAYear",Math.floor(a/d),a)}}}Le.exports=fe.default});var Me=N((Fr,De)=>{De.exports={justNow:"just now",secondsAgo:"{{time}} seconds ago",aMinuteAgo:"a minute ago",minutesAgo:"{{time}} minutes ago",anHourAgo:"an hour ago",hoursAgo:"{{time}} hours ago",aDayAgo:"yesterday",daysAgo:"{{time}} days ago",aWeekAgo:"a week ago",weeksAgo:"{{time}} weeks ago",aMonthAgo:"a month ago",monthsAgo:"{{time}} months ago",aYearAgo:"a year ago",yearsAgo:"{{time}} years ago",overAYearAgo:"over a year ago",secondsFromNow:"{{time}} seconds from now",aMinuteFromNow:"a minute from now",minutesFromNow:"{{time}} minutes from now",anHourFromNow:"an hour from now",hoursFromNow:"{{time}} hours from now",aDayFromNow:"tomorrow",daysFromNow:"{{time}} days from now",aWeekFromNow:"a week from now",weeksFromNow:"{{time}} weeks from now",aMonthFromNow:"a month from now",monthsFromNow:"{{time}} months from now",aYearFromNow:"a year from now",yearsFromNow:"{{time}} years from now",overAYearFromNow:"over a year from now"}});var We=N((de,ze)=>{"use strict";Object.defineProperty(de,"__esModule",{value:!0});var Bt=Fe(),Gt=Ne(Bt),qt=Me(),Kt=Ne(qt);function Ne(t){return t&&t.__esModule?t:{default:t}}de.default=(0,Gt.default)(Kt.default);ze.exports=de.default});var $e=N((zr,je)=>{"use strict";je.exports=function(r,n){n===!0&&(n=0);var e="";if(typeof r=="string")try{e=new URL(r).protocol}catch{}else r&&r.constructor===URL&&(e=r.protocol);var a=e.split(/\:|\+/).filter(Boolean);return typeof n=="number"?a[n]:a}});var Ge=N((Wr,Be)=>{"use strict";var Zt=$e();function Yt(t){var r={protocols:[],protocol:null,port:null,resource:"",host:"",user:"",password:"",pathname:"",hash:"",search:"",href:t,query:{},parse_failed:!1};try{var n=new URL(t);r.protocols=Zt(n),r.protocol=r.protocols[0],r.port=n.port,r.resource=n.hostname,r.host=n.host,r.user=n.username||"",r.password=n.password||"",r.pathname=n.pathname,r.hash=n.hash.slice(1),r.search=n.search.slice(1),r.href=n.href,r.query=Object.fromEntries(n.searchParams)}catch{r.protocols=["file"],r.protocol=r.protocols[0],r.port="",r.resource="",r.user="",r.pathname="",r.hash="",r.search="",r.href=t,r.query={},r.parse_failed=!0}return r}Be.exports=Yt});var Xe=N((Vr,Ye)=>{"use strict";var Xt=Ge();function Qt(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}var er=Qt(Xt);function tr(t){if(t.__esModule)return t;var r=t.default;if(typeof r=="function"){var n=function e(){if(this instanceof e){var a=[null];a.push.apply(a,arguments);var s=Function.bind.apply(r,a);return new s}return r.apply(this,arguments)};n.prototype=r.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(e){var a=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(n,e,a.get?a:{enumerable:!0,get:function(){return t[e]}})}),n}var Ke={},rr="text/plain",nr="us-ascii",qe=(t,r)=>r.some(n=>n instanceof RegExp?n.test(t):n===t),ar=(t,{stripHash:r})=>{let n=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(t);if(!n)throw new Error(`Invalid URL: ${t}`);let{type:e,data:a,hash:s}=n.groups,o=e.split(";");s=r?"":s;let c=!1;o[o.length-1]==="base64"&&(o.pop(),c=!0);let i=(o.shift()||"").toLowerCase(),d=[...o.map(l=>{let[h,m=""]=l.split("=").map(b=>b.trim());return h==="charset"&&(m=m.toLowerCase(),m===nr)?"":`${h}${m?`=${m}`:""}`}).filter(Boolean)];return c&&d.push("base64"),(d.length>0||i&&i!==rr)&&d.unshift(i),`data:${d.join(";")},${c?a.trim():a}${s?`#${s}`:""}`};function sr(t,r){if(r={defaultProtocol:"http:",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,sortQueryParameters:!0,...r},t=t.trim(),/^data:/i.test(t))return ar(t,r);if(/^view-source:/i.test(t))throw new Error("`view-source:` is not supported as it is a non-standard protocol");let n=t.startsWith("//");!n&&/^\.*\//.test(t)||(t=t.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,r.defaultProtocol));let a=new URL(t);if(r.forceHttp&&r.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(r.forceHttp&&a.protocol==="https:"&&(a.protocol="http:"),r.forceHttps&&a.protocol==="http:"&&(a.protocol="https:"),r.stripAuthentication&&(a.username="",a.password=""),r.stripHash?a.hash="":r.stripTextFragment&&(a.hash=a.hash.replace(/#?:~:text.*?$/i,"")),a.pathname){let o=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g,c=0,i="";for(;;){let d=o.exec(a.pathname);if(!d)break;let l=d[0],h=d.index,m=a.pathname.slice(c,h);i+=m.replace(/\/{2,}/g,"/"),i+=l,c=h+l.length}let f=a.pathname.slice(c,a.pathname.length);i+=f.replace(/\/{2,}/g,"/"),a.pathname=i}if(a.pathname)try{a.pathname=decodeURI(a.pathname)}catch{}if(r.removeDirectoryIndex===!0&&(r.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(r.removeDirectoryIndex)&&r.removeDirectoryIndex.length>0){let o=a.pathname.split("/"),c=o[o.length-1];qe(c,r.removeDirectoryIndex)&&(o=o.slice(0,-1),a.pathname=o.slice(1).join("/")+"/")}if(a.hostname&&(a.hostname=a.hostname.replace(/\.$/,""),r.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(a.hostname)&&(a.hostname=a.hostname.replace(/^www\./,""))),Array.isArray(r.removeQueryParameters))for(let o of[...a.searchParams.keys()])qe(o,r.removeQueryParameters)&&a.searchParams.delete(o);if(r.removeQueryParameters===!0&&(a.search=""),r.sortQueryParameters){a.searchParams.sort();try{a.search=decodeURIComponent(a.search)}catch{}}r.removeTrailingSlash&&(a.pathname=a.pathname.replace(/\/$/,""));let s=t;return t=a.toString(),!r.removeSingleSlash&&a.pathname==="/"&&!s.endsWith("/")&&a.hash===""&&(t=t.replace(/\/$/,"")),(r.removeTrailingSlash||a.pathname==="/")&&a.hash===""&&r.removeSingleSlash&&(t=t.replace(/\/$/,"")),n&&!r.normalizeProtocol&&(t=t.replace(/^http:\/\//,"//")),r.stripProtocol&&(t=t.replace(/^(?:https?:)?\/\//,"")),t}var or=Object.freeze({__proto__:null,default:sr}),ir=tr(or);Object.defineProperty(Ke,"__esModule",{value:!0});var cr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lr=ir,ur=Je(lr),fr=er.default,dr=Je(fr);function Je(t){return t&&t.__esModule?t:{default:t}}var Ze=function t(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,e=/^(?:([a-zA-Z_][a-zA-Z0-9_-]{0,31})@|https?:\/\/)([\w\.\-@]+)[\/:](([\~,\.\w,\-,\_,\/,\s]|%[0-9A-Fa-f]{2})+?(?:\.git|\/)?)$/,a=function(i){var f=new Error(i);throw f.subject_url=r,f};(typeof r!="string"||!r.trim())&&a("Invalid url."),r.length>t.MAX_INPUT_LENGTH&&a("Input exceeds maximum length. If needed, change the value of parseUrl.MAX_INPUT_LENGTH."),n&&((typeof n>"u"?"undefined":cr(n))!=="object"&&(n={stripHash:!1}),r=(0,ur.default)(r,n));var s=(0,dr.default)(r);if(s.parse_failed){var o=s.href.match(e);o?(s.protocols=["ssh"],s.protocol="ssh",s.resource=o[2],s.host=o[2],s.user=o[1],s.pathname="/"+o[3],s.parse_failed=!1):a("URL parsing failed.")}return s};Ze.MAX_INPUT_LENGTH=2048;var hr=Ke.default=Ze;Ye.exports=hr});var tt=N((Hr,et)=>{"use strict";var mr=$e();function Qe(t){if(Array.isArray(t))return t.indexOf("ssh")!==-1||t.indexOf("rsync")!==-1;if(typeof t!="string")return!1;var r=mr(t);if(t=t.substring(t.indexOf("://")+3),Qe(r))return!0;var n=new RegExp(".([a-zA-Z\\d]+):(\\d+)/");return!t.match(n)&&t.indexOf("@")<t.indexOf(":")}et.exports=Qe});var at=N((jr,nt)=>{"use strict";var pr=Xe(),rt=tt();function gr(t){let r=pr(t);return r.token="",r.password==="x-oauth-basic"?r.token=r.user:r.user==="x-token-auth"&&(r.token=r.password),rt(r.protocols)||r.protocols.length===0&&rt(t)?r.protocol="ssh":r.protocols.length?r.protocol=r.protocols[0]:(r.protocol="file",r.protocols=["file"]),r.href=r.href.replace(/\/$/,""),r}nt.exports=gr});var ot=N((Br,st)=>{"use strict";var yr=at();function we(t,r){if(r=r||[],typeof t!="string")throw new Error("The url must be a string.");if(!r.every(function(P){return typeof P=="string"}))throw new Error("The refs should contain only strings");var n=/^([a-z\d-]{1,39})\/([-\.\w]{1,100})$/i;n.test(t)&&(t="https://github.com/"+t);var e=yr(t),a=e.resource.split("."),s=null;switch(e.toString=function(P){return we.stringify(this,P)},e.source=a.length>2?a.slice(1-a.length).join("."):e.source=e.resource,e.git_suffix=/\.git$/.test(e.pathname),e.name=decodeURIComponent((e.pathname||e.href).replace(/(^\/)|(\/$)/g,"").replace(/\.git$/,"")),e.owner=decodeURIComponent(e.user),e.source){case"git.cloudforge.com":e.owner=e.user,e.organization=a[0],e.source="cloudforge.com";break;case"visualstudio.com":if(e.resource==="vs-ssh.visualstudio.com"){s=e.name.split("/"),s.length===4&&(e.organization=s[1],e.owner=s[2],e.name=s[3],e.full_name=s[2]+"/"+s[3]);break}else{s=e.name.split("/"),s.length===2?(e.owner=s[1],e.name=s[1],e.full_name="_git/"+e.name):s.length===3?(e.name=s[2],s[0]==="DefaultCollection"?(e.owner=s[2],e.organization=s[0],e.full_name=e.organization+"/_git/"+e.name):(e.owner=s[0],e.full_name=e.owner+"/_git/"+e.name)):s.length===4&&(e.organization=s[0],e.owner=s[1],e.name=s[3],e.full_name=e.organization+"/"+e.owner+"/_git/"+e.name);break}case"dev.azure.com":case"azure.com":if(e.resource==="ssh.dev.azure.com"){s=e.name.split("/"),s.length===4&&(e.organization=s[1],e.owner=s[2],e.name=s[3]);break}else{s=e.name.split("/"),s.length===5?(e.organization=s[0],e.owner=s[1],e.name=s[4],e.full_name="_git/"+e.name):s.length===3?(e.name=s[2],s[0]==="DefaultCollection"?(e.owner=s[2],e.organization=s[0],e.full_name=e.organization+"/_git/"+e.name):(e.owner=s[0],e.full_name=e.owner+"/_git/"+e.name)):s.length===4&&(e.organization=s[0],e.owner=s[1],e.name=s[3],e.full_name=e.organization+"/"+e.owner+"/_git/"+e.name),e.query&&e.query.path&&(e.filepath=e.query.path.replace(/^\/+/g,"")),e.query&&e.query.version&&(e.ref=e.query.version.replace(/^GB/,""));break}default:s=e.name.split("/");var o=s.length-1;if(s.length>=2){var c=s.indexOf("-",2),i=s.indexOf("blob",2),f=s.indexOf("tree",2),d=s.indexOf("commit",2),l=s.indexOf("issues",2),h=s.indexOf("src",2),m=s.indexOf("raw",2),b=s.indexOf("edit",2);o=c>0?c-1:i>0&&f>0?Math.min(i-1,f-1):i>0?i-1:l>0?l-1:f>0?f-1:d>0?d-1:h>0?h-1:m>0?m-1:b>0?b-1:o,e.owner=s.slice(0,o).join("/"),e.name=s[o],d&&l<0&&(e.commit=s[o+2])}e.ref="",e.filepathtype="",e.filepath="";var p=s.length>o&&s[o+1]==="-"?o+1:o;s.length>p+2&&["raw","src","blob","tree","edit"].indexOf(s[p+1])>=0&&(e.filepathtype=s[p+1],e.ref=s[p+2],s.length>p+3&&(e.filepath=s.slice(p+3).join("/"))),e.organization=e.owner;break}e.full_name||(e.full_name=e.owner,e.name&&(e.full_name&&(e.full_name+="/"),e.full_name+=e.name)),e.owner.startsWith("scm/")&&(e.source="bitbucket-server",e.owner=e.owner.replace("scm/",""),e.organization=e.owner,e.full_name=e.owner+"/"+e.name);var w=/(projects|users)\/(.*?)\/repos\/(.*?)((\/.*$)|$)/,x=w.exec(e.pathname);return x!=null&&(e.source="bitbucket-server",x[1]==="users"?e.owner="~"+x[2]:e.owner=x[2],e.organization=e.owner,e.name=x[3],s=x[4].split("/"),s.length>1&&(["raw","browse"].indexOf(s[1])>=0?(e.filepathtype=s[1],s.length>2&&(e.filepath=s.slice(2).join("/"))):s[1]==="commits"&&s.length>2&&(e.commit=s[2])),e.full_name=e.owner+"/"+e.name,e.query.at?e.ref=e.query.at:e.ref=""),r.length!==0&&e.ref&&(e.ref=wr(e.href,r)||e.ref,e.filepath=e.href.split(e.ref+"/")[1]),e}we.stringify=function(t,r){r=r||(t.protocols&&t.protocols.length?t.protocols.join("+"):t.protocol);var n=t.port?":"+t.port:"",e=t.user||"git",a=t.git_suffix?".git":"";switch(r){case"ssh":return n?"ssh://"+e+"@"+t.resource+n+"/"+t.full_name+a:e+"@"+t.resource+":"+t.full_name+a;case"git+ssh":case"ssh+git":case"ftp":case"ftps":return r+"://"+e+"@"+t.resource+n+"/"+t.full_name+a;case"http":case"https":var s=t.token?br(t):t.user&&(t.protocols.includes("http")||t.protocols.includes("https"))?t.user+"@":"";return r+"://"+s+t.resource+n+"/"+$r(t)+a;default:return t.href}};function br(t){switch(t.source){case"bitbucket.org":return"x-token-auth:"+t.token+"@";default:return t.token+"@"}}function $r(t){switch(t.source){case"bitbucket-server":return"scm/"+t.full_name;default:var r=t.full_name.split("/").map(function(n){return encodeURIComponent(n)}).join("/");return r}}function wr(t,r){var n="";return r.forEach(function(e){t.includes(e)&&e.length>n.length&&(n=e)}),n}st.exports=we});var Ar={};Pt(Ar,{default:()=>be});module.exports=Et(Ar);var G=require("@raycast/api");var Ue=require("react");var g=Z(require("react")),v=require("@raycast/api");var xe=Object.prototype.hasOwnProperty;function ae(t,r){var n,e;if(t===r)return!0;if(t&&r&&(n=t.constructor)===r.constructor){if(n===Date)return t.getTime()===r.getTime();if(n===RegExp)return t.toString()===r.toString();if(n===Array){if((e=t.length)===r.length)for(;e--&&ae(t[e],r[e]););return e===-1}if(!n||typeof t=="object"){e=0;for(n in t)if(xe.call(t,n)&&++e&&!xe.call(r,n)||!(n in r)||!ae(t[n],r[n]))return!1;return Object.keys(r).length===e}}return t!==t&&r!==r}var q=Z(require("node:fs")),oe=Z(require("node:path")),Ee=Z(require("node:crypto"));var Re=require("react/jsx-runtime");function Rt(t){let r=(0,g.useRef)(t),n=(0,g.useRef)(0);return ae(t,r.current)||(r.current=t,n.current+=1),(0,g.useMemo)(()=>r.current,[n.current])}function O(t){let r=(0,g.useRef)(t);return r.current=t,r}function _t(t,r){let n=t instanceof Error?t.message:String(t);return(0,v.showToast)({style:v.Toast.Style.Failure,title:r?.title??"Something went wrong",message:r?.message??n,primaryAction:r?.primaryAction??Se(t),secondaryAction:r?.primaryAction?Se(t):void 0})}var Se=t=>{let r=!0,n="[Extension Name]...",e="";try{let o=JSON.parse((0,q.readFileSync)((0,oe.join)(v.environment.assetsPath,"..","package.json"),"utf8"));n=`[${o.title}]...`,e=`https://raycast.com/${o.owner||o.author}/${o.name}`,(!o.owner||o.access==="public")&&(r=!1)}catch{}let a=v.environment.isDevelopment||r,s=t instanceof Error?t?.stack||t?.message||"":String(t);return{title:a?"Copy Logs":"Report Error",onAction(o){o.hide(),a?v.Clipboard.copy(s):(0,v.open)(`https://github.com/raycast/extensions/issues/new?&labels=extension%2Cbug&template=extension_bug_report.yml&title=${encodeURIComponent(n)}&extension-url=${encodeURI(e)}&description=${encodeURIComponent(`#### Error:
\`\`\`
${s}
\`\`\`
`)}`)}}};function Tt(t,r,n){let e=(0,g.useRef)(0),[a,s]=(0,g.useState)({isLoading:!0}),o=O(t),c=O(n?.abortable),i=O(r||[]),f=O(n?.onError),d=O(n?.onData),l=O(n?.onWillExecute),h=O(n?.failureToastOptions),m=O(a.data),b=(0,g.useRef)(null),p=(0,g.useRef)({page:0}),w=(0,g.useRef)(!1),x=(0,g.useRef)(!0),P=(0,g.useRef)(50),A=(0,g.useCallback)(()=>(c.current&&(c.current.current?.abort(),c.current.current=new AbortController),++e.current),[c]),y=(0,g.useCallback)((...D)=>{let _=A();l.current?.(D),s($=>({...$,isLoading:!0}));let S=Ct(o.current)(...D);function E($){return $.name=="AbortError"||_===e.current&&(f.current?f.current($):v.environment.launchType!==v.LaunchType.Background&&_t($,{title:"Failed to fetch latest data",primaryAction:{title:"Retry",onAction(M){M.hide(),b.current?.(...i.current||[])}},...h.current}),s({error:$,isLoading:!1})),$}return typeof S=="function"?(w.current=!0,S(p.current).then(({data:$,hasMore:M,cursor:$t})=>(_===e.current&&(p.current&&(p.current.cursor=$t,p.current.lastItem=$?.[$.length-1]),d.current&&d.current($,p.current),M&&(P.current=$.length),x.current=M,s(wt=>p.current.page===0?{data:$,isLoading:!1}:{data:(wt.data||[])?.concat($),isLoading:!1})),$),$=>(x.current=!1,E($)))):(w.current=!1,S.then($=>(_===e.current&&(d.current&&d.current($),s({data:$,isLoading:!1})),$),E))},[d,f,i,o,s,b,l,p,h,A]);b.current=y;let F=(0,g.useCallback)(()=>{p.current={page:0};let D=i.current||[];return y(...D)},[y,i]),U=(0,g.useCallback)(async(D,_)=>{let S;try{if(_?.optimisticUpdate){A(),typeof _?.rollbackOnError!="function"&&_?.rollbackOnError!==!1&&(S=structuredClone(m.current?.value));let E=_.optimisticUpdate;s($=>({...$,data:E($.data)}))}return await D}catch(E){if(typeof _?.rollbackOnError=="function"){let $=_.rollbackOnError;s(M=>({...M,data:$(M.data)}))}else _?.optimisticUpdate&&_?.rollbackOnError!==!1&&s($=>({...$,data:S}));throw E}finally{_?.shouldRevalidateAfter!==!1&&(v.environment.launchType===v.LaunchType.Background||v.environment.commandMode==="menu-bar"?await F():F())}},[F,m,s,A]),L=(0,g.useCallback)(()=>{p.current.page+=1;let D=i.current||[];y(...D)},[p,i,y]);(0,g.useEffect)(()=>{p.current={page:0},n?.execute!==!1?y(...r||[]):A()},[Rt([r,n?.execute,y]),c,p]),(0,g.useEffect)(()=>()=>{A()},[A]);let W=n?.execute!==!1?a.isLoading:!1,V={...a,isLoading:W},H=w.current?{pageSize:P.current,hasMore:x.current,onLoadMore:L}:void 0;return{...V,revalidate:F,mutate:U,pagination:H}}function Ct(t){return t===Promise.all||t===Promise.race||t===Promise.resolve||t===Promise.reject?t.bind(Promise):t}function Ae(t){return typeof t!="function"?!1:/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(t))!==null}function It(t){return t instanceof URLSearchParams?t.toString():t}function _e(t,r=[]){function n(e){return"update"in t?t.update(e,"utf8"):t.write(e)}return{dispatch:function(e){e=It(e),e===null?this._null():this["_"+typeof e](e)},_object:function(e){let a=/\[object (.*)\]/i,s=Object.prototype.toString.call(e),o=a.exec(s)?.[1]??"unknown:["+s+"]";o=o.toLowerCase();let c=null;if((c=r.indexOf(e))>=0){this.dispatch("[CIRCULAR:"+c+"]");return}else r.push(e);if(Buffer.isBuffer(e))return n("buffer:"),n(e.toString("utf8"));if(o!=="object"&&o!=="function"&&o!=="asyncfunction")if(this["_"+o])this["_"+o](e);else throw new Error('Unknown object type "'+o+'"');else{let i=Object.keys(e);i=i.sort(),Ae(e)||i.splice(0,0,"prototype","__proto__","constructor"),n("object:"+i.length+":");let f=this;return i.forEach(function(d){f.dispatch(d),n(":"),f.dispatch(e[d]),n(",")})}},_array:function(e,a){a=typeof a<"u"?a:!1;let s=this;if(n("array:"+e.length+":"),!a||e.length<=1){e.forEach(function(i){s.dispatch(i)});return}let o=[],c=e.map(function(i){let f=Ut(),d=r.slice();return _e(f,d).dispatch(i),o=o.concat(d.slice(r.length)),f.read().toString()});r=r.concat(o),c.sort(),this._array(c,!1)},_date:function(e){n("date:"+e.toJSON())},_symbol:function(e){n("symbol:"+e.toString())},_error:function(e){n("error:"+e.toString())},_boolean:function(e){n("bool:"+e.toString())},_string:function(e){n("string:"+e.length+":"),n(e.toString())},_function:function(e){n("fn:"),Ae(e)?this.dispatch("[native]"):this.dispatch(e.toString()),this.dispatch("function-name:"+String(e.name)),this._object(e)},_number:function(e){n("number:"+e.toString())},_xml:function(e){n("xml:"+e.toString())},_null:function(){n("Null")},_undefined:function(){n("Undefined")},_regexp:function(e){n("regex:"+e.toString())},_uint8array:function(e){n("uint8array:"),this.dispatch(Array.prototype.slice.call(e))},_uint8clampedarray:function(e){n("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(e))},_int8array:function(e){n("int8array:"),this.dispatch(Array.prototype.slice.call(e))},_uint16array:function(e){n("uint16array:"),this.dispatch(Array.prototype.slice.call(e))},_int16array:function(e){n("int16array:"),this.dispatch(Array.prototype.slice.call(e))},_uint32array:function(e){n("uint32array:"),this.dispatch(Array.prototype.slice.call(e))},_int32array:function(e){n("int32array:"),this.dispatch(Array.prototype.slice.call(e))},_float32array:function(e){n("float32array:"),this.dispatch(Array.prototype.slice.call(e))},_float64array:function(e){n("float64array:"),this.dispatch(Array.prototype.slice.call(e))},_arraybuffer:function(e){n("arraybuffer:"),this.dispatch(new Uint8Array(e))},_url:function(e){n("url:"+e.toString())},_map:function(e){n("map:");let a=Array.from(e);this._array(a,!0)},_set:function(e){n("set:");let a=Array.from(e);this._array(a,!0)},_file:function(e){n("file:"),this.dispatch([e.name,e.size,e.type,e.lastModified])},_blob:function(){throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){n("domwindow")},_bigint:function(e){n("bigint:"+e.toString())},_process:function(){n("process")},_timer:function(){n("timer")},_pipe:function(){n("pipe")},_tcp:function(){n("tcp")},_udp:function(){n("udp")},_tty:function(){n("tty")},_statwatcher:function(){n("statwatcher")},_securecontext:function(){n("securecontext")},_connection:function(){n("connection")},_zlib:function(){n("zlib")},_context:function(){n("context")},_nodescript:function(){n("nodescript")},_httpparser:function(){n("httpparser")},_dataview:function(){n("dataview")},_signal:function(){n("signal")},_fsevent:function(){n("fsevent")},_tlswrap:function(){n("tlswrap")}}}function Ut(){return{buf:"",write:function(t){this.buf+=t},end:function(t){this.buf+=t},read:function(){return this.buf}}}function Ot(t,r){let n=this[t];return n instanceof Date?`__raycast_cached_date__${n.toISOString()}`:Buffer.isBuffer(n)?`__raycast_cached_buffer__${n.toString("base64")}`:r}function Lt(t,r){return typeof r=="string"&&r.startsWith("__raycast_cached_date__")?new Date(r.replace("__raycast_cached_date__","")):typeof r=="string"&&r.startsWith("__raycast_cached_buffer__")?Buffer.from(r.replace("__raycast_cached_buffer__",""),"base64"):r}function se(t){let r=Ee.default.createHash("sha1");return _e(r).dispatch(t),r.digest("hex")}var Ft=Symbol("cache without namespace"),Pe=new Map;function X(t,r,n){let e=n?.cacheNamespace||Ft,a=Pe.get(e)||Pe.set(e,new v.Cache({namespace:n?.cacheNamespace})).get(e);if(!a)throw new Error("Missing cache");let s=O(t),o=O(r),c=(0,g.useSyncExternalStore)(a.subscribe,()=>{try{return a.get(s.current)}catch(l){console.error("Could not get Cache data:",l);return}}),i=(0,g.useMemo)(()=>{if(typeof c<"u"){if(c==="undefined")return;try{return JSON.parse(c,Lt)}catch(l){return console.warn("The cached data is corrupted",l),o.current}}else return o.current},[c,o]),f=O(i),d=(0,g.useCallback)(l=>{let h=typeof l=="function"?l(f.current):l;if(typeof h>"u")a.set(s.current,"undefined");else{let m=JSON.stringify(h,Ot);a.set(s.current,m)}return h},[a,s,f]);return[i,d]}var Y=Symbol();function Dt(t,r,n){let{initialData:e,keepPreviousData:a,internal_cacheKeySuffix:s,...o}=n||{},c=(0,g.useRef)(null),[i,f]=X(se(r||[])+s,Y,{cacheNamespace:se(t)}),d=(0,g.useRef)(i!==Y?i:e),l=(0,g.useRef)(void 0),{mutate:h,revalidate:m,...b}=Tt(t,r||[],{...o,onData(A,y){l.current=y,o.onData&&o.onData(A,y),!(y&&y.page>0)&&(c.current="promise",d.current=A,f(A))}}),p,w=b.pagination;l.current&&l.current.page>0&&b.data?p=b.data:c.current==="promise"?p=d.current:a&&i!==Y?(p=i,w&&(w.hasMore=!0,w.pageSize=i.length)):a&&i===Y?p=d.current:i!==Y?(p=i,w&&(w.hasMore=!0,w.pageSize=i.length)):p=e;let x=O(p),P=(0,g.useCallback)(async(A,y)=>{let F;try{if(y?.optimisticUpdate){typeof y?.rollbackOnError!="function"&&y?.rollbackOnError!==!1&&(F=structuredClone(x.current));let U=y.optimisticUpdate(x.current);c.current="cache",d.current=U,f(U)}return await h(A,{shouldRevalidateAfter:y?.shouldRevalidateAfter})}catch(U){if(typeof y?.rollbackOnError=="function"){let L=y.rollbackOnError(x.current);c.current="cache",d.current=L,f(L)}else y?.optimisticUpdate&&y?.rollbackOnError!==!1&&(c.current="cache",d.current=F,f(F));throw U}},[f,h,x,d,c]);return(0,g.useEffect)(()=>{i!==Y&&(c.current="cache",d.current=i)},[i]),{data:p,isLoading:b.isLoading,error:b.error,mutate:l.current&&l.current.page>0?h:P,pagination:w,revalidate:m}}function Mt(t){if(t){let r=zt(t);if(!r)return!1;if(r.subtype==="json"||r.suffix==="json"||r.suffix&&/\bjson\b/i.test(r.suffix)||r.subtype&&/\bjson\b/i.test(r.subtype))return!0}return!1}var Nt=/^([A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126})\/([A-Za-z0-9][A-Za-z0-9!#$&^_.+-]{0,126});?$/;function zt(t){let r=t.indexOf(";"),n=r!==-1?t.slice(0,r).trim():t.trim(),e=Nt.exec(n.toLowerCase().toLowerCase());if(!e)return;let a=e[1],s=e[2],o,c=s.lastIndexOf("+");return c!==-1&&(o=s.substring(c+1),s=s.substring(0,c)),{type:a,subtype:s,suffix:o}}async function Wt(t){if(!t.ok)throw new Error(t.statusText);let r=t.headers.get("content-type");return r&&Mt(r)?await t.json():await t.text()}function Vt(t){return{data:t,hasMore:!1}}function ie(t,r){let{parseResponse:n,mapResult:e,initialData:a,execute:s,keepPreviousData:o,onError:c,onData:i,onWillExecute:f,failureToastOptions:d,...l}=r||{},h={initialData:a,execute:s,keepPreviousData:o,onError:c,onData:i,onWillExecute:f,failureToastOptions:d},m=O(n||Wt),b=O(e||Vt),p=(0,g.useRef)(null),w=(0,g.useRef)(null),x=typeof t=="function"?t({page:0}):void 0;(!p.current||typeof w.current>"u"||w.current!==x)&&(p.current=t),w.current=x;let P=(0,g.useRef)(null),A=(0,g.useCallback)((U,L)=>async W=>{let V=await fetch(U(W),{signal:P.current?.signal,...L}),H=await m.current(V);return b.current?.(H)},[m,b]),y=(0,g.useCallback)(async(U,L)=>{let W=await fetch(U,{signal:P.current?.signal,...L}),V=await m.current(W);return b.current(V)?.data},[m,b]),F=(0,g.useMemo)(()=>w.current?A:y,[w,y,A]);return Dt(F,[p.current,l],{...h,internal_cacheKeySuffix:w.current+se(b.current)+se(m.current),abortable:P})}function ce(t,r){r===void 0&&(r=JSON.stringify);for(var n=[],e={},a=0;a<t.length;a++){var s=t[a],o=r(s);e[o]||(n.push(s),e[o]=!0)}return n}var Q=require("@raycast/api"),le="npm-faves",K=async()=>{let t=await Q.LocalStorage.getItem(le),r=JSON.parse(t??"[]");return ce(r)},Te=async t=>{let r=await K(),n=[t,...r],e=[...new Set(n)];return await Q.LocalStorage.setItem(le,JSON.stringify(e)),await K()},Ht=(t,r)=>{let n=0;for(;n<t.length;)t[n].name===r.name?t.splice(n,1):++n;return t},Ce=async t=>{let r=await K(),n=Ht(r,t);return await Q.LocalStorage.setItem(le,JSON.stringify(n)),await K()},Ie=async()=>(await Q.LocalStorage.setItem(le,JSON.stringify([])),await K());var ue=()=>{let[t,r]=X("favorites",[]),n=async()=>{let e=await K();r(e)};return(0,Ue.useEffect)(()=>{n()},[]),[t,n]};var pt=Z(We()),u=require("@raycast/api");var Ve=(t,r,n)=>t==="github"&&r&&n?`https://github.com/${r}/${n}/releases`:null;var j=require("@raycast/api"),he="npm-history",z=async()=>{let{historyCount:t}=(0,j.getPreferenceValues)(),r=await j.LocalStorage.getItem(he),n=JSON.parse(r??"[]"),e=ce(n);return e.length>Number(t)&&(e.length=Number(t)),e},me=async t=>{let{historyCount:r}=(0,j.getPreferenceValues)(),n=await z(),e=[t,...n],a=[...new Set(e)];return a.length>Number(r)&&(a.length=Number(r)),await j.LocalStorage.setItem(he,JSON.stringify(a)),await z()},Jt=(t,r)=>{let n=0;for(;n<t.length;)t[n].term===r.term&&t[n].type===r.type?t.splice(n,1):++n;return t},pe=async t=>{let r=await z(),n=Jt(r,t);return await j.LocalStorage.setItem(he,JSON.stringify(n)),await z()},He=async()=>(await j.LocalStorage.setItem(he,JSON.stringify([])),await z());var ct=Z(ot());var it=t=>{let r=t.startsWith("git+")?t.slice(4):t;return r=r.endsWith(".git")?r.slice(0,-4):r,r};var lt=t=>{let r={owner:null,name:null,type:void 0,repoUrl:void 0};if(!t)return r;try{try{let f=new URL(t);f.protocol="https:",t=f.toString()}catch{}let n=(0,ct.default)(t),e=it(n.toString("https")),a=e.includes("github.com"),s=e.includes("gitlab.com"),o=n.owner,c=n.name;return{owner:o,name:c,type:a?"github":s?"gitlab":void 0,repoUrl:e}}catch{return r}};var ft=require("@raycast/api");var ge=require("@raycast/api");var ut=(t,r)=>{let n=`https://api.github.com/repos/${t}/${r}/readme`,{data:e,isLoading:a,revalidate:s,error:o}=ie(n,{parseResponse:async c=>{if(c.status===404)throw new Error(`No README found for ${t}/${r}`);if(!c.ok)throw new Error(`Failed to fetch README for ${t}/${r}`);let{content:i}=await c.json();return Buffer.from(i,"base64").toString()},initialData:"Loading README...",onError:c=>{(0,ge.showToast)({style:ge.Toast.Style.Failure,title:`Could not load README for ${t}/${r}`,message:String(c)})}});return{isLoading:a,data:e,revalidate:s,error:o}};var ht=require("react/jsx-runtime"),dt=({user:t,repo:r})=>{let{data:n,isLoading:e}=ut(t,r);return(0,ht.jsx)(ft.Detail,{markdown:n,isLoading:e})};var ye=require("@raycast/api"),ee=require("react/jsx-runtime"),kr=[{name:"Yarn",registry:"yarn",installCommand:"add"},{name:"npm",registry:"npm",installCommand:"install"},{name:"pnpm",registry:"pnpm",installCommand:"install"},{name:"bun",registry:"bun",installCommand:"add"}],vr={macOS:{key:"c",modifiers:["shift","cmd"]},Windows:{key:"c",modifiers:["shift","ctrl"]}},xr={macOS:{key:"c",modifiers:["opt","cmd"]},Windows:{key:"c",modifiers:["alt","ctrl"]}},mt=({packageName:t})=>{let{defaultCopyAction:r,secondaryCopyAction:n}=(0,ye.getPreferenceValues)(),e=kr.sort(a=>{let s=r===a.registry,o=n===a.registry;return s?-1:o?0:1}).map(({name:a,registry:s,installCommand:o})=>{let c=r===s,i=n===s,f=`Copy ${a} Install Command`,d=c?vr:i?xr:void 0;return(0,ee.jsx)(ye.Action.CopyToClipboard,{title:f,content:`${s} ${o} ${t}`,shortcut:d},s)});return(0,ee.jsx)(ee.Fragment,{children:e})};var k=require("react/jsx-runtime"),te=({result:t,setHistory:r,isFavorited:n,handleFaveChange:e,isViewingFavorites:a,isHistoryItem:s})=>{let{defaultOpenAction:o,historyCount:c}=(0,u.getPreferenceValues)(),i=t,{owner:f,name:d,type:l,repoUrl:h}=lt(i.links?.repository),m=Ve(l,f,d),b=async()=>{let y=await me({term:i.name,type:"package",package:t});Number(c)<=0||(r?.(y),(0,u.showToast)(u.Toast.Style.Success,`Added ${t.name} to history`))},p=async()=>{await Te(t),(0,u.showToast)(u.Toast.Style.Success,`Added ${t.name} to faves`),e?.()},w=async()=>{await Ce(t),(0,u.showToast)(u.Toast.Style.Success,`Removed ${t.name} from faves`),e?.()},x=async()=>{await Ie(),(0,u.showToast)(u.Toast.Style.Success,`Removed ${t.name} from faves`),e?.()},P={openRepository:h?(0,k.jsx)(u.Action.OpenInBrowser,{url:h,title:"Open Repository",onOpen:b},"openRepository"):null,openHomepage:i.links?.homepage&&i.links.homepage!==h?(0,k.jsx)(u.Action.OpenInBrowser,{url:i.links.homepage,title:"Open Homepage",icon:u.Icon.Link,onOpen:b},"openHomepage"):null,npmPackagePage:(0,k.jsx)(u.Action.OpenInBrowser,{url:i.links.npm,title:"Open npm Package Page",icon:{source:"command-icon.png"},onOpen:b,shortcut:u.Keyboard.Shortcut.Common.Open},"npmPackagePage"),changelogPackagePage:m?(0,k.jsx)(u.Action.OpenInBrowser,{url:m,title:"Open Changelog"},"openChangelog"):null,skypackPackagePage:(0,k.jsx)(u.Action.OpenInBrowser,{url:`https://www.skypack.dev/view/${i.name}`,title:"Skypack Package Page",onOpen:b},"skypackPackagePage")},A=[i?.keywords?.length?{icon:u.Icon.Tag,tooltip:i.keywords.join(", ")}:{}];return a||(A.push({text:`v${i.version}`,tooltip:"Latest version"},{icon:u.Icon.Calendar,tooltip:`Last updated: ${(0,pt.default)(new Date(i.date))}`}),n&&A.push({icon:u.Icon.Star})),(0,k.jsx)(u.List.Item,{id:i.name,title:i.name,subtitle:i.description,icon:u.Icon.Box,accessories:A,keywords:i.keywords,actions:(0,k.jsxs)(u.ActionPanel,{children:[(0,k.jsx)(u.ActionPanel.Section,{title:"Links",children:Object.entries(P).sort(([y])=>y===o?-1:0).map(([,y])=>y||null).filter(Boolean)}),(0,k.jsxs)(u.ActionPanel.Section,{title:"Actions",children:[n?(0,k.jsx)(u.Action,{title:"Remove from Favorites",onAction:w,icon:u.Icon.StarDisabled,shortcut:{macOS:{modifiers:["cmd","shift"],key:"s"},Windows:{modifiers:["ctrl","shift"],key:"s"}},style:u.Action.Style.Destructive}):(0,k.jsx)(u.Action,{title:"Add to Favorites",onAction:p,icon:u.Icon.Star,shortcut:{macOS:{modifiers:["cmd","shift"],key:"s"},Windows:{modifiers:["ctrl","shift"],key:"s"}}}),a?(0,k.jsx)(u.Action,{title:"Remove All Favorites",onAction:x,icon:u.Icon.Trash,shortcut:{macOS:{modifiers:["cmd","shift"],key:"backspace"},Windows:{modifiers:["ctrl","shift"],key:"backspace"}},style:u.Action.Style.Destructive}):(0,k.jsx)(u.Action.Push,{title:"View Favorites",target:(0,k.jsx)(be,{}),icon:u.Icon.ArrowRight}),s&&(0,k.jsx)(u.Action,{title:"Remove from History",onAction:async()=>{let y=await pe({term:i.name,type:"package"});r?.(y)},icon:u.Icon.XMarkCircle,style:u.Action.Style.Destructive})]}),(0,k.jsxs)(u.ActionPanel.Section,{title:"Info",children:[l==="github"&&f&&d?(0,k.jsx)(u.Action.Push,{title:"View Readme",target:(0,k.jsx)(dt,{user:f,repo:d}),icon:u.Icon.Paragraph}):null,(0,k.jsx)(u.Action.OpenInBrowser,{url:`https://bundlephobia.com/package/${i.name}`,title:"Open Bundlephobia",icon:u.Icon.LevelMeter,shortcut:{macOS:{modifiers:["cmd","shift"],key:"enter"},Windows:{modifiers:["ctrl","shift"],key:"enter"}}}),(0,k.jsx)(u.Action.OpenInBrowser,{url:`https://esm.sh/${i.name}`,title:"Open Esm.sh URL",icon:u.Icon.Cloud,shortcut:{macOS:{modifiers:["cmd","shift"],key:"e"},Windows:{modifiers:["ctrl","shift"],key:"e"}}}),h&&l==="github"?(0,k.jsx)(u.Action.OpenInBrowser,{url:h.replace("github.com","github.dev"),title:"View Code in Github.dev",icon:{source:{light:"github-bright.png",dark:"github-dark.png"}},shortcut:{macOS:{modifiers:["cmd"],key:"."},Windows:{modifiers:["ctrl"],key:"."}}}):null,l==="github"||l==="gitlab"&&f&&d?(0,k.jsx)(u.Action.OpenInBrowser,{url:`https://codesandbox.io/s/${l==="github"?"github":"gitlab"}/${f}/${d}`,title:"View in Codesandbox",icon:{source:{light:"codesandbox-bright.png",dark:"codesandbox-dark.png"}}}):null,(0,k.jsx)(u.Action.OpenInBrowser,{url:`https://snyk.io/vuln/npm:${i.name}`,title:"Open Snyk Vulnerability Check",icon:{source:{light:"snyk-bright.png",dark:"snyk-dark.png"}}})]}),(0,k.jsxs)(u.ActionPanel.Section,{title:"Copy",children:[(0,k.jsx)(mt,{packageName:i.name}),(0,k.jsx)(u.Action.CopyToClipboard,{title:"Copy Package Name",content:i.name}),(0,k.jsx)(u.Action.CopyToClipboard,{title:"Copy Version",content:i.version})]})]})},i.name)};var re=require("react");var I=require("react");function gt(t,r,n,e){var a=this,s=(0,I.useRef)(null),o=(0,I.useRef)(0),c=(0,I.useRef)(0),i=(0,I.useRef)(null),f=(0,I.useRef)([]),d=(0,I.useRef)(),l=(0,I.useRef)(),h=(0,I.useRef)(t),m=(0,I.useRef)(!0);h.current=t;var b=typeof window<"u",p=!r&&r!==0&&b;if(typeof t!="function")throw new TypeError("Expected a function");r=+r||0;var w=!!(n=n||{}).leading,x=!("trailing"in n)||!!n.trailing,P="maxWait"in n,A="debounceOnServer"in n&&!!n.debounceOnServer,y=P?Math.max(+n.maxWait||0,r):null;(0,I.useEffect)(function(){return m.current=!0,function(){m.current=!1}},[]);var F=(0,I.useMemo)(function(){var U=function(S){var E=f.current,$=d.current;return f.current=d.current=null,o.current=S,c.current=c.current||S,l.current=h.current.apply($,E)},L=function(S,E){p&&cancelAnimationFrame(i.current),i.current=p?requestAnimationFrame(S):setTimeout(S,E)},W=function(S){if(!m.current)return!1;var E=S-s.current;return!s.current||E>=r||E<0||P&&S-o.current>=y},V=function(S){return i.current=null,x&&f.current?U(S):(f.current=d.current=null,l.current)},H=function S(){var E=Date.now();if(w&&c.current===o.current&&D(),W(E))return V(E);if(m.current){var $=r-(E-s.current),M=P?Math.min($,y-(E-o.current)):$;L(S,M)}},D=function(){e&&e({})},_=function(){if(b||A){var S=Date.now(),E=W(S);if(f.current=[].slice.call(arguments),d.current=a,s.current=S,E){if(!i.current&&m.current)return o.current=s.current,L(H,r),w?U(s.current):l.current;if(P)return L(H,r),U(s.current)}return i.current||L(H,r),l.current}};return _.cancel=function(){var S=i.current;S&&(p?cancelAnimationFrame(i.current):clearTimeout(i.current)),o.current=0,f.current=s.current=d.current=i.current=null,S&&e&&e({})},_.isPending=function(){return!!i.current},_.flush=function(){return i.current?V(Date.now()):l.current},_},[w,P,r,y,x,p,b,A,e]);return F}var T=require("@raycast/api");var yt=require("react"),C=require("@raycast/api");var J=require("react/jsx-runtime"),bt=({item:t,setHistory:r,setSearchTerm:n})=>{let e=(0,yt.useId)();return(0,J.jsx)(C.List.Item,{title:t.term,icon:t.type==="search"?C.Icon.MagnifyingGlass:C.Icon.Box,actions:(0,J.jsxs)(C.ActionPanel,{children:[(0,J.jsx)(C.Action,{title:"Search Package",onAction:()=>n(t.term),icon:C.Icon.MagnifyingGlass}),(0,J.jsx)(C.Action,{title:"Remove from History",onAction:async()=>{let a=await pe(t);r(a)},icon:C.Icon.XMarkCircle,style:C.Action.Style.Destructive}),(0,J.jsx)(C.Action,{title:"Clear All Items from History",shortcut:{macOS:{modifiers:["cmd"],key:"backspace"},Windows:{modifiers:["ctrl"],key:"backspace"}},onAction:async()=>{await He();let a=await z();r(a)},icon:C.Icon.XMarkCircleFilled,style:C.Action.Style.Destructive})]}),accessories:[{icon:C.Icon.ArrowRightCircle,tooltip:"Search for this package"}]},e)};var R=require("react/jsx-runtime"),Sr="https://registry.npmjs.org/-/v1/search?text=";function ke(){let[t,r]=(0,re.useState)(""),[n,e]=X("history",[]),[a,s]=ue(),{historyCount:o,showLinkToSearchResultsInListView:c}=(0,T.getPreferenceValues)(),{isLoading:i,data:f,revalidate:d}=ie(`${Sr}${t.replace(/\s/g,"+")}`,{execute:!!t,onError:h=>{t&&(console.error(h),(0,T.showToast)(T.Toast.Style.Failure,"Could not fetch packages"))},parseResponse:async h=>(await h.json()).objects,keepPreviousData:!0}),l=gt(async h=>{let m=await me({term:h,type:"search"});e(m)},600,{debounceOnServer:!0});return(0,re.useEffect)(()=>{t?l(t):d()},[t]),(0,re.useEffect)(()=>{async function h(){let m=await z();e(m)}h()},[]),(0,R.jsx)(T.List,{searchText:t,isLoading:i,searchBarPlaceholder:'Search packages, like "promises"\u2026',onSearchTextChange:r,children:t?(0,R.jsx)(R.Fragment,{children:f?.length?(0,R.jsxs)(R.Fragment,{children:[c?(0,R.jsx)(T.List.Item,{title:`View search results for "${t}" on npmjs.com`,icon:T.Icon.MagnifyingGlass,actions:(0,R.jsx)(T.ActionPanel,{children:(0,R.jsx)(T.Action.OpenInBrowser,{url:`https://www.npmjs.com/search?q=${t}`,title:"View npm Search Results"})})}):null,(0,R.jsx)(T.List.Section,{title:"Results",subtitle:f.length.toString(),children:f.map(h=>h.package.name?(0,R.jsx)(te,{result:h.package,searchTerm:t,setHistory:e,isFavorited:a.findIndex(m=>m.name===h.package.name)!==-1,handleFaveChange:s},`search-${h.package.name}`):null)})]}):null}):(0,R.jsx)(R.Fragment,{children:Number(o)>0?n.length?(0,R.jsx)(T.List.Section,{title:"History",children:n.map(h=>{if(h.type==="package"&&h?.package?.name){let m=h.package.name;return(0,R.jsx)(te,{result:h.package,searchTerm:t,setHistory:e,isFavorited:a.findIndex(b=>b.name===m)!==-1,handleFaveChange:s,isHistoryItem:!0},`history-${m}`)}return(0,R.jsx)(bt,{item:h,setHistory:e,setSearchTerm:r},`history-${h.term}-${h.type}`)})}):(0,R.jsx)(T.List.EmptyView,{title:"Type something to get started"}):null})})}var B=require("react/jsx-runtime");function be(){let[t,r]=ue();return(0,B.jsx)(G.List,{searchBarPlaceholder:"Filter your favorite packages\u2026",children:t?.length?(0,B.jsx)(G.List.Section,{title:"Favorites",subtitle:t.length.toString(),children:t.map(n=>(0,B.jsx)(te,{result:n,isFavorited:t.findIndex(e=>e.name===n.name)!==-1,handleFaveChange:r,isViewingFavorites:!0},n.name))}):(0,B.jsx)(G.List.EmptyView,{title:"No favorites yet. Search for a package to add it to your favorites.",actions:(0,B.jsx)(G.ActionPanel,{children:(0,B.jsx)(G.Action.Push,{title:"Search npm",target:(0,B.jsx)(ke,{})})})})})}
/*! Bundled license information:

git-url-parse/lib/index.js:
  (*!
   * buildToken
   * Builds OAuth token prefix (helper function)
   *
   * @name buildToken
   * @function
   * @param {GitUrl} obj The parsed Git url object.
   * @return {String} token prefix
   *)
*/
