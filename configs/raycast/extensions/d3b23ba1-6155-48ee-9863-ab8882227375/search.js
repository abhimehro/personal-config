"use strict";var $s=Object.create;var Ne=Object.defineProperty;var bs=Object.getOwnPropertyDescriptor;var ys=Object.getOwnPropertyNames;var ws=Object.getPrototypeOf,Es=Object.prototype.hasOwnProperty;var $=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),ks=(e,t)=>{for(var r in t)Ne(e,r,{get:t[r],enumerable:!0})},qt=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of ys(t))!Es.call(e,s)&&s!==r&&Ne(e,s,{get:()=>t[s],enumerable:!(n=bs(t,s))||n.enumerable});return e};var J=(e,t,r)=>(r=e!=null?$s(ws(e)):{},qt(t||!e||!e.__esModule?Ne(r,"default",{value:e,enumerable:!0}):r,e)),Ss=e=>qt(Ne({},"__esModule",{value:!0}),e);var Re=$((el,kr)=>{"use strict";var ua="2.0.0",fa=Number.MAX_SAFE_INTEGER||9007199254740991,da=16,ha=250,pa=["major","premajor","minor","preminor","patch","prepatch","prerelease"];kr.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:da,MAX_SAFE_BUILD_LENGTH:ha,MAX_SAFE_INTEGER:fa,RELEASE_TYPES:pa,SEMVER_SPEC_VERSION:ua,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var ve=$((tl,Sr)=>{"use strict";var ma=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};Sr.exports=ma});var we=$((Y,xr)=>{"use strict";var{MAX_SAFE_COMPONENT_LENGTH:bt,MAX_SAFE_BUILD_LENGTH:ga,MAX_LENGTH:$a}=Re(),ba=ve();Y=xr.exports={};var ya=Y.re=[],wa=Y.safeRe=[],h=Y.src=[],Ea=Y.safeSrc=[],p=Y.t={},ka=0,yt="[a-zA-Z0-9-]",Sa=[["\\s",1],["\\d",$a],[yt,ga]],xa=e=>{for(let[t,r]of Sa)e=e.split(`${t}*`).join(`${t}{0,${r}}`).split(`${t}+`).join(`${t}{1,${r}}`);return e},y=(e,t,r)=>{let n=xa(t),s=ka++;ba(e,s,t),p[e]=s,h[s]=t,Ea[s]=n,ya[s]=new RegExp(t,r?"g":void 0),wa[s]=new RegExp(n,r?"g":void 0)};y("NUMERICIDENTIFIER","0|[1-9]\\d*");y("NUMERICIDENTIFIERLOOSE","\\d+");y("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${yt}*`);y("MAINVERSION",`(${h[p.NUMERICIDENTIFIER]})\\.(${h[p.NUMERICIDENTIFIER]})\\.(${h[p.NUMERICIDENTIFIER]})`);y("MAINVERSIONLOOSE",`(${h[p.NUMERICIDENTIFIERLOOSE]})\\.(${h[p.NUMERICIDENTIFIERLOOSE]})\\.(${h[p.NUMERICIDENTIFIERLOOSE]})`);y("PRERELEASEIDENTIFIER",`(?:${h[p.NONNUMERICIDENTIFIER]}|${h[p.NUMERICIDENTIFIER]})`);y("PRERELEASEIDENTIFIERLOOSE",`(?:${h[p.NONNUMERICIDENTIFIER]}|${h[p.NUMERICIDENTIFIERLOOSE]})`);y("PRERELEASE",`(?:-(${h[p.PRERELEASEIDENTIFIER]}(?:\\.${h[p.PRERELEASEIDENTIFIER]})*))`);y("PRERELEASELOOSE",`(?:-?(${h[p.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${h[p.PRERELEASEIDENTIFIERLOOSE]})*))`);y("BUILDIDENTIFIER",`${yt}+`);y("BUILD",`(?:\\+(${h[p.BUILDIDENTIFIER]}(?:\\.${h[p.BUILDIDENTIFIER]})*))`);y("FULLPLAIN",`v?${h[p.MAINVERSION]}${h[p.PRERELEASE]}?${h[p.BUILD]}?`);y("FULL",`^${h[p.FULLPLAIN]}$`);y("LOOSEPLAIN",`[v=\\s]*${h[p.MAINVERSIONLOOSE]}${h[p.PRERELEASELOOSE]}?${h[p.BUILD]}?`);y("LOOSE",`^${h[p.LOOSEPLAIN]}$`);y("GTLT","((?:<|>)?=?)");y("XRANGEIDENTIFIERLOOSE",`${h[p.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);y("XRANGEIDENTIFIER",`${h[p.NUMERICIDENTIFIER]}|x|X|\\*`);y("XRANGEPLAIN",`[v=\\s]*(${h[p.XRANGEIDENTIFIER]})(?:\\.(${h[p.XRANGEIDENTIFIER]})(?:\\.(${h[p.XRANGEIDENTIFIER]})(?:${h[p.PRERELEASE]})?${h[p.BUILD]}?)?)?`);y("XRANGEPLAINLOOSE",`[v=\\s]*(${h[p.XRANGEIDENTIFIERLOOSE]})(?:\\.(${h[p.XRANGEIDENTIFIERLOOSE]})(?:\\.(${h[p.XRANGEIDENTIFIERLOOSE]})(?:${h[p.PRERELEASELOOSE]})?${h[p.BUILD]}?)?)?`);y("XRANGE",`^${h[p.GTLT]}\\s*${h[p.XRANGEPLAIN]}$`);y("XRANGELOOSE",`^${h[p.GTLT]}\\s*${h[p.XRANGEPLAINLOOSE]}$`);y("COERCEPLAIN",`(^|[^\\d])(\\d{1,${bt}})(?:\\.(\\d{1,${bt}}))?(?:\\.(\\d{1,${bt}}))?`);y("COERCE",`${h[p.COERCEPLAIN]}(?:$|[^\\d])`);y("COERCEFULL",h[p.COERCEPLAIN]+`(?:${h[p.PRERELEASE]})?(?:${h[p.BUILD]})?(?:$|[^\\d])`);y("COERCERTL",h[p.COERCE],!0);y("COERCERTLFULL",h[p.COERCEFULL],!0);y("LONETILDE","(?:~>?)");y("TILDETRIM",`(\\s*)${h[p.LONETILDE]}\\s+`,!0);Y.tildeTrimReplace="$1~";y("TILDE",`^${h[p.LONETILDE]}${h[p.XRANGEPLAIN]}$`);y("TILDELOOSE",`^${h[p.LONETILDE]}${h[p.XRANGEPLAINLOOSE]}$`);y("LONECARET","(?:\\^)");y("CARETTRIM",`(\\s*)${h[p.LONECARET]}\\s+`,!0);Y.caretTrimReplace="$1^";y("CARET",`^${h[p.LONECARET]}${h[p.XRANGEPLAIN]}$`);y("CARETLOOSE",`^${h[p.LONECARET]}${h[p.XRANGEPLAINLOOSE]}$`);y("COMPARATORLOOSE",`^${h[p.GTLT]}\\s*(${h[p.LOOSEPLAIN]})$|^$`);y("COMPARATOR",`^${h[p.GTLT]}\\s*(${h[p.FULLPLAIN]})$|^$`);y("COMPARATORTRIM",`(\\s*)${h[p.GTLT]}\\s*(${h[p.LOOSEPLAIN]}|${h[p.XRANGEPLAIN]})`,!0);Y.comparatorTrimReplace="$1$2$3";y("HYPHENRANGE",`^\\s*(${h[p.XRANGEPLAIN]})\\s+-\\s+(${h[p.XRANGEPLAIN]})\\s*$`);y("HYPHENRANGELOOSE",`^\\s*(${h[p.XRANGEPLAINLOOSE]})\\s+-\\s+(${h[p.XRANGEPLAINLOOSE]})\\s*$`);y("STAR","(<|>)?=?\\s*\\*");y("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");y("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var We=$((rl,Rr)=>{"use strict";var Ra=Object.freeze({loose:!0}),va=Object.freeze({}),Ia=e=>e?typeof e!="object"?Ra:e:va;Rr.exports=Ia});var wt=$((nl,Ar)=>{"use strict";var vr=/^[0-9]+$/,Ir=(e,t)=>{if(typeof e=="number"&&typeof t=="number")return e===t?0:e<t?-1:1;let r=vr.test(e),n=vr.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1},Aa=(e,t)=>Ir(t,e);Ar.exports={compareIdentifiers:Ir,rcompareIdentifiers:Aa}});var P=$((sl,Lr)=>{"use strict";var Ge=ve(),{MAX_LENGTH:Tr,MAX_SAFE_INTEGER:ze}=Re(),{safeRe:He,t:Ke}=we(),Ta=We(),{compareIdentifiers:Et}=wt(),kt=class e{constructor(t,r){if(r=Ta(r),t instanceof e){if(t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>Tr)throw new TypeError(`version is longer than ${Tr} characters`);Ge("SemVer",t,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=t.trim().match(r.loose?He[Ke.LOOSE]:He[Ke.FULL]);if(!n)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>ze||this.major<0)throw new TypeError("Invalid major version");if(this.minor>ze||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>ze||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(s=>{if(/^[0-9]+$/.test(s)){let a=+s;if(a>=0&&a<ze)return a}return s}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(Ge("SemVer.compare",this.version,this.options,t),!(t instanceof e)){if(typeof t=="string"&&t===this.version)return 0;t=new e(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof e||(t=new e(t,this.options)),this.major<t.major?-1:this.major>t.major?1:this.minor<t.minor?-1:this.minor>t.minor?1:this.patch<t.patch?-1:this.patch>t.patch?1:0}comparePre(t){if(t instanceof e||(t=new e(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],s=t.prerelease[r];if(Ge("prerelease compare",r,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return Et(n,s)}while(++r)}compareBuild(t){t instanceof e||(t=new e(t,this.options));let r=0;do{let n=this.build[r],s=t.build[r];if(Ge("build compare",r,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return Et(n,s)}while(++r)}inc(t,r,n){if(t.startsWith("pre")){if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(r){let s=`-${r}`.match(this.options.loose?He[Ke.PRERELEASELOOSE]:He[Ke.PRERELEASE]);if(!s||s[1]!==r)throw new Error(`invalid identifier: ${r}`)}}switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let s=Number(n)?1:0;if(this.prerelease.length===0)this.prerelease=[s];else{let a=this.prerelease.length;for(;--a>=0;)typeof this.prerelease[a]=="number"&&(this.prerelease[a]++,a=-2);if(a===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(s)}}if(r){let a=[r,s];n===!1&&(a=[r]),Et(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=a):this.prerelease=a}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};Lr.exports=kt});var ie=$((al,Cr)=>{"use strict";var Or=P(),La=(e,t,r=!1)=>{if(e instanceof Or)return e;try{return new Or(e,t)}catch(n){if(!r)return null;throw n}};Cr.exports=La});var Nr=$((il,Pr)=>{"use strict";var Oa=ie(),Ca=(e,t)=>{let r=Oa(e,t);return r?r.version:null};Pr.exports=Ca});var _r=$((ol,Ur)=>{"use strict";var Pa=ie(),Na=(e,t)=>{let r=Pa(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null};Ur.exports=Na});var Mr=$((cl,Fr)=>{"use strict";var Dr=P(),Ua=(e,t,r,n,s)=>{typeof r=="string"&&(s=n,n=r,r=void 0);try{return new Dr(e instanceof Dr?e.version:e,r).inc(t,n,s).version}catch{return null}};Fr.exports=Ua});var jr=$((ll,qr)=>{"use strict";var Vr=ie(),_a=(e,t)=>{let r=Vr(e,null,!0),n=Vr(t,null,!0),s=r.compare(n);if(s===0)return null;let a=s>0,i=a?r:n,c=a?n:r,o=!!i.prerelease.length;if(!!c.prerelease.length&&!o){if(!c.patch&&!c.minor)return"major";if(c.compareMain(i)===0)return c.minor&&!c.patch?"minor":"patch"}let f=o?"pre":"";return r.major!==n.major?f+"major":r.minor!==n.minor?f+"minor":r.patch!==n.patch?f+"patch":"prerelease"};qr.exports=_a});var Wr=$((ul,Br)=>{"use strict";var Da=P(),Fa=(e,t)=>new Da(e,t).major;Br.exports=Fa});var zr=$((fl,Gr)=>{"use strict";var Ma=P(),Va=(e,t)=>new Ma(e,t).minor;Gr.exports=Va});var Kr=$((dl,Hr)=>{"use strict";var qa=P(),ja=(e,t)=>new qa(e,t).patch;Hr.exports=ja});var Zr=$((hl,Xr)=>{"use strict";var Ba=ie(),Wa=(e,t)=>{let r=Ba(e,t);return r&&r.prerelease.length?r.prerelease:null};Xr.exports=Wa});var z=$((pl,Yr)=>{"use strict";var Jr=P(),Ga=(e,t,r)=>new Jr(e,r).compare(new Jr(t,r));Yr.exports=Ga});var en=$((ml,Qr)=>{"use strict";var za=z(),Ha=(e,t,r)=>za(t,e,r);Qr.exports=Ha});var rn=$((gl,tn)=>{"use strict";var Ka=z(),Xa=(e,t)=>Ka(e,t,!0);tn.exports=Xa});var Xe=$(($l,sn)=>{"use strict";var nn=P(),Za=(e,t,r)=>{let n=new nn(e,r),s=new nn(t,r);return n.compare(s)||n.compareBuild(s)};sn.exports=Za});var on=$((bl,an)=>{"use strict";var Ja=Xe(),Ya=(e,t)=>e.sort((r,n)=>Ja(r,n,t));an.exports=Ya});var ln=$((yl,cn)=>{"use strict";var Qa=Xe(),ei=(e,t)=>e.sort((r,n)=>Qa(n,r,t));cn.exports=ei});var Ie=$((wl,un)=>{"use strict";var ti=z(),ri=(e,t,r)=>ti(e,t,r)>0;un.exports=ri});var Ze=$((El,fn)=>{"use strict";var ni=z(),si=(e,t,r)=>ni(e,t,r)<0;fn.exports=si});var St=$((kl,dn)=>{"use strict";var ai=z(),ii=(e,t,r)=>ai(e,t,r)===0;dn.exports=ii});var xt=$((Sl,hn)=>{"use strict";var oi=z(),ci=(e,t,r)=>oi(e,t,r)!==0;hn.exports=ci});var Je=$((xl,pn)=>{"use strict";var li=z(),ui=(e,t,r)=>li(e,t,r)>=0;pn.exports=ui});var Ye=$((Rl,mn)=>{"use strict";var fi=z(),di=(e,t,r)=>fi(e,t,r)<=0;mn.exports=di});var Rt=$((vl,gn)=>{"use strict";var hi=St(),pi=xt(),mi=Ie(),gi=Je(),$i=Ze(),bi=Ye(),yi=(e,t,r,n)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e===r;case"!==":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return hi(e,r,n);case"!=":return pi(e,r,n);case">":return mi(e,r,n);case">=":return gi(e,r,n);case"<":return $i(e,r,n);case"<=":return bi(e,r,n);default:throw new TypeError(`Invalid operator: ${t}`)}};gn.exports=yi});var bn=$((Il,$n)=>{"use strict";var wi=P(),Ei=ie(),{safeRe:Qe,t:et}=we(),ki=(e,t)=>{if(e instanceof wi)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;t=t||{};let r=null;if(!t.rtl)r=e.match(t.includePrerelease?Qe[et.COERCEFULL]:Qe[et.COERCE]);else{let o=t.includePrerelease?Qe[et.COERCERTLFULL]:Qe[et.COERCERTL],u;for(;(u=o.exec(e))&&(!r||r.index+r[0].length!==e.length);)(!r||u.index+u[0].length!==r.index+r[0].length)&&(r=u),o.lastIndex=u.index+u[1].length+u[2].length;o.lastIndex=-1}if(r===null)return null;let n=r[2],s=r[3]||"0",a=r[4]||"0",i=t.includePrerelease&&r[5]?`-${r[5]}`:"",c=t.includePrerelease&&r[6]?`+${r[6]}`:"";return Ei(`${n}.${s}.${a}${i}${c}`,t)};$n.exports=ki});var wn=$((Al,yn)=>{"use strict";var vt=class{constructor(){this.max=1e3,this.map=new Map}get(t){let r=this.map.get(t);if(r!==void 0)return this.map.delete(t),this.map.set(t,r),r}delete(t){return this.map.delete(t)}set(t,r){if(!this.delete(t)&&r!==void 0){if(this.map.size>=this.max){let s=this.map.keys().next().value;this.delete(s)}this.map.set(t,r)}return this}};yn.exports=vt});var H=$((Tl,xn)=>{"use strict";var Si=/\s+/g,It=class e{constructor(t,r){if(r=Ri(r),t instanceof e)return t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease?t:new e(t.raw,r);if(t instanceof At)return this.raw=t.value,this.set=[[t]],this.formatted=void 0,this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=t.trim().replace(Si," "),this.set=this.raw.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(s=>!kn(s[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let s of this.set)if(s.length===1&&Ci(s[0])){this.set=[s];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let t=0;t<this.set.length;t++){t>0&&(this.formatted+="||");let r=this.set[t];for(let n=0;n<r.length;n++)n>0&&(this.formatted+=" "),this.formatted+=r[n].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(t){let n=((this.options.includePrerelease&&Li)|(this.options.loose&&Oi))+":"+t,s=En.get(n);if(s)return s;let a=this.options.loose,i=a?M[N.HYPHENRANGELOOSE]:M[N.HYPHENRANGE];t=t.replace(i,ji(this.options.includePrerelease)),I("hyphen replace",t),t=t.replace(M[N.COMPARATORTRIM],Ii),I("comparator trim",t),t=t.replace(M[N.TILDETRIM],Ai),I("tilde trim",t),t=t.replace(M[N.CARETTRIM],Ti),I("caret trim",t);let c=t.split(" ").map(l=>Pi(l,this.options)).join(" ").split(/\s+/).map(l=>qi(l,this.options));a&&(c=c.filter(l=>(I("loose invalid filter",l,this.options),!!l.match(M[N.COMPARATORLOOSE])))),I("range list",c);let o=new Map,u=c.map(l=>new At(l,this.options));for(let l of u){if(kn(l))return[l];o.set(l.value,l)}o.size>1&&o.has("")&&o.delete("");let f=[...o.values()];return En.set(n,f),f}intersects(t,r){if(!(t instanceof e))throw new TypeError("a Range is required");return this.set.some(n=>Sn(n,r)&&t.set.some(s=>Sn(s,r)&&n.every(a=>s.every(i=>a.intersects(i,r)))))}test(t){if(!t)return!1;if(typeof t=="string")try{t=new vi(t,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(Bi(this.set[r],t,this.options))return!0;return!1}};xn.exports=It;var xi=wn(),En=new xi,Ri=We(),At=Ae(),I=ve(),vi=P(),{safeRe:M,t:N,comparatorTrimReplace:Ii,tildeTrimReplace:Ai,caretTrimReplace:Ti}=we(),{FLAG_INCLUDE_PRERELEASE:Li,FLAG_LOOSE:Oi}=Re(),kn=e=>e.value==="<0.0.0-0",Ci=e=>e.value==="",Sn=(e,t)=>{let r=!0,n=e.slice(),s=n.pop();for(;r&&n.length;)r=n.every(a=>s.intersects(a,t)),s=n.pop();return r},Pi=(e,t)=>(e=e.replace(M[N.BUILD],""),I("comp",e,t),e=_i(e,t),I("caret",e),e=Ni(e,t),I("tildes",e),e=Fi(e,t),I("xrange",e),e=Vi(e,t),I("stars",e),e),V=e=>!e||e.toLowerCase()==="x"||e==="*",Ni=(e,t)=>e.trim().split(/\s+/).map(r=>Ui(r,t)).join(" "),Ui=(e,t)=>{let r=t.loose?M[N.TILDELOOSE]:M[N.TILDE];return e.replace(r,(n,s,a,i,c)=>{I("tilde",e,n,s,a,i,c);let o;return V(s)?o="":V(a)?o=`>=${s}.0.0 <${+s+1}.0.0-0`:V(i)?o=`>=${s}.${a}.0 <${s}.${+a+1}.0-0`:c?(I("replaceTilde pr",c),o=`>=${s}.${a}.${i}-${c} <${s}.${+a+1}.0-0`):o=`>=${s}.${a}.${i} <${s}.${+a+1}.0-0`,I("tilde return",o),o})},_i=(e,t)=>e.trim().split(/\s+/).map(r=>Di(r,t)).join(" "),Di=(e,t)=>{I("caret",e,t);let r=t.loose?M[N.CARETLOOSE]:M[N.CARET],n=t.includePrerelease?"-0":"";return e.replace(r,(s,a,i,c,o)=>{I("caret",e,s,a,i,c,o);let u;return V(a)?u="":V(i)?u=`>=${a}.0.0${n} <${+a+1}.0.0-0`:V(c)?a==="0"?u=`>=${a}.${i}.0${n} <${a}.${+i+1}.0-0`:u=`>=${a}.${i}.0${n} <${+a+1}.0.0-0`:o?(I("replaceCaret pr",o),a==="0"?i==="0"?u=`>=${a}.${i}.${c}-${o} <${a}.${i}.${+c+1}-0`:u=`>=${a}.${i}.${c}-${o} <${a}.${+i+1}.0-0`:u=`>=${a}.${i}.${c}-${o} <${+a+1}.0.0-0`):(I("no pr"),a==="0"?i==="0"?u=`>=${a}.${i}.${c}${n} <${a}.${i}.${+c+1}-0`:u=`>=${a}.${i}.${c}${n} <${a}.${+i+1}.0-0`:u=`>=${a}.${i}.${c} <${+a+1}.0.0-0`),I("caret return",u),u})},Fi=(e,t)=>(I("replaceXRanges",e,t),e.split(/\s+/).map(r=>Mi(r,t)).join(" ")),Mi=(e,t)=>{e=e.trim();let r=t.loose?M[N.XRANGELOOSE]:M[N.XRANGE];return e.replace(r,(n,s,a,i,c,o)=>{I("xRange",e,n,s,a,i,c,o);let u=V(a),f=u||V(i),l=f||V(c),m=l;return s==="="&&m&&(s=""),o=t.includePrerelease?"-0":"",u?s===">"||s==="<"?n="<0.0.0-0":n="*":s&&m?(f&&(i=0),c=0,s===">"?(s=">=",f?(a=+a+1,i=0,c=0):(i=+i+1,c=0)):s==="<="&&(s="<",f?a=+a+1:i=+i+1),s==="<"&&(o="-0"),n=`${s+a}.${i}.${c}${o}`):f?n=`>=${a}.0.0${o} <${+a+1}.0.0-0`:l&&(n=`>=${a}.${i}.0${o} <${a}.${+i+1}.0-0`),I("xRange return",n),n})},Vi=(e,t)=>(I("replaceStars",e,t),e.trim().replace(M[N.STAR],"")),qi=(e,t)=>(I("replaceGTE0",e,t),e.trim().replace(M[t.includePrerelease?N.GTE0PRE:N.GTE0],"")),ji=e=>(t,r,n,s,a,i,c,o,u,f,l,m)=>(V(n)?r="":V(s)?r=`>=${n}.0.0${e?"-0":""}`:V(a)?r=`>=${n}.${s}.0${e?"-0":""}`:i?r=`>=${r}`:r=`>=${r}${e?"-0":""}`,V(u)?o="":V(f)?o=`<${+u+1}.0.0-0`:V(l)?o=`<${u}.${+f+1}.0-0`:m?o=`<=${u}.${f}.${l}-${m}`:e?o=`<${u}.${f}.${+l+1}-0`:o=`<=${o}`,`${r} ${o}`.trim()),Bi=(e,t,r)=>{for(let n=0;n<e.length;n++)if(!e[n].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let n=0;n<e.length;n++)if(I(e[n].semver),e[n].semver!==At.ANY&&e[n].semver.prerelease.length>0){let s=e[n].semver;if(s.major===t.major&&s.minor===t.minor&&s.patch===t.patch)return!0}return!1}return!0}});var Ae=$((Ll,Ln)=>{"use strict";var Te=Symbol("SemVer ANY"),Ot=class e{static get ANY(){return Te}constructor(t,r){if(r=Rn(r),t instanceof e){if(t.loose===!!r.loose)return t;t=t.value}t=t.trim().split(/\s+/).join(" "),Lt("comparator",t,r),this.options=r,this.loose=!!r.loose,this.parse(t),this.semver===Te?this.value="":this.value=this.operator+this.semver.version,Lt("comp",this)}parse(t){let r=this.options.loose?vn[In.COMPARATORLOOSE]:vn[In.COMPARATOR],n=t.match(r);if(!n)throw new TypeError(`Invalid comparator: ${t}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new An(n[2],this.options.loose):this.semver=Te}toString(){return this.value}test(t){if(Lt("Comparator.test",t,this.options.loose),this.semver===Te||t===Te)return!0;if(typeof t=="string")try{t=new An(t,this.options)}catch{return!1}return Tt(t,this.operator,this.semver,this.options)}intersects(t,r){if(!(t instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new Tn(t.value,r).test(this.value):t.operator===""?t.value===""?!0:new Tn(this.value,r).test(t.semver):(r=Rn(r),r.includePrerelease&&(this.value==="<0.0.0-0"||t.value==="<0.0.0-0")||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||t.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&t.operator.startsWith(">")||this.operator.startsWith("<")&&t.operator.startsWith("<")||this.semver.version===t.semver.version&&this.operator.includes("=")&&t.operator.includes("=")||Tt(this.semver,"<",t.semver,r)&&this.operator.startsWith(">")&&t.operator.startsWith("<")||Tt(this.semver,">",t.semver,r)&&this.operator.startsWith("<")&&t.operator.startsWith(">")))}};Ln.exports=Ot;var Rn=We(),{safeRe:vn,t:In}=we(),Tt=Rt(),Lt=ve(),An=P(),Tn=H()});var Le=$((Ol,On)=>{"use strict";var Wi=H(),Gi=(e,t,r)=>{try{t=new Wi(t,r)}catch{return!1}return t.test(e)};On.exports=Gi});var Pn=$((Cl,Cn)=>{"use strict";var zi=H(),Hi=(e,t)=>new zi(e,t).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));Cn.exports=Hi});var Un=$((Pl,Nn)=>{"use strict";var Ki=P(),Xi=H(),Zi=(e,t,r)=>{let n=null,s=null,a=null;try{a=new Xi(t,r)}catch{return null}return e.forEach(i=>{a.test(i)&&(!n||s.compare(i)===-1)&&(n=i,s=new Ki(n,r))}),n};Nn.exports=Zi});var Dn=$((Nl,_n)=>{"use strict";var Ji=P(),Yi=H(),Qi=(e,t,r)=>{let n=null,s=null,a=null;try{a=new Yi(t,r)}catch{return null}return e.forEach(i=>{a.test(i)&&(!n||s.compare(i)===1)&&(n=i,s=new Ji(n,r))}),n};_n.exports=Qi});var Vn=$((Ul,Mn)=>{"use strict";var Ct=P(),eo=H(),Fn=Ie(),to=(e,t)=>{e=new eo(e,t);let r=new Ct("0.0.0");if(e.test(r)||(r=new Ct("0.0.0-0"),e.test(r)))return r;r=null;for(let n=0;n<e.set.length;++n){let s=e.set[n],a=null;s.forEach(i=>{let c=new Ct(i.semver.version);switch(i.operator){case">":c.prerelease.length===0?c.patch++:c.prerelease.push(0),c.raw=c.format();case"":case">=":(!a||Fn(c,a))&&(a=c);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${i.operator}`)}}),a&&(!r||Fn(r,a))&&(r=a)}return r&&e.test(r)?r:null};Mn.exports=to});var jn=$((_l,qn)=>{"use strict";var ro=H(),no=(e,t)=>{try{return new ro(e,t).range||"*"}catch{return null}};qn.exports=no});var tt=$((Dl,zn)=>{"use strict";var so=P(),Gn=Ae(),{ANY:ao}=Gn,io=H(),oo=Le(),Bn=Ie(),Wn=Ze(),co=Ye(),lo=Je(),uo=(e,t,r,n)=>{e=new so(e,n),t=new io(t,n);let s,a,i,c,o;switch(r){case">":s=Bn,a=co,i=Wn,c=">",o=">=";break;case"<":s=Wn,a=lo,i=Bn,c="<",o="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(oo(e,t,n))return!1;for(let u=0;u<t.set.length;++u){let f=t.set[u],l=null,m=null;if(f.forEach(d=>{d.semver===ao&&(d=new Gn(">=0.0.0")),l=l||d,m=m||d,s(d.semver,l.semver,n)?l=d:i(d.semver,m.semver,n)&&(m=d)}),l.operator===c||l.operator===o||(!m.operator||m.operator===c)&&a(e,m.semver))return!1;if(m.operator===o&&i(e,m.semver))return!1}return!0};zn.exports=uo});var Kn=$((Fl,Hn)=>{"use strict";var fo=tt(),ho=(e,t,r)=>fo(e,t,">",r);Hn.exports=ho});var Zn=$((Ml,Xn)=>{"use strict";var po=tt(),mo=(e,t,r)=>po(e,t,"<",r);Xn.exports=mo});var Qn=$((Vl,Yn)=>{"use strict";var Jn=H(),go=(e,t,r)=>(e=new Jn(e,r),t=new Jn(t,r),e.intersects(t,r));Yn.exports=go});var ts=$((ql,es)=>{"use strict";var $o=Le(),bo=z();es.exports=(e,t,r)=>{let n=[],s=null,a=null,i=e.sort((f,l)=>bo(f,l,r));for(let f of i)$o(f,t,r)?(a=f,s||(s=f)):(a&&n.push([s,a]),a=null,s=null);s&&n.push([s,null]);let c=[];for(let[f,l]of n)f===l?c.push(f):!l&&f===i[0]?c.push("*"):l?f===i[0]?c.push(`<=${l}`):c.push(`${f} - ${l}`):c.push(`>=${f}`);let o=c.join(" || "),u=typeof t.raw=="string"?t.raw:String(t);return o.length<u.length?o:t}});var os=$((jl,is)=>{"use strict";var rs=H(),Nt=Ae(),{ANY:Pt}=Nt,Oe=Le(),Ut=z(),yo=(e,t,r={})=>{if(e===t)return!0;e=new rs(e,r),t=new rs(t,r);let n=!1;e:for(let s of e.set){for(let a of t.set){let i=Eo(s,a,r);if(n=n||i!==null,i)continue e}if(n)return!1}return!0},wo=[new Nt(">=0.0.0-0")],ns=[new Nt(">=0.0.0")],Eo=(e,t,r)=>{if(e===t)return!0;if(e.length===1&&e[0].semver===Pt){if(t.length===1&&t[0].semver===Pt)return!0;r.includePrerelease?e=wo:e=ns}if(t.length===1&&t[0].semver===Pt){if(r.includePrerelease)return!0;t=ns}let n=new Set,s,a;for(let d of e)d.operator===">"||d.operator===">="?s=ss(s,d,r):d.operator==="<"||d.operator==="<="?a=as(a,d,r):n.add(d.semver);if(n.size>1)return null;let i;if(s&&a){if(i=Ut(s.semver,a.semver,r),i>0)return null;if(i===0&&(s.operator!==">="||a.operator!=="<="))return null}for(let d of n){if(s&&!Oe(d,String(s),r)||a&&!Oe(d,String(a),r))return null;for(let T of t)if(!Oe(d,String(T),r))return!1;return!0}let c,o,u,f,l=a&&!r.includePrerelease&&a.semver.prerelease.length?a.semver:!1,m=s&&!r.includePrerelease&&s.semver.prerelease.length?s.semver:!1;l&&l.prerelease.length===1&&a.operator==="<"&&l.prerelease[0]===0&&(l=!1);for(let d of t){if(f=f||d.operator===">"||d.operator===">=",u=u||d.operator==="<"||d.operator==="<=",s){if(m&&d.semver.prerelease&&d.semver.prerelease.length&&d.semver.major===m.major&&d.semver.minor===m.minor&&d.semver.patch===m.patch&&(m=!1),d.operator===">"||d.operator===">="){if(c=ss(s,d,r),c===d&&c!==s)return!1}else if(s.operator===">="&&!Oe(s.semver,String(d),r))return!1}if(a){if(l&&d.semver.prerelease&&d.semver.prerelease.length&&d.semver.major===l.major&&d.semver.minor===l.minor&&d.semver.patch===l.patch&&(l=!1),d.operator==="<"||d.operator==="<="){if(o=as(a,d,r),o===d&&o!==a)return!1}else if(a.operator==="<="&&!Oe(a.semver,String(d),r))return!1}if(!d.operator&&(a||s)&&i!==0)return!1}return!(s&&u&&!a&&i!==0||a&&f&&!s&&i!==0||m||l)},ss=(e,t,r)=>{if(!e)return t;let n=Ut(e.semver,t.semver,r);return n>0?e:n<0||t.operator===">"&&e.operator===">="?t:e},as=(e,t,r)=>{if(!e)return t;let n=Ut(e.semver,t.semver,r);return n<0?e:n>0||t.operator==="<"&&e.operator==="<="?t:e};is.exports=yo});var fs=$((Bl,us)=>{"use strict";var _t=we(),cs=Re(),ko=P(),ls=wt(),So=ie(),xo=Nr(),Ro=_r(),vo=Mr(),Io=jr(),Ao=Wr(),To=zr(),Lo=Kr(),Oo=Zr(),Co=z(),Po=en(),No=rn(),Uo=Xe(),_o=on(),Do=ln(),Fo=Ie(),Mo=Ze(),Vo=St(),qo=xt(),jo=Je(),Bo=Ye(),Wo=Rt(),Go=bn(),zo=Ae(),Ho=H(),Ko=Le(),Xo=Pn(),Zo=Un(),Jo=Dn(),Yo=Vn(),Qo=jn(),ec=tt(),tc=Kn(),rc=Zn(),nc=Qn(),sc=ts(),ac=os();us.exports={parse:So,valid:xo,clean:Ro,inc:vo,diff:Io,major:Ao,minor:To,patch:Lo,prerelease:Oo,compare:Co,rcompare:Po,compareLoose:No,compareBuild:Uo,sort:_o,rsort:Do,gt:Fo,lt:Mo,eq:Vo,neq:qo,gte:jo,lte:Bo,cmp:Wo,coerce:Go,Comparator:zo,Range:Ho,satisfies:Ko,toComparators:Xo,maxSatisfying:Zo,minSatisfying:Jo,minVersion:Yo,validRange:Qo,outside:ec,gtr:tc,ltr:rc,intersects:nc,simplifyRange:sc,subset:ac,SemVer:ko,re:_t.re,src:_t.src,tokens:_t.t,SEMVER_SPEC_VERSION:cs.SEMVER_SPEC_VERSION,RELEASE_TYPES:cs.RELEASE_TYPES,compareIdentifiers:ls.compareIdentifiers,rcompareIdentifiers:ls.rcompareIdentifiers}});var fc={};ks(fc,{default:()=>uc});module.exports=Ss(fc);var U=require("@raycast/api");var b=J(require("react")),g=require("@raycast/api");var jt=Object.prototype.hasOwnProperty;function Ue(e,t){var r,n;if(e===t)return!0;if(e&&t&&(r=e.constructor)===t.constructor){if(r===Date)return e.getTime()===t.getTime();if(r===RegExp)return e.toString()===t.toString();if(r===Array){if((n=e.length)===t.length)for(;n--&&Ue(e[n],t[n]););return n===-1}if(!r||typeof e=="object"){n=0;for(r in e)if(jt.call(e,r)&&++n&&!jt.call(t,r)||!(r in t)||!Ue(e[r],t[r]))return!1;return Object.keys(t).length===n}}return e!==e&&t!==t}var Q=J(require("node:fs")),ne=J(require("node:path")),Xt=J(require("node:crypto")),De=J(require("node:child_process")),Zt=require("node:buffer"),pe=J(require("node:stream")),Jt=require("node:util"),G=require("node:fs/promises");var W=require("react/jsx-runtime"),Me=J(require("node:os")),Yt=require("node:url"),rt=globalThis;function xs(e){let t=(0,b.useRef)(e),r=(0,b.useRef)(0);return Ue(e,t.current)||(t.current=e,r.current+=1),(0,b.useMemo)(()=>t.current,[r.current])}function _(e){let t=(0,b.useRef)(e);return t.current=e,t}function me(e,t){let r=e instanceof Error?e.message:String(e);return(0,g.showToast)({style:g.Toast.Style.Failure,title:t?.title??"Something went wrong",message:t?.message??r,primaryAction:t?.primaryAction??Bt(e),secondaryAction:t?.primaryAction?Bt(e):void 0})}var Bt=e=>{let t=!0,r="[Extension Name]...",n="";try{let i=JSON.parse((0,Q.readFileSync)((0,ne.join)(g.environment.assetsPath,"..","package.json"),"utf8"));r=`[${i.title}]...`,n=`https://raycast.com/${i.owner||i.author}/${i.name}`,(!i.owner||i.access==="public")&&(t=!1)}catch{}let s=g.environment.isDevelopment||t,a=e instanceof Error?e?.stack||e?.message||"":String(e);return{title:s?"Copy Logs":"Report Error",onAction(i){i.hide(),s?g.Clipboard.copy(a):(0,g.open)(`https://github.com/raycast/extensions/issues/new?&labels=extension%2Cbug&template=extension_bug_report.yml&title=${encodeURIComponent(r)}&extension-url=${encodeURI(n)}&description=${encodeURIComponent(`#### Error:
\`\`\`
${a}
\`\`\`
`)}`)}}};function ge(e,t,r){let n=(0,b.useRef)(0),[s,a]=(0,b.useState)({isLoading:!0}),i=_(e),c=_(r?.abortable),o=_(t||[]),u=_(r?.onError),f=_(r?.onData),l=_(r?.onWillExecute),m=_(r?.failureToastOptions),d=_(s.data),T=(0,b.useRef)(null),E=(0,b.useRef)({page:0}),S=(0,b.useRef)(!1),w=(0,b.useRef)(!0),B=(0,b.useRef)(50),C=(0,b.useCallback)(()=>(c.current&&(c.current.current?.abort(),c.current.current=new AbortController),++n.current),[c]),R=(0,b.useCallback)((...te)=>{let j=C();l.current?.(te),a(k=>({...k,isLoading:!0}));let ue=Rs(i.current)(...te);function fe(k){return k.name=="AbortError"||j===n.current&&(u.current?u.current(k):g.environment.launchType!==g.LaunchType.Background&&me(k,{title:"Failed to fetch latest data",primaryAction:{title:"Retry",onAction(ae){ae.hide(),T.current?.(...o.current||[])}},...m.current}),a({error:k,isLoading:!1})),k}return typeof ue=="function"?(S.current=!0,ue(E.current).then(({data:k,hasMore:ae,cursor:ms})=>(j===n.current&&(E.current&&(E.current.cursor=ms,E.current.lastItem=k?.[k.length-1]),f.current&&f.current(k,E.current),ae&&(B.current=k.length),w.current=ae,a(gs=>E.current.page===0?{data:k,isLoading:!1}:{data:(gs.data||[])?.concat(k),isLoading:!1})),k),k=>(w.current=!1,fe(k)))):(S.current=!1,ue.then(k=>(j===n.current&&(f.current&&f.current(k),a({data:k,isLoading:!1})),k),fe))},[f,u,o,i,a,T,l,E,m,C]);T.current=R;let X=(0,b.useCallback)(()=>{E.current={page:0};let te=o.current||[];return R(...te)},[R,o]),Z=(0,b.useCallback)(async(te,j)=>{let ue;try{if(j?.optimisticUpdate){C(),typeof j?.rollbackOnError!="function"&&j?.rollbackOnError!==!1&&(ue=structuredClone(d.current?.value));let fe=j.optimisticUpdate;a(k=>({...k,data:fe(k.data)}))}return await te}catch(fe){if(typeof j?.rollbackOnError=="function"){let k=j.rollbackOnError;a(ae=>({...ae,data:k(ae.data)}))}else j?.optimisticUpdate&&j?.rollbackOnError!==!1&&a(k=>({...k,data:ue}));throw fe}finally{j?.shouldRevalidateAfter!==!1&&(g.environment.launchType===g.LaunchType.Background||g.environment.commandMode==="menu-bar"?await X():X())}},[X,d,a,C]),ee=(0,b.useCallback)(()=>{E.current.page+=1;let te=o.current||[];R(...te)},[E,o,R]);(0,b.useEffect)(()=>{E.current={page:0},r?.execute!==!1?R(...t||[]):C()},[xs([t,r?.execute,R]),c,E]),(0,b.useEffect)(()=>()=>{C()},[C]);let Se=r?.execute!==!1?s.isLoading:!1,xe={...s,isLoading:Se},Pe=S.current?{pageSize:B.current,hasMore:w.current,onLoadMore:ee}:void 0;return{...xe,revalidate:X,mutate:Z,pagination:Pe}}function Rs(e){return e===Promise.all||e===Promise.race||e===Promise.resolve||e===Promise.reject?e.bind(Promise):e}function Wt(e){return typeof e!="function"?!1:/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(e))!==null}function vs(e){return e instanceof URLSearchParams?e.toString():e}function Qt(e,t=[]){function r(n){return"update"in e?e.update(n,"utf8"):e.write(n)}return{dispatch:function(n){n=vs(n),n===null?this._null():this["_"+typeof n](n)},_object:function(n){let s=/\[object (.*)\]/i,a=Object.prototype.toString.call(n),i=s.exec(a)?.[1]??"unknown:["+a+"]";i=i.toLowerCase();let c=null;if((c=t.indexOf(n))>=0){this.dispatch("[CIRCULAR:"+c+"]");return}else t.push(n);if(Buffer.isBuffer(n))return r("buffer:"),r(n.toString("utf8"));if(i!=="object"&&i!=="function"&&i!=="asyncfunction")if(this["_"+i])this["_"+i](n);else throw new Error('Unknown object type "'+i+'"');else{let o=Object.keys(n);o=o.sort(),Wt(n)||o.splice(0,0,"prototype","__proto__","constructor"),r("object:"+o.length+":");let u=this;return o.forEach(function(f){u.dispatch(f),r(":"),u.dispatch(n[f]),r(",")})}},_array:function(n,s){s=typeof s<"u"?s:!1;let a=this;if(r("array:"+n.length+":"),!s||n.length<=1){n.forEach(function(o){a.dispatch(o)});return}let i=[],c=n.map(function(o){let u=Is(),f=t.slice();return Qt(u,f).dispatch(o),i=i.concat(f.slice(t.length)),u.read().toString()});t=t.concat(i),c.sort(),this._array(c,!1)},_date:function(n){r("date:"+n.toJSON())},_symbol:function(n){r("symbol:"+n.toString())},_error:function(n){r("error:"+n.toString())},_boolean:function(n){r("bool:"+n.toString())},_string:function(n){r("string:"+n.length+":"),r(n.toString())},_function:function(n){r("fn:"),Wt(n)?this.dispatch("[native]"):this.dispatch(n.toString()),this.dispatch("function-name:"+String(n.name)),this._object(n)},_number:function(n){r("number:"+n.toString())},_xml:function(n){r("xml:"+n.toString())},_null:function(){r("Null")},_undefined:function(){r("Undefined")},_regexp:function(n){r("regex:"+n.toString())},_uint8array:function(n){r("uint8array:"),this.dispatch(Array.prototype.slice.call(n))},_uint8clampedarray:function(n){r("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(n))},_int8array:function(n){r("int8array:"),this.dispatch(Array.prototype.slice.call(n))},_uint16array:function(n){r("uint16array:"),this.dispatch(Array.prototype.slice.call(n))},_int16array:function(n){r("int16array:"),this.dispatch(Array.prototype.slice.call(n))},_uint32array:function(n){r("uint32array:"),this.dispatch(Array.prototype.slice.call(n))},_int32array:function(n){r("int32array:"),this.dispatch(Array.prototype.slice.call(n))},_float32array:function(n){r("float32array:"),this.dispatch(Array.prototype.slice.call(n))},_float64array:function(n){r("float64array:"),this.dispatch(Array.prototype.slice.call(n))},_arraybuffer:function(n){r("arraybuffer:"),this.dispatch(new Uint8Array(n))},_url:function(n){r("url:"+n.toString())},_map:function(n){r("map:");let s=Array.from(n);this._array(s,!0)},_set:function(n){r("set:");let s=Array.from(n);this._array(s,!0)},_file:function(n){r("file:"),this.dispatch([n.name,n.size,n.type,n.lastModified])},_blob:function(){throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){r("domwindow")},_bigint:function(n){r("bigint:"+n.toString())},_process:function(){r("process")},_timer:function(){r("timer")},_pipe:function(){r("pipe")},_tcp:function(){r("tcp")},_udp:function(){r("udp")},_tty:function(){r("tty")},_statwatcher:function(){r("statwatcher")},_securecontext:function(){r("securecontext")},_connection:function(){r("connection")},_zlib:function(){r("zlib")},_context:function(){r("context")},_nodescript:function(){r("nodescript")},_httpparser:function(){r("httpparser")},_dataview:function(){r("dataview")},_signal:function(){r("signal")},_fsevent:function(){r("fsevent")},_tlswrap:function(){r("tlswrap")}}}function Is(){return{buf:"",write:function(e){this.buf+=e},end:function(e){this.buf+=e},read:function(){return this.buf}}}function As(e,t){let r=this[e];return r instanceof Date?`__raycast_cached_date__${r.toISOString()}`:Buffer.isBuffer(r)?`__raycast_cached_buffer__${r.toString("base64")}`:t}function Ts(e,t){return typeof t=="string"&&t.startsWith("__raycast_cached_date__")?new Date(t.replace("__raycast_cached_date__","")):typeof t=="string"&&t.startsWith("__raycast_cached_buffer__")?Buffer.from(t.replace("__raycast_cached_buffer__",""),"base64"):t}function he(e){let t=Xt.default.createHash("sha1");return Qt(t).dispatch(e),t.digest("hex")}var Ls=Symbol("cache without namespace"),Gt=new Map;function ft(e,t,r){let n=r?.cacheNamespace||Ls,s=Gt.get(n)||Gt.set(n,new g.Cache({namespace:r?.cacheNamespace})).get(n);if(!s)throw new Error("Missing cache");let a=_(e),i=_(t),c=(0,b.useSyncExternalStore)(s.subscribe,()=>{try{return s.get(a.current)}catch(l){console.error("Could not get Cache data:",l);return}}),o=(0,b.useMemo)(()=>{if(typeof c<"u"){if(c==="undefined")return;try{return JSON.parse(c,Ts)}catch(l){return console.warn("The cached data is corrupted",l),i.current}}else return i.current},[c,i]),u=_(o),f=(0,b.useCallback)(l=>{let m=typeof l=="function"?l(u.current):l;if(typeof m>"u")s.set(a.current,"undefined");else{let d=JSON.stringify(m,As);s.set(a.current,d)}return m},[s,a,u]);return[o,f]}var de=Symbol();function dt(e,t,r){let{initialData:n,keepPreviousData:s,internal_cacheKeySuffix:a,...i}=r||{},c=(0,b.useRef)(null),[o,u]=ft(he(t||[])+a,de,{cacheNamespace:he(e)}),f=(0,b.useRef)(o!==de?o:n),l=(0,b.useRef)(void 0),{mutate:m,revalidate:d,...T}=ge(e,t||[],{...i,onData(C,R){l.current=R,i.onData&&i.onData(C,R),!(R&&R.page>0)&&(c.current="promise",f.current=C,u(C))}}),E,S=T.pagination;l.current&&l.current.page>0&&T.data?E=T.data:c.current==="promise"?E=f.current:s&&o!==de?(E=o,S&&(S.hasMore=!0,S.pageSize=o.length)):s&&o===de?E=f.current:o!==de?(E=o,S&&(S.hasMore=!0,S.pageSize=o.length)):E=n;let w=_(E),B=(0,b.useCallback)(async(C,R)=>{let X;try{if(R?.optimisticUpdate){typeof R?.rollbackOnError!="function"&&R?.rollbackOnError!==!1&&(X=structuredClone(w.current));let Z=R.optimisticUpdate(w.current);c.current="cache",f.current=Z,u(Z)}return await m(C,{shouldRevalidateAfter:R?.shouldRevalidateAfter})}catch(Z){if(typeof R?.rollbackOnError=="function"){let ee=R.rollbackOnError(w.current);c.current="cache",f.current=ee,u(ee)}else R?.optimisticUpdate&&R?.rollbackOnError!==!1&&(c.current="cache",f.current=X,u(X));throw Z}},[u,m,w,f,c]);return(0,b.useEffect)(()=>{o!==de&&(c.current="cache",f.current=o)},[o]),{data:E,isLoading:T.isLoading,error:T.error,mutate:l.current&&l.current.page>0?m:B,pagination:S,revalidate:d}}function Os(e){if(e){let t=Ps(e);if(!t)return!1;if(t.subtype==="json"||t.suffix==="json"||t.suffix&&/\bjson\b/i.test(t.suffix)||t.subtype&&/\bjson\b/i.test(t.subtype))return!0}return!1}var Cs=/^([A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126})\/([A-Za-z0-9][A-Za-z0-9!#$&^_.+-]{0,126});?$/;function Ps(e){let t=e.indexOf(";"),r=t!==-1?e.slice(0,t).trim():e.trim(),n=Cs.exec(r.toLowerCase().toLowerCase());if(!n)return;let s=n[1],a=n[2],i,c=a.lastIndexOf("+");return c!==-1&&(i=a.substring(c+1),a=a.substring(0,c)),{type:s,subtype:a,suffix:i}}async function Ns(e){if(!e.ok)throw new Error(e.statusText);let t=e.headers.get("content-type");return t&&Os(t)?await e.json():await e.text()}function Us(e){return{data:e,hasMore:!1}}function er(e,t){let{parseResponse:r,mapResult:n,initialData:s,execute:a,keepPreviousData:i,onError:c,onData:o,onWillExecute:u,failureToastOptions:f,...l}=t||{},m={initialData:s,execute:a,keepPreviousData:i,onError:c,onData:o,onWillExecute:u,failureToastOptions:f},d=_(r||Ns),T=_(n||Us),E=(0,b.useRef)(null),S=(0,b.useRef)(null),w=typeof e=="function"?e({page:0}):void 0;(!E.current||typeof S.current>"u"||S.current!==w)&&(E.current=e),S.current=w;let B=(0,b.useRef)(null),C=(0,b.useCallback)((Z,ee)=>async Se=>{let xe=await fetch(Z(Se),{signal:B.current?.signal,...ee}),Pe=await d.current(xe);return T.current?.(Pe)},[d,T]),R=(0,b.useCallback)(async(Z,ee)=>{let Se=await fetch(Z,{signal:B.current?.signal,...ee}),xe=await d.current(Se);return T.current(xe)?.data},[d,T]),X=(0,b.useMemo)(()=>S.current?C:R,[S,R,C]);return dt(X,[E.current,l],{...m,internal_cacheKeySuffix:S.current+he(T.current)+he(d.current),abortable:B})}var _e=e=>!!e&&typeof e=="object"&&typeof e.removeListener=="function"&&typeof e.emit=="function"&&typeof e.reallyExit=="function"&&typeof e.listeners=="function"&&typeof e.kill=="function"&&typeof e.pid=="number"&&typeof e.on=="function",nt=Symbol.for("signal-exit emitter"),at=class{constructor(){if(this.emitted={afterExit:!1,exit:!1},this.listeners={afterExit:[],exit:[]},this.count=0,this.id=Math.random(),rt[nt])return rt[nt];Object.defineProperty(rt,nt,{value:this,writable:!1,enumerable:!1,configurable:!1})}on(t,r){this.listeners[t].push(r)}removeListener(t,r){let n=this.listeners[t],s=n.indexOf(r);s!==-1&&(s===0&&n.length===1?n.length=0:n.splice(s,1))}emit(t,r,n){if(this.emitted[t])return!1;this.emitted[t]=!0;let s=!1;for(let a of this.listeners[t])s=a(r,n)===!0||s;return t==="exit"&&(s=this.emit("afterExit",r,n)||s),s}},it=class{onExit(){return()=>{}}load(){}unload(){}},ot=class{#o;#t;#e;#a;#i;#s;#n;#r;constructor(t){this.#o=process.platform==="win32"?"SIGINT":"SIGHUP",this.#t=new at,this.#s={},this.#n=!1,this.#r=[],this.#r.push("SIGHUP","SIGINT","SIGTERM"),globalThis.process.platform!=="win32"&&this.#r.push("SIGALRM","SIGABRT","SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT"),globalThis.process.platform==="linux"&&this.#r.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT"),this.#e=t,this.#s={};for(let r of this.#r)this.#s[r]=()=>{let n=this.#e.listeners(r),{count:s}=this.#t,a=t;if(typeof a.__signal_exit_emitter__=="object"&&typeof a.__signal_exit_emitter__.count=="number"&&(s+=a.__signal_exit_emitter__.count),n.length===s){this.unload();let i=this.#t.emit("exit",null,r),c=r==="SIGHUP"?this.#o:r;i||t.kill(t.pid,c)}};this.#i=t.reallyExit,this.#a=t.emit}onExit(t,r){if(!_e(this.#e))return()=>{};this.#n===!1&&this.load();let n=r?.alwaysLast?"afterExit":"exit";return this.#t.on(n,t),()=>{this.#t.removeListener(n,t),this.#t.listeners.exit.length===0&&this.#t.listeners.afterExit.length===0&&this.unload()}}load(){if(!this.#n){this.#n=!0,this.#t.count+=1;for(let t of this.#r)try{let r=this.#s[t];r&&this.#e.on(t,r)}catch{}this.#e.emit=(t,...r)=>this.#l(t,...r),this.#e.reallyExit=t=>this.#c(t)}}unload(){this.#n&&(this.#n=!1,this.#r.forEach(t=>{let r=this.#s[t];if(!r)throw new Error("Listener not defined for signal: "+t);try{this.#e.removeListener(t,r)}catch{}}),this.#e.emit=this.#a,this.#e.reallyExit=this.#i,this.#t.count-=1)}#c(t){return _e(this.#e)?(this.#e.exitCode=t||0,this.#t.emit("exit",this.#e.exitCode,null),this.#i.call(this.#e,this.#e.exitCode)):0}#l(t,...r){let n=this.#a;if(t==="exit"&&_e(this.#e)){typeof r[0]=="number"&&(this.#e.exitCode=r[0]);let s=n.call(this.#e,t,...r);return this.#t.emit("exit",this.#e.exitCode,null),s}else return n.call(this.#e,t,...r)}},st=null,_s=(e,t)=>(st||(st=_e(process)?new ot(process):new it),st.onExit(e,t));function ct(e,{timeout:t}={}){let r=new Promise((c,o)=>{e.on("exit",(u,f)=>{c({exitCode:u,signal:f,timedOut:!1})}),e.on("error",u=>{o(u)}),e.stdin&&e.stdin.on("error",u=>{o(u)})}),n=_s(()=>{e.kill()});if(t===0||t===void 0)return r.finally(()=>n());let s,a=new Promise((c,o)=>{s=setTimeout(()=>{e.kill("SIGTERM"),o(Object.assign(new Error("Timed out"),{timedOut:!0,signal:"SIGTERM"}))},t)}),i=r.finally(()=>{clearTimeout(s)});return Promise.race([a,i]).finally(()=>n())}var lt=class extends Error{constructor(){super("The output is too big"),this.name="MaxBufferError"}};function Ds(e){let{encoding:t}=e,r=t==="buffer",n=new pe.default.PassThrough({objectMode:!1});t&&t!=="buffer"&&n.setEncoding(t);let s=0,a=[];return n.on("data",i=>{a.push(i),s+=i.length}),n.getBufferedValue=()=>r?Buffer.concat(a,s):a.join(""),n.getBufferedLength=()=>s,n}async function zt(e,t){let r=Ds(t);return await new Promise((n,s)=>{let a=i=>{i&&r.getBufferedLength()<=Zt.constants.MAX_LENGTH&&(i.bufferedData=r.getBufferedValue()),s(i)};(async()=>{try{await(0,Jt.promisify)(pe.default.pipeline)(e,r),n()}catch(i){a(i)}})(),r.on("data",()=>{r.getBufferedLength()>8e7&&a(new lt)})}),r.getBufferedValue()}async function Ht(e,t){e.destroy();try{return await t}catch(r){return r.bufferedData}}async function ut({stdout:e,stderr:t},{encoding:r},n){let s=zt(e,{encoding:r}),a=zt(t,{encoding:r});try{return await Promise.all([n,s,a])}catch(i){return Promise.all([{error:i,exitCode:null,signal:i.signal,timedOut:i.timedOut||!1},Ht(e,s),Ht(t,a)])}}function Fs(e){let t=typeof e=="string"?`
`:10,r=typeof e=="string"?"\r":13;return e[e.length-1]===t&&(e=e.slice(0,-1)),e[e.length-1]===r&&(e=e.slice(0,-1)),e}function Kt(e,t){return e.stripFinalNewline?Fs(t):t}function Ms({timedOut:e,timeout:t,signal:r,exitCode:n}){return e?`timed out after ${t} milliseconds`:r!=null?`was killed with ${r}`:n!=null?`failed with exit code ${n}`:"failed"}function Vs({stdout:e,stderr:t,error:r,signal:n,exitCode:s,command:a,timedOut:i,options:c,parentError:o}){let f=`Command ${Ms({timedOut:i,timeout:c?.timeout,signal:n,exitCode:s})}: ${a}`,l=r?`${f}
${r.message}`:f,m=[l,t,e].filter(Boolean).join(`
`);return r?r.originalMessage=r.message:r=o,r.message=m,r.shortMessage=l,r.command=a,r.exitCode=s,r.signal=n,r.stdout=e,r.stderr=t,"bufferedData"in r&&delete r.bufferedData,r}function qs({stdout:e,stderr:t,error:r,exitCode:n,signal:s,timedOut:a,command:i,options:c,parentError:o}){if(r||n!==0||s!==null)throw Vs({error:r,exitCode:n,signal:s,stdout:e,stderr:t,command:i,timedOut:a,options:c,parentError:o});return e}var Fe=class extends Error{constructor(t){super(t),this.name="PermissionError"}};function js(e){return e instanceof Error&&e.name==="PermissionError"}async function Bs(e,t,r){if(!(0,Q.existsSync)(e))throw new Error("The database does not exist");let n;try{n=await(u=>import(u))("node:sqlite")}catch{return Ws(e,t,r)}let s=new n.DatabaseSync(e,{open:!1,readOnly:!0}),a=r?.signal;try{s.open()}catch(o){if(console.log(o),o.message.match("(5)")||o.message.match("(14)")){let u;if(!u){let f=ne.default.join(Me.default.tmpdir(),"useSQL",he(e));await(0,G.mkdir)(f,{recursive:!0}),re(a),u=ne.default.join(f,"db.db"),await(0,G.copyFile)(e,u),await(0,G.writeFile)(u+"-shm",""),await(0,G.writeFile)(u+"-wal",""),re(a)}s=new n.DatabaseSync(u,{open:!1,readOnly:!0}),s.open(),re(a)}}let i=s.prepare(t);re(a);let c=i.all();return s.close(),c}async function Ws(e,t,r){let n=r?.signal,s=De.default.spawn("sqlite3",["--json","--readonly",e,t],{signal:n}),a=ct(s),[{error:i,exitCode:c,signal:o},u,f]=await ut(s,{encoding:"utf-8"},a);if(re(n),f.match("(5)")||f.match("(14)")){let l;if(!l){let m=ne.default.join(Me.default.tmpdir(),"useSQL",he(e));await(0,G.mkdir)(m,{recursive:!0}),re(n),l=ne.default.join(m,"db.db"),await(0,G.copyFile)(e,l),await(0,G.writeFile)(l+"-shm",""),await(0,G.writeFile)(l+"-wal",""),re(n)}s=De.default.spawn("sqlite3",["--json","--readonly","--vfs","unix-none",l,t],{signal:n}),a=ct(s),[{error:i,exitCode:c,signal:o},u,f]=await ut(s,{encoding:"utf-8"},a),re(n)}if(i||c!==0||o!==null)throw f.includes("authorization denied")?new Fe("You do not have permission to access the database."):new Error(f||"Unknown error");return JSON.parse(u.trim()||"[]")}function re(e){if(e?.aborted){let t=new Error("aborted");throw t.name="AbortError",t}}function tr(e,t,r){let{permissionPriming:n,...s}=r||{},[a,i]=(0,b.useState)(null),c=_(r||{}),o=(0,b.useRef)(null),u=(0,b.useCallback)(l=>{console.error(l);let m=l instanceof Error&&l.message.includes("authorization denied")?new Fe("You do not have permission to access the database."):l;js(m)?i((0,W.jsx)(Gs,{priming:c.current.permissionPriming})):c.current.onError?c.current.onError(m):g.environment.launchType!==g.LaunchType.Background&&me(m,{title:"Cannot query the data"})},[c]),f=(0,b.useMemo)(()=>{if(!(0,Q.existsSync)(e))throw new Error("The database does not exist");return async(l,m)=>{let d=o.current?.signal;return Bs(l,m,{signal:d})}},[e]);return{...ge(f,[e,t],{...s,onError:u}),permissionView:a}}function Gs(e){let t=parseInt(Me.default.release().split(".")[0])>=22,r=t?"Settings":"Preferences",n=t?{title:"Open System Settings -> Privacy",target:"x-apple.systempreferences:com.apple.preference.security?Privacy_AllFiles"}:{title:"Open System Preferences -> Security",target:"x-apple.systempreferences:com.apple.preference.security?Privacy_AllFiles"};return g.environment.commandMode==="menu-bar"?(0,W.jsxs)(g.MenuBarExtra,{icon:g.Icon.Warning,title:g.environment.commandName,children:[(0,W.jsx)(g.MenuBarExtra.Item,{title:"Raycast needs full disk access",tooltip:`You can revert this access in ${r} whenever you want`}),e.priming?(0,W.jsx)(g.MenuBarExtra.Item,{title:e.priming,tooltip:`You can revert this access in ${r} whenever you want`}):null,(0,W.jsx)(g.MenuBarExtra.Separator,{}),(0,W.jsx)(g.MenuBarExtra.Item,{title:n.title,onAction:()=>(0,g.open)(n.target)})]}):(0,W.jsx)(g.List,{children:(0,W.jsx)(g.List.EmptyView,{icon:{source:{light:"https://raycast.com/uploads/extensions-utils-security-permissions-light.png",dark:"https://raycast.com/uploads/extensions-utils-security-permissions-dark.png"}},title:"Raycast needs full disk access.",description:`${e.priming?e.priming+`
`:""}You can revert this access in ${r} whenever you want.`,actions:(0,W.jsx)(g.ActionPanel,{children:(0,W.jsx)(g.Action.Open,{...n})})})})}function se(e,t){try{let r=i=>i.startsWith("http")?i:`https://${i}`,s=(typeof e=="string"?new Yt.URL(r(e)):e).hostname;switch(process.env.FAVICON_PROVIDER??"raycast"){case"none":return{source:t?.fallback??g.Icon.Link,mask:t?.mask};case"apple":return{source:t?.fallback??g.Icon.Link,mask:t?.mask};case"duckduckgo":case"duckDuckGo":return{source:`https://icons.duckduckgo.com/ip3/${s}.ico`,fallback:t?.fallback??g.Icon.Link,mask:t?.mask};case"google":return{source:`https://www.google.com/s2/favicons?sz=${t?.size??64}&domain=${s}`,fallback:t?.fallback??g.Icon.Link,mask:t?.mask};case"legacy":case"raycast":default:return{source:`https://api.ray.so/favicon?url=${s}&size=${t?.size??64}`,fallback:t?.fallback??g.Icon.Link,mask:t?.mask}}}catch(r){return console.error(r),g.Icon.Link}}async function Ve(e,t,r){if(process.platform!=="darwin")throw new Error("AppleScript is only supported on macOS");let{humanReadableOutput:n,language:s,timeout:a,...i}=Array.isArray(t)?r||{}:t||{},c=n!==!1?[]:["-ss"];s==="JavaScript"&&c.push("-l","JavaScript"),Array.isArray(t)&&c.push("-",...t);let o=De.default.spawn("osascript",c,{...i,env:{PATH:"/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin"}}),u=ct(o,{timeout:a??1e4});o.stdin.end(e);let[{error:f,exitCode:l,signal:m,timedOut:d},T,E]=await ut(o,{encoding:"utf8"},u),S=Kt({stripFinalNewline:!0},T),w=Kt({stripFinalNewline:!0},E);return qs({stdout:S,stderr:w,error:f,exitCode:l,signal:m,timedOut:d,command:"osascript",options:r,parentError:new Error})}var Ce=require("react");var O=require("@raycast/api");var $e=require("@raycast/api");function ht(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function rr(e){return e.replace(/\\/g,"\\\\").replace(/%/g,"\\%").replace(/_/g,"\\_").replace(/"/g,'""')}function nr(e){let t=["javascript:","data:","about:","chrome:","file:"],r=e.toLowerCase().trim();return t.some(n=>r.startsWith(n))?{source:$e.Icon.Link,tintColor:$e.Color.SecondaryText}:se(e)}function be(e){try{let{hostname:t}=new URL(e);return t.replace(/^www\./,"")}catch{return e}}function sr(e){let t=[];return e.isFocused&&t.push({icon:{source:$e.Icon.Dot,tintColor:$e.Color.Blue},tooltip:"Focused tab"}),t}function ar(e,t){return!t||!e?e:e.filter(r=>r.title.toLowerCase().includes(t.toLowerCase())||r.url?.toLowerCase().includes(t.toLowerCase()))}function ir(e,t){if(!e||!t||t.length===0)return e;let r=new Set(t.map(n=>n.url?.toLowerCase()).filter(Boolean));return e.filter(n=>!r.has(n.url.toLowerCase()))}var K=require("react/jsx-runtime");function or({item:e,onNavigate:t}){if(e.type==="folder"){if(!t)return null;let r=e.children?.length||0;return(0,K.jsx)(O.List.Item,{id:e.id,title:e.name,icon:{source:O.Icon.Folder,tintColor:O.Color.Blue},accessories:[{text:`${r} item${r!==1?"s":""}`}],actions:(0,K.jsx)(O.ActionPanel,{title:e.name,children:(0,K.jsx)(O.Action,{title:"Open Folder",icon:O.Icon.ArrowRight,onAction:()=>t(e.idPath)})})})}if(e.url){let r=e.path.length>1?e.path.slice(0,-1).join(" \u203A "):void 0;return(0,K.jsx)(O.List.Item,{id:e.id,title:e.name,subtitle:r,icon:nr(e.url),actions:(0,K.jsxs)(O.ActionPanel,{title:e.name,children:[(0,K.jsx)(O.Action.Open,{icon:O.Icon.Globe,title:"Open Tab",target:e.url,application:"company.thebrowser.dia"}),(0,K.jsx)(O.Action.OpenInBrowser,{url:e.url,shortcut:{modifiers:["cmd"],key:"o"}}),(0,K.jsx)(O.Action.CopyToClipboard,{title:"Copy URL",content:e.url,shortcut:{modifiers:["cmd"],key:"c"}}),(0,K.jsx)(O.Action.CopyToClipboard,{title:"Copy Title",content:e.name,shortcut:{modifiers:["cmd","shift"],key:"c"}})]})})}return null}var x=require("@raycast/api");var D=require("react/jsx-runtime");function cr({item:e,searchText:t,onHistoryAction:r}){return(0,D.jsx)(x.List.Item,{icon:se(e.url,{mask:x.Image.Mask.Circle}),title:e.title??"Untitled",subtitle:{value:be(e.url),tooltip:e.url},accessories:[{date:new Date(e.lastVisitedAt)}],actions:(0,D.jsxs)(x.ActionPanel,{children:[(0,D.jsxs)(x.ActionPanel.Section,{children:[(0,D.jsx)(x.Action.Open,{icon:x.Icon.Globe,title:"Open Tab",target:e.url,application:"company.thebrowser.dia",onOpen:()=>{r?.()}}),(0,D.jsx)(x.Action.OpenWith,{icon:x.Icon.AppWindow,path:e.url,onOpen:()=>{r?.()}}),t&&(0,D.jsx)(x.Action.OpenInBrowser,{title:"Search Google",url:`https://www.google.com/search?q=${encodeURIComponent(t)}`,icon:x.Icon.MagnifyingGlass,shortcut:{modifiers:["cmd","shift"],key:"return"},onOpen:()=>{r?.()}})]}),(0,D.jsxs)(x.ActionPanel.Section,{children:[(0,D.jsx)(x.Action.CopyToClipboard,{content:e.url,title:"Copy URL",shortcut:x.Keyboard.Shortcut.Common.Copy}),(0,D.jsx)(x.Action.CopyToClipboard,{content:{html:`<a href="${e.url}">${e.title}</a>`},title:"Copy Formatted URL",shortcut:x.Keyboard.Shortcut.Common.CopyPath}),e.title&&(0,D.jsx)(x.Action.CopyToClipboard,{content:e.title,title:"Copy Title",shortcut:x.Keyboard.Shortcut.Common.CopyName}),(0,D.jsx)(x.Action.CopyToClipboard,{content:`[${e.title??"Untitled"}](${e.url})`,title:"Copy as Markdown"})]}),(0,D.jsx)(x.ActionPanel.Section,{children:(0,D.jsx)(x.Action.CreateQuicklink,{quicklink:{link:e.url,name:e.title},shortcut:{modifiers:["cmd"],key:"s"}})})]})})}var A=require("@raycast/api");var q=require("react/jsx-runtime");function lr({suggestion:e,onSuggestionAction:t}){return(0,q.jsx)(A.List.Item,{icon:se(e.url,{mask:A.Image.Mask.Circle}),title:e.query,subtitle:{value:be(e.url),tooltip:e.url},actions:(0,q.jsxs)(A.ActionPanel,{children:[(0,q.jsxs)(A.ActionPanel.Section,{children:[(0,q.jsx)(A.Action.Open,{icon:A.Icon.Globe,title:"Open Tab",target:e.url,application:"company.thebrowser.dia",onOpen:()=>{t?.()}}),(0,q.jsx)(A.Action.OpenWith,{icon:A.Icon.AppWindow,path:e.url,onOpen:()=>{t?.()}})]}),(0,q.jsxs)(A.ActionPanel.Section,{children:[(0,q.jsx)(A.Action.CopyToClipboard,{content:e.url,title:"Copy URL",shortcut:A.Keyboard.Shortcut.Common.Copy}),(0,q.jsx)(A.Action.CopyToClipboard,{content:{html:`<a href="${e.url}">${e.query}</a>`},title:"Copy Formatted URL",shortcut:A.Keyboard.Shortcut.Common.CopyPath}),(0,q.jsx)(A.Action.CopyToClipboard,{content:e.query,title:"Copy Query",shortcut:A.Keyboard.Shortcut.Common.CopyName}),(0,q.jsx)(A.Action.CopyToClipboard,{content:`[${e.query}](${e.url})`,title:"Copy as Markdown"})]}),(0,q.jsx)(A.ActionPanel.Section,{children:(0,q.jsx)(A.Action.CreateQuicklink,{quicklink:{link:e.url,name:e.query},shortcut:{modifiers:["cmd"],key:"s"}})})]})})}var v=require("@raycast/api");var ye=require("path"),je=require("os"),Be=require("fs");function ur(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function fr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ur(Object(r),!0).forEach(function(n){zs(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ur(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zs(e,t,r){return t=Hs(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hs(e){var t=Ks(e,"string");return typeof t=="symbol"?t:String(t)}function Ks(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Xs=dr({}),pt=Xs;function dr(e){return t.withOptions=r=>dr(fr(fr({},e),r)),t;function t(r,...n){let s=typeof r=="string"?[r]:r.raw,{alignValues:a=!1,escapeSpecialCharacters:i=Array.isArray(r),trimWhitespace:c=!0}=e,o="";for(let l=0;l<s.length;l++){let m=s[l];if(i&&(m=m.replace(/\\\n[ \t]*/g,"").replace(/\\`/g,"`").replace(/\\\$/g,"$").replace(/\\\{/g,"{")),o+=m,l<n.length){let d=a?Zs(n[l],o):n[l];o+=d}}let u=o.split(`
`),f=null;for(let l of u){let m=l.match(/^(\s+)\S+/);if(m){let d=m[1].length;f?f=Math.min(f,d):f=d}}if(f!==null){let l=f;o=u.map(m=>m[0]===" "||m[0]==="	"?m.slice(l):m).join(`
`)}return c&&(o=o.trim()),i&&(o=o.replace(/\\n/g,`
`)),o}}function Zs(e,t){if(typeof e!="string"||!e.includes(`
`))return e;let n=t.slice(t.lastIndexOf(`
`)+1).match(/^(\s+)/);if(n){let s=n[1];return e.replace(/\n/g,`
${s}`)}return e}var mt="Bookmarks file not found";var gt=J(require("fs"));async function qe(){let e=hr();if(!gt.default.existsSync(e))throw new Error(mt);let t=await gt.default.promises.readFile(e,{encoding:"utf-8"}),r=JSON.parse(t),n={id:"root",name:"Bookmarks",type:"folder",date_added:"0",children:[]};return r.roots&&Object.entries(r.roots).forEach(([s,a])=>{if(a&&typeof a=="object"&&"children"in a){let i=a,c=s==="bookmark_bar"?"Bookmarks Bar":s==="other"?"Other Bookmarks":s==="synced"?"Mobile Bookmarks":i.name||s;n.children.push({...i,name:c})}}),n}var pr=require("react"),sa=require("@raycast/api");var aa=require("react/jsx-runtime");function gr(){let e=(0,ye.resolve)((0,je.homedir)(),"Library/Application Support/Dia/User Data/Local State");try{let t=(0,Be.readFileSync)(e,"utf-8"),n=JSON.parse(t).profile.last_used||"Default";return(0,ye.resolve)((0,je.homedir)(),`Library/Application Support/Dia/User Data/${n}`)}catch(t){return console.error("Error reading Local State:",t),(0,ye.resolve)((0,je.homedir)(),"Library/Application Support/Dia/User Data/Default")}}function ia(){return(0,ye.resolve)(gr(),"History")}function hr(){return(0,ye.resolve)(gr(),"Bookmarks")}async function oa(e){if(!e||e.trim().length===0)return[];try{let a=function(i,c=[]){if(i.children)for(let o of i.children)o.type==="url"&&o.url?`${o.name.toLowerCase()} ${o.url.toLowerCase()}`.includes(s)&&n.push({id:o.id,name:o.name,url:o.url,path:c.length>0?c.join(" \u203A "):"Bookmarks"}):o.type==="folder"&&a(o,[...c,o.name])};var t=a;let r=await qe(),n=[],s=e.toLowerCase();return a(r),n}catch(r){return console.error("Error searching bookmarks:",r),[]}}function mr(e){return e.toLowerCase()==="true"}function ca(e,t=100){let r=e?e.split(" ").filter(n=>n.length>0).map(n=>{let s=rr(n);return`(url LIKE "%${s}%" ESCAPE '\\' OR title LIKE "%${s}%" ESCAPE '\\')`}).join(" AND "):void 0;return`
    SELECT id,
          url,
          title,
          datetime(last_visit_time / 1000000 + (strftime('%s', '1601-01-01')), 'unixepoch', 'localtime') AS lastVisitedAt
    FROM urls
    ${r?`WHERE ${r}`:""}
    GROUP BY url
    ORDER BY last_visit_time DESC
    LIMIT ${t};
  `}function $r(e,t={}){let r=ia(),n=ca(e,t?.limit),s=(0,Be.existsSync)(r),a=tr(s?r:__filename,n,{permissionPriming:"This extension needs access to read your Dia browser history.",execute:s});if(!s){let i=new Error("The database does not exist");return me(i),{isLoading:!1,error:i,data:[],permissionView:null,revalidate:()=>{}}}return a}async function la(){let e=await Ve(pt`
      tell application "Dia"
        set output to ""
        
        repeat with w in every window
          try
            set wId to id of w
            
            repeat with t in every tab of w
              set tId to id of t
              set tabTitle to title of t
              
              try
                set tabURL to URL of t
                if tabURL is missing value then
                  set tabURL to ""
                end if
              on error
                set tabURL to ""
              end try
              
              set tabPinned to isPinned of t
              set tabFocused to isFocused of t
              
              -- Output: windowId|||tabId|||title|||url|||isPinned|||isFocused
              set output to output & wId & "|||" & tId & "|||" & tabTitle & "|||" & tabURL & "|||" & tabPinned & "|||" & tabFocused & "\\n"
            end repeat
          end try
        end repeat
        
        return output
      end tell
    `),t=[],r=e.trim().split(`
`);for(let n of r)if(n){let s=n.split("|||");if(s.length===6){let[a,i,c,o,u,f]=s;t.push({windowId:a,tabId:i,title:c,url:o||void 0,isPinned:mr(u),isFocused:mr(f)})}}return t}function br(){return ge(la)}function yr(e){return ge(async t=>oa(t),[e||""],{execute:!!e&&e.trim().length>0})}async function wr(e){let t=ht(e.windowId),r=ht(e.tabId);await Ve(pt`
      tell application "Dia"
        activate

        repeat with w in every window
          if id of w is "${t}" then
            repeat with t in every tab of w
              if id of t is "${r}" then
                focus t
                exit repeat
              end if
            end repeat
            exit repeat
          end if
        end repeat
      end tell
    `)}async function Er(){return await Ve(`
    set _output to ""

    tell application "Dia"
      return version
    end tell
  `)}var F=require("react/jsx-runtime");function $t({tab:e,searchText:t,onTabAction:r}){return(0,F.jsx)(v.List.Item,{icon:e.url?se(e.url,{mask:v.Image.Mask.Circle}):v.Icon.Globe,title:e.title,subtitle:e.url?{value:be(e.url),tooltip:e.url}:void 0,accessories:sr(e),actions:(0,F.jsxs)(v.ActionPanel,{children:[(0,F.jsx)(v.Action,{icon:v.Icon.ArrowRight,title:"Focus Tab",onAction:async()=>{try{await wr(e),await(0,v.closeMainWindow)(),r?.()}catch(n){await me(n,{title:"Failed focusing tab"})}}}),e.url&&(0,F.jsx)(v.Action.OpenInBrowser,{title:"Open URL in New Tab",url:e.url,onOpen:()=>{r?.()}}),t&&(0,F.jsx)(v.Action.OpenInBrowser,{title:"Search Google",url:`https://www.google.com/search?q=${encodeURIComponent(t)}`,icon:v.Icon.MagnifyingGlass,shortcut:{modifiers:["cmd","shift"],key:"return"},onOpen:()=>{r?.()}}),(0,F.jsxs)(v.ActionPanel.Section,{children:[e.url&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(v.Action.CopyToClipboard,{content:e.url,title:"Copy URL",shortcut:v.Keyboard.Shortcut.Common.Copy}),(0,F.jsx)(v.Action.CopyToClipboard,{content:{html:`<a href="${e.url}">${e.title||"Untitled"}</a>`},title:"Copy Formatted URL",shortcut:v.Keyboard.Shortcut.Common.CopyPath})]}),(0,F.jsx)(v.Action.CopyToClipboard,{content:e.title||"Untitled",title:"Copy Title",shortcut:v.Keyboard.Shortcut.Common.CopyName}),e.url&&(0,F.jsx)(v.Action.CopyToClipboard,{content:`[${e.title||"Untitled"}](${e.url})`,title:"Copy as Markdown"})]})]})})}var oe=require("@raycast/api");var ds=require("path"),Ft=J(fs());var ce=require("react/jsx-runtime"),Dt="1.7.0";function ic(e){let{data:t,isLoading:r}=dt(Er);if(console.log("data",t),r&&!t)return(0,ce.jsx)(oe.Detail,{isLoading:!0});if(r&&t&&(0,Ft.lt)(t,Dt))return(0,ce.jsx)(oe.Detail,{isLoading:!0});if(!r&&!t)return(0,ce.jsx)(oe.Detail,{markdown:`## Something went wrong

We are unable to fetch the version of Dia. Please make sure Dia is correctly installed and try again.`});if(!r&&t&&(0,Ft.lt)(t,Dt)){let n=(0,ds.join)(oe.environment.assetsPath,"check-for-updates.png"),s=`## Version conflict

The extension requires Dia v${Dt}. Please update the app via Dia -> Check for Updates.

![Check for Updates](${n})`;return(0,ce.jsx)(oe.Detail,{markdown:s})}else return e.children}function Mt(e){return function(r){return(0,ce.jsx)(ic,{children:(0,ce.jsx)(e,{...r})})}}var Vt=J(require("crypto"),1);var hs="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";var oc=128,le,Ee,cc=e=>{!le||le.length<e?(le=Buffer.allocUnsafe(e*oc),Vt.default.randomFillSync(le),Ee=0):Ee+e>le.length&&(Vt.default.randomFillSync(le),Ee=0),Ee+=e};var ke=(e=21)=>{cc(e|=0);let t="";for(let r=Ee-e;r<Ee;r++)t+=hs[le[r]&63];return t};function ps(e){return er(`https://suggestqueries.google.com/complete/search?hl=en-us&output=chrome&q=${encodeURIComponent(e)}`,{headers:{"Content-Type":"text/plain; charset=UTF-8"},execute:!!e,keepPreviousData:!0,parseResponse:async t=>{try{let r=await t.json();if(!Array.isArray(r)||r.length<5||!Array.isArray(r[1])||!r[4])return console.warn("Invalid Google suggestions response structure"),[{id:ke(),query:e,url:`https://www.google.com/search?q=${encodeURIComponent(e)}`}];let n=[{id:ke(),query:e,url:`https://www.google.com/search?q=${encodeURIComponent(e)}`}];return r[1].forEach((s,a)=>{if(!s)return;let i=r[4]["google:suggesttype"]?.[a],c=r[2]?.[a];s.toLowerCase()!==e.toLowerCase()&&(i==="NAVIGATION"?n.push({id:ke(),query:c||s,url:s}):i==="QUERY"&&n.push({id:ke(),query:s,url:`https://www.google.com/search?q=${encodeURIComponent(s)}`}))}),n}catch(r){return console.error("Error parsing Google suggestions:",r),[{id:ke(),query:e,url:`https://www.google.com/search?q=${encodeURIComponent(e)}`}]}}})}var L=require("react/jsx-runtime");function lc(){let[e,t]=(0,Ce.useState)(""),[r,n]=ft("view-mode","all"),{isLoading:s,data:a,revalidate:i}=br(),{isLoading:c,data:o,permissionView:u}=$r(e),{isLoading:f,data:l}=yr(e),{isLoading:m,data:d}=ps(e);if(u)return u;let T=(0,Ce.useMemo)(()=>ar(a,e),[a,e]),E=(0,Ce.useMemo)(()=>ir(o,a),[o,a]),S=w=>r==="all"||r===w;return(0,L.jsxs)(U.List,{isLoading:s||c||f||m,searchBarPlaceholder:"Search tabs, bookmarks and browsing history...",searchText:e,onSearchTextChange:t,searchBarAccessory:(0,L.jsxs)(U.List.Dropdown,{tooltip:"Filter View",value:r,onChange:w=>n(w),children:[(0,L.jsx)(U.List.Dropdown.Section,{children:(0,L.jsx)(U.List.Dropdown.Item,{title:"All",value:"all"})}),(0,L.jsxs)(U.List.Dropdown.Section,{children:[(0,L.jsx)(U.List.Dropdown.Item,{title:"Pinned Tabs",value:"pinned-tabs"}),(0,L.jsx)(U.List.Dropdown.Item,{title:"Open Tabs",value:"open-tabs"}),(0,L.jsx)(U.List.Dropdown.Item,{title:"Bookmarks",value:"bookmarks"}),(0,L.jsx)(U.List.Dropdown.Item,{title:"History",value:"history"}),(0,L.jsx)(U.List.Dropdown.Item,{title:"Suggestions",value:"suggestions"})]})]}),children:[S("pinned-tabs")&&(0,L.jsx)(U.List.Section,{title:"Pinned Tabs",children:T?.filter(w=>w.isPinned)?.map((w,B)=>(0,L.jsx)($t,{tab:w,searchText:e,onTabAction:i},`pinned-tab-${w.windowId}-${w.tabId}-${B}`))}),S("open-tabs")&&(0,L.jsx)(U.List.Section,{title:"Open Tabs",children:T?.filter(w=>!w.isPinned)?.map((w,B)=>(0,L.jsx)($t,{tab:w,searchText:e,onTabAction:i},`open-tab-${w.windowId}-${w.tabId}-${B}`))}),S("bookmarks")&&!s&&e&&(0,L.jsx)(U.List.Section,{title:"Bookmarks",children:l?.map(w=>(0,L.jsx)(or,{item:{id:w.id,name:w.name,type:"url",url:w.url,path:w.path.split(" \u203A "),idPath:[]}},`bookmark-${w.id}`))}),S("history")&&!s&&(0,L.jsx)(U.List.Section,{title:"History",children:E?.map(w=>(0,L.jsx)(cr,{item:w,searchText:e,onHistoryAction:i},`history-${w.id}`))}),S("suggestions")&&!s&&e&&(0,L.jsx)(U.List.Section,{title:"Google Suggestions",children:d?.map(w=>(0,L.jsx)(lr,{suggestion:w,onSuggestionAction:i},w.id))})]})}var uc=Mt(lc);
