"use strict";var f=Object.defineProperty;var L=Object.getOwnPropertyDescriptor;var N=Object.getOwnPropertyNames;var $=Object.prototype.hasOwnProperty;var _=(i,o)=>{for(var t in o)f(i,t,{get:o[t],enumerable:!0})},D=(i,o,t,a)=>{if(o&&typeof o=="object"||typeof o=="function")for(let r of N(o))!$.call(i,r)&&r!==t&&f(i,r,{get:()=>o[r],enumerable:!(a=L(o,r))||a.enumerable});return i};var T=i=>D(f({},"__esModule",{value:!0}),i);var G={};_(G,{default:()=>v});module.exports=T(G);var e=require("@raycast/api"),p=require("react");var K=["\u200B-\u200D","\u200E-\u200F","\u202A-\u202E","\u2066-\u2069","\u180B-\u180D","\uFE00-\uFE0F"],R=["\xAD","\u034F","\uFEFF"],F=["\u3164","\u115F","\u1160","\u17B4","\u17B5"],B=["\u2000-\u200A"],U=["\xA0","\u202F","\u205F","\u3000","\u180E"],k=["\u2018","\u2019","\u201C","\u201D"],W=["\u2013","\u2014"];function A(i){return i.join("")}var u=`[${A(K)}${R.join("")}]`,S=`[${F.join("")}]`,m=`[${A(B)}${U.join("")}]`,w=`[${k.join("")}${W.join("")}\u2026]`,I=/[\n\r\t \x20-\x7E]/;function E(i){return`U+${i.toString(16).toUpperCase()}`}function d(i){let o=[...i].length,t=i.replace(new RegExp(`${u}|${S}`,"gu"),"").trim().split(/\s+/u).filter(Boolean).length,a=i.match(new RegExp(`${u}`,"gu"))??[],r=i.match(new RegExp(`${w}`,"gu"))??[],c=i.match(new RegExp(`${m}`,"gu"))??[];return{totalCharacters:o,totalWords:t,invisible:{label:"Invisible Characters",count:a.length,codePoints:x(a)},nonKeyboard:{label:"Non-Keyboard Unicode",count:r.length,codePoints:x(r)},specialSpaces:{label:"Special Spaces",count:c.length,codePoints:x(c)}}}function x(i){let o=new Set;for(let t of i){let a=t.codePointAt(0);a!==void 0&&o.add(E(a))}return[...o]}function g(i){let o=new RegExp(`${u}|${S}`,"gu");return i.replace(o,"")}function C(i,o){let t=i;o.replaceNBSPWithSpace&&(t=t.replace(new RegExp(`${m}`,"gu")," ")),o.convertSmartQuotes&&(t=t.replace(/[\u2018\u2019]/gu,"'").replace(/[\u201C\u201D]/gu,'"')),o.convertDashes&&(t=t.replace(/[\u2013\u2014]/gu,"-")),o.replaceEllipsis&&(t=t.replace(/\u2026/gu,"..."));let a=Math.max(0,Number.parseInt(String(o.tabWidth||4),10)||4);return t=t.replace(/\t/gu," ".repeat(a)),t=t.replace(new RegExp(`${u}|${S}`,"gu"),""),o.normalizeNFKD&&(t=t.normalize("NFKD").replace(/\p{M}+/gu,"")),t=[...t].filter(r=>I.test(r)).join(""),o.collapseMultipleSpaces&&(t=t.replace(/ {2,}/g," ")),t}var y=require("@raycast/api");function P(){return(0,y.getPreferenceValues)()}var n=require("react/jsx-runtime"),M=new RegExp(u,"u"),j=/[\u2018\u2019\u201C\u201D\u2013\u2014\u2026]/u,O=`Hollywood is making a movie about your life, but it has to be in the style of a famous Black film or show (e.g., \u201CLove Jones\u201D vibe, \u201CInsecure\u201D style). Which one are you choosing?
ZWSP:\u200B Soft hyphen:\xAD NBSP:\xA0 Em\u2014dash`;function v(){let i=P(),[o,t]=(0,p.useState)(""),[a,r]=(0,p.useState)({showSpaces:i.previewShowSpaces,showNonKeyboard:i.previewShowNonKeyboard,showUnicodeTags:i.previewShowUnicodeTags}),c=(0,p.useMemo)(()=>d(o),[o]),h=(0,p.useMemo)(()=>V(o,a),[o,a]),{push:b}=(0,e.useNavigation)();return(0,n.jsxs)(e.Form,{actions:(0,n.jsxs)(e.ActionPanel,{children:[(0,n.jsx)(e.Action,{title:"Fix Only Invisible Characters",icon:e.Icon.Eraser,onAction:async()=>{let s=g(o);t(s),await(0,e.showToast)({style:e.Toast.Style.Success,title:"Removed invisible characters"})},shortcut:{modifiers:["cmd"],key:"i"}}),(0,n.jsx)(e.Action,{title:"Fix All Unicode Characters",icon:e.Icon.Wand,onAction:async()=>{let s=C(o,i);t(s),await(0,e.showToast)({style:e.Toast.Style.Success,title:"Normalized Unicode to ASCII"})},shortcut:{modifiers:["cmd","shift"],key:"i"}}),(0,n.jsx)(e.Action.CopyToClipboard,{title:"Copy Cleaned Text",icon:e.Icon.Clipboard,content:o,shortcut:{modifiers:["cmd"],key:"c"}}),(0,n.jsx)(e.Action,{title:"Paste Cleaned Text",icon:e.Icon.Document,onAction:async()=>{await e.Clipboard.copy(o),await(0,e.showToast)({style:e.Toast.Style.Success,title:"Copied cleaned text. Paste with \u2318V"})}}),(0,n.jsx)(e.Action,{title:"See Example",icon:e.Icon.Text,onAction:()=>t(O),shortcut:{modifiers:["cmd"],key:"e"}}),(0,n.jsx)(e.Action,{title:"Analyze Details",icon:e.Icon.Info,onAction:()=>b((0,n.jsx)(X,{text:o})),shortcut:{modifiers:["cmd"],key:"d"}}),(0,n.jsx)(e.Action,{title:"Copy Analysis",icon:e.Icon.Clipboard,onAction:async()=>{let s=d(o),l=[`Invisible: ${s.invisible.count} \u2022 Non-Keyboard: ${s.nonKeyboard.count} \u2022 Special Spaces: ${s.specialSpaces.count}`,"",`Invisible: ${s.invisible.codePoints.join(", ")||"-"}`,`Non-Keyboard: ${s.nonKeyboard.codePoints.join(", ")||"-"}`,`Special Spaces: ${s.specialSpaces.codePoints.join(", ")||"-"}`].join(`
`);await e.Clipboard.copy(l),await(0,e.showToast)({style:e.Toast.Style.Success,title:"Copied analysis"})},shortcut:{modifiers:["cmd","shift"],key:"c"}}),(0,n.jsx)(e.Action,{title:"Clear",icon:e.Icon.Trash,onAction:()=>t(""),shortcut:{modifiers:["cmd"],key:"backspace"}})]}),children:[(0,n.jsx)(e.Form.TextArea,{id:"input",title:"Input Text",placeholder:"Paste or type text to analyze for invisible characters\u2026",value:o,onChange:t,autoFocus:!0,enableMarkdown:!1}),(0,n.jsx)(e.Form.Separator,{}),(0,n.jsx)(e.Form.Description,{title:"Character Analysis",text:`Visible: ${c.totalCharacters-c.invisible.count}  |  Invisible: ${c.invisible.count}
# Characters: ${c.totalCharacters}   # Words: ${c.totalWords}`}),(0,n.jsx)(e.Form.Description,{title:"Detected",text:`Invisible: ${c.invisible.count}  \u2022  Non-Keyboard: ${c.nonKeyboard.count}  \u2022  Special Spaces: ${c.specialSpaces.count}`}),(0,n.jsx)(e.Form.Separator,{}),(0,n.jsx)(e.Form.Description,{title:"Preview",text:"Use actions to toggle markers"}),(0,n.jsx)(e.Form.Checkbox,{id:"spaces",label:"Show Spaces",value:a.showSpaces,onChange:s=>r(l=>({...l,showSpaces:s}))}),(0,n.jsx)(e.Form.Checkbox,{id:"nonkbd",label:"Show Non-Keyboard",value:a.showNonKeyboard,onChange:s=>r(l=>({...l,showNonKeyboard:s}))}),(0,n.jsx)(e.Form.Checkbox,{id:"unicode",label:"Show [U+XXXX]",value:a.showUnicodeTags,onChange:s=>r(l=>({...l,showUnicodeTags:s}))}),(0,n.jsx)(e.Form.Separator,{}),(0,n.jsx)(e.Form.Description,{title:"Revealed & Highlighted",text:h}),(0,n.jsx)(e.Form.Separator,{}),(0,n.jsx)(e.Form.Description,{title:"Legend",text:"Markers used in the preview:"}),(0,n.jsx)(e.Form.Description,{title:"\u{1F7EA} Invisible",text:"Zero-width/control/filler characters"}),(0,n.jsx)(e.Form.Description,{title:"\u{1F7E9} Non-keyboard",text:"Smart quotes, dashes, ellipsis"}),(0,n.jsx)(e.Form.Description,{title:"\xB7 Space",text:"Regular space (when Show Spaces is enabled)"}),(0,n.jsx)(e.Form.Description,{title:"\u237D NBSP",text:"Non-breaking space"}),(0,n.jsx)(e.Form.Description,{title:"\u2192 Tab",text:"Tab character"}),(0,n.jsx)(e.Form.Description,{title:"[U+XXXX]",text:"Code point tag (annotation only)"})]})}function V(i,o){let t="";for(let a of i){let r=a.codePointAt(0)??0,c=a===" ",h=a==="	",b=a==="\xA0",s=M.test(a),l=j.test(a);o.showSpaces&&(c||h||b)?t+=h?"\u2192":b?"\u237D":"\xB7":s?t+="\u{1F7EA}":o.showNonKeyboard&&l?t+="\u{1F7E9}":t+=a,o.showUnicodeTags&&a>"\x7F"&&(t+=`[U+${r.toString(16).toUpperCase()}]`)}return t}function X({text:i}){let o=d(i),t=["# Analysis",`- Total characters: ${o.totalCharacters}`,`- Words: ${o.totalWords}`,`- Invisible: ${o.invisible.count} (${o.invisible.codePoints.join(", ")})`,`- Non-Keyboard: ${o.nonKeyboard.count} (${o.nonKeyboard.codePoints.join(", ")})`,`- Special Spaces: ${o.specialSpaces.count} (${o.specialSpaces.codePoints.join(", ")})`].join(`
`);return(0,n.jsx)(e.Detail,{markdown:t})}
