{
  "version": 3,
  "sources": ["../../src/tools/add-repository.ts"],
  "sourcesContent": ["import { Cache } from \"@raycast/api\";\nimport type { Repository } from \"../launch-agent\";\n\ntype Input = {\n  /**\n   * The GitHub repository URL to add, e.g. https://github.com/raycast/extensions\n   *\n   * @example \"https://github.com/raycast/extensions\"\n   */\n  url: string;\n};\n\n/**\n * Adds a new repository to the user's configured repositories list.\n * The repository can then be used with the launch-agent tool.\n */\nexport default async function tool(input: Input): Promise<string> {\n  if (!input.url) {\n    return \"Error: Repository URL is required\";\n  }\n\n  if (!input.url.startsWith(\"https://github.com/\")) {\n    return \"Error: Must be a GitHub repository URL starting with https://github.com/\";\n  }\n\n  const urlParts = input.url.replace(\"https://github.com/\", \"\").split(\"/\");\n  if (urlParts.length < 2 || !urlParts[0] || !urlParts[1]) {\n    return \"Error: Invalid GitHub repository URL format. Expected: https://github.com/owner/repo\";\n  }\n\n  const cache = new Cache();\n\n  const existingData = cache.get(\"repositories\");\n  const existingRepositories: Repository[] = existingData ? JSON.parse(existingData) : [];\n\n  const repoName = input.url.replace(\"https://github.com/\", \"\");\n  const existingRepo = existingRepositories.find((repo) => repo.url === input.url || repo.name === repoName);\n\n  if (existingRepo) {\n    return `Repository \"${repoName}\" is already configured`;\n  }\n\n  const newRepository: Repository = {\n    id: Date.now().toString(),\n    name: repoName,\n    url: input.url,\n  };\n\n  const updatedRepositories = [...existingRepositories, newRepository];\n\n  cache.set(\"repositories\", JSON.stringify(updatedRepositories));\n\n  return `Successfully added repository \"${repoName}\" to your configured repositories`;\n}\n"],
  "mappings": "yaAAA,IAAAA,EAAA,GAAAC,EAAAD,EAAA,aAAAE,IAAA,eAAAC,EAAAH,GAAA,IAAAI,EAAsB,wBAgBtB,eAAOF,EAA4BG,EAA+B,CAChE,GAAI,CAACA,EAAM,IACT,MAAO,oCAGT,GAAI,CAACA,EAAM,IAAI,WAAW,qBAAqB,EAC7C,MAAO,2EAGT,IAAMC,EAAWD,EAAM,IAAI,QAAQ,sBAAuB,EAAE,EAAE,MAAM,GAAG,EACvE,GAAIC,EAAS,OAAS,GAAK,CAACA,EAAS,CAAC,GAAK,CAACA,EAAS,CAAC,EACpD,MAAO,uFAGT,IAAMC,EAAQ,IAAI,QAEZC,EAAeD,EAAM,IAAI,cAAc,EACvCE,EAAqCD,EAAe,KAAK,MAAMA,CAAY,EAAI,CAAC,EAEhFE,EAAWL,EAAM,IAAI,QAAQ,sBAAuB,EAAE,EAG5D,GAFqBI,EAAqB,KAAME,GAASA,EAAK,MAAQN,EAAM,KAAOM,EAAK,OAASD,CAAQ,EAGvG,MAAO,eAAeA,CAAQ,0BAGhC,IAAME,EAA4B,CAChC,GAAI,KAAK,IAAI,EAAE,SAAS,EACxB,KAAMF,EACN,IAAKL,EAAM,GACb,EAEMQ,EAAsB,CAAC,GAAGJ,EAAsBG,CAAa,EAEnE,OAAAL,EAAM,IAAI,eAAgB,KAAK,UAAUM,CAAmB,CAAC,EAEtD,kCAAkCH,CAAQ,mCACnD",
  "names": ["add_repository_exports", "__export", "tool", "__toCommonJS", "import_api", "input", "urlParts", "cache", "existingData", "existingRepositories", "repoName", "repo", "newRepository", "updatedRepositories"]
}
