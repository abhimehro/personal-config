"use strict";var c=Object.defineProperty;var T=Object.getOwnPropertyDescriptor;var I=Object.getOwnPropertyNames;var x=Object.prototype.hasOwnProperty;var L=(t,n)=>{for(var e in n)c(t,e,{get:n[e],enumerable:!0})},O=(t,n,e,r)=>{if(n&&typeof n=="object"||typeof n=="function")for(let o of I(n))!x.call(t,o)&&o!==e&&c(t,o,{get:()=>n[o],enumerable:!(r=T(n,o))||r.enumerable});return t};var b=t=>O(c({},"__esModule",{value:!0}),t);var G={};L(G,{default:()=>D});module.exports=b(G);var i=require("@raycast/api"),p=require("react");var F=/^((\s*)(?:-\s)?)/,R=/^\s*$/,A=/[^\r\n]+/g,u=t=>{let n=P(t),e={name:".",children:[],indentCount:-1,parent:null},r=[e];for(let o of n){for(;r[r.length-1].indentCount>=o.indentCount;)r.pop();let l=r[r.length-1];l.children.push(o),o.parent=l,r.push(o)}return e},P=t=>{let n=t.match(A)||[];return n=n.filter(e=>!R.test(e)),n.map(e=>{let r=F.exec(e);if(!r)throw new Error(`Unable to execute leadingWhitespaceAndBulletRegex against string: "${e}"`);let o=e.replace(r[1],""),l=r[2].length;return{name:o,children:[],indentCount:l,parent:null}})};var g={ascii:{CHILD:"|-- ",LAST_CHILD:"`-- ",DIRECTORY:"|   ",EMPTY:"    "},"utf-8":{CHILD:"\u251C\u2500\u2500 ",LAST_CHILD:"\u2514\u2500\u2500 ",DIRECTORY:"\u2502   ",EMPTY:"    "}};var w={charset:"utf-8",trailingDirSlash:!1,fullPath:!1,rootDot:!0},C=(t,n)=>{let e=[E(t,n)];for(let r of t.children)e=e.concat(C(r,n));return e},h=(t,n)=>{let e={...w,...n};return C(t,e).filter(o=>o!=null).join(`
`)},E=(t,n)=>{let e=g[n.charset];if(!t.parent)return n.rootDot?t.name:null;let r=[f(t)?e.LAST_CHILD:e.CHILD,S(t,n)],o=t.parent;for(;o&&o.parent;)r.unshift(f(o)?e.EMPTY:e.DIRECTORY),o=o.parent;return r.join("").substring(n.rootDot?0:e.CHILD.length)},S=(t,n)=>{let e=[t.name];return n.trailingDirSlash&&t.children.length>0&&!/\/\s*$/.test(t.name)&&e.push("/"),n.fullPath&&t.parent&&e.unshift(S(t.parent,{...n,trailingDirSlash:!0})),e.join("")},f=t=>!!(t.parent&&t.parent.children[t.parent.children.length-1]===t);var a=require("react/jsx-runtime");function D(){let[t,n]=(0,p.useState)(""),[e,r]=(0,p.useState)({charset:"utf-8",trailingDirSlash:!0,fullPath:!1,rootDot:!1}),o=s=>{r({...e,charset:s})},l=s=>m=>r({...e,[s]:m}),d=s=>{n(s)};return(0,a.jsxs)(i.Form,{actions:(0,a.jsx)(i.ActionPanel,{children:(0,a.jsx)(i.Action.CopyToClipboard,{title:"Copy Output",content:h(u(t),e)})}),children:[(0,a.jsx)(i.Form.TextArea,{id:"input",title:"Input",value:t,onChange:d}),(0,a.jsxs)(i.Form.Dropdown,{id:"charset",title:"Charset",value:e.charset,onChange:s=>o(s),storeValue:!0,children:[(0,a.jsx)(i.Form.Dropdown.Item,{value:"ascii",title:"ASCII"}),(0,a.jsx)(i.Form.Dropdown.Item,{value:"utf-8",title:"UTF-8"})]}),(0,a.jsx)(i.Form.Checkbox,{id:"trailingDirSlash",label:"Show Trailing /",value:e.trailingDirSlash,onChange:l("trailingDirSlash")}),(0,a.jsx)(i.Form.Checkbox,{id:"fullPath",label:"Show Full Path",value:e.fullPath,onChange:l("fullPath"),storeValue:!0}),(0,a.jsx)(i.Form.Checkbox,{id:"rootDot",label:"Show Root .",value:e.rootDot,onChange:l("rootDot"),storeValue:!0}),(0,a.jsx)(i.Form.TextArea,{id:"output",title:"Output",value:h(u(t),e),onChange:()=>{}})]})}
