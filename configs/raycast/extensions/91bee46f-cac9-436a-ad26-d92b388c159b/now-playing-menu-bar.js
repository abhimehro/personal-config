"use strict";var B=Object.create;var m=Object.defineProperty;var $=Object.getOwnPropertyDescriptor;var F=Object.getOwnPropertyNames;var V=Object.getPrototypeOf,W=Object.prototype.hasOwnProperty;var G=(e,n)=>{for(var a in n)m(e,a,{get:n[a],enumerable:!0})},S=(e,n,a,o)=>{if(n&&typeof n=="object"||typeof n=="function")for(let u of F(n))!W.call(e,u)&&u!==a&&m(e,u,{get:()=>n[u],enumerable:!(o=$(n,u))||o.enumerable});return e};var J=(e,n,a)=>(a=e!=null?B(V(e)):{},S(n||!e||!e.__esModule?m(a,"default",{value:e,enumerable:!0}):a,e)),X=e=>S(m({},"__esModule",{value:!0}),e);var K={};G(K,{default:()=>z});module.exports=X(K);var y=require("@raycast/api");var k=J(require("node:process"),1),b=require("node:util"),P=require("node:child_process"),Z=(0,b.promisify)(P.execFile);async function t(e,{humanReadableOutput:n=!0}={}){if(k.default.platform!=="darwin")throw new Error("macOS only");let a=n?[]:["-ss"],{stdout:o}=await Z("osascript",["-e",e,a]);return o.trim()}var T=require("@raycast/api");var N=e=>{switch(e){case"Bulgarian":return{playback:"\u0412\u044A\u0437\u043F\u0440\u043E\u0438\u0437\u0432\u0435\u0436\u0434\u0430\u043D\u0435",shuffle:"\u0420\u0430\u0437\u0431\u044A\u0440\u043A\u0430\u0439",next:"\u0421\u043B\u0435\u0434\u0432\u0430\u0449/\u0430",previous:"\u041F\u0440\u0435\u0434\u0438\u0448\u0435\u043D/\u0430",play:"\u041F\u0443\u0441\u043D\u0438",pause:"\u041F\u0430\u0443\u0437\u0430",playNext:"\u041F\u0443\u0441\u043D\u0438 \u0441\u043B\u0435\u0434\u0432\u0430\u0449\u0430\u0442\u0430 \u043F\u0435\u0441\u0435\u043D",playPrevious:"\u041F\u0443\u0441\u043D\u0438 \u043F\u0440\u0435\u0434\u0438\u0448\u043D\u0430\u0442\u0430 \u043F\u0435\u0441\u0435\u043D",playRepeat:"\u041F\u043E\u0432\u0442\u043E\u0440\u0435\u043D\u0438\u0435",playRepeatOne:"\u041F\u043E\u0432\u0442\u0430\u0440\u044F\u0439 \u0435\u0434\u043D\u0430 \u043F\u0435\u0441\u0435\u043D",volUp:"\u0423\u0432\u0435\u043B\u0438\u0447\u0430\u0432\u0430\u043D\u0435 \u043D\u0430 \u0441\u0438\u043B\u0430\u0442\u0430 \u043D\u0430 \u0437\u0432\u0443\u043A\u0430",volDown:"\u041D\u0430\u043C\u0430\u043B\u044F\u0432\u0430\u043D\u0435 \u043D\u0430 \u0441\u0438\u043B\u0430\u0442\u0430 \u043D\u0430 \u0437\u0432\u0443\u043A\u0430"};case"Danish":return{playback:"Afspiller",shuffle:"Shuffle",next:"N\xE6ste",previous:"Forrige",play:"Play",pause:"Pause",playNext:"Spil n\xE6ste sang",playPrevious:"Spil forrige sang",playRepeat:"Gentag",playRepeatOne:"Gentag en sang",volUp:"Lydstyrke op",volDown:"Lydstyrke ned"};case"German":return{playback:"Wiedergabe",shuffle:"Shuffle",next:"Weiter",previous:"Zur\xFCck",play:"Abspielen",pause:"Pause",playNext:"N\xE4chsten Titel abspielen",playPrevious:"Vorherigen Titel abspielen",playRepeat:"Wiederholen",playRepeatOne:"Einen Titel wiederholen",volUp:"Lauter",volDown:"Leiser"};case"English":return{playback:"Playback",shuffle:"Shuffle",next:"Next",previous:"Previous",play:"Play",pause:"Pause",playNext:"Play Next Track",playPrevious:"Play Previous Track",playRepeat:"Repeat",playRepeatOne:"Repeat One",volUp:"Volume up",volDown:"Volume down"};case"Spanish":return{playback:"Reproducci\xF3n",shuffle:"Aleatorio",next:"Siguiente",previous:"Anterior",play:"Reproducir",pause:"Pausa",playNext:"Reproducir siguiente pista",playPrevious:"Reproducir pista anterior",playRepeat:"Repetir",playRepeatOne:"Repetir una",volUp:"Subir el volumen",volDown:"Bajar el volumen"};case"French":return{playback:"Lecture",shuffle:"Al\xE9atoire",next:"Suivant",previous:"Pr\xE9c\xE9dent",play:"Jouer",pause:"Pause",playNext:"Lire le morceau suivant",playPrevious:"Lire le morceau pr\xE9c\xE9dent",playRepeat:"R\xE9p\xE9ter",playRepeatOne:"R\xE9p\xE9ter un morceau",volUp:"Augmenter le volume",volDown:"Diminuer le volume"};case"Croatian":return{playback:"Reprodukcija",shuffle:"Nasumi\u010Dno",next:"Dalje",previous:"Prethodno",play:"Reproduciraj",pause:"Pauza",playNext:"Reproduciraj sljede\u0107u pjesmu",playPrevious:"Reproduciraj prethodnu pjesmu",playRepeat:"Ponovi",playRepeatOne:"Ponovi jednu pjesmu",volUp:"Ve\u0107a glasno\u0107a",volDown:"Manja glasno\u0107a"};case"Italian":return{playback:"Riproduzione",shuffle:"Shuffle",next:"Successivo",previous:"Precedente",play:"Play",pause:"Pausa",playNext:"Riproduci brano successivo",playPrevious:"Riproduci brano precedente",playRepeat:"Ripeti",playRepeatOne:"Ripeti un brano",volUp:"Alza volume",volDown:"Abbassa volume"};case"Norwegian":return{playback:"Avspilling",shuffle:"Shuffle",next:"Neste",previous:"Forrige",play:"Spill av",pause:"Pause",playNext:"Spill neste spor",playPrevious:"Spill forrige spor",playRepeat:"Repeter",playRepeatOne:"Gjenta \xE9n",volUp:"Lydstyrke opp",volDown:"Lydstyrke ned"};case"Polish":return{playback:"Odtwarzanie",shuffle:"Losowo",next:"Nast\u0119pny",previous:"Poprzedni",play:"Odtw\xF3rz",pause:"Pauza",playNext:"Odtw\xF3rz nast\u0119pny utw\xF3r",playPrevious:"Odtw\xF3rz poprzedni utw\xF3r",playRepeat:"Powtarzaj",playRepeatOne:"Powt\xF3rz jeden",volUp:"G\u0142o\u015Bniej",volDown:"Ciszej"};case"PortugueseBrazil":return{playback:"Reprodu\xE7\xE3o",shuffle:"Aleat\xF3rio",next:"Pr\xF3ximo",previous:"Voltar",play:"Tocar",pause:"Pausa",playNext:"Reproduzir pr\xF3xima faixa",playPrevious:"Reproduzir faixa anterior",playRepeat:"Repetir",playRepeatOne:"Repetir uma",volUp:"Aumentar Volume",volDown:"Diminuir Volume"};case"Portuguese":return{playback:"Reprodu\xE7\xE3o",shuffle:"Aleat\xF3rio",next:"Pr\xF3ximo",previous:"Anterior",play:"Tocar",pause:"Pausa",playNext:"Reproduzir faixa seguinte",playPrevious:"Reproduzir faixa anterior",playRepeat:"Repetir",playRepeatOne:"Repetir uma",volUp:"Aumentar volume",volDown:"Diminuir volume"};case"Slovenian":return{playback:"Predvajanje",shuffle:"Naklju\u010Dno prerazporedi",next:"Naslednje",previous:"Prej\u0161nje",play:"Predvajaj",pause:"Premor",playNext:"Predvajaj naslednjo skladbo",playPrevious:"Predvajaj prej\u0161njo skladbo",playRepeat:"Ponovi",playRepeatOne:"Ponovi eno",volUp:"Povi\u0161aj glasnost",volDown:"Zni\u017Eaj glasnost"};case"Serbian":return{playback:"Reprodukcija",shuffle:"Nasumi\u010Dno",next:"Slede\u0107e",previous:"Prethodno",play:"Reprodukuj",pause:"Pauziraj",playNext:"Pusti slede\u0107u pesmu",playPrevious:"Pusti prethodnu pesmu",playRepeat:"Ponovi",playRepeatOne:"Ponovi jednu",volUp:"Pove\u0107aj ja\u010Dinu zvuka",volDown:"Smanji ja\u010Dinu zvuka"};case"Swedish":return{playback:"Uppspelning",shuffle:"Blanda",next:"N\xE4sta",previous:"F\xF6reg\xE5ende",play:"Spela",pause:"Pausa",playNext:"Spela n\xE4sta sp\xE5r",playPrevious:"Spela f\xF6reg\xE5ende sp\xE5r",playRepeat:"Repetera",playRepeatOne:"Upprepa en",volUp:"\xD6ka volymen",volDown:"S\xE4nk volymen"};case"Turkish":return{playback:"Oynatma",shuffle:"Kar\u0131\u015Ft\u0131r",next:"\u0130leri",previous:"\xD6nceki",play:"Y\xFCr\xFCt",pause:"Duraklat",playNext:"Sonraki par\xE7ay\u0131 \xE7al",playPrevious:"\xD6nceki par\xE7ay\u0131 \xE7al",playRepeat:"Tekrarla",playRepeatOne:"Bir kez tekrarla",volUp:"Sesi a\xE7",volDown:"Sesi k\u0131s"};default:return{playback:"Playback",shuffle:"Shuffle",next:"Next",previous:"Previous",play:"Play",pause:"Pause",playNext:"Play Next Track",playPrevious:"Play Previous Track",playRepeat:"Repeat",playRepeatOne:"Repeat One",volUp:"Volume up",volDown:"Volume down"}}};async function H(e){try{let a=(await t(`
        tell application "System Events"
          if exists (processes where name is "TIDAL") then
            return "true"
          else
            return "false"
          end if
        end tell
      `)).trim().toLowerCase()==="true";return!a&&!e?.silent&&await(0,y.showHUD)("Tidal: Not running \u274C"),a}catch(n){return console.error("Error checking if Tidal is running:",n),e?.silent||await(0,y.showHUD)("Tidal: Error checking if running \u274C"),!1}}async function r(e,n){if(await H(n))try{await e()}catch(o){console.error("Error running Tidal command:",o),await(0,y.showHUD)(`Tidal: Error running command! \u274C
Did you choose the right language in your settings?`)}}function O(){return(0,T.getPreferenceValues)()}function l(){return N(O().language)}function s(e){O().showMessages&&(0,y.showHUD)(e)}async function j(){let e=await t(`
      tell application "System Events"
        try
        tell process "TIDAL"
          set windowTitle to name of window 1
          return windowTitle
        end tell
        on error
          return "TIDAL"
        end try
      end tell`),n=e,a=e.replace(/(.{40}\S*?)(\s+|$)/g,`$1
`),o=e.length>20?e.slice(0,20)+"...":e;return{full:n,formatted:a,short:o}}var p=require("@raycast/api"),c=require("react");var A=require("@raycast/api");async function w(){await r(async()=>{await(0,A.closeMainWindow)();let e=l();await t(`
      tell application "System Events"
        tell process "TIDAL"
          if name of menu item 0 of menu "${e.playback}" of menu bar 1 is "${e.pause}" then
            click menu item "${e.pause}" of menu "${e.playback}" of menu bar 1 
          end if
        end tell
      end tell`),s("Tidal: Music is now paused \u23F8\uFE0F")})}var D=require("@raycast/api");async function h(){await r(async()=>{await(0,D.closeMainWindow)();let e=l();await t(`
      tell application "System Events"
        tell process "TIDAL"
          click menu item "${e.next}" of menu "${e.playback}" of menu bar 1
        end tell
      end tell`),s("Tidal: Next song \u23ED\uFE0F")})}var M=require("@raycast/api");async function x(){await r(async()=>{await(0,M.closeMainWindow)();let e=l();await t(`
      tell application "System Events"
        tell process "TIDAL"
          click menu item "${e.previous}" of menu "${e.playback}" of menu bar 1
        end tell
      end tell`),s("Tidal: Previous song \u23EE\uFE0F")})}var L=require("@raycast/api");async function R(){await r(async()=>{await(0,L.closeMainWindow)();let e=l(),a=await t(`
      tell application "System Events"
        tell process "TIDAL"
          set shuffleMenuItem to menu item "${e.shuffle}" of menu "${e.playback}" of menu bar 1
          set wasShuffled to value of attribute "AXMenuItemMarkChar" of shuffleMenuItem is not missing value
          click shuffleMenuItem
          return wasShuffled
        end tell
      end tell
    `)==="true";s(a?"Tidal: Shuffle toggled off \u{1F500}":"Tidal: Shuffle toggled on \u{1F500}")})}var i=require("react/jsx-runtime");function z(){let[e,n]=(0,c.useState)(null),[a,o]=(0,c.useState)(null),[u,I]=(0,c.useState)(null),[E,d]=(0,c.useState)(!0);(0,c.useEffect)(()=>{async function g(){d(!0),await r(async()=>{let{full:f,formatted:v,short:C}=await j();n(f),I(v),o(C),d(!1)},{silent:!0}),d(!1)}g()},[]);let U=(0,i.jsxs)(p.MenuBarExtra,{icon:{source:{light:"icons/tidal-logo-light.svg",dark:"icons/tidal-logo-dark.svg"}},title:a!==null&&a!=="TIDAL"?a:void 0,isLoading:E,tooltip:e!==null&&e!=="TIDAL"?e:"Tidal must be minimized, hidden or open to show now playing information",children:[a!==null&&a!=="TIDAL"?(0,i.jsx)(p.MenuBarExtra.Section,{title:u,children:[{icon:"\u23F8\uFE0F",title:"Pause",action:w},{icon:"\u23E9",title:"Next Song",action:h},{icon:"\u23EA",title:"Previous Song",action:x},{icon:"\u{1F500}",title:"Shuffle",action:R}].map(({icon:g,title:f,action:v})=>(0,i.jsx)(p.MenuBarExtra.Item,{icon:g,title:f,onAction:async()=>{await v()}},f))}):null,(0,i.jsx)(p.MenuBarExtra.Section,{children:(0,i.jsx)(p.MenuBarExtra.Item,{title:"Open Tidal",onAction:()=>(0,p.open)("/Applications/Tidal.app")})})]});return(0,i.jsx)(i.Fragment,{children:U})}
