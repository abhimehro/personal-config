"use strict";var uu=Object.create;var Sr=Object.defineProperty;var cu=Object.getOwnPropertyDescriptor;var fu=Object.getOwnPropertyNames;var du=Object.getPrototypeOf,hu=Object.prototype.hasOwnProperty;var vt=(n,r)=>()=>(n&&(r=n(n=0)),r);var A=(n,r)=>()=>(r||n((r={exports:{}}).exports,r),r.exports),pi=(n,r)=>{for(var o in r)Sr(n,o,{get:r[o],enumerable:!0})},bi=(n,r,o,a)=>{if(r&&typeof r=="object"||typeof r=="function")for(let s of fu(r))!hu.call(n,s)&&s!==o&&Sr(n,s,{get:()=>r[s],enumerable:!(a=cu(r,s))||a.enumerable});return n};var se=(n,r,o)=>(o=n!=null?uu(du(n)):{},bi(r||!n||!n.__esModule?Sr(o,"default",{value:n,enumerable:!0}):o,n)),mu=n=>bi(Sr({},"__esModule",{value:!0}),n);var Ri=A((Lf,wi)=>{wi.exports=_i;_i.sync=bu;var gi=require("fs");function pu(n,r){var o=r.pathExt!==void 0?r.pathExt:process.env.PATHEXT;if(!o||(o=o.split(";"),o.indexOf("")!==-1))return!0;for(var a=0;a<o.length;a++){var s=o[a].toLowerCase();if(s&&n.substr(-s.length).toLowerCase()===s)return!0}return!1}function Si(n,r,o){return!n.isSymbolicLink()&&!n.isFile()?!1:pu(r,o)}function _i(n,r,o){gi.stat(n,function(a,s){o(a,a?!1:Si(s,n,r))})}function bu(n,r){return Si(gi.statSync(n),n,r)}});var Ai=A((zf,Pi)=>{Pi.exports=Ei;Ei.sync=yu;var Ti=require("fs");function Ei(n,r,o){Ti.stat(n,function(a,s){o(a,a?!1:Ci(s,r))})}function yu(n,r){return Ci(Ti.statSync(n),r)}function Ci(n,r){return n.isFile()&&gu(n,r)}function gu(n,r){var o=n.mode,a=n.uid,s=n.gid,u=r.uid!==void 0?r.uid:process.getuid&&process.getuid(),f=r.gid!==void 0?r.gid:process.getgid&&process.getgid(),p=parseInt("100",8),b=parseInt("010",8),m=parseInt("001",8),R=p|b,T=o&m||o&b&&s===f||o&p&&a===u||o&R&&u===0;return T}});var xi=A((Mf,vi)=>{var $f=require("fs"),_r;process.platform==="win32"||global.TESTING_WINDOWS?_r=Ri():_r=Ai();vi.exports=Rn;Rn.sync=Su;function Rn(n,r,o){if(typeof r=="function"&&(o=r,r={}),!o){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(a,s){Rn(n,r||{},function(u,f){u?s(u):a(f)})})}_r(n,r||{},function(a,s){a&&(a.code==="EACCES"||r&&r.ignoreErrors)&&(a=null,s=!1),o(a,s)})}function Su(n,r){try{return _r.sync(n,r||{})}catch(o){if(r&&r.ignoreErrors||o.code==="EACCES")return!1;throw o}}});var Di=A((jf,Wi)=>{var tt=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",Bi=require("path"),_u=tt?";":":",ki=xi(),Oi=n=>Object.assign(new Error(`not found: ${n}`),{code:"ENOENT"}),Ii=(n,r)=>{let o=r.colon||_u,a=n.match(/\//)||tt&&n.match(/\\/)?[""]:[...tt?[process.cwd()]:[],...(r.path||process.env.PATH||"").split(o)],s=tt?r.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",u=tt?s.split(o):[""];return tt&&n.indexOf(".")!==-1&&u[0]!==""&&u.unshift(""),{pathEnv:a,pathExt:u,pathExtExe:s}},qi=(n,r,o)=>{typeof r=="function"&&(o=r,r={}),r||(r={});let{pathEnv:a,pathExt:s,pathExtExe:u}=Ii(n,r),f=[],p=m=>new Promise((R,T)=>{if(m===a.length)return r.all&&f.length?R(f):T(Oi(n));let S=a[m],g=/^".*"$/.test(S)?S.slice(1,-1):S,y=Bi.join(g,n),C=!g&&/^\.[\\\/]/.test(n)?n.slice(0,2)+y:y;R(b(C,m,0))}),b=(m,R,T)=>new Promise((S,g)=>{if(T===s.length)return S(p(R+1));let y=s[T];ki(m+y,{pathExt:u},(C,P)=>{if(!C&&P)if(r.all)f.push(m+y);else return S(m+y);return S(b(m,R,T+1))})});return o?p(0).then(m=>o(null,m),o):p(0)},wu=(n,r)=>{r=r||{};let{pathEnv:o,pathExt:a,pathExtExe:s}=Ii(n,r),u=[];for(let f=0;f<o.length;f++){let p=o[f],b=/^".*"$/.test(p)?p.slice(1,-1):p,m=Bi.join(b,n),R=!b&&/^\.[\\\/]/.test(n)?n.slice(0,2)+m:m;for(let T=0;T<a.length;T++){let S=R+a[T];try{if(ki.sync(S,{pathExt:s}))if(r.all)u.push(S);else return S}catch{}}}if(r.all&&u.length)return u;if(r.nothrow)return null;throw Oi(n)};Wi.exports=qi;qi.sync=wu});var En=A((Nf,Tn)=>{"use strict";var Fi=(n={})=>{let r=n.env||process.env;return(n.platform||process.platform)!=="win32"?"PATH":Object.keys(r).reverse().find(a=>a.toUpperCase()==="PATH")||"Path"};Tn.exports=Fi;Tn.exports.default=Fi});var Mi=A((Uf,$i)=>{"use strict";var Li=require("path"),Ru=Di(),Tu=En();function zi(n,r){let o=n.options.env||process.env,a=process.cwd(),s=n.options.cwd!=null,u=s&&process.chdir!==void 0&&!process.chdir.disabled;if(u)try{process.chdir(n.options.cwd)}catch{}let f;try{f=Ru.sync(n.command,{path:o[Tu({env:o})],pathExt:r?Li.delimiter:void 0})}catch{}finally{u&&process.chdir(a)}return f&&(f=Li.resolve(s?n.options.cwd:"",f)),f}function Eu(n){return zi(n)||zi(n,!0)}$i.exports=Eu});var ji=A((Hf,Pn)=>{"use strict";var Cn=/([()\][%!^"`<>&|;, *?])/g;function Cu(n){return n=n.replace(Cn,"^$1"),n}function Pu(n,r){return n=`${n}`,n=n.replace(/(?=(\\+?)?)\1"/g,'$1$1\\"'),n=n.replace(/(?=(\\+?)?)\1$/,"$1$1"),n=`"${n}"`,n=n.replace(Cn,"^$1"),r&&(n=n.replace(Cn,"^$1")),n}Pn.exports.command=Cu;Pn.exports.argument=Pu});var Ui=A((Gf,Ni)=>{"use strict";Ni.exports=/^#!(.*)/});var Gi=A((Vf,Hi)=>{"use strict";var Au=Ui();Hi.exports=(n="")=>{let r=n.match(Au);if(!r)return null;let[o,a]=r[0].replace(/#! ?/,"").split(" "),s=o.split("/").pop();return s==="env"?a:a?`${s} ${a}`:s}});var Yi=A((Yf,Vi)=>{"use strict";var An=require("fs"),vu=Gi();function xu(n){let o=Buffer.alloc(150),a;try{a=An.openSync(n,"r"),An.readSync(a,o,0,150,0),An.closeSync(a)}catch{}return vu(o.toString())}Vi.exports=xu});var Zi=A((Qf,Ki)=>{"use strict";var Bu=require("path"),Qi=Mi(),Xi=ji(),ku=Yi(),Ou=process.platform==="win32",Iu=/\.(?:com|exe)$/i,qu=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function Wu(n){n.file=Qi(n);let r=n.file&&ku(n.file);return r?(n.args.unshift(n.file),n.command=r,Qi(n)):n.file}function Du(n){if(!Ou)return n;let r=Wu(n),o=!Iu.test(r);if(n.options.forceShell||o){let a=qu.test(r);n.command=Bu.normalize(n.command),n.command=Xi.command(n.command),n.args=n.args.map(u=>Xi.argument(u,a));let s=[n.command].concat(n.args).join(" ");n.args=["/d","/s","/c",`"${s}"`],n.command=process.env.comspec||"cmd.exe",n.options.windowsVerbatimArguments=!0}return n}function Fu(n,r,o){r&&!Array.isArray(r)&&(o=r,r=null),r=r?r.slice(0):[],o=Object.assign({},o);let a={command:n,args:r,options:o,file:void 0,original:{command:n,args:r}};return o.shell?a:Du(a)}Ki.exports=Fu});var ta=A((Xf,ea)=>{"use strict";var vn=process.platform==="win32";function xn(n,r){return Object.assign(new Error(`${r} ${n.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${r} ${n.command}`,path:n.command,spawnargs:n.args})}function Lu(n,r){if(!vn)return;let o=n.emit;n.emit=function(a,s){if(a==="exit"){let u=Ji(s,r);if(u)return o.call(n,"error",u)}return o.apply(n,arguments)}}function Ji(n,r){return vn&&n===1&&!r.file?xn(r.original,"spawn"):null}function zu(n,r){return vn&&n===1&&!r.file?xn(r.original,"spawnSync"):null}ea.exports={hookChildProcess:Lu,verifyENOENT:Ji,verifyENOENTSync:zu,notFoundError:xn}});var oa=A((Kf,rt)=>{"use strict";var ra=require("child_process"),Bn=Zi(),kn=ta();function na(n,r,o){let a=Bn(n,r,o),s=ra.spawn(a.command,a.args,a.options);return kn.hookChildProcess(s,a),s}function $u(n,r,o){let a=Bn(n,r,o),s=ra.spawnSync(a.command,a.args,a.options);return s.error=s.error||kn.verifyENOENTSync(s.status,a),s}rt.exports=na;rt.exports.spawn=na;rt.exports.sync=$u;rt.exports._parse=Bn;rt.exports._enoent=kn});var aa=A((Zf,ia)=>{"use strict";ia.exports=n=>{let r=typeof n=="string"?`
`:10,o=typeof n=="string"?"\r":13;return n[n.length-1]===r&&(n=n.slice(0,n.length-1)),n[n.length-1]===o&&(n=n.slice(0,n.length-1)),n}});var ua=A((Jf,Bt)=>{"use strict";var xt=require("path"),sa=En(),la=n=>{n={cwd:process.cwd(),path:process.env[sa()],execPath:process.execPath,...n};let r,o=xt.resolve(n.cwd),a=[];for(;r!==o;)a.push(xt.join(o,"node_modules/.bin")),r=o,o=xt.resolve(o,"..");let s=xt.resolve(n.cwd,n.execPath,"..");return a.push(s),a.concat(n.path).join(xt.delimiter)};Bt.exports=la;Bt.exports.default=la;Bt.exports.env=n=>{n={env:process.env,...n};let r={...n.env},o=sa({env:r});return n.path=r[o],r[o]=Bt.exports(n),r}});var fa=A((ed,On)=>{"use strict";var ca=(n,r)=>{for(let o of Reflect.ownKeys(r))Object.defineProperty(n,o,Object.getOwnPropertyDescriptor(r,o));return n};On.exports=ca;On.exports.default=ca});var ha=A((td,Rr)=>{"use strict";var Mu=fa(),wr=new WeakMap,da=(n,r={})=>{if(typeof n!="function")throw new TypeError("Expected a function");let o,a=0,s=n.displayName||n.name||"<anonymous>",u=function(...f){if(wr.set(u,++a),a===1)o=n.apply(this,f),n=null;else if(r.throw===!0)throw new Error(`Function \`${s}\` can only be called once`);return o};return Mu(u,n),wr.set(u,a),u};Rr.exports=da;Rr.exports.default=da;Rr.exports.callCount=n=>{if(!wr.has(n))throw new Error(`The given function \`${n.name}\` is not wrapped by the \`onetime\` package`);return wr.get(n)}});var ma=A(Tr=>{"use strict";Object.defineProperty(Tr,"__esModule",{value:!0});Tr.SIGNALS=void 0;var ju=[{name:"SIGHUP",number:1,action:"terminate",description:"Terminal closed",standard:"posix"},{name:"SIGINT",number:2,action:"terminate",description:"User interruption with CTRL-C",standard:"ansi"},{name:"SIGQUIT",number:3,action:"core",description:"User interruption with CTRL-\\",standard:"posix"},{name:"SIGILL",number:4,action:"core",description:"Invalid machine instruction",standard:"ansi"},{name:"SIGTRAP",number:5,action:"core",description:"Debugger breakpoint",standard:"posix"},{name:"SIGABRT",number:6,action:"core",description:"Aborted",standard:"ansi"},{name:"SIGIOT",number:6,action:"core",description:"Aborted",standard:"bsd"},{name:"SIGBUS",number:7,action:"core",description:"Bus error due to misaligned, non-existing address or paging error",standard:"bsd"},{name:"SIGEMT",number:7,action:"terminate",description:"Command should be emulated but is not implemented",standard:"other"},{name:"SIGFPE",number:8,action:"core",description:"Floating point arithmetic error",standard:"ansi"},{name:"SIGKILL",number:9,action:"terminate",description:"Forced termination",standard:"posix",forced:!0},{name:"SIGUSR1",number:10,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGSEGV",number:11,action:"core",description:"Segmentation fault",standard:"ansi"},{name:"SIGUSR2",number:12,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGPIPE",number:13,action:"terminate",description:"Broken pipe or socket",standard:"posix"},{name:"SIGALRM",number:14,action:"terminate",description:"Timeout or timer",standard:"posix"},{name:"SIGTERM",number:15,action:"terminate",description:"Termination",standard:"ansi"},{name:"SIGSTKFLT",number:16,action:"terminate",description:"Stack is empty or overflowed",standard:"other"},{name:"SIGCHLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"posix"},{name:"SIGCLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"other"},{name:"SIGCONT",number:18,action:"unpause",description:"Unpaused",standard:"posix",forced:!0},{name:"SIGSTOP",number:19,action:"pause",description:"Paused",standard:"posix",forced:!0},{name:"SIGTSTP",number:20,action:"pause",description:'Paused using CTRL-Z or "suspend"',standard:"posix"},{name:"SIGTTIN",number:21,action:"pause",description:"Background process cannot read terminal input",standard:"posix"},{name:"SIGBREAK",number:21,action:"terminate",description:"User interruption with CTRL-BREAK",standard:"other"},{name:"SIGTTOU",number:22,action:"pause",description:"Background process cannot write to terminal output",standard:"posix"},{name:"SIGURG",number:23,action:"ignore",description:"Socket received out-of-band data",standard:"bsd"},{name:"SIGXCPU",number:24,action:"core",description:"Process timed out",standard:"bsd"},{name:"SIGXFSZ",number:25,action:"core",description:"File too big",standard:"bsd"},{name:"SIGVTALRM",number:26,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGPROF",number:27,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGWINCH",number:28,action:"ignore",description:"Terminal window size changed",standard:"bsd"},{name:"SIGIO",number:29,action:"terminate",description:"I/O is available",standard:"other"},{name:"SIGPOLL",number:29,action:"terminate",description:"Watched event",standard:"other"},{name:"SIGINFO",number:29,action:"ignore",description:"Request for process information",standard:"other"},{name:"SIGPWR",number:30,action:"terminate",description:"Device running out of power",standard:"systemv"},{name:"SIGSYS",number:31,action:"core",description:"Invalid system call",standard:"other"},{name:"SIGUNUSED",number:31,action:"terminate",description:"Invalid system call",standard:"other"}];Tr.SIGNALS=ju});var In=A(nt=>{"use strict";Object.defineProperty(nt,"__esModule",{value:!0});nt.SIGRTMAX=nt.getRealtimeSignals=void 0;var Nu=function(){let n=ba-pa+1;return Array.from({length:n},Uu)};nt.getRealtimeSignals=Nu;var Uu=function(n,r){return{name:`SIGRT${r+1}`,number:pa+r,action:"terminate",description:"Application-specific signal (realtime)",standard:"posix"}},pa=34,ba=64;nt.SIGRTMAX=ba});var ya=A(Er=>{"use strict";Object.defineProperty(Er,"__esModule",{value:!0});Er.getSignals=void 0;var Hu=require("os"),Gu=ma(),Vu=In(),Yu=function(){let n=(0,Vu.getRealtimeSignals)();return[...Gu.SIGNALS,...n].map(Qu)};Er.getSignals=Yu;var Qu=function({name:n,number:r,description:o,action:a,forced:s=!1,standard:u}){let{signals:{[n]:f}}=Hu.constants,p=f!==void 0;return{name:n,number:p?f:r,description:o,supported:p,action:a,forced:s,standard:u}}});var Sa=A(ot=>{"use strict";Object.defineProperty(ot,"__esModule",{value:!0});ot.signalsByNumber=ot.signalsByName=void 0;var Xu=require("os"),ga=ya(),Ku=In(),Zu=function(){return(0,ga.getSignals)().reduce(Ju,{})},Ju=function(n,{name:r,number:o,description:a,supported:s,action:u,forced:f,standard:p}){return{...n,[r]:{name:r,number:o,description:a,supported:s,action:u,forced:f,standard:p}}},ec=Zu();ot.signalsByName=ec;var tc=function(){let n=(0,ga.getSignals)(),r=Ku.SIGRTMAX+1,o=Array.from({length:r},(a,s)=>rc(s,n));return Object.assign({},...o)},rc=function(n,r){let o=nc(n,r);if(o===void 0)return{};let{name:a,description:s,supported:u,action:f,forced:p,standard:b}=o;return{[n]:{name:a,number:n,description:s,supported:u,action:f,forced:p,standard:b}}},nc=function(n,r){let o=r.find(({name:a})=>Xu.constants.signals[a]===n);return o!==void 0?o:r.find(a=>a.number===n)},oc=tc();ot.signalsByNumber=oc});var wa=A((ad,_a)=>{"use strict";var{signalsByName:ic}=Sa(),ac=({timedOut:n,timeout:r,errorCode:o,signal:a,signalDescription:s,exitCode:u,isCanceled:f})=>n?`timed out after ${r} milliseconds`:f?"was canceled":o!==void 0?`failed with ${o}`:a!==void 0?`was killed with ${a} (${s})`:u!==void 0?`failed with exit code ${u}`:"failed",sc=({stdout:n,stderr:r,all:o,error:a,signal:s,exitCode:u,command:f,escapedCommand:p,timedOut:b,isCanceled:m,killed:R,parsed:{options:{timeout:T}}})=>{u=u===null?void 0:u,s=s===null?void 0:s;let S=s===void 0?void 0:ic[s].description,g=a&&a.code,C=`Command ${ac({timedOut:b,timeout:T,errorCode:g,signal:s,signalDescription:S,exitCode:u,isCanceled:m})}: ${f}`,P=Object.prototype.toString.call(a)==="[object Error]",v=P?`${C}
${a.message}`:C,W=[v,r,n].filter(Boolean).join(`
`);return P?(a.originalMessage=a.message,a.message=W):a=new Error(W),a.shortMessage=v,a.command=f,a.escapedCommand=p,a.exitCode=u,a.signal=s,a.signalDescription=S,a.stdout=n,a.stderr=r,o!==void 0&&(a.all=o),"bufferedData"in a&&delete a.bufferedData,a.failed=!0,a.timedOut=!!b,a.isCanceled=m,a.killed=R&&!b,a};_a.exports=sc});var Ta=A((sd,qn)=>{"use strict";var Cr=["stdin","stdout","stderr"],lc=n=>Cr.some(r=>n[r]!==void 0),Ra=n=>{if(!n)return;let{stdio:r}=n;if(r===void 0)return Cr.map(a=>n[a]);if(lc(n))throw new Error(`It's not possible to provide \`stdio\` in combination with one of ${Cr.map(a=>`\`${a}\``).join(", ")}`);if(typeof r=="string")return r;if(!Array.isArray(r))throw new TypeError(`Expected \`stdio\` to be of type \`string\` or \`Array\`, got \`${typeof r}\``);let o=Math.max(r.length,Cr.length);return Array.from({length:o},(a,s)=>r[s])};qn.exports=Ra;qn.exports.node=n=>{let r=Ra(n);return r==="ipc"?"ipc":r===void 0||typeof r=="string"?[r,r,r,"ipc"]:r.includes("ipc")?r:[...r,"ipc"]}});var Ea=A((ld,Pr)=>{Pr.exports=["SIGABRT","SIGALRM","SIGHUP","SIGINT","SIGTERM"];process.platform!=="win32"&&Pr.exports.push("SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT");process.platform==="linux"&&Pr.exports.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT","SIGUNUSED")});var xa=A((ud,st)=>{var z=global.process,De=function(n){return n&&typeof n=="object"&&typeof n.removeListener=="function"&&typeof n.emit=="function"&&typeof n.reallyExit=="function"&&typeof n.listeners=="function"&&typeof n.kill=="function"&&typeof n.pid=="number"&&typeof n.on=="function"};De(z)?(Ca=require("assert"),it=Ea(),Pa=/^win/i.test(z.platform),kt=require("events"),typeof kt!="function"&&(kt=kt.EventEmitter),z.__signal_exit_emitter__?M=z.__signal_exit_emitter__:(M=z.__signal_exit_emitter__=new kt,M.count=0,M.emitted={}),M.infinite||(M.setMaxListeners(1/0),M.infinite=!0),st.exports=function(n,r){if(!De(global.process))return function(){};Ca.equal(typeof n,"function","a callback must be provided for exit handler"),at===!1&&Wn();var o="exit";r&&r.alwaysLast&&(o="afterexit");var a=function(){M.removeListener(o,n),M.listeners("exit").length===0&&M.listeners("afterexit").length===0&&Ar()};return M.on(o,n),a},Ar=function(){!at||!De(global.process)||(at=!1,it.forEach(function(r){try{z.removeListener(r,vr[r])}catch{}}),z.emit=xr,z.reallyExit=Dn,M.count-=1)},st.exports.unload=Ar,Fe=function(r,o,a){M.emitted[r]||(M.emitted[r]=!0,M.emit(r,o,a))},vr={},it.forEach(function(n){vr[n]=function(){if(De(global.process)){var o=z.listeners(n);o.length===M.count&&(Ar(),Fe("exit",null,n),Fe("afterexit",null,n),Pa&&n==="SIGHUP"&&(n="SIGINT"),z.kill(z.pid,n))}}}),st.exports.signals=function(){return it},at=!1,Wn=function(){at||!De(global.process)||(at=!0,M.count+=1,it=it.filter(function(r){try{return z.on(r,vr[r]),!0}catch{return!1}}),z.emit=va,z.reallyExit=Aa)},st.exports.load=Wn,Dn=z.reallyExit,Aa=function(r){De(global.process)&&(z.exitCode=r||0,Fe("exit",z.exitCode,null),Fe("afterexit",z.exitCode,null),Dn.call(z,z.exitCode))},xr=z.emit,va=function(r,o){if(r==="exit"&&De(global.process)){o!==void 0&&(z.exitCode=o);var a=xr.apply(this,arguments);return Fe("exit",z.exitCode,null),Fe("afterexit",z.exitCode,null),a}else return xr.apply(this,arguments)}):st.exports=function(){return function(){}};var Ca,it,Pa,kt,M,Ar,Fe,vr,at,Wn,Dn,Aa,xr,va});var ka=A((cd,Ba)=>{"use strict";var uc=require("os"),cc=xa(),fc=1e3*5,dc=(n,r="SIGTERM",o={})=>{let a=n(r);return hc(n,r,o,a),a},hc=(n,r,o,a)=>{if(!mc(r,o,a))return;let s=bc(o),u=setTimeout(()=>{n("SIGKILL")},s);u.unref&&u.unref()},mc=(n,{forceKillAfterTimeout:r},o)=>pc(n)&&r!==!1&&o,pc=n=>n===uc.constants.signals.SIGTERM||typeof n=="string"&&n.toUpperCase()==="SIGTERM",bc=({forceKillAfterTimeout:n=!0})=>{if(n===!0)return fc;if(!Number.isFinite(n)||n<0)throw new TypeError(`Expected the \`forceKillAfterTimeout\` option to be a non-negative integer, got \`${n}\` (${typeof n})`);return n},yc=(n,r)=>{n.kill()&&(r.isCanceled=!0)},gc=(n,r,o)=>{n.kill(r),o(Object.assign(new Error("Timed out"),{timedOut:!0,signal:r}))},Sc=(n,{timeout:r,killSignal:o="SIGTERM"},a)=>{if(r===0||r===void 0)return a;let s,u=new Promise((p,b)=>{s=setTimeout(()=>{gc(n,o,b)},r)}),f=a.finally(()=>{clearTimeout(s)});return Promise.race([u,f])},_c=({timeout:n})=>{if(n!==void 0&&(!Number.isFinite(n)||n<0))throw new TypeError(`Expected the \`timeout\` option to be a non-negative integer, got \`${n}\` (${typeof n})`)},wc=async(n,{cleanup:r,detached:o},a)=>{if(!r||o)return a;let s=cc(()=>{n.kill()});return a.finally(()=>{s()})};Ba.exports={spawnedKill:dc,spawnedCancel:yc,setupTimeout:Sc,validateTimeout:_c,setExitHandler:wc}});var Ia=A((fd,Oa)=>{"use strict";var fe=n=>n!==null&&typeof n=="object"&&typeof n.pipe=="function";fe.writable=n=>fe(n)&&n.writable!==!1&&typeof n._write=="function"&&typeof n._writableState=="object";fe.readable=n=>fe(n)&&n.readable!==!1&&typeof n._read=="function"&&typeof n._readableState=="object";fe.duplex=n=>fe.writable(n)&&fe.readable(n);fe.transform=n=>fe.duplex(n)&&typeof n._transform=="function";Oa.exports=fe});var Wa=A((dd,qa)=>{"use strict";var{PassThrough:Rc}=require("stream");qa.exports=n=>{n={...n};let{array:r}=n,{encoding:o}=n,a=o==="buffer",s=!1;r?s=!(o||a):o=o||"utf8",a&&(o=null);let u=new Rc({objectMode:s});o&&u.setEncoding(o);let f=0,p=[];return u.on("data",b=>{p.push(b),s?f=p.length:f+=b.length}),u.getBufferedValue=()=>r?p:a?Buffer.concat(p,f):p.join(""),u.getBufferedLength=()=>f,u}});var Da=A((hd,Ot)=>{"use strict";var{constants:Tc}=require("buffer"),Ec=require("stream"),{promisify:Cc}=require("util"),Pc=Wa(),Ac=Cc(Ec.pipeline),Br=class extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}};async function Fn(n,r){if(!n)throw new Error("Expected a stream");r={maxBuffer:1/0,...r};let{maxBuffer:o}=r,a=Pc(r);return await new Promise((s,u)=>{let f=p=>{p&&a.getBufferedLength()<=Tc.MAX_LENGTH&&(p.bufferedData=a.getBufferedValue()),u(p)};(async()=>{try{await Ac(n,a),s()}catch(p){f(p)}})(),a.on("data",()=>{a.getBufferedLength()>o&&f(new Br)})}),a.getBufferedValue()}Ot.exports=Fn;Ot.exports.buffer=(n,r)=>Fn(n,{...r,encoding:"buffer"});Ot.exports.array=(n,r)=>Fn(n,{...r,array:!0});Ot.exports.MaxBufferError=Br});var La=A((md,Fa)=>{"use strict";var{PassThrough:vc}=require("stream");Fa.exports=function(){var n=[],r=new vc({objectMode:!0});return r.setMaxListeners(0),r.add=o,r.isEmpty=a,r.on("unpipe",s),Array.prototype.slice.call(arguments).forEach(o),r;function o(u){return Array.isArray(u)?(u.forEach(o),this):(n.push(u),u.once("end",s.bind(null,u)),u.once("error",r.emit.bind(r,"error")),u.pipe(r,{end:!1}),this)}function a(){return n.length==0}function s(u){n=n.filter(function(f){return f!==u}),!n.length&&r.readable&&r.end()}}});var ja=A((pd,Ma)=>{"use strict";var $a=Ia(),za=Da(),xc=La(),Bc=(n,r)=>{r===void 0||n.stdin===void 0||($a(r)?r.pipe(n.stdin):n.stdin.end(r))},kc=(n,{all:r})=>{if(!r||!n.stdout&&!n.stderr)return;let o=xc();return n.stdout&&o.add(n.stdout),n.stderr&&o.add(n.stderr),o},Ln=async(n,r)=>{if(n){n.destroy();try{return await r}catch(o){return o.bufferedData}}},zn=(n,{encoding:r,buffer:o,maxBuffer:a})=>{if(!(!n||!o))return r?za(n,{encoding:r,maxBuffer:a}):za.buffer(n,{maxBuffer:a})},Oc=async({stdout:n,stderr:r,all:o},{encoding:a,buffer:s,maxBuffer:u},f)=>{let p=zn(n,{encoding:a,buffer:s,maxBuffer:u}),b=zn(r,{encoding:a,buffer:s,maxBuffer:u}),m=zn(o,{encoding:a,buffer:s,maxBuffer:u*2});try{return await Promise.all([f,p,b,m])}catch(R){return Promise.all([{error:R,signal:R.signal,timedOut:R.timedOut},Ln(n,p),Ln(r,b),Ln(o,m)])}},Ic=({input:n})=>{if($a(n))throw new TypeError("The `input` option cannot be a stream in sync mode")};Ma.exports={handleInput:Bc,makeAllStream:kc,getSpawnedResult:Oc,validateInputSync:Ic}});var Ua=A((bd,Na)=>{"use strict";var qc=(async()=>{})().constructor.prototype,Wc=["then","catch","finally"].map(n=>[n,Reflect.getOwnPropertyDescriptor(qc,n)]),Dc=(n,r)=>{for(let[o,a]of Wc){let s=typeof r=="function"?(...u)=>Reflect.apply(a.value,r(),u):a.value.bind(r);Reflect.defineProperty(n,o,{...a,value:s})}return n},Fc=n=>new Promise((r,o)=>{n.on("exit",(a,s)=>{r({exitCode:a,signal:s})}),n.on("error",a=>{o(a)}),n.stdin&&n.stdin.on("error",a=>{o(a)})});Na.exports={mergePromise:Dc,getSpawnedPromise:Fc}});var Va=A((yd,Ga)=>{"use strict";var Ha=(n,r=[])=>Array.isArray(r)?[n,...r]:[n],Lc=/^[\w.-]+$/,zc=/"/g,$c=n=>typeof n!="string"||Lc.test(n)?n:`"${n.replace(zc,'\\"')}"`,Mc=(n,r)=>Ha(n,r).join(" "),jc=(n,r)=>Ha(n,r).map(o=>$c(o)).join(" "),Nc=/ +/g,Uc=n=>{let r=[];for(let o of n.trim().split(Nc)){let a=r[r.length-1];a&&a.endsWith("\\")?r[r.length-1]=`${a.slice(0,-1)} ${o}`:r.push(o)}return r};Ga.exports={joinCommand:Mc,getEscapedCommand:jc,parseCommand:Uc}});var es=A((gd,lt)=>{"use strict";var Hc=require("path"),$n=require("child_process"),Gc=oa(),Vc=aa(),Yc=ua(),Qc=ha(),kr=wa(),Qa=Ta(),{spawnedKill:Xc,spawnedCancel:Kc,setupTimeout:Zc,validateTimeout:Jc,setExitHandler:ef}=ka(),{handleInput:tf,getSpawnedResult:rf,makeAllStream:nf,validateInputSync:of}=ja(),{mergePromise:Ya,getSpawnedPromise:af}=Ua(),{joinCommand:Xa,parseCommand:Ka,getEscapedCommand:Za}=Va(),sf=1e3*1e3*100,lf=({env:n,extendEnv:r,preferLocal:o,localDir:a,execPath:s})=>{let u=r?{...process.env,...n}:n;return o?Yc.env({env:u,cwd:a,execPath:s}):u},Ja=(n,r,o={})=>{let a=Gc._parse(n,r,o);return n=a.command,r=a.args,o=a.options,o={maxBuffer:sf,buffer:!0,stripFinalNewline:!0,extendEnv:!0,preferLocal:!1,localDir:o.cwd||process.cwd(),execPath:process.execPath,encoding:"utf8",reject:!0,cleanup:!0,all:!1,windowsHide:!0,...o},o.env=lf(o),o.stdio=Qa(o),process.platform==="win32"&&Hc.basename(n,".exe")==="cmd"&&r.unshift("/q"),{file:n,args:r,options:o,parsed:a}},It=(n,r,o)=>typeof r!="string"&&!Buffer.isBuffer(r)?o===void 0?void 0:"":n.stripFinalNewline?Vc(r):r,Or=(n,r,o)=>{let a=Ja(n,r,o),s=Xa(n,r),u=Za(n,r);Jc(a.options);let f;try{f=$n.spawn(a.file,a.args,a.options)}catch(g){let y=new $n.ChildProcess,C=Promise.reject(kr({error:g,stdout:"",stderr:"",all:"",command:s,escapedCommand:u,parsed:a,timedOut:!1,isCanceled:!1,killed:!1}));return Ya(y,C)}let p=af(f),b=Zc(f,a.options,p),m=ef(f,a.options,b),R={isCanceled:!1};f.kill=Xc.bind(null,f.kill.bind(f)),f.cancel=Kc.bind(null,f,R);let S=Qc(async()=>{let[{error:g,exitCode:y,signal:C,timedOut:P},v,W,N]=await rf(f,a.options,m),B=It(a.options,v),L=It(a.options,W),O=It(a.options,N);if(g||y!==0||C!==null){let re=kr({error:g,exitCode:y,signal:C,stdout:B,stderr:L,all:O,command:s,escapedCommand:u,parsed:a,timedOut:P,isCanceled:R.isCanceled,killed:f.killed});if(!a.options.reject)return re;throw re}return{command:s,escapedCommand:u,exitCode:0,stdout:B,stderr:L,all:O,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}});return tf(f,a.options.input),f.all=nf(f,a.options),Ya(f,S)};lt.exports=Or;lt.exports.sync=(n,r,o)=>{let a=Ja(n,r,o),s=Xa(n,r),u=Za(n,r);of(a.options);let f;try{f=$n.spawnSync(a.file,a.args,a.options)}catch(m){throw kr({error:m,stdout:"",stderr:"",all:"",command:s,escapedCommand:u,parsed:a,timedOut:!1,isCanceled:!1,killed:!1})}let p=It(a.options,f.stdout,f.error),b=It(a.options,f.stderr,f.error);if(f.error||f.status!==0||f.signal!==null){let m=kr({stdout:p,stderr:b,error:f.error,signal:f.signal,exitCode:f.status,command:s,escapedCommand:u,parsed:a,timedOut:f.error&&f.error.code==="ETIMEDOUT",isCanceled:!1,killed:f.signal!==null});if(!a.options.reject)return m;throw m}return{command:s,escapedCommand:u,exitCode:0,stdout:p,stderr:b,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}};lt.exports.command=(n,r)=>{let[o,...a]=Ka(n);return Or(o,a,r)};lt.exports.commandSync=(n,r)=>{let[o,...a]=Ka(n);return Or.sync(o,a,r)};lt.exports.node=(n,r,o={})=>{r&&!Array.isArray(r)&&typeof r=="object"&&(o=r,r=[]);let a=Qa.node(o),s=process.execArgv.filter(p=>!p.startsWith("--inspect")),{nodePath:u=process.execPath,nodeOptions:f=s}=o;return Or(u,[...f,n,...Array.isArray(r)?r:[]],{...o,stdin:void 0,stdout:void 0,stderr:void 0,stdio:a,shell:!1})}});var ss=A((Ir,as)=>{(function(n,r){typeof Ir=="object"&&typeof as<"u"?r(Ir):typeof define=="function"&&define.amd?define(["exports"],r):(n=typeof globalThis<"u"?globalThis:n||self,r(n.WebStreamsPolyfill={}))})(Ir,(function(n){"use strict";let r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol:e=>`Symbol(${e})`;function o(){}function a(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}let s=a();function u(e){return typeof e=="object"&&e!==null||typeof e=="function"}let f=o,p=Promise,b=Promise.prototype.then,m=Promise.resolve.bind(p),R=Promise.reject.bind(p);function T(e){return new p(e)}function S(e){return m(e)}function g(e){return R(e)}function y(e,t,i){return b.call(e,t,i)}function C(e,t,i){y(y(e,t,i),void 0,f)}function P(e,t){C(e,t)}function v(e,t){C(e,void 0,t)}function W(e,t,i){return y(e,t,i)}function N(e){y(e,void 0,f)}let B=(()=>{let e=s&&s.queueMicrotask;if(typeof e=="function")return e;let t=S(void 0);return i=>y(t,i)})();function L(e,t,i){if(typeof e!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,t,i)}function O(e,t,i){try{return S(L(e,t,i))}catch(l){return g(l)}}let re=16384;class Y{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(t){let i=this._back,l=i;i._elements.length===re-1&&(l={_elements:[],_next:void 0}),i._elements.push(t),l!==i&&(this._back=l,i._next=l),++this._size}shift(){let t=this._front,i=t,l=this._cursor,c=l+1,d=t._elements,h=d[l];return c===re&&(i=t._next,c=0),--this._size,this._cursor=c,t!==i&&(this._front=i),d[l]=void 0,h}forEach(t){let i=this._cursor,l=this._front,c=l._elements;for(;(i!==c.length||l._next!==void 0)&&!(i===c.length&&(l=l._next,c=l._elements,i=0,c.length===0));)t(c[i]),++i}peek(){let t=this._front,i=this._cursor;return t._elements[i]}}function Jn(e,t){e._ownerReadableStream=t,t._reader=e,t._state==="readable"?Ur(e):t._state==="closed"?Ls(e):eo(e,t._storedError)}function Nr(e,t){let i=e._ownerReadableStream;return ie(i,t)}function me(e){e._ownerReadableStream._state==="readable"?Hr(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):zs(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),e._ownerReadableStream._reader=void 0,e._ownerReadableStream=void 0}function Ne(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function Ur(e){e._closedPromise=T((t,i)=>{e._closedPromise_resolve=t,e._closedPromise_reject=i})}function eo(e,t){Ur(e),Hr(e,t)}function Ls(e){Ur(e),to(e)}function Hr(e,t){e._closedPromise_reject!==void 0&&(N(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function zs(e,t){eo(e,t)}function to(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}let ro=r("[[AbortSteps]]"),no=r("[[ErrorSteps]]"),Gr=r("[[CancelSteps]]"),Vr=r("[[PullSteps]]"),oo=Number.isFinite||function(e){return typeof e=="number"&&isFinite(e)},$s=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function Ms(e){return typeof e=="object"||typeof e=="function"}function pe(e,t){if(e!==void 0&&!Ms(e))throw new TypeError(`${t} is not an object.`)}function ne(e,t){if(typeof e!="function")throw new TypeError(`${t} is not a function.`)}function js(e){return typeof e=="object"&&e!==null||typeof e=="function"}function io(e,t){if(!js(e))throw new TypeError(`${t} is not an object.`)}function be(e,t,i){if(e===void 0)throw new TypeError(`Parameter ${t} is required in '${i}'.`)}function Yr(e,t,i){if(e===void 0)throw new TypeError(`${t} is required in '${i}'.`)}function Qr(e){return Number(e)}function ao(e){return e===0?0:e}function Ns(e){return ao($s(e))}function so(e,t){let l=Number.MAX_SAFE_INTEGER,c=Number(e);if(c=ao(c),!oo(c))throw new TypeError(`${t} is not a finite number`);if(c=Ns(c),c<0||c>l)throw new TypeError(`${t} is outside the accepted range of 0 to ${l}, inclusive`);return!oo(c)||c===0?0:c}function Xr(e,t){if(!Pe(e))throw new TypeError(`${t} is not a ReadableStream.`)}function Ue(e){return new ht(e)}function lo(e,t){e._reader._readRequests.push(t)}function Kr(e,t,i){let c=e._reader._readRequests.shift();i?c._closeSteps():c._chunkSteps(t)}function Mt(e){return e._reader._readRequests.length}function uo(e){let t=e._reader;return!(t===void 0||!Re(t))}class ht{constructor(t){if(be(t,1,"ReadableStreamDefaultReader"),Xr(t,"First parameter"),Ae(t))throw new TypeError("This stream has already been locked for exclusive reading by another reader");Jn(this,t),this._readRequests=new Y}get closed(){return Re(this)?this._closedPromise:g(jt("closed"))}cancel(t=void 0){return Re(this)?this._ownerReadableStream===void 0?g(Ne("cancel")):Nr(this,t):g(jt("cancel"))}read(){if(!Re(this))return g(jt("read"));if(this._ownerReadableStream===void 0)return g(Ne("read from"));let t,i,l=T((d,h)=>{t=d,i=h});return mt(this,{_chunkSteps:d=>t({value:d,done:!1}),_closeSteps:()=>t({value:void 0,done:!0}),_errorSteps:d=>i(d)}),l}releaseLock(){if(!Re(this))throw jt("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");me(this)}}}Object.defineProperties(ht.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(ht.prototype,r.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function Re(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_readRequests")?!1:e instanceof ht}function mt(e,t){let i=e._ownerReadableStream;i._disturbed=!0,i._state==="closed"?t._closeSteps():i._state==="errored"?t._errorSteps(i._storedError):i._readableStreamController[Vr](t)}function jt(e){return new TypeError(`ReadableStreamDefaultReader.prototype.${e} can only be used on a ReadableStreamDefaultReader`)}let co=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);class fo{constructor(t,i){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=t,this._preventCancel=i}next(){let t=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?W(this._ongoingPromise,t,t):t(),this._ongoingPromise}return(t){let i=()=>this._returnSteps(t);return this._ongoingPromise?W(this._ongoingPromise,i,i):i()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});let t=this._reader;if(t._ownerReadableStream===void 0)return g(Ne("iterate"));let i,l,c=T((h,_)=>{i=h,l=_});return mt(t,{_chunkSteps:h=>{this._ongoingPromise=void 0,B(()=>i({value:h,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,me(t),i({value:void 0,done:!0})},_errorSteps:h=>{this._ongoingPromise=void 0,this._isFinished=!0,me(t),l(h)}}),c}_returnSteps(t){if(this._isFinished)return Promise.resolve({value:t,done:!0});this._isFinished=!0;let i=this._reader;if(i._ownerReadableStream===void 0)return g(Ne("finish iterating"));if(!this._preventCancel){let l=Nr(i,t);return me(i),W(l,()=>({value:t,done:!0}))}return me(i),S({value:t,done:!0})}}let ho={next(){return mo(this)?this._asyncIteratorImpl.next():g(po("next"))},return(e){return mo(this)?this._asyncIteratorImpl.return(e):g(po("return"))}};co!==void 0&&Object.setPrototypeOf(ho,co);function Us(e,t){let i=Ue(e),l=new fo(i,t),c=Object.create(ho);return c._asyncIteratorImpl=l,c}function mo(e){if(!u(e)||!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl"))return!1;try{return e._asyncIteratorImpl instanceof fo}catch{return!1}}function po(e){return new TypeError(`ReadableStreamAsyncIterator.${e} can only be used on a ReadableSteamAsyncIterator`)}let bo=Number.isNaN||function(e){return e!==e};function pt(e){return e.slice()}function yo(e,t,i,l,c){new Uint8Array(e).set(new Uint8Array(i,l,c),t)}function Wf(e){return e}function Nt(e){return!1}function go(e,t,i){if(e.slice)return e.slice(t,i);let l=i-t,c=new ArrayBuffer(l);return yo(c,0,e,t,l),c}function Hs(e){return!(typeof e!="number"||bo(e)||e<0)}function So(e){let t=go(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(t)}function Zr(e){let t=e._queue.shift();return e._queueTotalSize-=t.size,e._queueTotalSize<0&&(e._queueTotalSize=0),t.value}function Jr(e,t,i){if(!Hs(i)||i===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");e._queue.push({value:t,size:i}),e._queueTotalSize+=i}function Gs(e){return e._queue.peek().value}function Te(e){e._queue=new Y,e._queueTotalSize=0}class bt{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!en(this))throw on("view");return this._view}respond(t){if(!en(this))throw on("respond");if(be(t,1,"respond"),t=so(t,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");Nt(this._view.buffer),Yt(this._associatedReadableByteStreamController,t)}respondWithNewView(t){if(!en(this))throw on("respondWithNewView");if(be(t,1,"respondWithNewView"),!ArrayBuffer.isView(t))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");Nt(t.buffer),Qt(this._associatedReadableByteStreamController,t)}}Object.defineProperties(bt.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(bt.prototype,r.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class He{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!Be(this))throw gt("byobRequest");return nn(this)}get desiredSize(){if(!Be(this))throw gt("desiredSize");return Ao(this)}close(){if(!Be(this))throw gt("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");let t=this._controlledReadableByteStream._state;if(t!=="readable")throw new TypeError(`The stream (in ${t} state) is not in the readable state and cannot be closed`);yt(this)}enqueue(t){if(!Be(this))throw gt("enqueue");if(be(t,1,"enqueue"),!ArrayBuffer.isView(t))throw new TypeError("chunk must be an array buffer view");if(t.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(t.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");let i=this._controlledReadableByteStream._state;if(i!=="readable")throw new TypeError(`The stream (in ${i} state) is not in the readable state and cannot be enqueued to`);Vt(this,t)}error(t=void 0){if(!Be(this))throw gt("error");oe(this,t)}[Gr](t){_o(this),Te(this);let i=this._cancelAlgorithm(t);return Gt(this),i}[Vr](t){let i=this._controlledReadableByteStream;if(this._queueTotalSize>0){let c=this._queue.shift();this._queueTotalSize-=c.byteLength,Eo(this);let d=new Uint8Array(c.buffer,c.byteOffset,c.byteLength);t._chunkSteps(d);return}let l=this._autoAllocateChunkSize;if(l!==void 0){let c;try{c=new ArrayBuffer(l)}catch(h){t._errorSteps(h);return}let d={buffer:c,bufferByteLength:l,byteOffset:0,byteLength:l,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(d)}lo(i,t),ke(this)}}Object.defineProperties(He.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(He.prototype,r.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function Be(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")?!1:e instanceof He}function en(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")?!1:e instanceof bt}function ke(e){if(!Xs(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let i=e._pullAlgorithm();C(i,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,ke(e))},l=>{oe(e,l)})}function _o(e){rn(e),e._pendingPullIntos=new Y}function tn(e,t){let i=!1;e._state==="closed"&&(i=!0);let l=wo(t);t.readerType==="default"?Kr(e,l,i):Js(e,l,i)}function wo(e){let t=e.bytesFilled,i=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,t/i)}function Ut(e,t,i,l){e._queue.push({buffer:t,byteOffset:i,byteLength:l}),e._queueTotalSize+=l}function Ro(e,t){let i=t.elementSize,l=t.bytesFilled-t.bytesFilled%i,c=Math.min(e._queueTotalSize,t.byteLength-t.bytesFilled),d=t.bytesFilled+c,h=d-d%i,_=c,E=!1;h>l&&(_=h-t.bytesFilled,E=!0);let k=e._queue;for(;_>0;){let I=k.peek(),q=Math.min(_,I.byteLength),$=t.byteOffset+t.bytesFilled;yo(t.buffer,$,I.buffer,I.byteOffset,q),I.byteLength===q?k.shift():(I.byteOffset+=q,I.byteLength-=q),e._queueTotalSize-=q,To(e,q,t),_-=q}return E}function To(e,t,i){i.bytesFilled+=t}function Eo(e){e._queueTotalSize===0&&e._closeRequested?(Gt(e),Pt(e._controlledReadableByteStream)):ke(e)}function rn(e){e._byobRequest!==null&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function Co(e){for(;e._pendingPullIntos.length>0;){if(e._queueTotalSize===0)return;let t=e._pendingPullIntos.peek();Ro(e,t)&&(Ht(e),tn(e._controlledReadableByteStream,t))}}function Vs(e,t,i){let l=e._controlledReadableByteStream,c=1;t.constructor!==DataView&&(c=t.constructor.BYTES_PER_ELEMENT);let d=t.constructor,h=t.buffer,_={buffer:h,bufferByteLength:h.byteLength,byteOffset:t.byteOffset,byteLength:t.byteLength,bytesFilled:0,elementSize:c,viewConstructor:d,readerType:"byob"};if(e._pendingPullIntos.length>0){e._pendingPullIntos.push(_),Bo(l,i);return}if(l._state==="closed"){let E=new d(_.buffer,_.byteOffset,0);i._closeSteps(E);return}if(e._queueTotalSize>0){if(Ro(e,_)){let E=wo(_);Eo(e),i._chunkSteps(E);return}if(e._closeRequested){let E=new TypeError("Insufficient bytes to fill elements in the given buffer");oe(e,E),i._errorSteps(E);return}}e._pendingPullIntos.push(_),Bo(l,i),ke(e)}function Ys(e,t){let i=e._controlledReadableByteStream;if(an(i))for(;ko(i)>0;){let l=Ht(e);tn(i,l)}}function Qs(e,t,i){if(To(e,t,i),i.bytesFilled<i.elementSize)return;Ht(e);let l=i.bytesFilled%i.elementSize;if(l>0){let c=i.byteOffset+i.bytesFilled,d=go(i.buffer,c-l,c);Ut(e,d,0,d.byteLength)}i.bytesFilled-=l,tn(e._controlledReadableByteStream,i),Co(e)}function Po(e,t){let i=e._pendingPullIntos.peek();rn(e),e._controlledReadableByteStream._state==="closed"?Ys(e):Qs(e,t,i),ke(e)}function Ht(e){return e._pendingPullIntos.shift()}function Xs(e){let t=e._controlledReadableByteStream;return t._state!=="readable"||e._closeRequested||!e._started?!1:!!(uo(t)&&Mt(t)>0||an(t)&&ko(t)>0||Ao(e)>0)}function Gt(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function yt(e){let t=e._controlledReadableByteStream;if(!(e._closeRequested||t._state!=="readable")){if(e._queueTotalSize>0){e._closeRequested=!0;return}if(e._pendingPullIntos.length>0&&e._pendingPullIntos.peek().bytesFilled>0){let l=new TypeError("Insufficient bytes to fill elements in the given buffer");throw oe(e,l),l}Gt(e),Pt(t)}}function Vt(e,t){let i=e._controlledReadableByteStream;if(e._closeRequested||i._state!=="readable")return;let l=t.buffer,c=t.byteOffset,d=t.byteLength,h=l;if(e._pendingPullIntos.length>0){let _=e._pendingPullIntos.peek();Nt(_.buffer),_.buffer=_.buffer}if(rn(e),uo(i))if(Mt(i)===0)Ut(e,h,c,d);else{e._pendingPullIntos.length>0&&Ht(e);let _=new Uint8Array(h,c,d);Kr(i,_,!1)}else an(i)?(Ut(e,h,c,d),Co(e)):Ut(e,h,c,d);ke(e)}function oe(e,t){let i=e._controlledReadableByteStream;i._state==="readable"&&(_o(e),Te(e),Gt(e),ti(i,t))}function nn(e){if(e._byobRequest===null&&e._pendingPullIntos.length>0){let t=e._pendingPullIntos.peek(),i=new Uint8Array(t.buffer,t.byteOffset+t.bytesFilled,t.byteLength-t.bytesFilled),l=Object.create(bt.prototype);Zs(l,e,i),e._byobRequest=l}return e._byobRequest}function Ao(e){let t=e._controlledReadableByteStream._state;return t==="errored"?null:t==="closed"?0:e._strategyHWM-e._queueTotalSize}function Yt(e,t){let i=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(t!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(t===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(i.bytesFilled+t>i.byteLength)throw new RangeError("bytesWritten out of range")}i.buffer=i.buffer,Po(e,t)}function Qt(e,t){let i=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(t.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(t.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(i.byteOffset+i.bytesFilled!==t.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(i.bufferByteLength!==t.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(i.bytesFilled+t.byteLength>i.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");let c=t.byteLength;i.buffer=t.buffer,Po(e,c)}function vo(e,t,i,l,c,d,h){t._controlledReadableByteStream=e,t._pullAgain=!1,t._pulling=!1,t._byobRequest=null,t._queue=t._queueTotalSize=void 0,Te(t),t._closeRequested=!1,t._started=!1,t._strategyHWM=d,t._pullAlgorithm=l,t._cancelAlgorithm=c,t._autoAllocateChunkSize=h,t._pendingPullIntos=new Y,e._readableStreamController=t;let _=i();C(S(_),()=>{t._started=!0,ke(t)},E=>{oe(t,E)})}function Ks(e,t,i){let l=Object.create(He.prototype),c=()=>{},d=()=>S(void 0),h=()=>S(void 0);t.start!==void 0&&(c=()=>t.start(l)),t.pull!==void 0&&(d=()=>t.pull(l)),t.cancel!==void 0&&(h=E=>t.cancel(E));let _=t.autoAllocateChunkSize;if(_===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");vo(e,l,c,d,h,i,_)}function Zs(e,t,i){e._associatedReadableByteStreamController=t,e._view=i}function on(e){return new TypeError(`ReadableStreamBYOBRequest.prototype.${e} can only be used on a ReadableStreamBYOBRequest`)}function gt(e){return new TypeError(`ReadableByteStreamController.prototype.${e} can only be used on a ReadableByteStreamController`)}function xo(e){return new St(e)}function Bo(e,t){e._reader._readIntoRequests.push(t)}function Js(e,t,i){let c=e._reader._readIntoRequests.shift();i?c._closeSteps(t):c._chunkSteps(t)}function ko(e){return e._reader._readIntoRequests.length}function an(e){let t=e._reader;return!(t===void 0||!Oe(t))}class St{constructor(t){if(be(t,1,"ReadableStreamBYOBReader"),Xr(t,"First parameter"),Ae(t))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!Be(t._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");Jn(this,t),this._readIntoRequests=new Y}get closed(){return Oe(this)?this._closedPromise:g(Xt("closed"))}cancel(t=void 0){return Oe(this)?this._ownerReadableStream===void 0?g(Ne("cancel")):Nr(this,t):g(Xt("cancel"))}read(t){if(!Oe(this))return g(Xt("read"));if(!ArrayBuffer.isView(t))return g(new TypeError("view must be an array buffer view"));if(t.byteLength===0)return g(new TypeError("view must have non-zero byteLength"));if(t.buffer.byteLength===0)return g(new TypeError("view's buffer must have non-zero byteLength"));if(Nt(t.buffer),this._ownerReadableStream===void 0)return g(Ne("read from"));let i,l,c=T((h,_)=>{i=h,l=_});return Oo(this,t,{_chunkSteps:h=>i({value:h,done:!1}),_closeSteps:h=>i({value:h,done:!0}),_errorSteps:h=>l(h)}),c}releaseLock(){if(!Oe(this))throw Xt("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");me(this)}}}Object.defineProperties(St.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(St.prototype,r.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function Oe(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")?!1:e instanceof St}function Oo(e,t,i){let l=e._ownerReadableStream;l._disturbed=!0,l._state==="errored"?i._errorSteps(l._storedError):Vs(l._readableStreamController,t,i)}function Xt(e){return new TypeError(`ReadableStreamBYOBReader.prototype.${e} can only be used on a ReadableStreamBYOBReader`)}function _t(e,t){let{highWaterMark:i}=e;if(i===void 0)return t;if(bo(i)||i<0)throw new RangeError("Invalid highWaterMark");return i}function Kt(e){let{size:t}=e;return t||(()=>1)}function Zt(e,t){pe(e,t);let i=e?.highWaterMark,l=e?.size;return{highWaterMark:i===void 0?void 0:Qr(i),size:l===void 0?void 0:el(l,`${t} has member 'size' that`)}}function el(e,t){return ne(e,t),i=>Qr(e(i))}function tl(e,t){pe(e,t);let i=e?.abort,l=e?.close,c=e?.start,d=e?.type,h=e?.write;return{abort:i===void 0?void 0:rl(i,e,`${t} has member 'abort' that`),close:l===void 0?void 0:nl(l,e,`${t} has member 'close' that`),start:c===void 0?void 0:ol(c,e,`${t} has member 'start' that`),write:h===void 0?void 0:il(h,e,`${t} has member 'write' that`),type:d}}function rl(e,t,i){return ne(e,i),l=>O(e,t,[l])}function nl(e,t,i){return ne(e,i),()=>O(e,t,[])}function ol(e,t,i){return ne(e,i),l=>L(e,t,[l])}function il(e,t,i){return ne(e,i),(l,c)=>O(e,t,[l,c])}function Io(e,t){if(!Ge(e))throw new TypeError(`${t} is not a WritableStream.`)}function al(e){if(typeof e!="object"||e===null)return!1;try{return typeof e.aborted=="boolean"}catch{return!1}}let sl=typeof AbortController=="function";function ll(){if(sl)return new AbortController}class wt{constructor(t={},i={}){t===void 0?t=null:io(t,"First parameter");let l=Zt(i,"Second parameter"),c=tl(t,"First parameter");if(Wo(this),c.type!==void 0)throw new RangeError("Invalid type is specified");let h=Kt(l),_=_t(l,1);Rl(this,c,_,h)}get locked(){if(!Ge(this))throw nr("locked");return Ve(this)}abort(t=void 0){return Ge(this)?Ve(this)?g(new TypeError("Cannot abort a stream that already has a writer")):Jt(this,t):g(nr("abort"))}close(){return Ge(this)?Ve(this)?g(new TypeError("Cannot close a stream that already has a writer")):ce(this)?g(new TypeError("Cannot close an already-closing stream")):Do(this):g(nr("close"))}getWriter(){if(!Ge(this))throw nr("getWriter");return qo(this)}}Object.defineProperties(wt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(wt.prototype,r.toStringTag,{value:"WritableStream",configurable:!0});function qo(e){return new Rt(e)}function ul(e,t,i,l,c=1,d=()=>1){let h=Object.create(wt.prototype);Wo(h);let _=Object.create(Ye.prototype);return jo(h,_,e,t,i,l,c,d),h}function Wo(e){e._state="writable",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=new Y,e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1}function Ge(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")?!1:e instanceof wt}function Ve(e){return e._writer!==void 0}function Jt(e,t){var i;if(e._state==="closed"||e._state==="errored")return S(void 0);e._writableStreamController._abortReason=t,(i=e._writableStreamController._abortController)===null||i===void 0||i.abort();let l=e._state;if(l==="closed"||l==="errored")return S(void 0);if(e._pendingAbortRequest!==void 0)return e._pendingAbortRequest._promise;let c=!1;l==="erroring"&&(c=!0,t=void 0);let d=T((h,_)=>{e._pendingAbortRequest={_promise:void 0,_resolve:h,_reject:_,_reason:t,_wasAlreadyErroring:c}});return e._pendingAbortRequest._promise=d,c||ln(e,t),d}function Do(e){let t=e._state;if(t==="closed"||t==="errored")return g(new TypeError(`The stream (in ${t} state) is not in the writable state and cannot be closed`));let i=T((c,d)=>{let h={_resolve:c,_reject:d};e._closeRequest=h}),l=e._writer;return l!==void 0&&e._backpressure&&t==="writable"&&yn(l),Tl(e._writableStreamController),i}function cl(e){return T((i,l)=>{let c={_resolve:i,_reject:l};e._writeRequests.push(c)})}function sn(e,t){if(e._state==="writable"){ln(e,t);return}un(e)}function ln(e,t){let i=e._writableStreamController;e._state="erroring",e._storedError=t;let l=e._writer;l!==void 0&&Lo(l,t),!pl(e)&&i._started&&un(e)}function un(e){e._state="errored",e._writableStreamController[no]();let t=e._storedError;if(e._writeRequests.forEach(c=>{c._reject(t)}),e._writeRequests=new Y,e._pendingAbortRequest===void 0){er(e);return}let i=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,i._wasAlreadyErroring){i._reject(t),er(e);return}let l=e._writableStreamController[ro](i._reason);C(l,()=>{i._resolve(),er(e)},c=>{i._reject(c),er(e)})}function fl(e){e._inFlightWriteRequest._resolve(void 0),e._inFlightWriteRequest=void 0}function dl(e,t){e._inFlightWriteRequest._reject(t),e._inFlightWriteRequest=void 0,sn(e,t)}function hl(e){e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0,e._state==="erroring"&&(e._storedError=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state="closed";let i=e._writer;i!==void 0&&Go(i)}function ml(e,t){e._inFlightCloseRequest._reject(t),e._inFlightCloseRequest=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._reject(t),e._pendingAbortRequest=void 0),sn(e,t)}function ce(e){return!(e._closeRequest===void 0&&e._inFlightCloseRequest===void 0)}function pl(e){return!(e._inFlightWriteRequest===void 0&&e._inFlightCloseRequest===void 0)}function bl(e){e._inFlightCloseRequest=e._closeRequest,e._closeRequest=void 0}function yl(e){e._inFlightWriteRequest=e._writeRequests.shift()}function er(e){e._closeRequest!==void 0&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);let t=e._writer;t!==void 0&&pn(t,e._storedError)}function cn(e,t){let i=e._writer;i!==void 0&&t!==e._backpressure&&(t?Bl(i):yn(i)),e._backpressure=t}class Rt{constructor(t){if(be(t,1,"WritableStreamDefaultWriter"),Io(t,"First parameter"),Ve(t))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=t,t._writer=this;let i=t._state;if(i==="writable")!ce(t)&&t._backpressure?ir(this):Vo(this),or(this);else if(i==="erroring")bn(this,t._storedError),or(this);else if(i==="closed")Vo(this),vl(this);else{let l=t._storedError;bn(this,l),Ho(this,l)}}get closed(){return Ie(this)?this._closedPromise:g(qe("closed"))}get desiredSize(){if(!Ie(this))throw qe("desiredSize");if(this._ownerWritableStream===void 0)throw Tt("desiredSize");return wl(this)}get ready(){return Ie(this)?this._readyPromise:g(qe("ready"))}abort(t=void 0){return Ie(this)?this._ownerWritableStream===void 0?g(Tt("abort")):gl(this,t):g(qe("abort"))}close(){if(!Ie(this))return g(qe("close"));let t=this._ownerWritableStream;return t===void 0?g(Tt("close")):ce(t)?g(new TypeError("Cannot close an already-closing stream")):Fo(this)}releaseLock(){if(!Ie(this))throw qe("releaseLock");this._ownerWritableStream!==void 0&&zo(this)}write(t=void 0){return Ie(this)?this._ownerWritableStream===void 0?g(Tt("write to")):$o(this,t):g(qe("write"))}}Object.defineProperties(Rt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Rt.prototype,r.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function Ie(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")?!1:e instanceof Rt}function gl(e,t){let i=e._ownerWritableStream;return Jt(i,t)}function Fo(e){let t=e._ownerWritableStream;return Do(t)}function Sl(e){let t=e._ownerWritableStream,i=t._state;return ce(t)||i==="closed"?S(void 0):i==="errored"?g(t._storedError):Fo(e)}function _l(e,t){e._closedPromiseState==="pending"?pn(e,t):xl(e,t)}function Lo(e,t){e._readyPromiseState==="pending"?Yo(e,t):kl(e,t)}function wl(e){let t=e._ownerWritableStream,i=t._state;return i==="errored"||i==="erroring"?null:i==="closed"?0:No(t._writableStreamController)}function zo(e){let t=e._ownerWritableStream,i=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");Lo(e,i),_l(e,i),t._writer=void 0,e._ownerWritableStream=void 0}function $o(e,t){let i=e._ownerWritableStream,l=i._writableStreamController,c=El(l,t);if(i!==e._ownerWritableStream)return g(Tt("write to"));let d=i._state;if(d==="errored")return g(i._storedError);if(ce(i)||d==="closed")return g(new TypeError("The stream is closing or closed and cannot be written to"));if(d==="erroring")return g(i._storedError);let h=cl(i);return Cl(l,t,c),h}let Mo={};class Ye{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!fn(this))throw mn("abortReason");return this._abortReason}get signal(){if(!fn(this))throw mn("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(t=void 0){if(!fn(this))throw mn("error");this._controlledWritableStream._state==="writable"&&Uo(this,t)}[ro](t){let i=this._abortAlgorithm(t);return tr(this),i}[no](){Te(this)}}Object.defineProperties(Ye.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Ye.prototype,r.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function fn(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream")?!1:e instanceof Ye}function jo(e,t,i,l,c,d,h,_){t._controlledWritableStream=e,e._writableStreamController=t,t._queue=void 0,t._queueTotalSize=void 0,Te(t),t._abortReason=void 0,t._abortController=ll(),t._started=!1,t._strategySizeAlgorithm=_,t._strategyHWM=h,t._writeAlgorithm=l,t._closeAlgorithm=c,t._abortAlgorithm=d;let E=hn(t);cn(e,E);let k=i(),I=S(k);C(I,()=>{t._started=!0,rr(t)},q=>{t._started=!0,sn(e,q)})}function Rl(e,t,i,l){let c=Object.create(Ye.prototype),d=()=>{},h=()=>S(void 0),_=()=>S(void 0),E=()=>S(void 0);t.start!==void 0&&(d=()=>t.start(c)),t.write!==void 0&&(h=k=>t.write(k,c)),t.close!==void 0&&(_=()=>t.close()),t.abort!==void 0&&(E=k=>t.abort(k)),jo(e,c,d,h,_,E,i,l)}function tr(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function Tl(e){Jr(e,Mo,0),rr(e)}function El(e,t){try{return e._strategySizeAlgorithm(t)}catch(i){return dn(e,i),1}}function No(e){return e._strategyHWM-e._queueTotalSize}function Cl(e,t,i){try{Jr(e,t,i)}catch(c){dn(e,c);return}let l=e._controlledWritableStream;if(!ce(l)&&l._state==="writable"){let c=hn(e);cn(l,c)}rr(e)}function rr(e){let t=e._controlledWritableStream;if(!e._started||t._inFlightWriteRequest!==void 0)return;if(t._state==="erroring"){un(t);return}if(e._queue.length===0)return;let l=Gs(e);l===Mo?Pl(e):Al(e,l)}function dn(e,t){e._controlledWritableStream._state==="writable"&&Uo(e,t)}function Pl(e){let t=e._controlledWritableStream;bl(t),Zr(e);let i=e._closeAlgorithm();tr(e),C(i,()=>{hl(t)},l=>{ml(t,l)})}function Al(e,t){let i=e._controlledWritableStream;yl(i);let l=e._writeAlgorithm(t);C(l,()=>{fl(i);let c=i._state;if(Zr(e),!ce(i)&&c==="writable"){let d=hn(e);cn(i,d)}rr(e)},c=>{i._state==="writable"&&tr(e),dl(i,c)})}function hn(e){return No(e)<=0}function Uo(e,t){let i=e._controlledWritableStream;tr(e),ln(i,t)}function nr(e){return new TypeError(`WritableStream.prototype.${e} can only be used on a WritableStream`)}function mn(e){return new TypeError(`WritableStreamDefaultController.prototype.${e} can only be used on a WritableStreamDefaultController`)}function qe(e){return new TypeError(`WritableStreamDefaultWriter.prototype.${e} can only be used on a WritableStreamDefaultWriter`)}function Tt(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function or(e){e._closedPromise=T((t,i)=>{e._closedPromise_resolve=t,e._closedPromise_reject=i,e._closedPromiseState="pending"})}function Ho(e,t){or(e),pn(e,t)}function vl(e){or(e),Go(e)}function pn(e,t){e._closedPromise_reject!==void 0&&(N(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected")}function xl(e,t){Ho(e,t)}function Go(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved")}function ir(e){e._readyPromise=T((t,i)=>{e._readyPromise_resolve=t,e._readyPromise_reject=i}),e._readyPromiseState="pending"}function bn(e,t){ir(e),Yo(e,t)}function Vo(e){ir(e),yn(e)}function Yo(e,t){e._readyPromise_reject!==void 0&&(N(e._readyPromise),e._readyPromise_reject(t),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected")}function Bl(e){ir(e)}function kl(e,t){bn(e,t)}function yn(e){e._readyPromise_resolve!==void 0&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled")}let Qo=typeof DOMException<"u"?DOMException:void 0;function Ol(e){if(!(typeof e=="function"||typeof e=="object"))return!1;try{return new e,!0}catch{return!1}}function Il(){let e=function(i,l){this.message=i||"",this.name=l||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return e.prototype=Object.create(Error.prototype),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,configurable:!0}),e}let ql=Ol(Qo)?Qo:Il();function Xo(e,t,i,l,c,d){let h=Ue(e),_=qo(t);e._disturbed=!0;let E=!1,k=S(void 0);return T((I,q)=>{let $;if(d!==void 0){if($=()=>{let w=new ql("Aborted","AbortError"),x=[];l||x.push(()=>t._state==="writable"?Jt(t,w):S(void 0)),c||x.push(()=>e._state==="readable"?ie(e,w):S(void 0)),H(()=>Promise.all(x.map(D=>D())),!0,w)},d.aborted){$();return}d.addEventListener("abort",$)}function ae(){return T((w,x)=>{function D(Q){Q?w():y(Ke(),D,x)}D(!1)})}function Ke(){return E?S(!0):y(_._readyPromise,()=>T((w,x)=>{mt(h,{_chunkSteps:D=>{k=y($o(_,D),void 0,o),w(!1)},_closeSteps:()=>w(!0),_errorSteps:x})}))}if(ye(e,h._closedPromise,w=>{l?J(!0,w):H(()=>Jt(t,w),!0,w)}),ye(t,_._closedPromise,w=>{c?J(!0,w):H(()=>ie(e,w),!0,w)}),U(e,h._closedPromise,()=>{i?J():H(()=>Sl(_))}),ce(t)||t._state==="closed"){let w=new TypeError("the destination writable stream closed before all data could be piped to it");c?J(!0,w):H(()=>ie(e,w),!0,w)}N(ae());function ve(){let w=k;return y(k,()=>w!==k?ve():void 0)}function ye(w,x,D){w._state==="errored"?D(w._storedError):v(x,D)}function U(w,x,D){w._state==="closed"?D():P(x,D)}function H(w,x,D){if(E)return;E=!0,t._state==="writable"&&!ce(t)?P(ve(),Q):Q();function Q(){C(w(),()=>ge(x,D),Ze=>ge(!0,Ze))}}function J(w,x){E||(E=!0,t._state==="writable"&&!ce(t)?P(ve(),()=>ge(w,x)):ge(w,x))}function ge(w,x){zo(_),me(h),d!==void 0&&d.removeEventListener("abort",$),w?q(x):I(void 0)}})}class Qe{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!ar(this))throw ur("desiredSize");return gn(this)}close(){if(!ar(this))throw ur("close");if(!Xe(this))throw new TypeError("The stream is not in a state that permits close");Ct(this)}enqueue(t=void 0){if(!ar(this))throw ur("enqueue");if(!Xe(this))throw new TypeError("The stream is not in a state that permits enqueue");return lr(this,t)}error(t=void 0){if(!ar(this))throw ur("error");Ee(this,t)}[Gr](t){Te(this);let i=this._cancelAlgorithm(t);return sr(this),i}[Vr](t){let i=this._controlledReadableStream;if(this._queue.length>0){let l=Zr(this);this._closeRequested&&this._queue.length===0?(sr(this),Pt(i)):Et(this),t._chunkSteps(l)}else lo(i,t),Et(this)}}Object.defineProperties(Qe.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Qe.prototype,r.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function ar(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")?!1:e instanceof Qe}function Et(e){if(!Ko(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let i=e._pullAlgorithm();C(i,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,Et(e))},l=>{Ee(e,l)})}function Ko(e){let t=e._controlledReadableStream;return!Xe(e)||!e._started?!1:!!(Ae(t)&&Mt(t)>0||gn(e)>0)}function sr(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function Ct(e){if(!Xe(e))return;let t=e._controlledReadableStream;e._closeRequested=!0,e._queue.length===0&&(sr(e),Pt(t))}function lr(e,t){if(!Xe(e))return;let i=e._controlledReadableStream;if(Ae(i)&&Mt(i)>0)Kr(i,t,!1);else{let l;try{l=e._strategySizeAlgorithm(t)}catch(c){throw Ee(e,c),c}try{Jr(e,t,l)}catch(c){throw Ee(e,c),c}}Et(e)}function Ee(e,t){let i=e._controlledReadableStream;i._state==="readable"&&(Te(e),sr(e),ti(i,t))}function gn(e){let t=e._controlledReadableStream._state;return t==="errored"?null:t==="closed"?0:e._strategyHWM-e._queueTotalSize}function Wl(e){return!Ko(e)}function Xe(e){let t=e._controlledReadableStream._state;return!e._closeRequested&&t==="readable"}function Zo(e,t,i,l,c,d,h){t._controlledReadableStream=e,t._queue=void 0,t._queueTotalSize=void 0,Te(t),t._started=!1,t._closeRequested=!1,t._pullAgain=!1,t._pulling=!1,t._strategySizeAlgorithm=h,t._strategyHWM=d,t._pullAlgorithm=l,t._cancelAlgorithm=c,e._readableStreamController=t;let _=i();C(S(_),()=>{t._started=!0,Et(t)},E=>{Ee(t,E)})}function Dl(e,t,i,l){let c=Object.create(Qe.prototype),d=()=>{},h=()=>S(void 0),_=()=>S(void 0);t.start!==void 0&&(d=()=>t.start(c)),t.pull!==void 0&&(h=()=>t.pull(c)),t.cancel!==void 0&&(_=E=>t.cancel(E)),Zo(e,c,d,h,_,i,l)}function ur(e){return new TypeError(`ReadableStreamDefaultController.prototype.${e} can only be used on a ReadableStreamDefaultController`)}function Fl(e,t){return Be(e._readableStreamController)?zl(e):Ll(e)}function Ll(e,t){let i=Ue(e),l=!1,c=!1,d=!1,h=!1,_,E,k,I,q,$=T(U=>{q=U});function ae(){return l?(c=!0,S(void 0)):(l=!0,mt(i,{_chunkSteps:H=>{B(()=>{c=!1;let J=H,ge=H;d||lr(k._readableStreamController,J),h||lr(I._readableStreamController,ge),l=!1,c&&ae()})},_closeSteps:()=>{l=!1,d||Ct(k._readableStreamController),h||Ct(I._readableStreamController),(!d||!h)&&q(void 0)},_errorSteps:()=>{l=!1}}),S(void 0))}function Ke(U){if(d=!0,_=U,h){let H=pt([_,E]),J=ie(e,H);q(J)}return $}function ve(U){if(h=!0,E=U,d){let H=pt([_,E]),J=ie(e,H);q(J)}return $}function ye(){}return k=Sn(ye,ae,Ke),I=Sn(ye,ae,ve),v(i._closedPromise,U=>{Ee(k._readableStreamController,U),Ee(I._readableStreamController,U),(!d||!h)&&q(void 0)}),[k,I]}function zl(e){let t=Ue(e),i=!1,l=!1,c=!1,d=!1,h=!1,_,E,k,I,q,$=T(w=>{q=w});function ae(w){v(w._closedPromise,x=>{w===t&&(oe(k._readableStreamController,x),oe(I._readableStreamController,x),(!d||!h)&&q(void 0))})}function Ke(){Oe(t)&&(me(t),t=Ue(e),ae(t)),mt(t,{_chunkSteps:x=>{B(()=>{l=!1,c=!1;let D=x,Q=x;if(!d&&!h)try{Q=So(x)}catch(Ze){oe(k._readableStreamController,Ze),oe(I._readableStreamController,Ze),q(ie(e,Ze));return}d||Vt(k._readableStreamController,D),h||Vt(I._readableStreamController,Q),i=!1,l?ye():c&&U()})},_closeSteps:()=>{i=!1,d||yt(k._readableStreamController),h||yt(I._readableStreamController),k._readableStreamController._pendingPullIntos.length>0&&Yt(k._readableStreamController,0),I._readableStreamController._pendingPullIntos.length>0&&Yt(I._readableStreamController,0),(!d||!h)&&q(void 0)},_errorSteps:()=>{i=!1}})}function ve(w,x){Re(t)&&(me(t),t=xo(e),ae(t));let D=x?I:k,Q=x?k:I;Oo(t,w,{_chunkSteps:Je=>{B(()=>{l=!1,c=!1;let et=x?h:d;if(x?d:h)et||Qt(D._readableStreamController,Je);else{let mi;try{mi=So(Je)}catch(wn){oe(D._readableStreamController,wn),oe(Q._readableStreamController,wn),q(ie(e,wn));return}et||Qt(D._readableStreamController,Je),Vt(Q._readableStreamController,mi)}i=!1,l?ye():c&&U()})},_closeSteps:Je=>{i=!1;let et=x?h:d,gr=x?d:h;et||yt(D._readableStreamController),gr||yt(Q._readableStreamController),Je!==void 0&&(et||Qt(D._readableStreamController,Je),!gr&&Q._readableStreamController._pendingPullIntos.length>0&&Yt(Q._readableStreamController,0)),(!et||!gr)&&q(void 0)},_errorSteps:()=>{i=!1}})}function ye(){if(i)return l=!0,S(void 0);i=!0;let w=nn(k._readableStreamController);return w===null?Ke():ve(w._view,!1),S(void 0)}function U(){if(i)return c=!0,S(void 0);i=!0;let w=nn(I._readableStreamController);return w===null?Ke():ve(w._view,!0),S(void 0)}function H(w){if(d=!0,_=w,h){let x=pt([_,E]),D=ie(e,x);q(D)}return $}function J(w){if(h=!0,E=w,d){let x=pt([_,E]),D=ie(e,x);q(D)}return $}function ge(){}return k=ei(ge,ye,H),I=ei(ge,U,J),ae(t),[k,I]}function $l(e,t){pe(e,t);let i=e,l=i?.autoAllocateChunkSize,c=i?.cancel,d=i?.pull,h=i?.start,_=i?.type;return{autoAllocateChunkSize:l===void 0?void 0:so(l,`${t} has member 'autoAllocateChunkSize' that`),cancel:c===void 0?void 0:Ml(c,i,`${t} has member 'cancel' that`),pull:d===void 0?void 0:jl(d,i,`${t} has member 'pull' that`),start:h===void 0?void 0:Nl(h,i,`${t} has member 'start' that`),type:_===void 0?void 0:Ul(_,`${t} has member 'type' that`)}}function Ml(e,t,i){return ne(e,i),l=>O(e,t,[l])}function jl(e,t,i){return ne(e,i),l=>O(e,t,[l])}function Nl(e,t,i){return ne(e,i),l=>L(e,t,[l])}function Ul(e,t){if(e=`${e}`,e!=="bytes")throw new TypeError(`${t} '${e}' is not a valid enumeration value for ReadableStreamType`);return e}function Hl(e,t){pe(e,t);let i=e?.mode;return{mode:i===void 0?void 0:Gl(i,`${t} has member 'mode' that`)}}function Gl(e,t){if(e=`${e}`,e!=="byob")throw new TypeError(`${t} '${e}' is not a valid enumeration value for ReadableStreamReaderMode`);return e}function Vl(e,t){return pe(e,t),{preventCancel:!!e?.preventCancel}}function Jo(e,t){pe(e,t);let i=e?.preventAbort,l=e?.preventCancel,c=e?.preventClose,d=e?.signal;return d!==void 0&&Yl(d,`${t} has member 'signal' that`),{preventAbort:!!i,preventCancel:!!l,preventClose:!!c,signal:d}}function Yl(e,t){if(!al(e))throw new TypeError(`${t} is not an AbortSignal.`)}function Ql(e,t){pe(e,t);let i=e?.readable;Yr(i,"readable","ReadableWritablePair"),Xr(i,`${t} has member 'readable' that`);let l=e?.writable;return Yr(l,"writable","ReadableWritablePair"),Io(l,`${t} has member 'writable' that`),{readable:i,writable:l}}class Ce{constructor(t={},i={}){t===void 0?t=null:io(t,"First parameter");let l=Zt(i,"Second parameter"),c=$l(t,"First parameter");if(_n(this),c.type==="bytes"){if(l.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");let d=_t(l,0);Ks(this,c,d)}else{let d=Kt(l),h=_t(l,1);Dl(this,c,h,d)}}get locked(){if(!Pe(this))throw We("locked");return Ae(this)}cancel(t=void 0){return Pe(this)?Ae(this)?g(new TypeError("Cannot cancel a stream that already has a reader")):ie(this,t):g(We("cancel"))}getReader(t=void 0){if(!Pe(this))throw We("getReader");return Hl(t,"First parameter").mode===void 0?Ue(this):xo(this)}pipeThrough(t,i={}){if(!Pe(this))throw We("pipeThrough");be(t,1,"pipeThrough");let l=Ql(t,"First parameter"),c=Jo(i,"Second parameter");if(Ae(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(Ve(l.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");let d=Xo(this,l.writable,c.preventClose,c.preventAbort,c.preventCancel,c.signal);return N(d),l.readable}pipeTo(t,i={}){if(!Pe(this))return g(We("pipeTo"));if(t===void 0)return g("Parameter 1 is required in 'pipeTo'.");if(!Ge(t))return g(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let l;try{l=Jo(i,"Second parameter")}catch(c){return g(c)}return Ae(this)?g(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):Ve(t)?g(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):Xo(this,t,l.preventClose,l.preventAbort,l.preventCancel,l.signal)}tee(){if(!Pe(this))throw We("tee");let t=Fl(this);return pt(t)}values(t=void 0){if(!Pe(this))throw We("values");let i=Vl(t,"First parameter");return Us(this,i.preventCancel)}}Object.defineProperties(Ce.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Ce.prototype,r.toStringTag,{value:"ReadableStream",configurable:!0}),typeof r.asyncIterator=="symbol"&&Object.defineProperty(Ce.prototype,r.asyncIterator,{value:Ce.prototype.values,writable:!0,configurable:!0});function Sn(e,t,i,l=1,c=()=>1){let d=Object.create(Ce.prototype);_n(d);let h=Object.create(Qe.prototype);return Zo(d,h,e,t,i,l,c),d}function ei(e,t,i){let l=Object.create(Ce.prototype);_n(l);let c=Object.create(He.prototype);return vo(l,c,e,t,i,0,void 0),l}function _n(e){e._state="readable",e._reader=void 0,e._storedError=void 0,e._disturbed=!1}function Pe(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")?!1:e instanceof Ce}function Ae(e){return e._reader!==void 0}function ie(e,t){if(e._disturbed=!0,e._state==="closed")return S(void 0);if(e._state==="errored")return g(e._storedError);Pt(e);let i=e._reader;i!==void 0&&Oe(i)&&(i._readIntoRequests.forEach(c=>{c._closeSteps(void 0)}),i._readIntoRequests=new Y);let l=e._readableStreamController[Gr](t);return W(l,o)}function Pt(e){e._state="closed";let t=e._reader;t!==void 0&&(to(t),Re(t)&&(t._readRequests.forEach(i=>{i._closeSteps()}),t._readRequests=new Y))}function ti(e,t){e._state="errored",e._storedError=t;let i=e._reader;i!==void 0&&(Hr(i,t),Re(i)?(i._readRequests.forEach(l=>{l._errorSteps(t)}),i._readRequests=new Y):(i._readIntoRequests.forEach(l=>{l._errorSteps(t)}),i._readIntoRequests=new Y))}function We(e){return new TypeError(`ReadableStream.prototype.${e} can only be used on a ReadableStream`)}function ri(e,t){pe(e,t);let i=e?.highWaterMark;return Yr(i,"highWaterMark","QueuingStrategyInit"),{highWaterMark:Qr(i)}}let ni=e=>e.byteLength;try{Object.defineProperty(ni,"name",{value:"size",configurable:!0})}catch{}class cr{constructor(t){be(t,1,"ByteLengthQueuingStrategy"),t=ri(t,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=t.highWaterMark}get highWaterMark(){if(!ii(this))throw oi("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!ii(this))throw oi("size");return ni}}Object.defineProperties(cr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(cr.prototype,r.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function oi(e){return new TypeError(`ByteLengthQueuingStrategy.prototype.${e} can only be used on a ByteLengthQueuingStrategy`)}function ii(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_byteLengthQueuingStrategyHighWaterMark")?!1:e instanceof cr}let ai=()=>1;try{Object.defineProperty(ai,"name",{value:"size",configurable:!0})}catch{}class fr{constructor(t){be(t,1,"CountQueuingStrategy"),t=ri(t,"First parameter"),this._countQueuingStrategyHighWaterMark=t.highWaterMark}get highWaterMark(){if(!li(this))throw si("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!li(this))throw si("size");return ai}}Object.defineProperties(fr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(fr.prototype,r.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function si(e){return new TypeError(`CountQueuingStrategy.prototype.${e} can only be used on a CountQueuingStrategy`)}function li(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_countQueuingStrategyHighWaterMark")?!1:e instanceof fr}function Xl(e,t){pe(e,t);let i=e?.flush,l=e?.readableType,c=e?.start,d=e?.transform,h=e?.writableType;return{flush:i===void 0?void 0:Kl(i,e,`${t} has member 'flush' that`),readableType:l,start:c===void 0?void 0:Zl(c,e,`${t} has member 'start' that`),transform:d===void 0?void 0:Jl(d,e,`${t} has member 'transform' that`),writableType:h}}function Kl(e,t,i){return ne(e,i),l=>O(e,t,[l])}function Zl(e,t,i){return ne(e,i),l=>L(e,t,[l])}function Jl(e,t,i){return ne(e,i),(l,c)=>O(e,t,[l,c])}class dr{constructor(t={},i={},l={}){t===void 0&&(t=null);let c=Zt(i,"Second parameter"),d=Zt(l,"Third parameter"),h=Xl(t,"First parameter");if(h.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(h.writableType!==void 0)throw new RangeError("Invalid writableType specified");let _=_t(d,0),E=Kt(d),k=_t(c,1),I=Kt(c),q,$=T(ae=>{q=ae});eu(this,$,k,I,_,E),ru(this,h),h.start!==void 0?q(h.start(this._transformStreamController)):q(void 0)}get readable(){if(!ui(this))throw hi("readable");return this._readable}get writable(){if(!ui(this))throw hi("writable");return this._writable}}Object.defineProperties(dr.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(dr.prototype,r.toStringTag,{value:"TransformStream",configurable:!0});function eu(e,t,i,l,c,d){function h(){return t}function _($){return iu(e,$)}function E($){return au(e,$)}function k(){return su(e)}e._writable=ul(h,_,k,E,i,l);function I(){return lu(e)}function q($){return mr(e,$),S(void 0)}e._readable=Sn(h,I,q,c,d),e._backpressure=void 0,e._backpressureChangePromise=void 0,e._backpressureChangePromise_resolve=void 0,pr(e,!0),e._transformStreamController=void 0}function ui(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")?!1:e instanceof dr}function hr(e,t){Ee(e._readable._readableStreamController,t),mr(e,t)}function mr(e,t){ci(e._transformStreamController),dn(e._writable._writableStreamController,t),e._backpressure&&pr(e,!1)}function pr(e,t){e._backpressureChangePromise!==void 0&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=T(i=>{e._backpressureChangePromise_resolve=i}),e._backpressure=t}class At{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!br(this))throw yr("desiredSize");let t=this._controlledTransformStream._readable._readableStreamController;return gn(t)}enqueue(t=void 0){if(!br(this))throw yr("enqueue");fi(this,t)}error(t=void 0){if(!br(this))throw yr("error");nu(this,t)}terminate(){if(!br(this))throw yr("terminate");ou(this)}}Object.defineProperties(At.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(At.prototype,r.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function br(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")?!1:e instanceof At}function tu(e,t,i,l){t._controlledTransformStream=e,e._transformStreamController=t,t._transformAlgorithm=i,t._flushAlgorithm=l}function ru(e,t){let i=Object.create(At.prototype),l=d=>{try{return fi(i,d),S(void 0)}catch(h){return g(h)}},c=()=>S(void 0);t.transform!==void 0&&(l=d=>t.transform(d,i)),t.flush!==void 0&&(c=()=>t.flush(i)),tu(e,i,l,c)}function ci(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0}function fi(e,t){let i=e._controlledTransformStream,l=i._readable._readableStreamController;if(!Xe(l))throw new TypeError("Readable side is not in a state that permits enqueue");try{lr(l,t)}catch(d){throw mr(i,d),i._readable._storedError}Wl(l)!==i._backpressure&&pr(i,!0)}function nu(e,t){hr(e._controlledTransformStream,t)}function di(e,t){let i=e._transformAlgorithm(t);return W(i,void 0,l=>{throw hr(e._controlledTransformStream,l),l})}function ou(e){let t=e._controlledTransformStream,i=t._readable._readableStreamController;Ct(i);let l=new TypeError("TransformStream terminated");mr(t,l)}function iu(e,t){let i=e._transformStreamController;if(e._backpressure){let l=e._backpressureChangePromise;return W(l,()=>{let c=e._writable;if(c._state==="erroring")throw c._storedError;return di(i,t)})}return di(i,t)}function au(e,t){return hr(e,t),S(void 0)}function su(e){let t=e._readable,i=e._transformStreamController,l=i._flushAlgorithm();return ci(i),W(l,()=>{if(t._state==="errored")throw t._storedError;Ct(t._readableStreamController)},c=>{throw hr(e,c),t._storedError})}function lu(e){return pr(e,!1),e._backpressureChangePromise}function yr(e){return new TypeError(`TransformStreamDefaultController.prototype.${e} can only be used on a TransformStreamDefaultController`)}function hi(e){return new TypeError(`TransformStream.prototype.${e} can only be used on a TransformStream`)}n.ByteLengthQueuingStrategy=cr,n.CountQueuingStrategy=fr,n.ReadableByteStreamController=He,n.ReadableStream=Ce,n.ReadableStreamBYOBReader=St,n.ReadableStreamBYOBRequest=bt,n.ReadableStreamDefaultController=Qe,n.ReadableStreamDefaultReader=ht,n.TransformStream=dr,n.TransformStreamDefaultController=At,n.WritableStream=wt,n.WritableStreamDefaultController=Ye,n.WritableStreamDefaultWriter=Rt,Object.defineProperty(n,"__esModule",{value:!0})}))});var ls=A(()=>{if(!globalThis.ReadableStream)try{let n=require("node:process"),{emitWarning:r}=n;try{n.emitWarning=()=>{},Object.assign(globalThis,require("node:stream/web")),n.emitWarning=r}catch(o){throw n.emitWarning=r,o}}catch{Object.assign(globalThis,ss())}try{let{Blob:n}=require("buffer");n&&!n.prototype.stream&&(n.prototype.stream=function(o){let a=0,s=this;return new ReadableStream({type:"bytes",async pull(u){let p=await s.slice(a,Math.min(s.size,a+65536)).arrayBuffer();a+=p.byteLength,u.enqueue(new Uint8Array(p)),a===s.size&&u.close()}})})}catch{}});async function*Nn(n,r=!0){for(let o of n)if("stream"in o)yield*o.stream();else if(ArrayBuffer.isView(o))if(r){let a=o.byteOffset,s=o.byteOffset+o.byteLength;for(;a!==s;){let u=Math.min(s-a,us),f=o.buffer.slice(a,a+u);a+=f.byteLength,yield new Uint8Array(f)}}else yield o;else{let a=0,s=o;for(;a!==s.size;){let f=await s.slice(a,Math.min(s.size,a+us)).arrayBuffer();a+=f.byteLength,yield new Uint8Array(f)}}}var Cd,us,cs,df,Se,qt=vt(()=>{Cd=se(ls(),1);us=65536;cs=class Un{#e=[];#t="";#r=0;#n="transparent";constructor(r=[],o={}){if(typeof r!="object"||r===null)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if(typeof r[Symbol.iterator]!="function")throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if(typeof o!="object"&&typeof o!="function")throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");o===null&&(o={});let a=new TextEncoder;for(let u of r){let f;ArrayBuffer.isView(u)?f=new Uint8Array(u.buffer.slice(u.byteOffset,u.byteOffset+u.byteLength)):u instanceof ArrayBuffer?f=new Uint8Array(u.slice(0)):u instanceof Un?f=u:f=a.encode(`${u}`);let p=ArrayBuffer.isView(f)?f.byteLength:f.size;p&&(this.#r+=p,this.#e.push(f))}this.#n=`${o.endings===void 0?"transparent":o.endings}`;let s=o.type===void 0?"":String(o.type);this.#t=/^[\x20-\x7E]*$/.test(s)?s:""}get size(){return this.#r}get type(){return this.#t}async text(){let r=new TextDecoder,o="";for await(let a of Nn(this.#e,!1))o+=r.decode(a,{stream:!0});return o+=r.decode(),o}async arrayBuffer(){let r=new Uint8Array(this.size),o=0;for await(let a of Nn(this.#e,!1))r.set(a,o),o+=a.length;return r.buffer}stream(){let r=Nn(this.#e,!0);return new globalThis.ReadableStream({type:"bytes",async pull(o){let a=await r.next();a.done?o.close():o.enqueue(a.value)},async cancel(){await r.return()}})}slice(r=0,o=this.size,a=""){let{size:s}=this,u=r<0?Math.max(s+r,0):Math.min(r,s),f=o<0?Math.max(s+o,0):Math.min(o,s),p=Math.max(f-u,0),b=this.#e,m=[],R=0;for(let S of b){if(R>=p)break;let g=ArrayBuffer.isView(S)?S.byteLength:S.size;if(u&&g<=u)u-=g,f-=g;else{let y;ArrayBuffer.isView(S)?(y=S.subarray(u,Math.min(g,f)),R+=y.byteLength):(y=S.slice(u,Math.min(g,f)),R+=y.size),f-=g,m.push(y),u=0}}let T=new Un([],{type:String(a).toLowerCase()});return T.#r=p,T.#e=m,T}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](r){return r&&typeof r=="object"&&typeof r.constructor=="function"&&(typeof r.stream=="function"||typeof r.arrayBuffer=="function")&&/^(Blob|File)$/.test(r[Symbol.toStringTag])}};Object.defineProperties(cs.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});df=cs,Se=df});var hf,mf,ut,Hn=vt(()=>{qt();hf=class extends Se{#e=0;#t="";constructor(r,o,a={}){if(arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(r,a),a===null&&(a={});let s=a.lastModified===void 0?Date.now():Number(a.lastModified);Number.isNaN(s)||(this.#e=s),this.#t=String(o)}get name(){return this.#t}get lastModified(){return this.#e}get[Symbol.toStringTag](){return"File"}static[Symbol.hasInstance](r){return!!r&&r instanceof Se&&/^(File)$/.test(r[Symbol.toStringTag])}},mf=hf,ut=mf});function hs(n,r=Se){var o=`${fs()}${fs()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),a=[],s=`--${o}\r
Content-Disposition: form-data; name="`;return n.forEach((u,f)=>typeof u=="string"?a.push(s+Gn(f)+`"\r
\r
${u.replace(/\r(?!\n)|(?<!\r)\n/g,`\r
`)}\r
`):a.push(s+Gn(f)+`"; filename="${Gn(u.name,1)}"\r
Content-Type: ${u.type||"application/octet-stream"}\r
\r
`,u,`\r
`)),a.push(`--${o}--`),new r(a,{type:"multipart/form-data; boundary="+o})}var Wt,pf,bf,fs,yf,ds,Gn,Le,ze,qr=vt(()=>{qt();Hn();({toStringTag:Wt,iterator:pf,hasInstance:bf}=Symbol),fs=Math.random,yf="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),ds=(n,r,o)=>(n+="",/^(Blob|File)$/.test(r&&r[Wt])?[(o=o!==void 0?o+"":r[Wt]=="File"?r.name:"blob",n),r.name!==o||r[Wt]=="blob"?new ut([r],o,r):r]:[n,r+""]),Gn=(n,r)=>(r?n:n.replace(/\r?\n|\r/g,`\r
`)).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),Le=(n,r,o)=>{if(r.length<o)throw new TypeError(`Failed to execute '${n}' on 'FormData': ${o} arguments required, but only ${r.length} present.`)},ze=class{#e=[];constructor(...r){if(r.length)throw new TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[Wt](){return"FormData"}[pf](){return this.entries()}static[bf](r){return r&&typeof r=="object"&&r[Wt]==="FormData"&&!yf.some(o=>typeof r[o]!="function")}append(...r){Le("append",arguments,2),this.#e.push(ds(...r))}delete(r){Le("delete",arguments,1),r+="",this.#e=this.#e.filter(([o])=>o!==r)}get(r){Le("get",arguments,1),r+="";for(var o=this.#e,a=o.length,s=0;s<a;s++)if(o[s][0]===r)return o[s][1];return null}getAll(r,o){return Le("getAll",arguments,1),o=[],r+="",this.#e.forEach(a=>a[0]===r&&o.push(a[1])),o}has(r){return Le("has",arguments,1),r+="",this.#e.some(o=>o[0]===r)}forEach(r,o){Le("forEach",arguments,1);for(var[a,s]of this)r.call(o,s,a,this)}set(...r){Le("set",arguments,2);var o=[],a=!0;r=ds(...r),this.#e.forEach(s=>{s[0]===r[0]?a&&(a=!o.push(r)):o.push(s)}),a&&o.push(r),this.#e=o}*entries(){yield*this.#e}*keys(){for(var[r]of this)yield r}*values(){for(var[,r]of this)yield r}}});var gs=A((Ld,ys)=>{if(!globalThis.DOMException)try{let{MessageChannel:n}=require("worker_threads"),r=new n().port1,o=new ArrayBuffer;r.postMessage(o,[o,o])}catch(n){n.constructor.name==="DOMException"&&(globalThis.DOMException=n.constructor)}ys.exports=globalThis.DOMException});var Dr,gf,Md,Yn=vt(()=>{Dr=require("node:fs"),gf=se(gs(),1);Hn();qt();({stat:Md}=Dr.promises)});var _s={};pi(_s,{toFormData:()=>Cf});function Ef(n){let r=n.match(/\bfilename=("(.*?)"|([^()<>@,;:\\"/[\]?={}\s\t]+))($|;\s)/i);if(!r)return;let o=r[2]||r[3]||"",a=o.slice(o.lastIndexOf("\\")+1);return a=a.replace(/%22/g,'"'),a=a.replace(/&#(\d{4});/g,(s,u)=>String.fromCharCode(u)),a}async function Cf(n,r){if(!/multipart/i.test(r))throw new TypeError("Failed to fetch");let o=r.match(/boundary=(?:"([^"]+)"|([^;]+))/i);if(!o)throw new TypeError("no or bad content-type header, no multipart boundary");let a=new Qn(o[1]||o[2]),s,u,f,p,b,m,R=[],T=new ze,S=v=>{f+=P.decode(v,{stream:!0})},g=v=>{R.push(v)},y=()=>{let v=new ut(R,m,{type:b});T.append(p,v)},C=()=>{T.append(p,f)},P=new TextDecoder("utf-8");P.decode(),a.onPartBegin=function(){a.onPartData=S,a.onPartEnd=C,s="",u="",f="",p="",b="",m=null,R.length=0},a.onHeaderField=function(v){s+=P.decode(v,{stream:!0})},a.onHeaderValue=function(v){u+=P.decode(v,{stream:!0})},a.onHeaderEnd=function(){if(u+=P.decode(),s=s.toLowerCase(),s==="content-disposition"){let v=u.match(/\bname=("([^"]*)"|([^()<>@,;:\\"/[\]?={}\s\t]+))/i);v&&(p=v[2]||v[3]||""),m=Ef(u),m&&(a.onPartData=g,a.onPartEnd=y)}else s==="content-type"&&(b=u);u="",s=""};for await(let v of n)a.write(v);return a.end(),T}var de,F,Ss,xe,Fr,Lr,Sf,Ft,_f,wf,Rf,Tf,$e,Qn,ws=vt(()=>{Yn();qr();de=0,F={START_BOUNDARY:de++,HEADER_FIELD_START:de++,HEADER_FIELD:de++,HEADER_VALUE_START:de++,HEADER_VALUE:de++,HEADER_VALUE_ALMOST_DONE:de++,HEADERS_ALMOST_DONE:de++,PART_DATA_START:de++,PART_DATA:de++,END:de++},Ss=1,xe={PART_BOUNDARY:Ss,LAST_BOUNDARY:Ss*=2},Fr=10,Lr=13,Sf=32,Ft=45,_f=58,wf=97,Rf=122,Tf=n=>n|32,$e=()=>{},Qn=class{constructor(r){this.index=0,this.flags=0,this.onHeaderEnd=$e,this.onHeaderField=$e,this.onHeadersEnd=$e,this.onHeaderValue=$e,this.onPartBegin=$e,this.onPartData=$e,this.onPartEnd=$e,this.boundaryChars={},r=`\r
--`+r;let o=new Uint8Array(r.length);for(let a=0;a<r.length;a++)o[a]=r.charCodeAt(a),this.boundaryChars[o[a]]=!0;this.boundary=o,this.lookbehind=new Uint8Array(this.boundary.length+8),this.state=F.START_BOUNDARY}write(r){let o=0,a=r.length,s=this.index,{lookbehind:u,boundary:f,boundaryChars:p,index:b,state:m,flags:R}=this,T=this.boundary.length,S=T-1,g=r.length,y,C,P=B=>{this[B+"Mark"]=o},v=B=>{delete this[B+"Mark"]},W=(B,L,O,re)=>{(L===void 0||L!==O)&&this[B](re&&re.subarray(L,O))},N=(B,L)=>{let O=B+"Mark";O in this&&(L?(W(B,this[O],o,r),delete this[O]):(W(B,this[O],r.length,r),this[O]=0))};for(o=0;o<a;o++)switch(y=r[o],m){case F.START_BOUNDARY:if(b===f.length-2){if(y===Ft)R|=xe.LAST_BOUNDARY;else if(y!==Lr)return;b++;break}else if(b-1===f.length-2){if(R&xe.LAST_BOUNDARY&&y===Ft)m=F.END,R=0;else if(!(R&xe.LAST_BOUNDARY)&&y===Fr)b=0,W("onPartBegin"),m=F.HEADER_FIELD_START;else return;break}y!==f[b+2]&&(b=-2),y===f[b+2]&&b++;break;case F.HEADER_FIELD_START:m=F.HEADER_FIELD,P("onHeaderField"),b=0;case F.HEADER_FIELD:if(y===Lr){v("onHeaderField"),m=F.HEADERS_ALMOST_DONE;break}if(b++,y===Ft)break;if(y===_f){if(b===1)return;N("onHeaderField",!0),m=F.HEADER_VALUE_START;break}if(C=Tf(y),C<wf||C>Rf)return;break;case F.HEADER_VALUE_START:if(y===Sf)break;P("onHeaderValue"),m=F.HEADER_VALUE;case F.HEADER_VALUE:y===Lr&&(N("onHeaderValue",!0),W("onHeaderEnd"),m=F.HEADER_VALUE_ALMOST_DONE);break;case F.HEADER_VALUE_ALMOST_DONE:if(y!==Fr)return;m=F.HEADER_FIELD_START;break;case F.HEADERS_ALMOST_DONE:if(y!==Fr)return;W("onHeadersEnd"),m=F.PART_DATA_START;break;case F.PART_DATA_START:m=F.PART_DATA,P("onPartData");case F.PART_DATA:if(s=b,b===0){for(o+=S;o<g&&!(r[o]in p);)o+=T;o-=S,y=r[o]}if(b<f.length)f[b]===y?(b===0&&N("onPartData",!0),b++):b=0;else if(b===f.length)b++,y===Lr?R|=xe.PART_BOUNDARY:y===Ft?R|=xe.LAST_BOUNDARY:b=0;else if(b-1===f.length)if(R&xe.PART_BOUNDARY){if(b=0,y===Fr){R&=~xe.PART_BOUNDARY,W("onPartEnd"),W("onPartBegin"),m=F.HEADER_FIELD_START;break}}else R&xe.LAST_BOUNDARY&&y===Ft?(W("onPartEnd"),m=F.END,R=0):b=0;if(b>0)u[b-1]=y;else if(s>0){let B=new Uint8Array(u.buffer,u.byteOffset,u.byteLength);W("onPartData",0,s,B),s=0,P("onPartData"),o--}break;case F.END:break;default:throw new Error(`Unexpected state entered: ${m}`)}N("onHeaderField"),N("onHeaderValue"),N("onPartData"),this.index=b,this.state=m,this.flags=R}end(){if(this.state===F.HEADER_FIELD_START&&this.index===0||this.state===F.PART_DATA&&this.index===this.boundary.length)this.onPartEnd();else if(this.state!==F.END)throw new Error("MultipartParser.end(): stream ended unexpectedly")}}});var qf={};pi(qf,{default:()=>If});module.exports=mu(qf);var yi="https://static.hellonext.co/wallpapers/wallpapers.json";var le=require("@raycast/api"),jn=se(require("fs"));var ts=se(require("node:process"),1),rs=se(es(),1);async function ns(n){if(ts.default.platform!=="darwin")throw new Error("macOS only");let{stdout:r}=await(0,rs.default)("osascript",["-e",n]);return r}var uf=()=>{let n=new Map(Object.entries((0,le.getPreferenceValues)()));return{applyTo:n.get("applyTo"),screenshotName:n.get("screenshotName"),screenshotFormat:n.get("screenshotFormat")}},Mn=le.environment.supportPath;var os=async n=>{let r=await(0,le.showToast)(le.Toast.Style.Animated,"Downloading and setting wallpaper..."),{applyTo:o}=uf(),a=cf(n);try{let s=a,u=(0,jn.existsSync)(s)?"":`set cmd to "curl -o " & q_temp_folder & " " & "${n.url}"
				do shell script cmd`;if(await ns(`
			set temp_folder to (POSIX path of "${s}")
			set q_temp_folder to quoted form of temp_folder

			${u}

			set x to alias (POSIX file temp_folder)

			try
				tell application "System Events"
					tell ${o} desktop
						set picture to (x as text)
						return "ok"
					end tell
				end tell
			on error
				set dialogTitle to "Error Setting Wallpaper"
				set dialogText to "Please make sure you have given Raycast the required permission. To make sure, click the button below and grant Raycast the 'System Events' permission."

				display alert dialogTitle message dialogText buttons {"Cancel", "Open Preferences"} default button 2 as informational
					if button returned of result is "Open Preferences" then
						do shell script "open 'x-apple.systempreferences:com.apple.preference.security?Privacy_Automation'"
					end if

				return "error"
			end try
		`)!=="ok")throw new Error("Error setting wallpaper.");r&&(r.style=le.Toast.Style.Success,r.title="Set wallpaper success!")}catch(s){console.error(s),r&&(r.style=le.Toast.Style.Failure,r.title="Something went wrong.",r.message="Try with another image or check your internet connection.")}},cf=n=>Mn.endsWith("/")?`${Mn}${n.title}.png`:`${Mn}/${n.title}.png`;var Ds=se(require("node:http"),1),Fs=se(require("node:https"),1),je=se(require("node:zlib"),1),Z=se(require("node:stream"),1),$t=require("node:buffer");function ff(n){if(!/^data:/i.test(n))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');n=n.replace(/\r?\n/g,"");let r=n.indexOf(",");if(r===-1||r<=4)throw new TypeError("malformed data: URI");let o=n.substring(5,r).split(";"),a="",s=!1,u=o[0]||"text/plain",f=u;for(let R=1;R<o.length;R++)o[R]==="base64"?s=!0:(f+=`;${o[R]}`,o[R].indexOf("charset=")===0&&(a=o[R].substring(8)));!o[0]&&!a.length&&(f+=";charset=US-ASCII",a="US-ASCII");let p=s?"base64":"ascii",b=unescape(n.substring(r+1)),m=Buffer.from(b,p);return m.type=u,m.typeFull=f,m.charset=a,m}var is=ff;var ee=se(require("node:stream"),1),we=require("node:util"),X=require("node:buffer");qt();qr();var _e=class extends Error{constructor(r,o){super(r),Error.captureStackTrace(this,this.constructor),this.type=o}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};var G=class extends _e{constructor(r,o,a){super(r,o),a&&(this.code=this.errno=a.code,this.erroredSysCall=a.syscall)}};var Wr=Symbol.toStringTag,Vn=n=>typeof n=="object"&&typeof n.append=="function"&&typeof n.delete=="function"&&typeof n.get=="function"&&typeof n.getAll=="function"&&typeof n.has=="function"&&typeof n.set=="function"&&typeof n.sort=="function"&&n[Wr]==="URLSearchParams",Dt=n=>n&&typeof n=="object"&&typeof n.arrayBuffer=="function"&&typeof n.type=="string"&&typeof n.stream=="function"&&typeof n.constructor=="function"&&/^(Blob|File)$/.test(n[Wr]),ms=n=>typeof n=="object"&&(n[Wr]==="AbortSignal"||n[Wr]==="EventTarget"),ps=(n,r)=>{let o=new URL(r).hostname,a=new URL(n).hostname;return o===a||o.endsWith(`.${a}`)},bs=(n,r)=>{let o=new URL(r).protocol,a=new URL(n).protocol;return o===a};var Pf=(0,we.promisify)(ee.default.pipeline),V=Symbol("Body internals"),he=class{constructor(r,{size:o=0}={}){let a=null;r===null?r=null:Vn(r)?r=X.Buffer.from(r.toString()):Dt(r)||X.Buffer.isBuffer(r)||(we.types.isAnyArrayBuffer(r)?r=X.Buffer.from(r):ArrayBuffer.isView(r)?r=X.Buffer.from(r.buffer,r.byteOffset,r.byteLength):r instanceof ee.default||(r instanceof ze?(r=hs(r),a=r.type.split("=")[1]):r=X.Buffer.from(String(r))));let s=r;X.Buffer.isBuffer(r)?s=ee.default.Readable.from(r):Dt(r)&&(s=ee.default.Readable.from(r.stream())),this[V]={body:r,stream:s,boundary:a,disturbed:!1,error:null},this.size=o,r instanceof ee.default&&r.on("error",u=>{let f=u instanceof _e?u:new G(`Invalid response body while trying to fetch ${this.url}: ${u.message}`,"system",u);this[V].error=f})}get body(){return this[V].stream}get bodyUsed(){return this[V].disturbed}async arrayBuffer(){let{buffer:r,byteOffset:o,byteLength:a}=await Xn(this);return r.slice(o,o+a)}async formData(){let r=this.headers.get("content-type");if(r.startsWith("application/x-www-form-urlencoded")){let a=new ze,s=new URLSearchParams(await this.text());for(let[u,f]of s)a.append(u,f);return a}let{toFormData:o}=await Promise.resolve().then(()=>(ws(),_s));return o(this.body,r)}async blob(){let r=this.headers&&this.headers.get("content-type")||this[V].body&&this[V].body.type||"",o=await this.arrayBuffer();return new Se([o],{type:r})}async json(){let r=await this.text();return JSON.parse(r)}async text(){let r=await Xn(this);return new TextDecoder().decode(r)}buffer(){return Xn(this)}};he.prototype.buffer=(0,we.deprecate)(he.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer");Object.defineProperties(he.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},data:{get:(0,we.deprecate)(()=>{},"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});async function Xn(n){if(n[V].disturbed)throw new TypeError(`body used already for: ${n.url}`);if(n[V].disturbed=!0,n[V].error)throw n[V].error;let{body:r}=n;if(r===null)return X.Buffer.alloc(0);if(!(r instanceof ee.default))return X.Buffer.alloc(0);let o=[],a=0;try{for await(let s of r){if(n.size>0&&a+s.length>n.size){let u=new G(`content size at ${n.url} over limit: ${n.size}`,"max-size");throw r.destroy(u),u}a+=s.length,o.push(s)}}catch(s){throw s instanceof _e?s:new G(`Invalid response body while trying to fetch ${n.url}: ${s.message}`,"system",s)}if(r.readableEnded===!0||r._readableState.ended===!0)try{return o.every(s=>typeof s=="string")?X.Buffer.from(o.join("")):X.Buffer.concat(o,a)}catch(s){throw new G(`Could not create Buffer from response body for ${n.url}: ${s.message}`,"system",s)}else throw new G(`Premature close of server response while trying to fetch ${n.url}`)}var ct=(n,r)=>{let o,a,{body:s}=n[V];if(n.bodyUsed)throw new Error("cannot clone body after it is used");return s instanceof ee.default&&typeof s.getBoundary!="function"&&(o=new ee.PassThrough({highWaterMark:r}),a=new ee.PassThrough({highWaterMark:r}),s.pipe(o),s.pipe(a),n[V].stream=o,s=a),s},Af=(0,we.deprecate)(n=>n.getBoundary(),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),zr=(n,r)=>n===null?null:typeof n=="string"?"text/plain;charset=UTF-8":Vn(n)?"application/x-www-form-urlencoded;charset=UTF-8":Dt(n)?n.type||null:X.Buffer.isBuffer(n)||we.types.isAnyArrayBuffer(n)||ArrayBuffer.isView(n)?null:n instanceof ze?`multipart/form-data; boundary=${r[V].boundary}`:n&&typeof n.getBoundary=="function"?`multipart/form-data;boundary=${Af(n)}`:n instanceof ee.default?null:"text/plain;charset=UTF-8",Rs=n=>{let{body:r}=n[V];return r===null?0:Dt(r)?r.size:X.Buffer.isBuffer(r)?r.length:r&&typeof r.getLengthSync=="function"&&r.hasKnownLength&&r.hasKnownLength()?r.getLengthSync():null},Ts=async(n,{body:r})=>{r===null?n.end():await Pf(r,n)};var Kn=require("node:util"),Lt=se(require("node:http"),1),$r=typeof Lt.default.validateHeaderName=="function"?Lt.default.validateHeaderName:n=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(n)){let r=new TypeError(`Header name must be a valid HTTP token [${n}]`);throw Object.defineProperty(r,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),r}},Zn=typeof Lt.default.validateHeaderValue=="function"?Lt.default.validateHeaderValue:(n,r)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(r)){let o=new TypeError(`Invalid character in header content ["${n}"]`);throw Object.defineProperty(o,"code",{value:"ERR_INVALID_CHAR"}),o}},K=class n extends URLSearchParams{constructor(r){let o=[];if(r instanceof n){let a=r.raw();for(let[s,u]of Object.entries(a))o.push(...u.map(f=>[s,f]))}else if(r!=null)if(typeof r=="object"&&!Kn.types.isBoxedPrimitive(r)){let a=r[Symbol.iterator];if(a==null)o.push(...Object.entries(r));else{if(typeof a!="function")throw new TypeError("Header pairs must be iterable");o=[...r].map(s=>{if(typeof s!="object"||Kn.types.isBoxedPrimitive(s))throw new TypeError("Each header pair must be an iterable object");return[...s]}).map(s=>{if(s.length!==2)throw new TypeError("Each header pair must be a name/value tuple");return[...s]})}}else throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");return o=o.length>0?o.map(([a,s])=>($r(a),Zn(a,String(s)),[String(a).toLowerCase(),String(s)])):void 0,super(o),new Proxy(this,{get(a,s,u){switch(s){case"append":case"set":return(f,p)=>($r(f),Zn(f,String(p)),URLSearchParams.prototype[s].call(a,String(f).toLowerCase(),String(p)));case"delete":case"has":case"getAll":return f=>($r(f),URLSearchParams.prototype[s].call(a,String(f).toLowerCase()));case"keys":return()=>(a.sort(),new Set(URLSearchParams.prototype.keys.call(a)).keys());default:return Reflect.get(a,s,u)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(r){let o=this.getAll(r);if(o.length===0)return null;let a=o.join(", ");return/^content-encoding$/i.test(r)&&(a=a.toLowerCase()),a}forEach(r,o=void 0){for(let a of this.keys())Reflect.apply(r,o,[this.get(a),a,this])}*values(){for(let r of this.keys())yield this.get(r)}*entries(){for(let r of this.keys())yield[r,this.get(r)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((r,o)=>(r[o]=this.getAll(o),r),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((r,o)=>{let a=this.getAll(o);return o==="host"?r[o]=a[0]:r[o]=a.length>1?a:a[0],r},{})}};Object.defineProperties(K.prototype,["get","entries","forEach","values"].reduce((n,r)=>(n[r]={enumerable:!0},n),{}));function Es(n=[]){return new K(n.reduce((r,o,a,s)=>(a%2===0&&r.push(s.slice(a,a+2)),r),[]).filter(([r,o])=>{try{return $r(r),Zn(r,String(o)),!0}catch{return!1}}))}var vf=new Set([301,302,303,307,308]),Mr=n=>vf.has(n);var ue=Symbol("Response internals"),te=class n extends he{constructor(r=null,o={}){super(r,o);let a=o.status!=null?o.status:200,s=new K(o.headers);if(r!==null&&!s.has("Content-Type")){let u=zr(r,this);u&&s.append("Content-Type",u)}this[ue]={type:"default",url:o.url,status:a,statusText:o.statusText||"",headers:s,counter:o.counter,highWaterMark:o.highWaterMark}}get type(){return this[ue].type}get url(){return this[ue].url||""}get status(){return this[ue].status}get ok(){return this[ue].status>=200&&this[ue].status<300}get redirected(){return this[ue].counter>0}get statusText(){return this[ue].statusText}get headers(){return this[ue].headers}get highWaterMark(){return this[ue].highWaterMark}clone(){return new n(ct(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(r,o=302){if(!Mr(o))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new n(null,{headers:{location:new URL(r).toString()},status:o})}static error(){let r=new n(null,{status:0,statusText:""});return r[ue].type="error",r}static json(r=void 0,o={}){let a=JSON.stringify(r);if(a===void 0)throw new TypeError("data is not JSON serializable");let s=new K(o&&o.headers);return s.has("content-type")||s.set("content-type","application/json"),new n(a,{...o,headers:s})}get[Symbol.toStringTag](){return"Response"}};Object.defineProperties(te.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});var Is=require("node:url"),qs=require("node:util");var Cs=n=>{if(n.search)return n.search;let r=n.href.length-1,o=n.hash||(n.href[r]==="#"?"#":"");return n.href[r-o.length]==="?"?"?":""};var As=require("node:net");function Ps(n,r=!1){return n==null||(n=new URL(n),/^(about|blob|data):$/.test(n.protocol))?"no-referrer":(n.username="",n.password="",n.hash="",r&&(n.pathname="",n.search=""),n)}var vs=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]),xs="strict-origin-when-cross-origin";function Bs(n){if(!vs.has(n))throw new TypeError(`Invalid referrerPolicy: ${n}`);return n}function xf(n){if(/^(http|ws)s:$/.test(n.protocol))return!0;let r=n.host.replace(/(^\[)|(]$)/g,""),o=(0,As.isIP)(r);return o===4&&/^127\./.test(r)||o===6&&/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(r)?!0:n.host==="localhost"||n.host.endsWith(".localhost")?!1:n.protocol==="file:"}function ft(n){return/^about:(blank|srcdoc)$/.test(n)||n.protocol==="data:"||/^(blob|filesystem):$/.test(n.protocol)?!0:xf(n)}function ks(n,{referrerURLCallback:r,referrerOriginCallback:o}={}){if(n.referrer==="no-referrer"||n.referrerPolicy==="")return null;let a=n.referrerPolicy;if(n.referrer==="about:client")return"no-referrer";let s=n.referrer,u=Ps(s),f=Ps(s,!0);u.toString().length>4096&&(u=f),r&&(u=r(u)),o&&(f=o(f));let p=new URL(n.url);switch(a){case"no-referrer":return"no-referrer";case"origin":return f;case"unsafe-url":return u;case"strict-origin":return ft(u)&&!ft(p)?"no-referrer":f.toString();case"strict-origin-when-cross-origin":return u.origin===p.origin?u:ft(u)&&!ft(p)?"no-referrer":f;case"same-origin":return u.origin===p.origin?u:"no-referrer";case"origin-when-cross-origin":return u.origin===p.origin?u:f;case"no-referrer-when-downgrade":return ft(u)&&!ft(p)?"no-referrer":u;default:throw new TypeError(`Invalid referrerPolicy: ${a}`)}}function Os(n){let r=(n.get("referrer-policy")||"").split(/[,\s]+/),o="";for(let a of r)a&&vs.has(a)&&(o=a);return o}var j=Symbol("Request internals"),zt=n=>typeof n=="object"&&typeof n[j]=="object",Bf=(0,qs.deprecate)(()=>{},".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)"),Me=class n extends he{constructor(r,o={}){let a;if(zt(r)?a=new URL(r.url):(a=new URL(r),r={}),a.username!==""||a.password!=="")throw new TypeError(`${a} is an url with embedded credentials.`);let s=o.method||r.method||"GET";if(/^(delete|get|head|options|post|put)$/i.test(s)&&(s=s.toUpperCase()),!zt(o)&&"data"in o&&Bf(),(o.body!=null||zt(r)&&r.body!==null)&&(s==="GET"||s==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let u=o.body?o.body:zt(r)&&r.body!==null?ct(r):null;super(u,{size:o.size||r.size||0});let f=new K(o.headers||r.headers||{});if(u!==null&&!f.has("Content-Type")){let m=zr(u,this);m&&f.set("Content-Type",m)}let p=zt(r)?r.signal:null;if("signal"in o&&(p=o.signal),p!=null&&!ms(p))throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");let b=o.referrer==null?r.referrer:o.referrer;if(b==="")b="no-referrer";else if(b){let m=new URL(b);b=/^about:(\/\/)?client$/.test(m)?"client":m}else b=void 0;this[j]={method:s,redirect:o.redirect||r.redirect||"follow",headers:f,parsedURL:a,signal:p,referrer:b},this.follow=o.follow===void 0?r.follow===void 0?20:r.follow:o.follow,this.compress=o.compress===void 0?r.compress===void 0?!0:r.compress:o.compress,this.counter=o.counter||r.counter||0,this.agent=o.agent||r.agent,this.highWaterMark=o.highWaterMark||r.highWaterMark||16384,this.insecureHTTPParser=o.insecureHTTPParser||r.insecureHTTPParser||!1,this.referrerPolicy=o.referrerPolicy||r.referrerPolicy||""}get method(){return this[j].method}get url(){return(0,Is.format)(this[j].parsedURL)}get headers(){return this[j].headers}get redirect(){return this[j].redirect}get signal(){return this[j].signal}get referrer(){if(this[j].referrer==="no-referrer")return"";if(this[j].referrer==="client")return"about:client";if(this[j].referrer)return this[j].referrer.toString()}get referrerPolicy(){return this[j].referrerPolicy}set referrerPolicy(r){this[j].referrerPolicy=Bs(r)}clone(){return new n(this)}get[Symbol.toStringTag](){return"Request"}};Object.defineProperties(Me.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});var Ws=n=>{let{parsedURL:r}=n[j],o=new K(n[j].headers);o.has("Accept")||o.set("Accept","*/*");let a=null;if(n.body===null&&/^(post|put)$/i.test(n.method)&&(a="0"),n.body!==null){let p=Rs(n);typeof p=="number"&&!Number.isNaN(p)&&(a=String(p))}a&&o.set("Content-Length",a),n.referrerPolicy===""&&(n.referrerPolicy=xs),n.referrer&&n.referrer!=="no-referrer"?n[j].referrer=ks(n):n[j].referrer="no-referrer",n[j].referrer instanceof URL&&o.set("Referer",n.referrer),o.has("User-Agent")||o.set("User-Agent","node-fetch"),n.compress&&!o.has("Accept-Encoding")&&o.set("Accept-Encoding","gzip, deflate, br");let{agent:s}=n;typeof s=="function"&&(s=s(r));let u=Cs(r),f={path:r.pathname+u,method:n.method,headers:o[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:n.insecureHTTPParser,agent:s};return{parsedURL:r,options:f}};var dt=class extends _e{constructor(r,o="aborted"){super(r,o)}};qr();Yn();var kf=new Set(["data:","http:","https:"]);async function jr(n,r){return new Promise((o,a)=>{let s=new Me(n,r),{parsedURL:u,options:f}=Ws(s);if(!kf.has(u.protocol))throw new TypeError(`node-fetch cannot load ${n}. URL scheme "${u.protocol.replace(/:$/,"")}" is not supported.`);if(u.protocol==="data:"){let y=is(s.url),C=new te(y,{headers:{"Content-Type":y.typeFull}});o(C);return}let p=(u.protocol==="https:"?Fs.default:Ds.default).request,{signal:b}=s,m=null,R=()=>{let y=new dt("The operation was aborted.");a(y),s.body&&s.body instanceof Z.default.Readable&&s.body.destroy(y),!(!m||!m.body)&&m.body.emit("error",y)};if(b&&b.aborted){R();return}let T=()=>{R(),g()},S=p(u.toString(),f);b&&b.addEventListener("abort",T);let g=()=>{S.abort(),b&&b.removeEventListener("abort",T)};S.on("error",y=>{a(new G(`request to ${s.url} failed, reason: ${y.message}`,"system",y)),g()}),Of(S,y=>{m&&m.body&&m.body.destroy(y)}),process.version<"v14"&&S.on("socket",y=>{let C;y.prependListener("end",()=>{C=y._eventsCount}),y.prependListener("close",P=>{if(m&&C<y._eventsCount&&!P){let v=new Error("Premature close");v.code="ERR_STREAM_PREMATURE_CLOSE",m.body.emit("error",v)}})}),S.on("response",y=>{S.setTimeout(0);let C=Es(y.rawHeaders);if(Mr(y.statusCode)){let B=C.get("Location"),L=null;try{L=B===null?null:new URL(B,s.url)}catch{if(s.redirect!=="manual"){a(new G(`uri requested responds with an invalid redirect URL: ${B}`,"invalid-redirect")),g();return}}switch(s.redirect){case"error":a(new G(`uri requested responds with a redirect, redirect mode is set to error: ${s.url}`,"no-redirect")),g();return;case"manual":break;case"follow":{if(L===null)break;if(s.counter>=s.follow){a(new G(`maximum redirect reached at: ${s.url}`,"max-redirect")),g();return}let O={headers:new K(s.headers),follow:s.follow,counter:s.counter+1,agent:s.agent,compress:s.compress,method:s.method,body:ct(s),signal:s.signal,size:s.size,referrer:s.referrer,referrerPolicy:s.referrerPolicy};if(!ps(s.url,L)||!bs(s.url,L))for(let Y of["authorization","www-authenticate","cookie","cookie2"])O.headers.delete(Y);if(y.statusCode!==303&&s.body&&r.body instanceof Z.default.Readable){a(new G("Cannot follow redirect with body being a readable stream","unsupported-redirect")),g();return}(y.statusCode===303||(y.statusCode===301||y.statusCode===302)&&s.method==="POST")&&(O.method="GET",O.body=void 0,O.headers.delete("content-length"));let re=Os(C);re&&(O.referrerPolicy=re),o(jr(new Me(L,O))),g();return}default:return a(new TypeError(`Redirect option '${s.redirect}' is not a valid value of RequestRedirect`))}}b&&y.once("end",()=>{b.removeEventListener("abort",T)});let P=(0,Z.pipeline)(y,new Z.PassThrough,B=>{B&&a(B)});process.version<"v12.10"&&y.on("aborted",T);let v={url:s.url,status:y.statusCode,statusText:y.statusMessage,headers:C,size:s.size,counter:s.counter,highWaterMark:s.highWaterMark},W=C.get("Content-Encoding");if(!s.compress||s.method==="HEAD"||W===null||y.statusCode===204||y.statusCode===304){m=new te(P,v),o(m);return}let N={flush:je.default.Z_SYNC_FLUSH,finishFlush:je.default.Z_SYNC_FLUSH};if(W==="gzip"||W==="x-gzip"){P=(0,Z.pipeline)(P,je.default.createGunzip(N),B=>{B&&a(B)}),m=new te(P,v),o(m);return}if(W==="deflate"||W==="x-deflate"){let B=(0,Z.pipeline)(y,new Z.PassThrough,L=>{L&&a(L)});B.once("data",L=>{(L[0]&15)===8?P=(0,Z.pipeline)(P,je.default.createInflate(),O=>{O&&a(O)}):P=(0,Z.pipeline)(P,je.default.createInflateRaw(),O=>{O&&a(O)}),m=new te(P,v),o(m)}),B.once("end",()=>{m||(m=new te(P,v),o(m))});return}if(W==="br"){P=(0,Z.pipeline)(P,je.default.createBrotliDecompress(),B=>{B&&a(B)}),m=new te(P,v),o(m);return}m=new te(P,v),o(m)}),Ts(S,s).catch(a)})}function Of(n,r){let o=$t.Buffer.from(`0\r
\r
`),a=!1,s=!1,u;n.on("response",f=>{let{headers:p}=f;a=p["transfer-encoding"]==="chunked"&&!p["content-length"]}),n.on("socket",f=>{let p=()=>{if(a&&!s){let m=new Error("Premature close");m.code="ERR_STREAM_PREMATURE_CLOSE",r(m)}},b=m=>{s=$t.Buffer.compare(m.slice(-5),o)===0,!s&&u&&(s=$t.Buffer.compare(u.slice(-3),o.slice(0,3))===0&&$t.Buffer.compare(m.slice(-2),o.slice(3))===0),u=m};f.prependListener("close",p),f.on("data",b),n.on("close",()=>{f.removeListener("close",p),f.removeListener("data",b)})})}var If=async()=>{try{let r=await(await jr(yi)).json(),o=r[Math.floor(Math.random()*r.length)];await os(o)}catch(n){n instanceof dt?console.log("Abort"):console.log(n);return}};
/*! Bundled license information:

fetch-blob/index.js:
  (*! fetch-blob. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

formdata-polyfill/esm.min.js:
  (*! formdata-polyfill. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

node-domexception/index.js:
  (*! node-domexception. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)
*/
