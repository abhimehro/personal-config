"use strict";var b=Object.create;var n=Object.defineProperty;var f=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var N=Object.getPrototypeOf,c=Object.prototype.hasOwnProperty;var y=(e,o)=>{for(var t in o)n(e,t,{get:o[t],enumerable:!0})},a=(e,o,t,s)=>{if(o&&typeof o=="object"||typeof o=="function")for(let h of p(o))!c.call(e,h)&&h!==t&&n(e,h,{get:()=>o[h],enumerable:!(s=f(o,h))||s.enumerable});return e};var v=(e,o,t)=>(t=e!=null?b(N(e)):{},a(o||!e||!e.__esModule?n(t,"default",{value:e,enumerable:!0}):t,e)),w=e=>a(n({},"__esModule",{value:!0}),e);var $={};y($,{default:()=>x});module.exports=w($);var i=v(require("fs")),l=require("@raycast/api"),r=class{thoughtHistory=[];path="";constructor(o){this.path=o}validateThoughtData(o){let t=o;if(!t.thought||typeof t.thought!="string")throw new Error("Invalid thought: must be a string");if(!t.thoughtNumber||typeof t.thoughtNumber!="number")throw new Error("Invalid thoughtNumber: must be a number");if(!t.totalThoughts||typeof t.totalThoughts!="number")throw new Error("Invalid totalThoughts: must be a number");if(typeof t.nextThoughtNeeded!="boolean")throw new Error("Invalid nextThoughtNeeded: must be a boolean");return{thought:t.thought,thoughtNumber:t.thoughtNumber,totalThoughts:t.totalThoughts,nextThoughtNeeded:t.nextThoughtNeeded,learnings:t.learnings,questions:t.questions,goals:t.goals,toolsToUse:t.toolsToUse}}formatThought(o){let{thoughtNumber:t,totalThoughts:s,thought:h,learnings:d,questions:T,goals:m}=o,u="",g="";return u="\u{1F4AD} Thought",g="",`${`${u} ${t}/${s}${g}`}

${h}
${d}
${T}
${m}`}processThought(o){let t=this.validateThoughtData(o);t.thoughtNumber>t.totalThoughts&&(t.totalThoughts=t.thoughtNumber),this.thoughtHistory.push(t);let s=this.formatThought(t);return process.stdout.write(s+`
`),i.default.appendFileSync(this.path,JSON.stringify(t)+`
`),t.nextThoughtNeeded?`Call one of the tools (${t.toolsToUse||[]}). Then, continue your thought process by calling research again. `+JSON.stringify({thoughtNumber:t.thoughtNumber,totalThoughts:t.totalThoughts,nextThoughtNeeded:!0,thoughtHistoryLength:this.thoughtHistory.length,learnings:t.learnings||[],questions:t.questions||[],goals:t.goals||[]}):"You have finished your research. Write a detailed report on what you have learned in Markdown syntax, following any requirements or restrictions the user has provided at the start. "+JSON.stringify({thoughtNumber:t.thoughtNumber,totalThoughts:t.totalThoughts,nextThoughtNeeded:!1,thoughtHistoryLength:this.thoughtHistory.length,learnings:t.learnings||[],questions:t.questions||[],goals:t.goals||[]})}};async function x(e){return new r(l.environment.supportPath+"/"+e.id+".json").processThought(e)}
