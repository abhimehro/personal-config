"use strict";var xt=Object.create;var X=Object.defineProperty;var vt=Object.getOwnPropertyDescriptor;var Et=Object.getOwnPropertyNames;var St=Object.getPrototypeOf,At=Object.prototype.hasOwnProperty;var Tt=(t,r)=>{for(var e in r)X(t,e,{get:r[e],enumerable:!0})},Te=(t,r,e,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let a of Et(r))!At.call(t,a)&&a!==e&&X(t,a,{get:()=>r[a],enumerable:!(n=vt(r,a))||n.enumerable});return t};var D=(t,r,e)=>(e=t!=null?xt(St(t)):{},Te(r||!t||!t.__esModule?X(e,"default",{value:t,enumerable:!0}):e,t)),Pt=t=>Te(X({},"__esModule",{value:!0}),t);var or={};Tt(or,{default:()=>bt});module.exports=Pt(or);var Ae=require("@raycast/api"),mt=require("react");var De=require("react"),A=require("@raycast/api"),fe=require("child_process");var Pe=["Application Support","BraveSoftware","Brave-Browser"],_e=["Application Support","BraveSoftware","Brave-Browser-Beta"],Re=["Application Support","BraveSoftware","Brave-Browser-Nightly"],Ie=["Application Support","BraveSoftware","Brave-Browser","Local State"],E="Default",I="BRAVE_PROFILE_KEY",Ce="BRAVE_PROFILES_KEY",Ue=`
# \u{1F6A8}Error: Brave browser is not installed
## This extension depends on Brave browser. You must install it to continue.
  
If you have [Homebrew](https://brew.sh/) installed then press \u23CE (Enter Key) to install Brave browser.

[Click here](https://brave.com/download/) if you want to download manually.
  
[![Brave](https://brave.com/static-assets/images/brave-logo.svg)]()
`,Oe="This profile has no bookmarks.",Le=`
# \u{1F6A8}Error: Something happened while trying to run your command
  
[![Brave](https://brave.com/static-assets/images/brave-logo.svg)]()
`,Q="An Error Occurred",ee="Brave not installed";var Ne=require("os"),Ve=require("path"),te=require("react/jsx-runtime"),_t=(()=>{try{return(0,fe.execSync)("brew --prefix",{encoding:"utf8"}).trim()}catch{return(0,Ne.cpus)()[0].model.includes("Apple")?"/opt/homebrew":"/usr/local"}})();function Be(){return(0,Ve.join)(_t,"bin/brew")}function Rt(t){try{return(0,fe.execSync)(`${Be()} install --cask ${t}`,{maxBuffer:10*1024*1024})}catch(r){let e=r;throw e&&e.code===127?(e.stderr=`Brew executable not found at ${Be()}`,e):r}}function Fe(){let[t,r]=(0,De.useState)(!0);return(0,te.jsx)(A.Detail,{actions:(0,te.jsx)(A.ActionPanel,{children:t&&(0,te.jsx)(A.ActionPanel.Item,{title:"Install with Homebrew",onAction:async()=>{if(!t)return;let e=new A.Toast({style:A.Toast.Style.Animated,title:"Installing..."});await e.show();try{Rt("brave-browser"),await e.hide()}catch{await e.hide(),await(0,A.showToast)(A.Toast.Style.Failure,Q,"An unknown error occurred while trying to install")}e.title="Installed! Please go back and try again.",e.style=A.Toast.Style.Success,await e.show(),r(!1)}})}),markdown:Ue})}var W=require("@raycast/api");var We=require("react/jsx-runtime");function Me(){return(0,W.showToast)(W.Toast.Style.Failure,Q,"Something happened while trying to run your command"),(0,We.jsx)(W.Detail,{markdown:Le})}var l=require("@raycast/api");var f=D(require("react")),u=require("@raycast/api");var ze=Object.prototype.hasOwnProperty;function re(t,r){var e,n;if(t===r)return!0;if(t&&r&&(e=t.constructor)===r.constructor){if(e===Date)return t.getTime()===r.getTime();if(e===RegExp)return t.toString()===r.toString();if(e===Array){if((n=t.length)===r.length)for(;n--&&re(t[n],r[n]););return n===-1}if(!e||typeof t=="object"){n=0;for(e in t)if(ze.call(t,e)&&++n&&!ze.call(r,e)||!(e in r)||!re(t[e],r[e]))return!1;return Object.keys(r).length===n}}return t!==t&&r!==r}var N=D(require("node:fs")),ae=D(require("node:path")),qe=D(require("node:crypto")),Xe=D(require("node:child_process")),Qe=require("node:buffer"),j=D(require("node:stream")),et=require("node:util");var tt=require("react/jsx-runtime");var rt=require("node:url"),de=globalThis;function It(t){let r=(0,f.useRef)(t),e=(0,f.useRef)(0);return re(t,r.current)||(r.current=t,e.current+=1),(0,f.useMemo)(()=>r.current,[e.current])}function T(t){let r=(0,f.useRef)(t);return r.current=t,r}function se(t,r){let e=t instanceof Error?t.message:String(t);return(0,u.showToast)({style:u.Toast.Style.Failure,title:r?.title??"Something went wrong",message:r?.message??e,primaryAction:r?.primaryAction??je(t),secondaryAction:r?.primaryAction?je(t):void 0})}var je=t=>{let r=!0,e="[Extension Name]...",n="";try{let s=JSON.parse((0,N.readFileSync)((0,ae.join)(u.environment.assetsPath,"..","package.json"),"utf8"));e=`[${s.title}]...`,n=`https://raycast.com/${s.owner||s.author}/${s.name}`,(!s.owner||s.access==="public")&&(r=!1)}catch{}let a=u.environment.isDevelopment||r,o=t instanceof Error?t?.stack||t?.message||"":String(t);return{title:a?"Copy Logs":"Report Error",onAction(s){s.hide(),a?u.Clipboard.copy(o):(0,u.open)(`https://github.com/raycast/extensions/issues/new?&labels=extension%2Cbug&template=extension_bug_report.yml&title=${encodeURIComponent(e)}&extension-url=${encodeURI(n)}&description=${encodeURIComponent(`#### Error:
\`\`\`
${o}
\`\`\`
`)}`)}}};function Ct(t,r,e){let n=(0,f.useRef)(0),[a,o]=(0,f.useState)({isLoading:!0}),s=T(t),c=T(e?.abortable),i=T(r||[]),d=T(e?.onError),h=T(e?.onData),b=T(e?.onWillExecute),w=T(e?.failureToastOptions),R=T(a.data),k=(0,f.useRef)(null),p=(0,f.useRef)({page:0}),y=(0,f.useRef)(!1),S=(0,f.useRef)(!0),L=(0,f.useRef)(50),x=(0,f.useCallback)(()=>(c.current&&(c.current.current?.abort(),c.current.current=new AbortController),++n.current),[c]),g=(0,f.useCallback)((...O)=>{let v=x();b.current?.(O),o(m=>({...m,isLoading:!0}));let F=Ut(s.current)(...O);function M(m){return m.name=="AbortError"||v===n.current&&(d.current?d.current(m):u.environment.launchType!==u.LaunchType.Background&&se(m,{title:"Failed to fetch latest data",primaryAction:{title:"Retry",onAction(B){B.hide(),k.current?.(...i.current||[])}},...w.current}),o({error:m,isLoading:!1})),m}return typeof F=="function"?(y.current=!0,F(p.current).then(({data:m,hasMore:B,cursor:wt})=>(v===n.current&&(p.current&&(p.current.cursor=wt,p.current.lastItem=m?.[m.length-1]),h.current&&h.current(m,p.current),B&&(L.current=m.length),S.current=B,o(kt=>p.current.page===0?{data:m,isLoading:!1}:{data:(kt.data||[])?.concat(m),isLoading:!1})),m),m=>(S.current=!1,M(m)))):(y.current=!1,F.then(m=>(v===n.current&&(h.current&&h.current(m),o({data:m,isLoading:!1})),m),M))},[h,d,i,s,o,k,b,p,w,x]);k.current=g;let U=(0,f.useCallback)(()=>{p.current={page:0};let O=i.current||[];return g(...O)},[g,i]),V=(0,f.useCallback)(async(O,v)=>{let F;try{if(v?.optimisticUpdate){x(),typeof v?.rollbackOnError!="function"&&v?.rollbackOnError!==!1&&(F=structuredClone(R.current?.value));let M=v.optimisticUpdate;o(m=>({...m,data:M(m.data)}))}return await O}catch(M){if(typeof v?.rollbackOnError=="function"){let m=v.rollbackOnError;o(B=>({...B,data:m(B.data)}))}else v?.optimisticUpdate&&v?.rollbackOnError!==!1&&o(m=>({...m,data:F}));throw M}finally{v?.shouldRevalidateAfter!==!1&&(u.environment.launchType===u.LaunchType.Background||u.environment.commandMode==="menu-bar"?await U():U())}},[U,R,o,x]),q=(0,f.useCallback)(()=>{p.current.page+=1;let O=i.current||[];g(...O)},[p,i,g]);(0,f.useEffect)(()=>{p.current={page:0},e?.execute!==!1?g(...r||[]):x()},[It([r,e?.execute,g]),c,p]),(0,f.useEffect)(()=>()=>{x()},[x]);let gt=e?.execute!==!1?a.isLoading:!1,yt={...a,isLoading:gt},$t=y.current?{pageSize:L.current,hasMore:S.current,onLoadMore:q}:void 0;return{...yt,revalidate:U,mutate:V,pagination:$t}}function Ut(t){return t===Promise.all||t===Promise.race||t===Promise.resolve||t===Promise.reject?t.bind(Promise):t}function He(t){return typeof t!="function"?!1:/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(t))!==null}function Ot(t){return t instanceof URLSearchParams?t.toString():t}function nt(t,r=[]){function e(n){return"update"in t?t.update(n,"utf8"):t.write(n)}return{dispatch:function(n){n=Ot(n),n===null?this._null():this["_"+typeof n](n)},_object:function(n){let a=/\[object (.*)\]/i,o=Object.prototype.toString.call(n),s=a.exec(o)?.[1]??"unknown:["+o+"]";s=s.toLowerCase();let c=null;if((c=r.indexOf(n))>=0){this.dispatch("[CIRCULAR:"+c+"]");return}else r.push(n);if(Buffer.isBuffer(n))return e("buffer:"),e(n.toString("utf8"));if(s!=="object"&&s!=="function"&&s!=="asyncfunction")if(this["_"+s])this["_"+s](n);else throw new Error('Unknown object type "'+s+'"');else{let i=Object.keys(n);i=i.sort(),He(n)||i.splice(0,0,"prototype","__proto__","constructor"),e("object:"+i.length+":");let d=this;return i.forEach(function(h){d.dispatch(h),e(":"),d.dispatch(n[h]),e(",")})}},_array:function(n,a){a=typeof a<"u"?a:!1;let o=this;if(e("array:"+n.length+":"),!a||n.length<=1){n.forEach(function(i){o.dispatch(i)});return}let s=[],c=n.map(function(i){let d=Lt(),h=r.slice();return nt(d,h).dispatch(i),s=s.concat(h.slice(r.length)),d.read().toString()});r=r.concat(s),c.sort(),this._array(c,!1)},_date:function(n){e("date:"+n.toJSON())},_symbol:function(n){e("symbol:"+n.toString())},_error:function(n){e("error:"+n.toString())},_boolean:function(n){e("bool:"+n.toString())},_string:function(n){e("string:"+n.length+":"),e(n.toString())},_function:function(n){e("fn:"),He(n)?this.dispatch("[native]"):this.dispatch(n.toString()),this.dispatch("function-name:"+String(n.name)),this._object(n)},_number:function(n){e("number:"+n.toString())},_xml:function(n){e("xml:"+n.toString())},_null:function(){e("Null")},_undefined:function(){e("Undefined")},_regexp:function(n){e("regex:"+n.toString())},_uint8array:function(n){e("uint8array:"),this.dispatch(Array.prototype.slice.call(n))},_uint8clampedarray:function(n){e("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(n))},_int8array:function(n){e("int8array:"),this.dispatch(Array.prototype.slice.call(n))},_uint16array:function(n){e("uint16array:"),this.dispatch(Array.prototype.slice.call(n))},_int16array:function(n){e("int16array:"),this.dispatch(Array.prototype.slice.call(n))},_uint32array:function(n){e("uint32array:"),this.dispatch(Array.prototype.slice.call(n))},_int32array:function(n){e("int32array:"),this.dispatch(Array.prototype.slice.call(n))},_float32array:function(n){e("float32array:"),this.dispatch(Array.prototype.slice.call(n))},_float64array:function(n){e("float64array:"),this.dispatch(Array.prototype.slice.call(n))},_arraybuffer:function(n){e("arraybuffer:"),this.dispatch(new Uint8Array(n))},_url:function(n){e("url:"+n.toString())},_map:function(n){e("map:");let a=Array.from(n);this._array(a,!0)},_set:function(n){e("set:");let a=Array.from(n);this._array(a,!0)},_file:function(n){e("file:"),this.dispatch([n.name,n.size,n.type,n.lastModified])},_blob:function(){throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){e("domwindow")},_bigint:function(n){e("bigint:"+n.toString())},_process:function(){e("process")},_timer:function(){e("timer")},_pipe:function(){e("pipe")},_tcp:function(){e("tcp")},_udp:function(){e("udp")},_tty:function(){e("tty")},_statwatcher:function(){e("statwatcher")},_securecontext:function(){e("securecontext")},_connection:function(){e("connection")},_zlib:function(){e("zlib")},_context:function(){e("context")},_nodescript:function(){e("nodescript")},_httpparser:function(){e("httpparser")},_dataview:function(){e("dataview")},_signal:function(){e("signal")},_fsevent:function(){e("fsevent")},_tlswrap:function(){e("tlswrap")}}}function Lt(){return{buf:"",write:function(t){this.buf+=t},end:function(t){this.buf+=t},read:function(){return this.buf}}}function Bt(t,r){let e=this[t];return e instanceof Date?`__raycast_cached_date__${e.toISOString()}`:Buffer.isBuffer(e)?`__raycast_cached_buffer__${e.toString("base64")}`:r}function Dt(t,r){return typeof r=="string"&&r.startsWith("__raycast_cached_date__")?new Date(r.replace("__raycast_cached_date__","")):typeof r=="string"&&r.startsWith("__raycast_cached_buffer__")?Buffer.from(r.replace("__raycast_cached_buffer__",""),"base64"):r}function Ge(t){let r=qe.default.createHash("sha1");return nt(r).dispatch(t),r.digest("hex")}var Nt=Symbol("cache without namespace"),Ke=new Map;function P(t,r,e){let n=e?.cacheNamespace||Nt,a=Ke.get(n)||Ke.set(n,new u.Cache({namespace:e?.cacheNamespace})).get(n);if(!a)throw new Error("Missing cache");let o=T(t),s=T(r),c=(0,f.useSyncExternalStore)(a.subscribe,()=>{try{return a.get(o.current)}catch(b){console.error("Could not get Cache data:",b);return}}),i=(0,f.useMemo)(()=>{if(typeof c<"u"){if(c==="undefined")return;try{return JSON.parse(c,Dt)}catch(b){return console.warn("The cached data is corrupted",b),s.current}}else return s.current},[c,s]),d=T(i),h=(0,f.useCallback)(b=>{let w=typeof b=="function"?b(d.current):b;if(typeof w>"u")a.set(o.current,"undefined");else{let R=JSON.stringify(w,Bt);a.set(o.current,R)}return w},[a,o,d]);return[i,h]}var z=Symbol();function at(t,r,e){let{initialData:n,keepPreviousData:a,internal_cacheKeySuffix:o,...s}=e||{},c=(0,f.useRef)(null),[i,d]=P(Ge(r||[])+o,z,{cacheNamespace:Ge(t)}),h=(0,f.useRef)(i!==z?i:n),b=(0,f.useRef)(void 0),{mutate:w,revalidate:R,...k}=Ct(t,r||[],{...s,onData(x,g){b.current=g,s.onData&&s.onData(x,g),!(g&&g.page>0)&&(c.current="promise",h.current=x,d(x))}}),p,y=k.pagination;b.current&&b.current.page>0&&k.data?p=k.data:c.current==="promise"?p=h.current:a&&i!==z?(p=i,y&&(y.hasMore=!0,y.pageSize=i.length)):a&&i===z?p=h.current:i!==z?(p=i,y&&(y.hasMore=!0,y.pageSize=i.length)):p=n;let S=T(p),L=(0,f.useCallback)(async(x,g)=>{let U;try{if(g?.optimisticUpdate){typeof g?.rollbackOnError!="function"&&g?.rollbackOnError!==!1&&(U=structuredClone(S.current));let V=g.optimisticUpdate(S.current);c.current="cache",h.current=V,d(V)}return await w(x,{shouldRevalidateAfter:g?.shouldRevalidateAfter})}catch(V){if(typeof g?.rollbackOnError=="function"){let q=g.rollbackOnError(S.current);c.current="cache",h.current=q,d(q)}else g?.optimisticUpdate&&g?.rollbackOnError!==!1&&(c.current="cache",h.current=U,d(U));throw V}},[d,w,S,h,c]);return(0,f.useEffect)(()=>{i!==z&&(c.current="cache",h.current=i)},[i]),{data:p,isLoading:k.isLoading,error:k.error,mutate:b.current&&b.current.page>0?w:L,pagination:y,revalidate:R}}var ne=t=>!!t&&typeof t=="object"&&typeof t.removeListener=="function"&&typeof t.emit=="function"&&typeof t.reallyExit=="function"&&typeof t.listeners=="function"&&typeof t.kill=="function"&&typeof t.pid=="number"&&typeof t.on=="function",he=Symbol.for("signal-exit emitter"),me=class{constructor(){if(this.emitted={afterExit:!1,exit:!1},this.listeners={afterExit:[],exit:[]},this.count=0,this.id=Math.random(),de[he])return de[he];Object.defineProperty(de,he,{value:this,writable:!1,enumerable:!1,configurable:!1})}on(r,e){this.listeners[r].push(e)}removeListener(r,e){let n=this.listeners[r],a=n.indexOf(e);a!==-1&&(a===0&&n.length===1?n.length=0:n.splice(a,1))}emit(r,e,n){if(this.emitted[r])return!1;this.emitted[r]=!0;let a=!1;for(let o of this.listeners[r])a=o(e,n)===!0||a;return r==="exit"&&(a=this.emit("afterExit",e,n)||a),a}},be=class{onExit(){return()=>{}}load(){}unload(){}},ge=class{#i;#t;#e;#s;#o;#a;#n;#r;constructor(r){this.#i=process.platform==="win32"?"SIGINT":"SIGHUP",this.#t=new me,this.#a={},this.#n=!1,this.#r=[],this.#r.push("SIGHUP","SIGINT","SIGTERM"),globalThis.process.platform!=="win32"&&this.#r.push("SIGALRM","SIGABRT","SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT"),globalThis.process.platform==="linux"&&this.#r.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT"),this.#e=r,this.#a={};for(let e of this.#r)this.#a[e]=()=>{let n=this.#e.listeners(e),{count:a}=this.#t,o=r;if(typeof o.__signal_exit_emitter__=="object"&&typeof o.__signal_exit_emitter__.count=="number"&&(a+=o.__signal_exit_emitter__.count),n.length===a){this.unload();let s=this.#t.emit("exit",null,e),c=e==="SIGHUP"?this.#i:e;s||r.kill(r.pid,c)}};this.#o=r.reallyExit,this.#s=r.emit}onExit(r,e){if(!ne(this.#e))return()=>{};this.#n===!1&&this.load();let n=e?.alwaysLast?"afterExit":"exit";return this.#t.on(n,r),()=>{this.#t.removeListener(n,r),this.#t.listeners.exit.length===0&&this.#t.listeners.afterExit.length===0&&this.unload()}}load(){if(!this.#n){this.#n=!0,this.#t.count+=1;for(let r of this.#r)try{let e=this.#a[r];e&&this.#e.on(r,e)}catch{}this.#e.emit=(r,...e)=>this.#l(r,...e),this.#e.reallyExit=r=>this.#c(r)}}unload(){this.#n&&(this.#n=!1,this.#r.forEach(r=>{let e=this.#a[r];if(!e)throw new Error("Listener not defined for signal: "+r);try{this.#e.removeListener(r,e)}catch{}}),this.#e.emit=this.#s,this.#e.reallyExit=this.#o,this.#t.count-=1)}#c(r){return ne(this.#e)?(this.#e.exitCode=r||0,this.#t.emit("exit",this.#e.exitCode,null),this.#o.call(this.#e,this.#e.exitCode)):0}#l(r,...e){let n=this.#s;if(r==="exit"&&ne(this.#e)){typeof e[0]=="number"&&(this.#e.exitCode=e[0]);let a=n.call(this.#e,r,...e);return this.#t.emit("exit",this.#e.exitCode,null),a}else return n.call(this.#e,r,...e)}},pe=null,Vt=(t,r)=>(pe||(pe=ne(process)?new ge(process):new be),pe.onExit(t,r));function Ft(t,{timeout:r}={}){let e=new Promise((c,i)=>{t.on("exit",(d,h)=>{c({exitCode:d,signal:h,timedOut:!1})}),t.on("error",d=>{i(d)}),t.stdin&&t.stdin.on("error",d=>{i(d)})}),n=Vt(()=>{t.kill()});if(r===0||r===void 0)return e.finally(()=>n());let a,o=new Promise((c,i)=>{a=setTimeout(()=>{t.kill("SIGTERM"),i(Object.assign(new Error("Timed out"),{timedOut:!0,signal:"SIGTERM"}))},r)}),s=e.finally(()=>{clearTimeout(a)});return Promise.race([o,s]).finally(()=>n())}var ye=class extends Error{constructor(){super("The output is too big"),this.name="MaxBufferError"}};function Mt(t){let{encoding:r}=t,e=r==="buffer",n=new j.default.PassThrough({objectMode:!1});r&&r!=="buffer"&&n.setEncoding(r);let a=0,o=[];return n.on("data",s=>{o.push(s),a+=s.length}),n.getBufferedValue=()=>e?Buffer.concat(o,a):o.join(""),n.getBufferedLength=()=>a,n}async function Je(t,r){let e=Mt(r);return await new Promise((n,a)=>{let o=s=>{s&&e.getBufferedLength()<=Qe.constants.MAX_LENGTH&&(s.bufferedData=e.getBufferedValue()),a(s)};(async()=>{try{await(0,et.promisify)(j.default.pipeline)(t,e),n()}catch(s){o(s)}})(),e.on("data",()=>{e.getBufferedLength()>8e7&&o(new ye)})}),e.getBufferedValue()}async function Ze(t,r){t.destroy();try{return await r}catch(e){return e.bufferedData}}async function Wt({stdout:t,stderr:r},{encoding:e},n){let a=Je(t,{encoding:e}),o=Je(r,{encoding:e});try{return await Promise.all([n,a,o])}catch(s){return Promise.all([{error:s,exitCode:null,signal:s.signal,timedOut:s.timedOut||!1},Ze(t,a),Ze(r,o)])}}function zt(t){let r=typeof t=="string"?`
`:10,e=typeof t=="string"?"\r":13;return t[t.length-1]===r&&(t=t.slice(0,-1)),t[t.length-1]===e&&(t=t.slice(0,-1)),t}function Ye(t,r){return t.stripFinalNewline?zt(r):r}function jt({timedOut:t,timeout:r,signal:e,exitCode:n}){return t?`timed out after ${r} milliseconds`:e!=null?`was killed with ${e}`:n!=null?`failed with exit code ${n}`:"failed"}function Ht({stdout:t,stderr:r,error:e,signal:n,exitCode:a,command:o,timedOut:s,options:c,parentError:i}){let h=`Command ${jt({timedOut:s,timeout:c?.timeout,signal:n,exitCode:a})}: ${o}`,b=e?`${h}
${e.message}`:h,w=[b,r,t].filter(Boolean).join(`
`);return e?e.originalMessage=e.message:e=i,e.message=w,e.shortMessage=b,e.command=o,e.exitCode=a,e.signal=n,e.stdout=t,e.stderr=r,"bufferedData"in e&&delete e.bufferedData,e}function Gt({stdout:t,stderr:r,error:e,exitCode:n,signal:a,timedOut:o,command:s,options:c,parentError:i}){if(e||n!==0||a!==null)throw Ht({error:e,exitCode:n,signal:a,stdout:t,stderr:r,command:s,timedOut:o,options:c,parentError:i});return t}function $e(t,r){try{let e=s=>s.startsWith("http")?s:`https://${s}`,a=(typeof t=="string"?new rt.URL(e(t)):t).hostname;switch(process.env.FAVICON_PROVIDER??"raycast"){case"none":return{source:r?.fallback??u.Icon.Link,mask:r?.mask};case"apple":return{source:r?.fallback??u.Icon.Link,mask:r?.mask};case"duckduckgo":case"duckDuckGo":return{source:`https://icons.duckduckgo.com/ip3/${a}.ico`,fallback:r?.fallback??u.Icon.Link,mask:r?.mask};case"google":return{source:`https://www.google.com/s2/favicons?sz=${r?.size??64}&domain=${a}`,fallback:r?.fallback??u.Icon.Link,mask:r?.mask};case"legacy":case"raycast":default:return{source:`https://api.ray.so/favicon?url=${a}&size=${r?.size??64}`,fallback:r?.fallback??u.Icon.Link,mask:r?.mask}}}catch(e){return console.error(e),u.Icon.Link}}async function K(t,r,e){if(process.platform!=="darwin")throw new Error("AppleScript is only supported on macOS");let{humanReadableOutput:n,language:a,timeout:o,...s}=Array.isArray(r)?e||{}:r||{},c=n!==!1?[]:["-ss"];a==="JavaScript"&&c.push("-l","JavaScript"),Array.isArray(r)&&c.push("-",...r);let i=Xe.default.spawn("osascript",c,{...s,env:{PATH:"/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin"}}),d=Ft(i,{timeout:o??1e4});i.stdin.end(t);let[{error:h,exitCode:b,signal:w,timedOut:R},k,p]=await Wt(i,{encoding:"utf8"},d),y=Ye({stripFinalNewline:!0},k),S=Ye({stripFinalNewline:!0},p);return Gt({stdout:y,stderr:S,error:h,exitCode:b,signal:w,timedOut:R,command:"osascript",options:e,parentError:new Error})}var _=require("@raycast/api");var st=require("child_process");async function C({url:t,query:r,profileCurrent:e,profileOriginal:n,openTabInProfile:a,newWindow:o,incognito:s}){setTimeout(()=>{(0,_.popToRoot)({clearSearchBar:!0})},3e3),await Jt()&&(0,_.closeMainWindow)({clearRootSearch:!0});let{browserOption:i}=(0,_.getPreferenceValues)(),d=t||(r?`https://www.google.com/search?q=${encodeURIComponent(r)}`:""),h=p=>new Promise((y,S)=>{(0,st.exec)(p,L=>{L?S(L):y(!0)})}),b=p=>{let y=[];return p&&y.push(`--profile-directory=${p}`),o&&y.push("--new-window"),s&&y.push("--incognito"),d&&y.push(d),y},w=[];switch(a){case"default":w=b();break;case"profile_current":w=b(e);break;case"profile_original":w=b(n);break}let R=w.map(p=>`"${p}"`).join(" "),k=`open -na "${i}" --args ${R}`;return h(k)}async function we(t){let{browserOption:r}=(0,_.getPreferenceValues)();await K(`tell application "${r}}"
    tell window 1
      delete tab ${t}
    end tell
  end tell`)}async function ot(t){let{browserOption:r}=(0,_.getPreferenceValues)();await K(`
    tell application "${r}"
      activate
      set index of window (${t.windowsIndex} as number) to (${t.windowsIndex} as number)
      set active tab index of window (${t.windowsIndex} as number) to (${t.tabIndex} as number)
    end tell
    return true
  `)}var Jt=async()=>{let{browserOption:t}=(0,_.getPreferenceValues)();if(await K(`
set isInstalled to false
try
    do shell script "osascript -e 'exists application \\"${t}\\"'"
    set isInstalled to true
end try

return isInstalled`)==="false")throw new Error(ee);return!0};async function it(t){let{browserOption:r}=(0,_.getPreferenceValues)();try{let n=decodeURIComponent(t).replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f"),a=`
      tell application "${r}"
        activate
        tell active tab of front window
          execute javascript "${n}"
        end tell
      end tell
    `;await K(a),await(0,_.closeMainWindow)()}catch(e){console.error(e),e instanceof Error&&e.message.includes("Allow JavaScript from Apple Events")?await se("Enable 'View > Developer > Allow JavaScript from Apple Events' in Brave."):await se("Could not run bookmarklet",{message:e instanceof Error?e.message:String(e)})}}var $=require("react/jsx-runtime"),J=class{static NewTab=Zt;static TabList=Yt;static TabHistory=qt};function Zt({query:t,incognito:r}){let{openTabInProfile:e}=(0,l.getPreferenceValues)(),[n]=P(I,E);return(0,$.jsx)(l.ActionPanel,{title:"New Tab",children:(0,$.jsx)(l.Action,{onAction:()=>C({query:t,profileCurrent:n,openTabInProfile:e,incognito:r}),title:t?`Search "${t}"`:"Open New Tab",icon:l.Icon.Globe})})}function Yt({tab:t}){let{openTabInProfile:r}=(0,l.getPreferenceValues)(),[e]=P(I,E);return(0,$.jsxs)(l.ActionPanel,{title:t.title,children:[(0,$.jsx)(Xt,{tab:t}),(0,$.jsx)(l.Action,{title:"Move to New Window",icon:l.Icon.Window,onAction:async()=>{await we(t.tabIndex),await C({url:t.url,profileCurrent:e,openTabInProfile:r,newWindow:!0})}}),(0,$.jsx)(l.Action,{title:"Move to Incognito Window",icon:l.Icon.EyeDisabled,onAction:async()=>{await we(t.tabIndex),await C({url:t.url,profileCurrent:e,openTabInProfile:r,incognito:!0})}}),(0,$.jsx)(l.Action.CopyToClipboard,{title:"Copy URL",content:t.url})]})}function qt({title:t,url:r,profile:e}){let{openTabInProfile:n}=(0,l.getPreferenceValues)(),[a]=P(I,E);if(r.startsWith("javascript:")){let o=r.substring(11);return(0,$.jsxs)(l.ActionPanel,{title:t,children:[(0,$.jsx)(l.Action,{onAction:()=>it(o),icon:l.Icon.Play,title:"Run Bookmarklet"}),(0,$.jsx)(l.Action.CopyToClipboard,{title:"Copy Code",content:o,shortcut:{modifiers:["cmd"],key:"c"}})]})}return(0,$.jsxs)(l.ActionPanel,{title:t,children:[(0,$.jsx)(l.Action,{onAction:async()=>await C({url:r,profileOriginal:e,profileCurrent:a,openTabInProfile:n}),icon:l.Icon.Eye,title:"Open"}),(0,$.jsx)(l.Action,{title:"Open in New Window",icon:l.Icon.Window,onAction:async()=>await C({url:r,profileOriginal:e,profileCurrent:a,openTabInProfile:n,newWindow:!0})}),(0,$.jsx)(l.Action,{title:"Open in Incognito Window",icon:l.Icon.EyeDisabled,onAction:async()=>await C({url:r,profileOriginal:e,profileCurrent:a,openTabInProfile:n,incognito:!0})}),(0,$.jsxs)(l.ActionPanel.Section,{title:"Open in profile",children:[(0,$.jsx)(l.Action,{onAction:()=>C({url:r,profileOriginal:e,profileCurrent:a,openTabInProfile:"profile_current"}),title:"Open in Current Profile"}),(0,$.jsx)(l.Action,{onAction:()=>C({url:r,profileOriginal:e,profileCurrent:a,openTabInProfile:"profile_original"}),title:"Open in Original Profile"})]}),(0,$.jsx)(l.Action.CopyToClipboard,{title:"Copy URL",content:r,shortcut:{modifiers:["cmd"],key:"c"}})]})}function Xt(t){async function r(){await ot(t.tab),await(0,l.closeMainWindow)()}return(0,$.jsx)(l.ActionPanel.Item,{title:"Open Tab",icon:{source:l.Icon.Eye},onAction:r})}var Y=require("@raycast/api");var Z=require("react/jsx-runtime"),oe=class{static TabList=tr;static TabHistory=er};function Qt(t){try{let r=new URL(t);return r.protocol==="http:"||r.protocol==="https:"}catch{return!1}}function ct(t){try{let r=new URL(t),e=r.hostname.replace("www.","").split("."),n=r.pathname.split("/").filter(a=>a.length>0);return[...e,...n,r.hostname,t]}catch{return[t]}}function er({profile:t,entry:{url:r,title:e,id:n}}){return(0,Z.jsx)(Y.List.Item,{id:`${t}-${n}`,title:e,subtitle:r,keywords:ct(r),icon:Qt(r)?$e(r):Y.Icon.Globe,actions:(0,Z.jsx)(J.TabHistory,{title:e,url:r,profile:t})})}function tr(t){return(0,Z.jsx)(Y.List.Item,{title:t.tab.title,subtitle:t.tab.urlWithoutScheme(),keywords:ct(t.tab.url),actions:(0,Z.jsx)(J.TabList,{tab:t.tab}),icon:t.useOriginalFavicon?t.tab.favicon:t.tab.googleFavicon()})}var le=require("fs");var ce=D(require("path"));var lt=require("@raycast/api"),{browserOption:rr}=(0,lt.getPreferenceValues)(),ie;switch(rr){case"Brave Browser Beta":ie=_e;break;case"Brave Browser Nightly":ie=Re;break;default:ie=Pe}var ut=()=>{if(!process.env.HOME)throw new Error("$HOME environment variable is not set.");return ce.default.join(process.env.HOME,"Library")};var ft=()=>ce.default.join(ut(),...Ie),dt=t=>ce.default.join(ut(),...ie,t??E,"Bookmarks");var H=require("react");var ke=require("react/jsx-runtime");function ht(t){let r=[];return t.type==="folder"?t.children.forEach(e=>{r.push(...ht(e))}):t.type==="url"&&t.url&&r.push({id:t.id,url:t.url,title:t.name,lastVisited:new Date(t.date_added)}),r}var nr=t=>{let r=[];return Object.keys(t.roots).forEach(e=>{let n=t.roots[e],a=ht(n);r.push(...a)}),r},ar=async t=>{let r=dt(t);if(!(0,le.existsSync)(r))return[];let e=await le.promises.readFile(r,{encoding:"utf-8"});return nr(JSON.parse(e))};function pt(){let[t]=P(I,E),[r,e]=(0,H.useState)([]),[n,a]=(0,H.useState)(!0),[o,s]=(0,H.useState)();return(0,H.useEffect)(()=>{ar(t).then(c=>{e(c),a(!1)}).catch(c=>{c.message===ee?s((0,ke.jsx)(Fe,{})):s((0,ke.jsx)(Me,{})),a(!1)})},[t]),{errorView:o,isLoading:n,data:r,profile:{name:"",id:t}}}var xe=require("@raycast/api"),ve=require("react");var ue=require("fs");var Ee=require("react/jsx-runtime");async function sr(){let t=ft();if(!(0,ue.existsSync)(t))return[{name:"Default",id:"Default"}];let r=await ue.promises.readFile(t,"utf-8"),e=JSON.parse(r).profile.info_cache;return Object.entries(e).map(([n,a])=>({name:a.name,id:n}))}function Se({onProfileSelected:t}){let[r,e]=P(I,E),[n,a]=P(Ce,[{name:"Default",id:E}]),{data:o}=at(sr);return(0,ve.useEffect)(()=>{o&&(a(o),r||e(n[0].id))},[o]),(0,ve.useEffect)(()=>{r&&t?.(r)},[r]),!n||n.length<2?null:(0,Ee.jsx)(xe.List.Dropdown,{tooltip:"Select Brave Profile",value:r,onChange:e,children:n.map(s=>(0,Ee.jsx)(xe.List.Dropdown.Item,{value:s.id,title:s.name},s.id))})}var G=require("react/jsx-runtime");function bt(){let[t]=P(I,E),{data:r,isLoading:e,revalidate:n}=pt();return(0,mt.useEffect)(()=>{n?.(t)},[t]),(0,G.jsxs)(Ae.List,{filtering:!0,isLoading:e,searchBarAccessory:(0,G.jsx)(Se,{}),children:[(0,G.jsx)(Ae.List.EmptyView,{title:Oe,icon:{source:"empty-view.png"}}),r?.map(a=>(0,G.jsx)(oe.TabHistory,{entry:a,profile:t},a.id))]})}
