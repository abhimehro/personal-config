"use strict";var i=Object.defineProperty;var g=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var y=Object.prototype.hasOwnProperty;var S=(r,e)=>{for(var s in e)i(r,s,{get:e[s],enumerable:!0})},h=(r,e,s,l)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of m(e))!y.call(r,o)&&o!==s&&i(r,o,{get:()=>e[o],enumerable:!(l=g(e,o))||l.enumerable});return r};var F=r=>h(i({},"__esModule",{value:!0}),r);var p={};S(p,{default:()=>u});module.exports=F(p);var t=require("@raycast/api");var f=require("child_process");function d(r,e){let{source_folder:s,dest_folder:l,delete_dest:o}=r,a=`rsync -aE ${o?"--delete":""} "${s}/" "${l}"`;(0,f.exec)(a,e)}async function u(){let{sync_finder_selected_folders_delete_files:r=!1}=(0,t.getPreferenceValues)();try{let e=(await(0,t.getSelectedFinderItems)()).map(s=>s.path);if(e.length>=2){let s=e[0],l=e[1],o={name:"Sync Finder Selected Folders",source_folder:s,dest_folder:l,delete_dest:r},n=await(0,t.showToast)({style:t.Toast.Style.Animated,title:"Syncing folders",message:"Syncing folders..."});d(o,(a,_,c)=>{if(a){n.style=t.Toast.Style.Failure,n.title="Error",n.message=`An error occurred during the execution of the command ${a}`,console.error(`An error occurred during the execution of the command: ${a}`);return}if(c){n.style=t.Toast.Style.Failure,n.title="Error",n.message=c,console.error(c);return}n.style=t.Toast.Style.Success,n.title="Folders synced"}),await(0,t.showHUD)("Folders synced \u{1F64C}")}else await(0,t.showToast)({style:t.Toast.Style.Failure,title:"Please select at least two folders",message:"Please select at least two folders"})}catch(e){await(0,t.showToast)({style:t.Toast.Style.Failure,title:"No finder items selected",message:e instanceof Error?e.message:"Could not get the selected Finder items"})}}
