{
  "version": 3,
  "sources": ["../src/sync-finder-selected-folders.tsx", "../src/utils/execute-rsync.ts"],
  "sourcesContent": ["import { getPreferenceValues, getSelectedFinderItems, showHUD, showToast, Toast } from \"@raycast/api\";\nimport { executeRsync } from \"./utils\";\n\ninterface Preferences {\n  sync_finder_selected_folders_delete_files: boolean;\n}\n\nexport default async function Command() {\n  const { sync_finder_selected_folders_delete_files = false } = getPreferenceValues<Preferences>();\n\n  try {\n    const filePaths = (await getSelectedFinderItems()).map((f) => f.path);\n    if (filePaths.length >= 2) {\n      const source_folder = filePaths[0];\n      const dest_folder = filePaths[1];\n\n      const syncFolder = {\n        name: \"Sync Finder Selected Folders\",\n        source_folder,\n        dest_folder,\n        delete_dest: sync_finder_selected_folders_delete_files,\n      };\n\n      const toast = await showToast({\n        style: Toast.Style.Animated,\n        title: \"Syncing folders\",\n        message: \"Syncing folders...\",\n      });\n\n      executeRsync(syncFolder, (error, stdout, stderr) => {\n        if (error) {\n          toast.style = Toast.Style.Failure;\n          toast.title = \"Error\";\n          toast.message = `An error occurred during the execution of the command ${error}`;\n\n          console.error(`An error occurred during the execution of the command: ${error}`);\n          return;\n        }\n        if (stderr) {\n          toast.style = Toast.Style.Failure;\n          toast.title = \"Error\";\n          toast.message = stderr;\n\n          console.error(stderr);\n          return;\n        }\n        toast.style = Toast.Style.Success;\n        toast.title = \"Folders synced\";\n      });\n\n      await showHUD(\"Folders synced \uD83D\uDE4C\");\n    } else {\n      await showToast({\n        style: Toast.Style.Failure,\n        title: \"Please select at least two folders\",\n        message: \"Please select at least two folders\",\n      });\n    }\n  } catch (e) {\n    await showToast({\n      style: Toast.Style.Failure,\n      title: \"No finder items selected\",\n      message: e instanceof Error ? e.message : \"Could not get the selected Finder items\",\n    });\n  }\n}\n", "import { exec } from \"child_process\";\nimport { SyncFolders } from \"../types\";\n\ntype Callback = (error: Error | null, stdout: string, stderr: string) => void;\n\n/**\n * Executes the rsync command to synchronize folders.\n *\n * @param sync_folders - An object containing the source and destination folders, and a flag to indicate if files should be deleted in the destination folder.\n * @param sync_folders.source_folder - The source folder to sync from.\n * @param sync_folders.dest_folder - The destination folder to sync to.\n * @param sync_folders.delete_dest - A boolean flag indicating whether to delete files in the destination folder that are not present in the source folder.\n * @param callback - An optional callback function to be executed after the rsync command completes.\n *\n * @returns A promise that resolves when the rsync command completes.\n */\nexport function executeRsync(sync_folders: SyncFolders, callback?: Callback) {\n  const { source_folder, dest_folder, delete_dest } = sync_folders;\n\n  const deleteFlag = delete_dest ? \"--delete\" : \"\";\n  const command = `rsync -aE ${deleteFlag} \"${source_folder}/\" \"${dest_folder}\"`;\n\n  exec(command, callback);\n}\n"],
  "mappings": "yaAAA,IAAAA,EAAA,GAAAC,EAAAD,EAAA,aAAAE,IAAA,eAAAC,EAAAH,GAAA,IAAAI,EAAuF,wBCAvF,IAAAC,EAAqB,yBAgBd,SAASC,EAAaC,EAA2BC,EAAqB,CAC3E,GAAM,CAAE,cAAAC,EAAe,YAAAC,EAAa,YAAAC,CAAY,EAAIJ,EAG9CK,EAAU,aADGD,EAAc,WAAa,EACP,KAAKF,CAAa,OAAOC,CAAW,OAE3E,QAAKE,EAASJ,CAAQ,CACxB,CDhBA,eAAOK,GAAiC,CACtC,GAAM,CAAE,0CAAAC,EAA4C,EAAM,KAAI,uBAAiC,EAE/F,GAAI,CACF,IAAMC,GAAa,QAAM,0BAAuB,GAAG,IAAKC,GAAMA,EAAE,IAAI,EACpE,GAAID,EAAU,QAAU,EAAG,CACzB,IAAME,EAAgBF,EAAU,CAAC,EAC3BG,EAAcH,EAAU,CAAC,EAEzBI,EAAa,CACjB,KAAM,+BACN,cAAAF,EACA,YAAAC,EACA,YAAaJ,CACf,EAEMM,EAAQ,QAAM,aAAU,CAC5B,MAAO,QAAM,MAAM,SACnB,MAAO,kBACP,QAAS,oBACX,CAAC,EAEDC,EAAaF,EAAY,CAACG,EAAOC,EAAQC,IAAW,CAClD,GAAIF,EAAO,CACTF,EAAM,MAAQ,QAAM,MAAM,QAC1BA,EAAM,MAAQ,QACdA,EAAM,QAAU,yDAAyDE,CAAK,GAE9E,QAAQ,MAAM,0DAA0DA,CAAK,EAAE,EAC/E,MACF,CACA,GAAIE,EAAQ,CACVJ,EAAM,MAAQ,QAAM,MAAM,QAC1BA,EAAM,MAAQ,QACdA,EAAM,QAAUI,EAEhB,QAAQ,MAAMA,CAAM,EACpB,MACF,CACAJ,EAAM,MAAQ,QAAM,MAAM,QAC1BA,EAAM,MAAQ,gBAChB,CAAC,EAED,QAAM,WAAQ,0BAAmB,CACnC,MACE,QAAM,aAAU,CACd,MAAO,QAAM,MAAM,QACnB,MAAO,qCACP,QAAS,oCACX,CAAC,CAEL,OAAS,EAAG,CACV,QAAM,aAAU,CACd,MAAO,QAAM,MAAM,QACnB,MAAO,2BACP,QAAS,aAAa,MAAQ,EAAE,QAAU,yCAC5C,CAAC,CACH,CACF",
  "names": ["sync_finder_selected_folders_exports", "__export", "Command", "__toCommonJS", "import_api", "import_child_process", "executeRsync", "sync_folders", "callback", "source_folder", "dest_folder", "delete_dest", "command", "Command", "sync_finder_selected_folders_delete_files", "filePaths", "f", "source_folder", "dest_folder", "syncFolder", "toast", "executeRsync", "error", "stdout", "stderr"]
}
