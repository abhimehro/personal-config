"use strict";var ze=Object.create;var H=Object.defineProperty;var Ne=Object.getOwnPropertyDescriptor;var Fe=Object.getOwnPropertyNames;var je=Object.getPrototypeOf,Ke=Object.prototype.hasOwnProperty;var Be=(e,t)=>{for(var r in t)H(e,r,{get:t[r],enumerable:!0})},ue=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of Fe(t))!Ke.call(e,a)&&a!==r&&H(e,a,{get:()=>t[a],enumerable:!(n=Ne(t,a))||n.enumerable});return e};var J=(e,t,r)=>(r=e!=null?ze(je(e)):{},ue(t||!e||!e.__esModule?H(r,"default",{value:e,enumerable:!0}):r,e)),Ge=e=>ue(H({},"__esModule",{value:!0}),e);var St={};Be(St,{default:()=>Ve});module.exports=Ge(St);var L=require("@raycast/api");var Oe=require("@raycast/api");var u=J(require("react")),m=require("@raycast/api");var fe=Object.prototype.hasOwnProperty;function Z(e,t){var r,n;if(e===t)return!0;if(e&&t&&(r=e.constructor)===t.constructor){if(r===Date)return e.getTime()===t.getTime();if(r===RegExp)return e.toString()===t.toString();if(r===Array){if((n=e.length)===t.length)for(;n--&&Z(e[n],t[n]););return n===-1}if(!r||typeof e=="object"){n=0;for(r in e)if(fe.call(e,r)&&++n&&!fe.call(t,r)||!(r in t)||!Z(e[r],t[r]))return!1;return Object.keys(t).length===n}}return e!==e&&t!==t}var U=J(require("node:fs")),Y=J(require("node:path")),be=J(require("node:crypto"));var ye=require("react/jsx-runtime");function He(e){let t=(0,u.useRef)(e),r=(0,u.useRef)(0);return Z(e,t.current)||(t.current=e,r.current+=1),(0,u.useMemo)(()=>t.current,[r.current])}function x(e){let t=(0,u.useRef)(e);return t.current=e,t}function se(e,t){let r=e instanceof Error?e.message:String(e);return(0,m.showToast)({style:m.Toast.Style.Failure,title:t?.title??"Something went wrong",message:t?.message??r,primaryAction:t?.primaryAction??de(e),secondaryAction:t?.primaryAction?de(e):void 0})}var de=e=>{let t=!0,r="[Extension Name]...",n="";try{let s=JSON.parse((0,U.readFileSync)((0,Y.join)(m.environment.assetsPath,"..","package.json"),"utf8"));r=`[${s.title}]...`,n=`https://raycast.com/${s.owner||s.author}/${s.name}`,(!s.owner||s.access==="public")&&(t=!1)}catch{}let a=m.environment.isDevelopment||t,i=e instanceof Error?e?.stack||e?.message||"":String(e);return{title:a?"Copy Logs":"Report Error",onAction(s){s.hide(),a?m.Clipboard.copy(i):(0,m.open)(`https://github.com/raycast/extensions/issues/new?&labels=extension%2Cbug&template=extension_bug_report.yml&title=${encodeURIComponent(r)}&extension-url=${encodeURI(n)}&description=${encodeURIComponent(`#### Error:
\`\`\`
${i}
\`\`\`
`)}`)}}};function ie(e,t,r){let n=(0,u.useRef)(0),[a,i]=(0,u.useState)({isLoading:!0}),s=x(e),c=x(r?.abortable),o=x(t||[]),d=x(r?.onError),f=x(r?.onData),l=x(r?.onWillExecute),h=x(r?.failureToastOptions),y=x(a.data),k=(0,u.useRef)(null),g=(0,u.useRef)({page:0}),$=(0,u.useRef)(!1),S=(0,u.useRef)(!0),E=(0,u.useRef)(50),w=(0,u.useCallback)(()=>(c.current&&(c.current.current?.abort(),c.current.current=new AbortController),++n.current),[c]),b=(0,u.useCallback)((...T)=>{let A=w();l.current?.(T),i(p=>({...p,isLoading:!0}));let O=Je(s.current)(...T);function M(p){return p.name=="AbortError"||A===n.current&&(d.current?d.current(p):m.environment.launchType!==m.LaunchType.Background&&se(p,{title:"Failed to fetch latest data",primaryAction:{title:"Retry",onAction(C){C.hide(),k.current?.(...o.current||[])}},...h.current}),i({error:p,isLoading:!1})),p}return typeof O=="function"?($.current=!0,O(g.current).then(({data:p,hasMore:C,cursor:De})=>(A===n.current&&(g.current&&(g.current.cursor=De,g.current.lastItem=p?.[p.length-1]),f.current&&f.current(p,g.current),C&&(E.current=p.length),S.current=C,i(We=>g.current.page===0?{data:p,isLoading:!1}:{data:(We.data||[])?.concat(p),isLoading:!1})),p),p=>(S.current=!1,M(p)))):($.current=!1,O.then(p=>(A===n.current&&(f.current&&f.current(p),i({data:p,isLoading:!1})),p),M))},[f,d,o,s,i,k,l,g,h,w]);k.current=b;let I=(0,u.useCallback)(()=>{g.current={page:0};let T=o.current||[];return b(...T)},[b,o]),R=(0,u.useCallback)(async(T,A)=>{let O;try{if(A?.optimisticUpdate){w(),typeof A?.rollbackOnError!="function"&&A?.rollbackOnError!==!1&&(O=structuredClone(y.current?.value));let M=A.optimisticUpdate;i(p=>({...p,data:M(p.data)}))}return await T}catch(M){if(typeof A?.rollbackOnError=="function"){let p=A.rollbackOnError;i(C=>({...C,data:p(C.data)}))}else A?.optimisticUpdate&&A?.rollbackOnError!==!1&&i(p=>({...p,data:O}));throw M}finally{A?.shouldRevalidateAfter!==!1&&(m.environment.launchType===m.LaunchType.Background||m.environment.commandMode==="menu-bar"?await I():I())}},[I,y,i,w]),P=(0,u.useCallback)(()=>{g.current.page+=1;let T=o.current||[];b(...T)},[g,o,b]);(0,u.useEffect)(()=>{g.current={page:0},r?.execute!==!1?b(...t||[]):w()},[He([t,r?.execute,b]),c,g]),(0,u.useEffect)(()=>()=>{w()},[w]);let F=r?.execute!==!1?a.isLoading:!1,j={...a,isLoading:F},G=$.current?{pageSize:E.current,hasMore:S.current,onLoadMore:P}:void 0;return{...j,revalidate:I,mutate:R,pagination:G}}function Je(e){return e===Promise.all||e===Promise.race||e===Promise.resolve||e===Promise.reject?e.bind(Promise):e}function he(e){return typeof e!="function"?!1:/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(e))!==null}function Ze(e){return e instanceof URLSearchParams?e.toString():e}function $e(e,t=[]){function r(n){return"update"in e?e.update(n,"utf8"):e.write(n)}return{dispatch:function(n){n=Ze(n),n===null?this._null():this["_"+typeof n](n)},_object:function(n){let a=/\[object (.*)\]/i,i=Object.prototype.toString.call(n),s=a.exec(i)?.[1]??"unknown:["+i+"]";s=s.toLowerCase();let c=null;if((c=t.indexOf(n))>=0){this.dispatch("[CIRCULAR:"+c+"]");return}else t.push(n);if(Buffer.isBuffer(n))return r("buffer:"),r(n.toString("utf8"));if(s!=="object"&&s!=="function"&&s!=="asyncfunction")if(this["_"+s])this["_"+s](n);else throw new Error('Unknown object type "'+s+'"');else{let o=Object.keys(n);o=o.sort(),he(n)||o.splice(0,0,"prototype","__proto__","constructor"),r("object:"+o.length+":");let d=this;return o.forEach(function(f){d.dispatch(f),r(":"),d.dispatch(n[f]),r(",")})}},_array:function(n,a){a=typeof a<"u"?a:!1;let i=this;if(r("array:"+n.length+":"),!a||n.length<=1){n.forEach(function(o){i.dispatch(o)});return}let s=[],c=n.map(function(o){let d=qe(),f=t.slice();return $e(d,f).dispatch(o),s=s.concat(f.slice(t.length)),d.read().toString()});t=t.concat(s),c.sort(),this._array(c,!1)},_date:function(n){r("date:"+n.toJSON())},_symbol:function(n){r("symbol:"+n.toString())},_error:function(n){r("error:"+n.toString())},_boolean:function(n){r("bool:"+n.toString())},_string:function(n){r("string:"+n.length+":"),r(n.toString())},_function:function(n){r("fn:"),he(n)?this.dispatch("[native]"):this.dispatch(n.toString()),this.dispatch("function-name:"+String(n.name)),this._object(n)},_number:function(n){r("number:"+n.toString())},_xml:function(n){r("xml:"+n.toString())},_null:function(){r("Null")},_undefined:function(){r("Undefined")},_regexp:function(n){r("regex:"+n.toString())},_uint8array:function(n){r("uint8array:"),this.dispatch(Array.prototype.slice.call(n))},_uint8clampedarray:function(n){r("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(n))},_int8array:function(n){r("int8array:"),this.dispatch(Array.prototype.slice.call(n))},_uint16array:function(n){r("uint16array:"),this.dispatch(Array.prototype.slice.call(n))},_int16array:function(n){r("int16array:"),this.dispatch(Array.prototype.slice.call(n))},_uint32array:function(n){r("uint32array:"),this.dispatch(Array.prototype.slice.call(n))},_int32array:function(n){r("int32array:"),this.dispatch(Array.prototype.slice.call(n))},_float32array:function(n){r("float32array:"),this.dispatch(Array.prototype.slice.call(n))},_float64array:function(n){r("float64array:"),this.dispatch(Array.prototype.slice.call(n))},_arraybuffer:function(n){r("arraybuffer:"),this.dispatch(new Uint8Array(n))},_url:function(n){r("url:"+n.toString())},_map:function(n){r("map:");let a=Array.from(n);this._array(a,!0)},_set:function(n){r("set:");let a=Array.from(n);this._array(a,!0)},_file:function(n){r("file:"),this.dispatch([n.name,n.size,n.type,n.lastModified])},_blob:function(){throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){r("domwindow")},_bigint:function(n){r("bigint:"+n.toString())},_process:function(){r("process")},_timer:function(){r("timer")},_pipe:function(){r("pipe")},_tcp:function(){r("tcp")},_udp:function(){r("udp")},_tty:function(){r("tty")},_statwatcher:function(){r("statwatcher")},_securecontext:function(){r("securecontext")},_connection:function(){r("connection")},_zlib:function(){r("zlib")},_context:function(){r("context")},_nodescript:function(){r("nodescript")},_httpparser:function(){r("httpparser")},_dataview:function(){r("dataview")},_signal:function(){r("signal")},_fsevent:function(){r("fsevent")},_tlswrap:function(){r("tlswrap")}}}function qe(){return{buf:"",write:function(e){this.buf+=e},end:function(e){this.buf+=e},read:function(){return this.buf}}}function Ye(e,t){let r=this[e];return r instanceof Date?`__raycast_cached_date__${r.toISOString()}`:Buffer.isBuffer(r)?`__raycast_cached_buffer__${r.toString("base64")}`:t}function Xe(e,t){return typeof t=="string"&&t.startsWith("__raycast_cached_date__")?new Date(t.replace("__raycast_cached_date__","")):typeof t=="string"&&t.startsWith("__raycast_cached_buffer__")?Buffer.from(t.replace("__raycast_cached_buffer__",""),"base64"):t}function q(e){let t=be.default.createHash("sha1");return $e(t).dispatch(e),t.digest("hex")}var Qe=Symbol("cache without namespace"),pe=new Map;function ke(e,t,r){let n=r?.cacheNamespace||Qe,a=pe.get(n)||pe.set(n,new m.Cache({namespace:r?.cacheNamespace})).get(n);if(!a)throw new Error("Missing cache");let i=x(e),s=x(t),c=(0,u.useSyncExternalStore)(a.subscribe,()=>{try{return a.get(i.current)}catch(l){console.error("Could not get Cache data:",l);return}}),o=(0,u.useMemo)(()=>{if(typeof c<"u"){if(c==="undefined")return;try{return JSON.parse(c,Xe)}catch(l){return console.warn("The cached data is corrupted",l),s.current}}else return s.current},[c,s]),d=x(o),f=(0,u.useCallback)(l=>{let h=typeof l=="function"?l(d.current):l;if(typeof h>"u")a.set(i.current,"undefined");else{let y=JSON.stringify(h,Ye);a.set(i.current,y)}return h},[a,i,d]);return[o,f]}var V=Symbol();function et(e,t,r){let{initialData:n,keepPreviousData:a,internal_cacheKeySuffix:i,...s}=r||{},c=(0,u.useRef)(null),[o,d]=ke(q(t||[])+i,V,{cacheNamespace:q(e)}),f=(0,u.useRef)(o!==V?o:n),l=(0,u.useRef)(void 0),{mutate:h,revalidate:y,...k}=ie(e,t||[],{...s,onData(w,b){l.current=b,s.onData&&s.onData(w,b),!(b&&b.page>0)&&(c.current="promise",f.current=w,d(w))}}),g,$=k.pagination;l.current&&l.current.page>0&&k.data?g=k.data:c.current==="promise"?g=f.current:a&&o!==V?(g=o,$&&($.hasMore=!0,$.pageSize=o.length)):a&&o===V?g=f.current:o!==V?(g=o,$&&($.hasMore=!0,$.pageSize=o.length)):g=n;let S=x(g),E=(0,u.useCallback)(async(w,b)=>{let I;try{if(b?.optimisticUpdate){typeof b?.rollbackOnError!="function"&&b?.rollbackOnError!==!1&&(I=structuredClone(S.current));let R=b.optimisticUpdate(S.current);c.current="cache",f.current=R,d(R)}return await h(w,{shouldRevalidateAfter:b?.shouldRevalidateAfter})}catch(R){if(typeof b?.rollbackOnError=="function"){let P=b.rollbackOnError(S.current);c.current="cache",f.current=P,d(P)}else b?.optimisticUpdate&&b?.rollbackOnError!==!1&&(c.current="cache",f.current=I,d(I));throw R}},[d,h,S,f,c]);return(0,u.useEffect)(()=>{o!==V&&(c.current="cache",f.current=o)},[o]),{data:g,isLoading:k.isLoading,error:k.error,mutate:l.current&&l.current.page>0?h:E,pagination:$,revalidate:y}}function tt(e){if(e){let t=nt(e);if(!t)return!1;if(t.subtype==="json"||t.suffix==="json"||t.suffix&&/\bjson\b/i.test(t.suffix)||t.subtype&&/\bjson\b/i.test(t.subtype))return!0}return!1}var rt=/^([A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126})\/([A-Za-z0-9][A-Za-z0-9!#$&^_.+-]{0,126});?$/;function nt(e){let t=e.indexOf(";"),r=t!==-1?e.slice(0,t).trim():e.trim(),n=rt.exec(r.toLowerCase().toLowerCase());if(!n)return;let a=n[1],i=n[2],s,c=i.lastIndexOf("+");return c!==-1&&(s=i.substring(c+1),i=i.substring(0,c)),{type:a,subtype:i,suffix:s}}async function at(e){if(!e.ok)throw new Error(e.statusText);let t=e.headers.get("content-type");return t&&tt(t)?await e.json():await e.text()}function st(e){return{data:e,hasMore:!1}}function W(e,t){let{parseResponse:r,mapResult:n,initialData:a,execute:i,keepPreviousData:s,onError:c,onData:o,onWillExecute:d,failureToastOptions:f,...l}=t||{},h={initialData:a,execute:i,keepPreviousData:s,onError:c,onData:o,onWillExecute:d,failureToastOptions:f},y=x(r||at),k=x(n||st),g=(0,u.useRef)(null),$=(0,u.useRef)(null),S=typeof e=="function"?e({page:0}):void 0;(!g.current||typeof $.current>"u"||$.current!==S)&&(g.current=e),$.current=S;let E=(0,u.useRef)(null),w=(0,u.useCallback)((R,P)=>async F=>{let j=await fetch(R(F),{signal:E.current?.signal,...P}),G=await y.current(j);return k.current?.(G)},[y,k]),b=(0,u.useCallback)(async(R,P)=>{let F=await fetch(R,{signal:E.current?.signal,...P}),j=await y.current(F);return k.current(j)?.data},[y,k]),I=(0,u.useMemo)(()=>$.current?w:b,[$,b,w]);return et(I,[g.current,l],{...h,internal_cacheKeySuffix:$.current+q(k.current)+q(y.current),abortable:E})}var it=10,me=864e5,ot={Default:100,Embed:0,Bookmark:140};function ct(e){let t=Date.now(),r=e?e.lastVisited:0,n=e?e.frecency:0,a=(t-r)/me,i=Math.log(2)/(it*me),s=ot.Default*Math.exp(-i*a),c=n+s;return{lastVisited:t,frecency:c}}var lt=e=>{if(process.env.NODE_ENV!=="production"&&(typeof e!="object"||!e||!("id"in e)||typeof e.id!="string"))throw new Error("Specify a key function or make sure your items have an 'id' property");return e.id};function we(e,t){let r=x(t?.key||lt),n=x(t?.sortUnvisited),[a,i]=ke(`raycast_frecency_${t?.namespace}`,{}),s=(0,u.useCallback)(async function(f){let l=r.current(f);i(h=>{let y=h[l],k=ct(y);return{...h,[l]:k}})},[r,i]),c=(0,u.useCallback)(async function(f){let l=r.current(f);i(h=>{let y={...h};return delete y[l],y})},[r,i]);return{data:(0,u.useMemo)(()=>e?e.sort((d,f)=>{let l=a[r.current(d)],h=a[r.current(f)];return l&&!h?-1:!l&&h?1:l&&h?h.frecency-l.frecency:n.current?n.current(d,f):0}):[],[a,e,r,n]),visitItem:s,resetRanking:c}}function ut(e){let t=0,r=0,n=0;if(e.length===4)t=parseInt(`${e[1]}${e[1]}`,16),r=parseInt(`${e[2]}${e[2]}`,16),n=parseInt(`${e[3]}${e[3]}`,16);else if(e.length===7)t=parseInt(`${e[1]}${e[2]}`,16),r=parseInt(`${e[3]}${e[4]}`,16),n=parseInt(`${e[5]}${e[6]}`,16);else throw new Error(`Malformed hex color: ${e}`);return{r:t,g:r,b:n}}function ft({r:e,g:t,b:r}){let n=e.toString(16),a=t.toString(16),i=r.toString(16);return n.length===1&&(n=`0${n}`),a.length===1&&(a=`0${a}`),i.length===1&&(i=`0${i}`),`#${n}${a}${i}`}function dt({r:e,g:t,b:r}){e/=255,t/=255,r/=255;let n=Math.min(e,t,r),a=Math.max(e,t,r),i=a-n,s=0,c=0,o=0;return i===0?s=0:a===e?s=(t-r)/i%6:a===t?s=(r-e)/i+2:s=(e-t)/i+4,s=Math.round(s*60),s<0&&(s+=360),o=(a+n)/2,c=i===0?0:i/(1-Math.abs(2*o-1)),c=+(c*100).toFixed(1),o=+(o*100).toFixed(1),{h:s,s:c,l:o}}function ht({h:e,s:t,l:r}){t/=100,r/=100;let n=(1-Math.abs(2*r-1))*t,a=n*(1-Math.abs(e/60%2-1)),i=r-n/2,s=0,c=0,o=0;return e>=0&&e<60?(s=n,c=a,o=0):e>=60&&e<120?(s=a,c=n,o=0):e>=120&&e<180?(s=0,c=n,o=a):e>=180&&e<240?(s=0,c=a,o=n):e>=240&&e<300?(s=a,c=0,o=n):e>=300&&e<360&&(s=n,c=0,o=a),s=Math.round((s+i)*255),c=Math.round((c+i)*255),o=Math.round((o+i)*255),{r:s,g:c,b:o}}function xe(e){return dt(ut(e))}function ve(e){return ft(ht(e))}function Se(e,t,r){return t<r?e<t?t:e>r?r:e:e<r?r:e>t?t:e}var Ae=12;function pt(e){let t=xe(e);return ve({h:t.h,s:t.s,l:Se(t.l-Ae,0,100)})}function mt(e){let t=xe(e);return ve({h:t.h,s:t.s,l:Se(t.l+Ae,0,100)})}function D(e,t){let r=e.charCodeAt(t);if(Number.isNaN(r))return["",t];if(r<55296||r>57343)return[e.charAt(t),t];if(55296<=r&&r<=56319){if(e.length<=t+1)throw new Error("High surrogate without following low surrogate");let a=e.charCodeAt(t+1);if(56320>a||a>57343)throw new Error("High surrogate without following low surrogate");return[e.charAt(t)+e.charAt(t+1),t+1]}if(t===0)throw new Error("Low surrogate without preceding high surrogate");let n=e.charCodeAt(t-1);if(55296>n||n>56319)throw new Error("Low surrogate without preceding high surrogate");return[e.charAt(t+1),t+1]}var ge=["#DC829A","#D64854","#D47600","#D36CDD","#52A9E4","#7871E8","#70920F","#43B93A","#EB6B3E","#26B795","#D85A9B","#A067DC","#BD9500","#5385D9"];function Ee(e,t){let r=e.trim().split(" "),n;if(r.length==1&&D(r[0],0)[0])n=D(r[0],0)[0];else if(r.length>1){let o=D(r[0],0)[0]||"",d=D(r[r.length-1],0)[0]??"";n=o+d}else n="";let a;if(t?.background)a=t?.background;else{let o=0,[d,f]=D(n,0);for(;d;)o+=d.charCodeAt(0),[d,f]=D(n,f+1);let l=o%ge.length;a=ge[l]}let s=50-0,c=`<svg xmlns="http://www.w3.org/2000/svg" width="100px" height="100px">
  ${t?.gradient!==!1?`<defs>
      <linearGradient id="Gradient" x1="0.25" x2="0.75" y1="0" y2="1">
        <stop offset="0%" stop-color="${mt(a)}"/>
        <stop offset="50%" stop-color="${a}"/>
        <stop offset="100%" stop-color="${pt(a)}"/>
      </linearGradient>
  </defs>`:""}
      <circle cx="50" cy="50" r="${s}" fill="${t?.gradient!==!1?"url(#Gradient)":a}" />
      ${n?`<text x="50" y="80" font-size="${s-1}" font-family="Inter, sans-serif" text-anchor="middle" fill="white">${n.toUpperCase()}</text>`:""}
    </svg>
  `.replaceAll(`
`,"");return`data:image/svg+xml,${encodeURIComponent(c)}`}var ae=require("react");var Re=require("react");var Ie=new Map([["command down","\u2318"],["control down","\u2303"],["option down","\u2325"],["shift down","\u21E7"]]),oe=new Map([["ctrl","control down"],["shift","shift down"],["opt","option down"],["alt","option down"],["cmd","command down"]]);var X=class{constructor(t){this.keyCodes=t}parseInputShortcuts(t){return t.filter(r=>this.inputAppIsValid(r)).map(r=>({name:r.name,bundleId:r.bundleId,hostname:r.hostname,slug:r.slug,keymaps:r.keymaps.map(n=>({title:n.title,platforms:n.platforms,sections:n.sections.map(a=>({title:a.title,hotkeys:a.shortcuts.map(i=>this.parseSingleShortcut(i))}))}))}))}inputAppIsValid(t){return t.name!==void 0&&t.name.length>0&&t.slug!==void 0&&t.slug.length>0&&t.keymaps!==void 0&&t.keymaps.length>0&&t.keymaps.every(r=>this.inputKeymapIsValid(r))}inputKeymapIsValid(t){return t.title!==void 0&&t.title.length>0&&t.sections!==void 0&&t.sections.length>0&&t.sections.every(r=>this.inputSectionIsValid(r))}inputSectionIsValid(t){return t.title!==void 0&&t.title.length>0&&t.shortcuts!==void 0&&t.shortcuts.length>0&&t.shortcuts.every(r=>this.inputShortcutIsValid(r))}inputShortcutIsValid(t){return t.title!==void 0&&t.title.length>0&&this.shortcutKeyIsValid(t.key)}shortcutKeyIsValid(t){if(t===void 0)return!0;let r=t.split(" ");return r.length>0&&r.every(n=>this.chordIsValid(n))}chordIsValid(t){let r=t.split(/(?<!\+)\+/);if(r.length===0)return!1;let n=r.length;return this.modifiersExist(n,r)&&this.baseShortcutTokenIsValid(r[n-1])}modifiersExist(t,r){for(let n=0;n<t-1;n++)if(!oe.has(r[n]))return!1;return!0}baseShortcutTokenIsValid(t){return t in this.keyCodes}parseSingleShortcut(t){let n=t.key?.split(" ")?.map(a=>this.parseChord(a));return{title:t.title,sequence:n??[],comment:t.comment}}parseChord(t){let r=t.split(/(?<!\+)\+/),n=r.length,a=[];for(let s=0;s<n-1;s++){let c=r[s],o=oe.get(c);o&&a.push(o)}return{base:r[n-1],modifiers:a}}};function z(){return process.platform==="darwin"?"macos":"windows"}function K(){let{isLoading:e,data:t,revalidate:r}=W("https://hotkys.com/data/key-codes.json",{mapResult:n=>({data:Object.fromEntries(n.keyCodes)}),failureToastOptions:{title:"Failed to load key codes"}});return{isLoading:e,data:t,revalidate:r}}function Pe(e){let t=z(),r=K(),{isLoading:n,data:a}=W(`https://hotkys.com/data/${t}/${e}.json`,{execute:!!e,failureToastOptions:{title:"Failed to load shortcuts"}}),i=(0,Re.useMemo)(()=>{if(!(!a||!r.data))return new X(r.data).parseInputShortcuts([a])[0]},[a,r.data]);return{isLoading:n||r.isLoading,data:i}}var gt=[];function Q(){let e=z(),{isLoading:t,data:r}=W(`https://hotkys.com/data/${e}/apps.json`,{keepPreviousData:!0,failureToastOptions:{title:"Failed to load applications"}});return{isLoading:t,data:r?.apps??gt}}var v=require("@raycast/api");var ee=require("@raycast/api"),te=require("react/jsx-runtime");function Te(e){let{keymaps:t,onKeymapChange:r}=e;return t.length==1?null:(0,te.jsx)(ee.List.Dropdown,{tooltip:"Select Keymap",storeValue:!0,onChange:r,children:(0,te.jsx)(ee.List.Dropdown.Section,{title:"Keymaps",children:t.map(n=>(0,te.jsx)(ee.List.Dropdown.Item,{title:n,value:n},n))})})}var bt=new Map([["left","\u2190"],["right","\u2192"],["up","\u2191"],["down","\u2193"],["pageup","PgUp"],["pagedown","PgDown"],["home","Home"],["end","End"],["space","Space"],["capslock","\u21EA"],["backspace","\u232B"],["tab","\u21E5"],["esc","\u238B"],["enter","\u21A9"],["cmd","\u2318"],["ctrl","\u2303"],["opt","\u2325"],["shift","\u21E7"]]);function yt(e){return bt.get(e)??e.toUpperCase()}function Ce(e){let t=[];return e.sequence.forEach((r,n)=>{n>0&&t.push({text:"then"});let a=[];for(let i of r.modifiers){let s=Ie.get(i);s&&a.push(s)}a.push(yt(r.base)),t.push({tag:a.join(" ")})}),t}var re=require("@raycast/api"),Ue=require("child_process");function $t(e,t,r){let n=JSON.stringify(e),a=JSON.stringify(r);return`(function() {
    const app = Application.currentApplication();
    app.includeStandardAdditions = true;
    const systemEvents = Application("System Events");
    const bundleId = ${n};
    if (bundleId && systemEvents.applicationProcesses.whose({ bundleIdentifier: bundleId }).length > 0) {
      app.doShellScript("open -b " + bundleId);
      delay(${t});
    }
    ${a}.forEach(function(chord) {
      systemEvents.keyCode(chord.keyCode, { using: chord.modifiers });
    });
  })();`}async function _e(e,t,r,n){if(z()!=="macos"){await(0,re.showToast)({style:re.Toast.Style.Failure,title:"Shortcut execution is only supported on macOS"});return}let a=r.map(s=>({keyCode:parseInt(n[s.base],10),modifiers:s.modifiers})),i=$t(e??"",t,a);(0,Ue.spawn)("osascript",["-l","JavaScript","-e",i],{detached:!0,stdio:"ignore"}).unref()}var B=require("react"),_=require("react/jsx-runtime");function Le({application:e,isLoading:t}){let r=K(),n=e?.keymaps.map(l=>l.title)??[],[a,i]=(0,B.useState)([]),[s,c]=(0,B.useState)(!0);(0,B.useEffect)(()=>{e&&(i(e?.keymaps[0].sections??[]),c(!1))},[e]);let o=t??s,d=async(l,h)=>{if(r.data===void 0)return;let y=parseFloat((0,v.getPreferenceValues)().delay);await(0,v.closeMainWindow)({popToRootType:v.PopToRootType.Immediate}),await _e(l.bundleId,y,h.sequence,r.data)};return(0,_.jsx)(v.List,{isLoading:o,searchBarPlaceholder:"Search for shortcuts",searchBarAccessory:(0,_.jsx)(Te,{keymaps:n,onKeymapChange:l=>{i(kt(e?.keymaps??[],l)?.sections??[])}}),navigationTitle:e?.name,children:e&&a.map(l=>(0,_.jsx)(v.List.Section,{title:l.title,children:l.hotkeys.map(h=>{let y=({title:$,sequence:S})=>`${$}-${[S.map(({modifiers:E,base:w})=>`${E.join("")}${w}`)].flat().join("")}`,k=Ce(h),g=h.comment?[{text:h.comment,icon:v.Icon.SpeechBubble}]:[];return(0,_.jsx)(v.List.Item,{title:h.title,accessories:[...k,...g],keywords:[l.title],actions:h.sequence.length>0?(0,_.jsx)(v.ActionPanel,{children:(0,_.jsx)(v.Action,{title:"Apply",onAction:()=>d(e,h)})}):void 0},y(h))})},l.title))})}function kt(e,t){return e.find(r=>r.title===t)}var ne=require("@raycast/api");function ce(e){(0,ne.closeMainWindow)({clearRootSearch:!0,popToRootType:ne.PopToRootType.Immediate}),se(void 0,{title:e})}var Me=require("react/jsx-runtime");function le(e){let[t,r]=(0,ae.useState)(e?.slug),{isLoading:n,data:a}=Q(),{isLoading:i,data:s}=Pe(t),{isLoading:c,data:o}=ie(async()=>{try{return(await(0,Oe.getFrontmostApplication)()).bundleId}catch{return}},[],{execute:!e?.slug});(0,ae.useEffect)(()=>{if(t||n||c)return;if(!o){ce("Could not detect the frontmost application");return}let f=a.find(l=>l.bundleId===o);if(!f){ce(`Shortcuts not available for application ${o}`);return}r(f.slug)},[o,c,t,a,n]);let d=n||i||!e?.slug&&c;return(0,Me.jsx)(Le,{application:s,isLoading:d})}var N=require("react/jsx-runtime"),wt="https://hotkys.com";function xt(e){return e.bundleId??e.hostname??""}function vt(e){return e.icon?e.icon.startsWith("http://")||e.icon.startsWith("https://")?e.icon:`${wt}/${e.icon.startsWith("/")?e.icon.slice(1):e.icon}`:Ee(e.name)}function Ve(){let{isLoading:e,data:t}=Q(),{data:r,visitItem:n}=we(t,{key:a=>a.slug});return(0,N.jsx)(L.List,{isLoading:e,searchBarPlaceholder:"Search applications",children:r.map(a=>(0,N.jsx)(L.List.Item,{icon:vt(a),title:a.name,subtitle:xt(a),actions:(0,N.jsx)(L.ActionPanel,{children:(0,N.jsx)(L.Action.Push,{title:"Show Shortcuts",target:(0,N.jsx)(le,{slug:a.slug}),onPush:()=>n(a)})})},a.slug))})}
