"use strict";var Pe=Object.create;var M=Object.defineProperty;var Ue=Object.getOwnPropertyDescriptor;var Ie=Object.getOwnPropertyNames;var Oe=Object.getPrototypeOf,Le=Object.prototype.hasOwnProperty;var De=(r,n)=>{for(var e in n)M(r,e,{get:n[e],enumerable:!0})},ne=(r,n,e,t)=>{if(n&&typeof n=="object"||typeof n=="function")for(let a of Ie(n))!Le.call(r,a)&&a!==e&&M(r,a,{get:()=>n[a],enumerable:!(t=Ue(n,a))||t.enumerable});return r};var _=(r,n,e)=>(e=r!=null?Pe(Oe(r)):{},ne(n||!r||!r.__esModule?M(e,"default",{value:r,enumerable:!0}):e,r)),Me=r=>ne(M({},"__esModule",{value:!0}),r);var Ye={};De(Ye,{default:()=>ve});module.exports=Me(Ye);var d=require("@raycast/api");var f=_(require("react")),o=require("@raycast/api");var ae=Object.prototype.hasOwnProperty;function N(r,n){var e,t;if(r===n)return!0;if(r&&n&&(e=r.constructor)===n.constructor){if(e===Date)return r.getTime()===n.getTime();if(e===RegExp)return r.toString()===n.toString();if(e===Array){if((t=r.length)===n.length)for(;t--&&N(r[t],n[t]););return t===-1}if(!e||typeof r=="object"){t=0;for(e in r)if(ae.call(r,e)&&++t&&!ae.call(n,e)||!(e in n)||!N(r[e],n[e]))return!1;return Object.keys(n).length===t}}return r!==r&&n!==n}var v=_(require("node:fs")),A=_(require("node:path")),fe=_(require("node:crypto")),Y=_(require("node:child_process")),de=require("node:buffer"),I=_(require("node:stream")),he=require("node:util"),k=require("node:fs/promises");var y=require("react/jsx-runtime"),z=_(require("node:os")),pe=require("node:url"),J=globalThis;function Ne(r){let n=(0,f.useRef)(r),e=(0,f.useRef)(0);return N(r,n.current)||(n.current=r,e.current+=1),(0,f.useMemo)(()=>n.current,[e.current])}function x(r){let n=(0,f.useRef)(r);return n.current=r,n}function F(r,n){let e=r instanceof Error?r.message:String(r);return(0,o.showToast)({style:o.Toast.Style.Failure,title:n?.title??"Something went wrong",message:n?.message??e,primaryAction:n?.primaryAction??se(r),secondaryAction:n?.primaryAction?se(r):void 0})}var se=r=>{let n=!0,e="[Extension Name]...",t="";try{let s=JSON.parse((0,v.readFileSync)((0,A.join)(o.environment.assetsPath,"..","package.json"),"utf8"));e=`[${s.title}]...`,t=`https://raycast.com/${s.owner||s.author}/${s.name}`,(!s.owner||s.access==="public")&&(n=!1)}catch{}let a=o.environment.isDevelopment||n,i=r instanceof Error?r?.stack||r?.message||"":String(r);return{title:a?"Copy Logs":"Report Error",onAction(s){s.hide(),a?o.Clipboard.copy(i):(0,o.open)(`https://github.com/raycast/extensions/issues/new?&labels=extension%2Cbug&template=extension_bug_report.yml&title=${encodeURIComponent(e)}&extension-url=${encodeURI(t)}&description=${encodeURIComponent(`#### Error:
\`\`\`
${i}
\`\`\`
`)}`)}}};function me(r,n,e){let t=(0,f.useRef)(0),[a,i]=(0,f.useState)({isLoading:!0}),s=x(r),h=x(e?.abortable),c=x(n||[]),l=x(e?.onError),p=x(e?.onData),m=x(e?.onWillExecute),w=x(e?.failureToastOptions),L=x(a.data),G=(0,f.useRef)(null),$=(0,f.useRef)({page:0}),H=(0,f.useRef)(!1),K=(0,f.useRef)(!0),re=(0,f.useRef)(50),T=(0,f.useCallback)(()=>(h.current&&(h.current.current?.abort(),h.current.current=new AbortController),++t.current),[h]),R=(0,f.useCallback)((...S)=>{let g=T();m.current?.(S),i(u=>({...u,isLoading:!0}));let P=We(s.current)(...S);function U(u){return u.name=="AbortError"||g===t.current&&(l.current?l.current(u):o.environment.launchType!==o.LaunchType.Background&&F(u,{title:"Failed to fetch latest data",primaryAction:{title:"Retry",onAction(C){C.hide(),G.current?.(...c.current||[])}},...w.current}),i({error:u,isLoading:!1})),u}return typeof P=="function"?(H.current=!0,P($.current).then(({data:u,hasMore:C,cursor:Ce})=>(g===t.current&&($.current&&($.current.cursor=Ce,$.current.lastItem=u?.[u.length-1]),p.current&&p.current(u,$.current),C&&(re.current=u.length),K.current=C,i(_e=>$.current.page===0?{data:u,isLoading:!1}:{data:(_e.data||[])?.concat(u),isLoading:!1})),u),u=>(K.current=!1,U(u)))):(H.current=!1,P.then(u=>(g===t.current&&(p.current&&p.current(u),i({data:u,isLoading:!1})),u),U))},[p,l,c,s,i,G,m,$,w,T]);G.current=R;let D=(0,f.useCallback)(()=>{$.current={page:0};let S=c.current||[];return R(...S)},[R,c]),Se=(0,f.useCallback)(async(S,g)=>{let P;try{if(g?.optimisticUpdate){T(),typeof g?.rollbackOnError!="function"&&g?.rollbackOnError!==!1&&(P=structuredClone(L.current?.value));let U=g.optimisticUpdate;i(u=>({...u,data:U(u.data)}))}return await S}catch(U){if(typeof g?.rollbackOnError=="function"){let u=g.rollbackOnError;i(C=>({...C,data:u(C.data)}))}else g?.optimisticUpdate&&g?.rollbackOnError!==!1&&i(u=>({...u,data:P}));throw U}finally{g?.shouldRevalidateAfter!==!1&&(o.environment.launchType===o.LaunchType.Background||o.environment.commandMode==="menu-bar"?await D():D())}},[D,L,i,T]),Ee=(0,f.useCallback)(()=>{$.current.page+=1;let S=c.current||[];R(...S)},[$,c,R]);(0,f.useEffect)(()=>{$.current={page:0},e?.execute!==!1?R(...n||[]):T()},[Ne([n,e?.execute,R]),h,$]),(0,f.useEffect)(()=>()=>{T()},[T]);let Ae=e?.execute!==!1?a.isLoading:!1,Te={...a,isLoading:Ae},Re=H.current?{pageSize:re.current,hasMore:K.current,onLoadMore:Ee}:void 0;return{...Te,revalidate:D,mutate:Se,pagination:Re}}function We(r){return r===Promise.all||r===Promise.race||r===Promise.resolve||r===Promise.reject?r.bind(Promise):r}function ie(r){return typeof r!="function"?!1:/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(r))!==null}function Ve(r){return r instanceof URLSearchParams?r.toString():r}function be(r,n=[]){function e(t){return"update"in r?r.update(t,"utf8"):r.write(t)}return{dispatch:function(t){t=Ve(t),t===null?this._null():this["_"+typeof t](t)},_object:function(t){let a=/\[object (.*)\]/i,i=Object.prototype.toString.call(t),s=a.exec(i)?.[1]??"unknown:["+i+"]";s=s.toLowerCase();let h=null;if((h=n.indexOf(t))>=0){this.dispatch("[CIRCULAR:"+h+"]");return}else n.push(t);if(Buffer.isBuffer(t))return e("buffer:"),e(t.toString("utf8"));if(s!=="object"&&s!=="function"&&s!=="asyncfunction")if(this["_"+s])this["_"+s](t);else throw new Error('Unknown object type "'+s+'"');else{let c=Object.keys(t);c=c.sort(),ie(t)||c.splice(0,0,"prototype","__proto__","constructor"),e("object:"+c.length+":");let l=this;return c.forEach(function(p){l.dispatch(p),e(":"),l.dispatch(t[p]),e(",")})}},_array:function(t,a){a=typeof a<"u"?a:!1;let i=this;if(e("array:"+t.length+":"),!a||t.length<=1){t.forEach(function(c){i.dispatch(c)});return}let s=[],h=t.map(function(c){let l=ze(),p=n.slice();return be(l,p).dispatch(c),s=s.concat(p.slice(n.length)),l.read().toString()});n=n.concat(s),h.sort(),this._array(h,!1)},_date:function(t){e("date:"+t.toJSON())},_symbol:function(t){e("symbol:"+t.toString())},_error:function(t){e("error:"+t.toString())},_boolean:function(t){e("bool:"+t.toString())},_string:function(t){e("string:"+t.length+":"),e(t.toString())},_function:function(t){e("fn:"),ie(t)?this.dispatch("[native]"):this.dispatch(t.toString()),this.dispatch("function-name:"+String(t.name)),this._object(t)},_number:function(t){e("number:"+t.toString())},_xml:function(t){e("xml:"+t.toString())},_null:function(){e("Null")},_undefined:function(){e("Undefined")},_regexp:function(t){e("regex:"+t.toString())},_uint8array:function(t){e("uint8array:"),this.dispatch(Array.prototype.slice.call(t))},_uint8clampedarray:function(t){e("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(t))},_int8array:function(t){e("int8array:"),this.dispatch(Array.prototype.slice.call(t))},_uint16array:function(t){e("uint16array:"),this.dispatch(Array.prototype.slice.call(t))},_int16array:function(t){e("int16array:"),this.dispatch(Array.prototype.slice.call(t))},_uint32array:function(t){e("uint32array:"),this.dispatch(Array.prototype.slice.call(t))},_int32array:function(t){e("int32array:"),this.dispatch(Array.prototype.slice.call(t))},_float32array:function(t){e("float32array:"),this.dispatch(Array.prototype.slice.call(t))},_float64array:function(t){e("float64array:"),this.dispatch(Array.prototype.slice.call(t))},_arraybuffer:function(t){e("arraybuffer:"),this.dispatch(new Uint8Array(t))},_url:function(t){e("url:"+t.toString())},_map:function(t){e("map:");let a=Array.from(t);this._array(a,!0)},_set:function(t){e("set:");let a=Array.from(t);this._array(a,!0)},_file:function(t){e("file:"),this.dispatch([t.name,t.size,t.type,t.lastModified])},_blob:function(){throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){e("domwindow")},_bigint:function(t){e("bigint:"+t.toString())},_process:function(){e("process")},_timer:function(){e("timer")},_pipe:function(){e("pipe")},_tcp:function(){e("tcp")},_udp:function(){e("udp")},_tty:function(){e("tty")},_statwatcher:function(){e("statwatcher")},_securecontext:function(){e("securecontext")},_connection:function(){e("connection")},_zlib:function(){e("zlib")},_context:function(){e("context")},_nodescript:function(){e("nodescript")},_httpparser:function(){e("httpparser")},_dataview:function(){e("dataview")},_signal:function(){e("signal")},_fsevent:function(){e("fsevent")},_tlswrap:function(){e("tlswrap")}}}function ze(){return{buf:"",write:function(r){this.buf+=r},end:function(r){this.buf+=r},read:function(){return this.buf}}}function ge(r){let n=fe.default.createHash("sha1");return be(n).dispatch(r),n.digest("hex")}var W=r=>!!r&&typeof r=="object"&&typeof r.removeListener=="function"&&typeof r.emit=="function"&&typeof r.reallyExit=="function"&&typeof r.listeners=="function"&&typeof r.kill=="function"&&typeof r.pid=="number"&&typeof r.on=="function",Z=Symbol.for("signal-exit emitter"),Q=class{constructor(){if(this.emitted={afterExit:!1,exit:!1},this.listeners={afterExit:[],exit:[]},this.count=0,this.id=Math.random(),J[Z])return J[Z];Object.defineProperty(J,Z,{value:this,writable:!1,enumerable:!1,configurable:!1})}on(n,e){this.listeners[n].push(e)}removeListener(n,e){let t=this.listeners[n],a=t.indexOf(e);a!==-1&&(a===0&&t.length===1?t.length=0:t.splice(a,1))}emit(n,e,t){if(this.emitted[n])return!1;this.emitted[n]=!0;let a=!1;for(let i of this.listeners[n])a=i(e,t)===!0||a;return n==="exit"&&(a=this.emit("afterExit",e,t)||a),a}},X=class{onExit(){return()=>{}}load(){}unload(){}},ee=class{#o;#t;#e;#s;#i;#a;#n;#r;constructor(n){this.#o=process.platform==="win32"?"SIGINT":"SIGHUP",this.#t=new Q,this.#a={},this.#n=!1,this.#r=[],this.#r.push("SIGHUP","SIGINT","SIGTERM"),globalThis.process.platform!=="win32"&&this.#r.push("SIGALRM","SIGABRT","SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT"),globalThis.process.platform==="linux"&&this.#r.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT"),this.#e=n,this.#a={};for(let e of this.#r)this.#a[e]=()=>{let t=this.#e.listeners(e),{count:a}=this.#t,i=n;if(typeof i.__signal_exit_emitter__=="object"&&typeof i.__signal_exit_emitter__.count=="number"&&(a+=i.__signal_exit_emitter__.count),t.length===a){this.unload();let s=this.#t.emit("exit",null,e),h=e==="SIGHUP"?this.#o:e;s||n.kill(n.pid,h)}};this.#i=n.reallyExit,this.#s=n.emit}onExit(n,e){if(!W(this.#e))return()=>{};this.#n===!1&&this.load();let t=e?.alwaysLast?"afterExit":"exit";return this.#t.on(t,n),()=>{this.#t.removeListener(t,n),this.#t.listeners.exit.length===0&&this.#t.listeners.afterExit.length===0&&this.unload()}}load(){if(!this.#n){this.#n=!0,this.#t.count+=1;for(let n of this.#r)try{let e=this.#a[n];e&&this.#e.on(n,e)}catch{}this.#e.emit=(n,...e)=>this.#l(n,...e),this.#e.reallyExit=n=>this.#c(n)}}unload(){this.#n&&(this.#n=!1,this.#r.forEach(n=>{let e=this.#a[n];if(!e)throw new Error("Listener not defined for signal: "+n);try{this.#e.removeListener(n,e)}catch{}}),this.#e.emit=this.#s,this.#e.reallyExit=this.#i,this.#t.count-=1)}#c(n){return W(this.#e)?(this.#e.exitCode=n||0,this.#t.emit("exit",this.#e.exitCode,null),this.#i.call(this.#e,this.#e.exitCode)):0}#l(n,...e){let t=this.#s;if(n==="exit"&&W(this.#e)){typeof e[0]=="number"&&(this.#e.exitCode=e[0]);let a=t.call(this.#e,n,...e);return this.#t.emit("exit",this.#e.exitCode,null),a}else return t.call(this.#e,n,...e)}},q=null,Fe=(r,n)=>(q||(q=W(process)?new ee(process):new X),q.onExit(r,n));function oe(r,{timeout:n}={}){let e=new Promise((h,c)=>{r.on("exit",(l,p)=>{h({exitCode:l,signal:p,timedOut:!1})}),r.on("error",l=>{c(l)}),r.stdin&&r.stdin.on("error",l=>{c(l)})}),t=Fe(()=>{r.kill()});if(n===0||n===void 0)return e.finally(()=>t());let a,i=new Promise((h,c)=>{a=setTimeout(()=>{r.kill("SIGTERM"),c(Object.assign(new Error("Timed out"),{timedOut:!0,signal:"SIGTERM"}))},n)}),s=e.finally(()=>{clearTimeout(a)});return Promise.race([i,s]).finally(()=>t())}var te=class extends Error{constructor(){super("The output is too big"),this.name="MaxBufferError"}};function je(r){let{encoding:n}=r,e=n==="buffer",t=new I.default.PassThrough({objectMode:!1});n&&n!=="buffer"&&t.setEncoding(n);let a=0,i=[];return t.on("data",s=>{i.push(s),a+=s.length}),t.getBufferedValue=()=>e?Buffer.concat(i,a):i.join(""),t.getBufferedLength=()=>a,t}async function ce(r,n){let e=je(n);return await new Promise((t,a)=>{let i=s=>{s&&e.getBufferedLength()<=de.constants.MAX_LENGTH&&(s.bufferedData=e.getBufferedValue()),a(s)};(async()=>{try{await(0,he.promisify)(I.default.pipeline)(r,e),t()}catch(s){i(s)}})(),e.on("data",()=>{e.getBufferedLength()>8e7&&i(new te)})}),e.getBufferedValue()}async function le(r,n){r.destroy();try{return await n}catch(e){return e.bufferedData}}async function ue({stdout:r,stderr:n},{encoding:e},t){let a=ce(r,{encoding:e}),i=ce(n,{encoding:e});try{return await Promise.all([t,a,i])}catch(s){return Promise.all([{error:s,exitCode:null,signal:s.signal,timedOut:s.timedOut||!1},le(r,a),le(n,i)])}}var V=class extends Error{constructor(n){super(n),this.name="PermissionError"}};function Be(r){return r instanceof Error&&r.name==="PermissionError"}async function Ge(r,n,e){if(!(0,v.existsSync)(r))throw new Error("The database does not exist");let t;try{t=await(l=>import(l))("node:sqlite")}catch{return He(r,n,e)}let a=new t.DatabaseSync(r,{open:!1,readOnly:!0}),i=e?.signal;try{a.open()}catch(c){if(console.log(c),c.message.match("(5)")||c.message.match("(14)")){let l;if(!l){let p=A.default.join(z.default.tmpdir(),"useSQL",ge(r));await(0,k.mkdir)(p,{recursive:!0}),E(i),l=A.default.join(p,"db.db"),await(0,k.copyFile)(r,l),await(0,k.writeFile)(l+"-shm",""),await(0,k.writeFile)(l+"-wal",""),E(i)}a=new t.DatabaseSync(l,{open:!1,readOnly:!0}),a.open(),E(i)}}let s=a.prepare(n);E(i);let h=s.all();return a.close(),h}async function He(r,n,e){let t=e?.signal,a=Y.default.spawn("sqlite3",["--json","--readonly",r,n],{signal:t}),i=oe(a),[{error:s,exitCode:h,signal:c},l,p]=await ue(a,{encoding:"utf-8"},i);if(E(t),p.match("(5)")||p.match("(14)")){let m;if(!m){let w=A.default.join(z.default.tmpdir(),"useSQL",ge(r));await(0,k.mkdir)(w,{recursive:!0}),E(t),m=A.default.join(w,"db.db"),await(0,k.copyFile)(r,m),await(0,k.writeFile)(m+"-shm",""),await(0,k.writeFile)(m+"-wal",""),E(t)}a=Y.default.spawn("sqlite3",["--json","--readonly","--vfs","unix-none",m,n],{signal:t}),i=oe(a),[{error:s,exitCode:h,signal:c},l,p]=await ue(a,{encoding:"utf-8"},i),E(t)}if(s||h!==0||c!==null)throw p.includes("authorization denied")?new V("You do not have permission to access the database."):new Error(p||"Unknown error");return JSON.parse(l.trim()||"[]")}function E(r){if(r?.aborted){let n=new Error("aborted");throw n.name="AbortError",n}}function $e(r,n,e){let{permissionPriming:t,...a}=e||{},[i,s]=(0,f.useState)(null),h=x(e||{}),c=(0,f.useRef)(null),l=(0,f.useCallback)(m=>{console.error(m);let w=m instanceof Error&&m.message.includes("authorization denied")?new V("You do not have permission to access the database."):m;Be(w)?s((0,y.jsx)(Ke,{priming:h.current.permissionPriming})):h.current.onError?h.current.onError(w):o.environment.launchType!==o.LaunchType.Background&&F(w,{title:"Cannot query the data"})},[h]),p=(0,f.useMemo)(()=>{if(!(0,v.existsSync)(r))throw new Error("The database does not exist");return async(m,w)=>{let L=c.current?.signal;return Ge(m,w,{signal:L})}},[r]);return{...me(p,[r,n],{...a,onError:l}),permissionView:i}}function Ke(r){let n=parseInt(z.default.release().split(".")[0])>=22,e=n?"Settings":"Preferences",t=n?{title:"Open System Settings -> Privacy",target:"x-apple.systempreferences:com.apple.preference.security?Privacy_AllFiles"}:{title:"Open System Preferences -> Security",target:"x-apple.systempreferences:com.apple.preference.security?Privacy_AllFiles"};return o.environment.commandMode==="menu-bar"?(0,y.jsxs)(o.MenuBarExtra,{icon:o.Icon.Warning,title:o.environment.commandName,children:[(0,y.jsx)(o.MenuBarExtra.Item,{title:"Raycast needs full disk access",tooltip:`You can revert this access in ${e} whenever you want`}),r.priming?(0,y.jsx)(o.MenuBarExtra.Item,{title:r.priming,tooltip:`You can revert this access in ${e} whenever you want`}):null,(0,y.jsx)(o.MenuBarExtra.Separator,{}),(0,y.jsx)(o.MenuBarExtra.Item,{title:t.title,onAction:()=>(0,o.open)(t.target)})]}):(0,y.jsx)(o.List,{children:(0,y.jsx)(o.List.EmptyView,{icon:{source:{light:"https://raycast.com/uploads/extensions-utils-security-permissions-light.png",dark:"https://raycast.com/uploads/extensions-utils-security-permissions-dark.png"}},title:"Raycast needs full disk access.",description:`${r.priming?r.priming+`
`:""}You can revert this access in ${e} whenever you want.`,actions:(0,y.jsx)(o.ActionPanel,{children:(0,y.jsx)(o.Action.Open,{...t})})})})}function ye(r,n){try{let e=s=>s.startsWith("http")?s:`https://${s}`,a=(typeof r=="string"?new pe.URL(e(r)):r).hostname;switch(process.env.FAVICON_PROVIDER??"raycast"){case"none":return{source:n?.fallback??o.Icon.Link,mask:n?.mask};case"apple":return{source:n?.fallback??o.Icon.Link,mask:n?.mask};case"duckduckgo":case"duckDuckGo":return{source:`https://icons.duckduckgo.com/ip3/${a}.ico`,fallback:n?.fallback??o.Icon.Link,mask:n?.mask};case"google":return{source:`https://www.google.com/s2/favicons?sz=${n?.size??64}&domain=${a}`,fallback:n?.fallback??o.Icon.Link,mask:n?.mask};case"legacy":case"raycast":default:return{source:`https://api.ray.so/favicon?url=${a}&size=${n?.size??64}`,fallback:n?.fallback??o.Icon.Link,mask:n?.mask}}}catch(e){return console.error(e),o.Icon.Link}}var O=require("path"),j=require("os"),B=require("fs");function Je(){let r=(0,O.resolve)((0,j.homedir)(),"Library/Application Support/com.openai.atlas/browser-data/host/Local State");if(!(0,B.existsSync)(r))throw new Error("Local State file not found");try{let n=(0,B.readFileSync)(r,"utf-8"),t=JSON.parse(n).profile.last_used;return(0,O.resolve)((0,j.homedir)(),`Library/Application Support/com.openai.atlas/browser-data/host/${t}`)}catch(n){return console.error("Error reading Local State:",n),(0,O.resolve)((0,j.homedir)(),"Library/Application Support/com.openai.atlas/browser-data/host/Default")}}function Ze(){return(0,O.resolve)(Je(),"History")}function qe(r,n=200){let e=r?r.split(" ").filter(t=>t.length>0).map(t=>`(url LIKE "%${t}%" OR title LIKE "%${t}%")`).join(" AND "):void 0;return`
    SELECT id,
          url,
          title,
          datetime(last_visit_time / 1000000 + (strftime('%s', '1601-01-01')), 'unixepoch', 'localtime') AS lastVisitedAt
    FROM urls
    ${e?`WHERE ${e}`:""}
    GROUP BY url
    ORDER BY last_visit_time DESC
    LIMIT ${n};
  `}function ke(r,n={}){let e="";try{e=Ze()}catch(i){return F(i,{title:"Error reading history file"}),{isLoading:!1,error:i,data:[],permissionView:null}}let t=r?.replace(/"/g,'""')??"",a=qe(t,n?.limit);return $e(e,a,{permissionPriming:"This extension needs access to read your ChatGPT Atlas browser history."})}var xe=require("react");function we(r){try{let{hostname:n}=new URL(r);return n.replace(/^www\./,"")}catch{return r}}var b=require("react/jsx-runtime");function ve(){let[r,n]=(0,xe.useState)(""),{isLoading:e,data:t,permissionView:a,error:i}=ke(r);return i?(0,b.jsx)(d.Detail,{markdown:`# ERROR 

 ${i} 

 Are you sure **ChatGPT Atlas** is installed?`}):a||(0,b.jsx)(d.List,{isLoading:e,searchBarPlaceholder:"Search history...",searchText:r,onSearchTextChange:n,children:t?.map(s=>(0,b.jsx)(d.List.Item,{icon:ye(s.url,{mask:d.Image.Mask.Circle}),title:s.title,subtitle:{value:we(s.url),tooltip:s.url},accessories:[{date:new Date(s.lastVisitedAt)}],actions:(0,b.jsxs)(d.ActionPanel,{children:[(0,b.jsxs)(d.ActionPanel.Section,{children:[(0,b.jsx)(d.Action.Open,{icon:d.Icon.Globe,title:"Open in Browser",target:s.url,application:"com.openai.atlas"}),(0,b.jsx)(d.Action.OpenWith,{icon:d.Icon.AppWindow,path:s.url})]}),(0,b.jsxs)(d.ActionPanel.Section,{children:[(0,b.jsx)(d.Action.CopyToClipboard,{content:s.url,title:"Copy URL",shortcut:d.Keyboard.Shortcut.Common.Copy}),(0,b.jsx)(d.Action.CopyToClipboard,{content:{html:`<a href="${s.url}">${s.title}</a>`},title:"Copy Formatted URL",shortcut:d.Keyboard.Shortcut.Common.CopyPath}),(0,b.jsx)(d.Action.CopyToClipboard,{content:s.title,title:"Copy Title",shortcut:d.Keyboard.Shortcut.Common.CopyName}),(0,b.jsx)(d.Action.CopyToClipboard,{content:`[${s.title}](${s.url})`,title:"Copy as Markdown"})]}),(0,b.jsx)(d.ActionPanel.Section,{children:(0,b.jsx)(d.Action.CreateQuicklink,{quicklink:{link:s.url,name:s.title},shortcut:{modifiers:["cmd"],key:"s"}})})]})},s.id))})}
