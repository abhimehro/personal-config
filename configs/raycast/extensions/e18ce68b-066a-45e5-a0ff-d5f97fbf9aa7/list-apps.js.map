{
  "version": 3,
  "sources": ["../src/list-apps.tsx"],
  "sourcesContent": ["import { ActionPanel, Action, Icon, List, confirmAlert, showToast, Toast, open, Alert } from \"@raycast/api\";\nimport { useEffect, useState } from \"react\";\nimport { environment } from \"@raycast/api\";\nimport fs from \"fs\";\nimport path from \"path\";\n\ntype HTMLFileInfo = {\n  filename: string;\n  title: string;\n  description: string;\n  content: string;\n};\n\nexport async function listHTMLFiles(): Promise<HTMLFileInfo[]> {\n  const supportPath = environment.supportPath;\n  const files = fs.readdirSync(supportPath);\n  const htmlFiles = files.filter((file) => file.endsWith(\".html\"));\n\n  const htmlFileInfos: HTMLFileInfo[] = htmlFiles.map((file) => {\n    const filePath = path.join(supportPath, file);\n    const content = fs.readFileSync(filePath, \"utf-8\");\n\n    const titleMatch = content.match(/<title>(.*?)<\\/title>/);\n    const descriptionMatch = content.match(/<meta name=\"description\" content=\"(.*?)\">/);\n\n    const title = titleMatch ? titleMatch[1] : \"No title\";\n    const description = descriptionMatch ? descriptionMatch[1] : \"No description\";\n\n    return {\n      filename: file,\n      title,\n      description,\n      content,\n    };\n  });\n\n  return htmlFileInfos;\n}\n\nexport default function Command() {\n  const [items, setItems] = useState<HTMLFileInfo[]>([]);\n\n  useEffect(() => {\n    async function fetchData() {\n      const htmlFileInfos = await listHTMLFiles();\n      setItems(htmlFileInfos);\n    }\n    fetchData();\n  }, []);\n\n  const openSupportDirectory = () => {\n    const supportPath = environment.supportPath;\n    open(supportPath);\n  };\n\n  const deleteApp = async (filename: string) => {\n    const supportPath = environment.supportPath;\n    const filePath = path.join(supportPath, filename);\n\n    const confirmed = await confirmAlert({\n      title: \"Delete App\",\n      message: `Are you sure you want to delete ${filename}?`,\n      primaryAction: {\n        title: \"Delete\",\n        style: Alert.ActionStyle.Destructive,\n      },\n    });\n\n    if (confirmed) {\n      fs.unlinkSync(filePath);\n      showToast(Toast.Style.Success, \"App deleted\", `${filename} has been deleted`);\n      setItems((prevItems) => prevItems.filter((item) => item.filename !== filename));\n    }\n  };\n\n  return (\n    <List isShowingDetail>\n      {items.map((item) => (\n        <List.Item\n          key={item.filename}\n          icon={Icon.Document}\n          title={item.title}\n          detail={\n            <List.Item.Detail\n              markdown={`# ${item.title}\\n\\`${item.filename}\\`\\n>${item.description}\\n\\`\\`\\`html\\n${item.content}\\n\\`\\`\\``}\n            />\n          }\n          actions={\n            <ActionPanel>\n              <Action\n                icon={Icon.Globe}\n                onAction={() => {\n                  console.log(item.filename);\n                  open(environment.supportPath + \"/\" + item.filename);\n                }}\n                title=\"Open App\"\n              />\n              <Action icon={Icon.Folder} title=\"Open Support Directory\" onAction={openSupportDirectory} />\n              <Action\n                icon={Icon.Trash}\n                style={Action.Style.Destructive}\n                title=\"Delete App\"\n                onAction={() => deleteApp(item.filename)}\n              />\n            </ActionPanel>\n          }\n        />\n      ))}\n    </List>\n  );\n}\n"],
  "mappings": "0jBAAA,IAAAA,EAAA,GAAAC,EAAAD,EAAA,aAAAE,EAAA,kBAAAC,IAAA,eAAAC,EAAAJ,GAAA,IAAAK,EAA6F,wBAC7FC,EAAoC,iBACpCD,EAA4B,wBAC5BE,EAAe,iBACfC,EAAiB,mBA+ELC,EAAA,6BAtEZ,eAAsBN,GAAyC,CAC7D,IAAMO,EAAc,cAAY,YAsBhC,OArBc,EAAAC,QAAG,YAAYD,CAAW,EAChB,OAAQE,GAASA,EAAK,SAAS,OAAO,CAAC,EAEf,IAAKA,GAAS,CAC5D,IAAMC,EAAW,EAAAC,QAAK,KAAKJ,EAAaE,CAAI,EACtCG,EAAU,EAAAJ,QAAG,aAAaE,EAAU,OAAO,EAE3CG,EAAaD,EAAQ,MAAM,uBAAuB,EAClDE,EAAmBF,EAAQ,MAAM,2CAA2C,EAE5EG,EAAQF,EAAaA,EAAW,CAAC,EAAI,WACrCG,EAAcF,EAAmBA,EAAiB,CAAC,EAAI,iBAE7D,MAAO,CACL,SAAUL,EACV,MAAAM,EACA,YAAAC,EACA,QAAAJ,CACF,CACF,CAAC,CAGH,CAEe,SAARb,GAA2B,CAChC,GAAM,CAACkB,EAAOC,CAAQ,KAAI,YAAyB,CAAC,CAAC,KAErD,aAAU,IAAM,CACd,eAAeC,GAAY,CACzB,IAAMC,EAAgB,MAAMpB,EAAc,EAC1CkB,EAASE,CAAa,CACxB,CACAD,EAAU,CACZ,EAAG,CAAC,CAAC,EAEL,IAAME,EAAuB,IAAM,CACjC,IAAMd,EAAc,cAAY,eAChC,QAAKA,CAAW,CAClB,EAEMe,EAAY,MAAOC,GAAqB,CAC5C,IAAMhB,EAAc,cAAY,YAC1BG,EAAW,EAAAC,QAAK,KAAKJ,EAAagB,CAAQ,EAE9B,QAAM,gBAAa,CACnC,MAAO,aACP,QAAS,mCAAmCA,CAAQ,IACpD,cAAe,CACb,MAAO,SACP,MAAO,QAAM,YAAY,WAC3B,CACF,CAAC,IAGC,EAAAf,QAAG,WAAWE,CAAQ,KACtB,aAAU,QAAM,MAAM,QAAS,cAAe,GAAGa,CAAQ,mBAAmB,EAC5EL,EAAUM,GAAcA,EAAU,OAAQC,GAASA,EAAK,WAAaF,CAAQ,CAAC,EAElF,EAEA,SACE,OAAC,QAAK,gBAAe,GAClB,SAAAN,EAAM,IAAKQ,MACV,OAAC,OAAK,KAAL,CAEC,KAAM,OAAK,SACX,MAAOA,EAAK,MACZ,UACE,OAAC,OAAK,KAAK,OAAV,CACC,SAAU,KAAKA,EAAK,KAAK;AAAA,IAAOA,EAAK,QAAQ;AAAA,GAAQA,EAAK,WAAW;AAAA;AAAA,EAAiBA,EAAK,OAAO;AAAA,QACpG,EAEF,WACE,QAAC,eACC,oBAAC,UACC,KAAM,OAAK,MACX,SAAU,IAAM,CACd,QAAQ,IAAIA,EAAK,QAAQ,KACzB,QAAK,cAAY,YAAc,IAAMA,EAAK,QAAQ,CACpD,EACA,MAAM,WACR,KACA,OAAC,UAAO,KAAM,OAAK,OAAQ,MAAM,yBAAyB,SAAUJ,EAAsB,KAC1F,OAAC,UACC,KAAM,OAAK,MACX,MAAO,SAAO,MAAM,YACpB,MAAM,aACN,SAAU,IAAMC,EAAUG,EAAK,QAAQ,EACzC,GACF,GAzBGA,EAAK,QA2BZ,CACD,EACH,CAEJ",
  "names": ["list_apps_exports", "__export", "Command", "listHTMLFiles", "__toCommonJS", "import_api", "import_react", "import_fs", "import_path", "import_jsx_runtime", "supportPath", "fs", "file", "filePath", "path", "content", "titleMatch", "descriptionMatch", "title", "description", "items", "setItems", "fetchData", "htmlFileInfos", "openSupportDirectory", "deleteApp", "filename", "prevItems", "item"]
}
