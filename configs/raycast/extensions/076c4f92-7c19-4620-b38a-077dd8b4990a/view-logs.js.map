{
  "version": 3,
  "sources": ["../src/view-logs.tsx"],
  "sourcesContent": ["import { ActionPanel, Action, List, Icon, LocalStorage, showToast, Toast, Clipboard, Keyboard } from \"@raycast/api\";\nimport { useState, useEffect } from \"react\";\nimport { ExecutionLog } from \"./types\";\n\nexport function ViewLogs() {\n  const [logs, setLogs] = useState<ExecutionLog[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    loadLogs();\n  }, []);\n\n  async function loadLogs() {\n    try {\n      const stored = await LocalStorage.getItem<string>(\"executionLogs\");\n      if (stored) {\n        const executionLogs = JSON.parse(stored) as ExecutionLog[];\n        // Sort by execution time, newest first\n        const sortedLogs = executionLogs.sort(\n          (a, b) => new Date(b.executedAt).getTime() - new Date(a.executedAt).getTime(),\n        );\n        setLogs(sortedLogs);\n      }\n    } catch (error) {\n      console.error(\"Error loading execution logs:\", error);\n    } finally {\n      setIsLoading(false);\n    }\n  }\n\n  async function clearLogs() {\n    const confirmed = await showToast({\n      style: Toast.Style.Failure,\n      title: \"Clear All Logs\",\n      message: \"Are you sure you want to clear all execution logs?\",\n    });\n\n    if (confirmed) {\n      await LocalStorage.removeItem(\"executionLogs\");\n      setLogs([]);\n\n      await showToast({\n        style: Toast.Style.Success,\n        title: \"Logs cleared\",\n      });\n    }\n  }\n\n  function formatExecutionTime(dateString: string): string {\n    const date = new Date(dateString);\n    const now = new Date();\n    const diff = now.getTime() - date.getTime();\n    const days = Math.floor(diff / (1000 * 60 * 60 * 24));\n    const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));\n    const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));\n\n    if (days > 0) {\n      return `${days} day${days > 1 ? \"s\" : \"\"} ago`;\n    } else if (hours > 0) {\n      return `${hours} hour${hours > 1 ? \"s\" : \"\"} ago`;\n    } else if (minutes > 0) {\n      return `${minutes} minute${minutes > 1 ? \"s\" : \"\"} ago`;\n    } else {\n      return \"Just now\";\n    }\n  }\n\n  return (\n    <List isLoading={isLoading}>\n      {logs.length === 0 && !isLoading ? (\n        <List.EmptyView\n          icon={Icon.Document}\n          title=\"No Execution Logs\"\n          description=\"Execution logs will appear here when scheduled commands run\"\n        />\n      ) : (\n        logs.map((log) => (\n          <List.Item\n            key={log.id}\n            icon={log.status === \"success\" ? Icon.CheckCircle : Icon.XMarkCircle}\n            title={log.commandName}\n            subtitle={`Executed ${formatExecutionTime(log.executedAt)}`}\n            accessories={[\n              {\n                text: new Date(log.executedAt).toLocaleString(),\n                tooltip: `Executed at: ${new Date(log.executedAt).toLocaleString()}`,\n              },\n              {\n                icon: log.status === \"success\" ? Icon.CheckCircle : Icon.XMarkCircle,\n                tooltip: log.status === \"success\" ? \"Success\" : \"Error\",\n              },\n            ]}\n            detail={\n              <List.Item.Detail\n                metadata={\n                  <List.Item.Detail.Metadata>\n                    <List.Item.Detail.Metadata.Label title=\"Command Name\" text={log.commandName} />\n                    <List.Item.Detail.Metadata.Label title=\"Status\" text={log.status} />\n                    <List.Item.Detail.Metadata.Label\n                      title=\"Executed At\"\n                      text={new Date(log.executedAt).toLocaleString()}\n                    />\n                    {log.errorMessage && (\n                      <List.Item.Detail.Metadata.Label title=\"Error Message\" text={log.errorMessage} />\n                    )}\n                  </List.Item.Detail.Metadata>\n                }\n              />\n            }\n            actions={\n              <ActionPanel>\n                <ActionPanel.Section>\n                  <Action\n                    title=\"Copy Log\"\n                    icon={Icon.Clipboard}\n                    shortcut={Keyboard.Shortcut.Common.Copy}\n                    onAction={async () => {\n                      const logText = [\n                        `Command: ${log.commandName}`,\n                        `Status: ${log.status}`,\n                        `Executed At: ${new Date(log.executedAt).toLocaleString()}`,\n                        log.errorMessage ? `Error: ${log.errorMessage}` : null,\n                      ]\n                        .filter(Boolean)\n                        .join(\"\\n\");\n                      await Clipboard.copy(logText);\n                      await showToast({\n                        style: Toast.Style.Success,\n                        title: \"Log copied to clipboard\",\n                      });\n                    }}\n                  />\n                </ActionPanel.Section>\n                <ActionPanel.Section>\n                  <Action\n                    title=\"Clear Log\"\n                    icon={Icon.Trash}\n                    style={Action.Style.Destructive}\n                    onAction={clearLogs}\n                    shortcut={Keyboard.Shortcut.Common.RemoveAll}\n                  />\n                </ActionPanel.Section>\n              </ActionPanel>\n            }\n          />\n        ))\n      )}\n    </List>\n  );\n}\n\nexport default ViewLogs;\n"],
  "mappings": "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",
  "names": ["view_logs_exports", "__export", "ViewLogs", "view_logs_default", "__toCommonJS", "import_api", "import_react", "import_jsx_runtime", "logs", "setLogs", "isLoading", "setIsLoading", "loadLogs", "stored", "sortedLogs", "a", "b", "error", "clearLogs", "formatExecutionTime", "dateString", "date", "diff", "days", "hours", "minutes", "log", "logText"]
}
