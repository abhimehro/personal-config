"use strict";var L=Object.defineProperty;var S=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var A=Object.prototype.hasOwnProperty;var h=(s,a)=>{for(var i in a)L(s,i,{get:a[i],enumerable:!0})},D=(s,a,i,u)=>{if(a&&typeof a=="object"||typeof a=="function")for(let n of p(a))!A.call(s,n)&&n!==i&&L(s,n,{get:()=>a[n],enumerable:!(u=S(a,n))||u.enumerable});return s};var C=s=>D(L({},"__esModule",{value:!0}),s);var M={};h(M,{ViewLogs:()=>f,default:()=>E});module.exports=C(M);var e=require("@raycast/api"),l=require("react"),o=require("react/jsx-runtime");function f(){let[s,a]=(0,l.useState)([]),[i,u]=(0,l.useState)(!0);(0,l.useEffect)(()=>{n()},[]);async function n(){try{let t=await e.LocalStorage.getItem("executionLogs");if(t){let x=JSON.parse(t).sort((c,r)=>new Date(r.executedAt).getTime()-new Date(c.executedAt).getTime());a(x)}}catch(t){console.error("Error loading execution logs:",t)}finally{u(!1)}}async function w(){await(0,e.showToast)({style:e.Toast.Style.Failure,title:"Clear All Logs",message:"Are you sure you want to clear all execution logs?"})&&(await e.LocalStorage.removeItem("executionLogs"),a([]),await(0,e.showToast)({style:e.Toast.Style.Success,title:"Logs cleared"}))}function y(t){let m=new Date(t),c=new Date().getTime()-m.getTime(),r=Math.floor(c/(1e3*60*60*24)),d=Math.floor(c%(1e3*60*60*24)/(1e3*60*60)),g=Math.floor(c%(1e3*60*60)/(1e3*60));return r>0?`${r} day${r>1?"s":""} ago`:d>0?`${d} hour${d>1?"s":""} ago`:g>0?`${g} minute${g>1?"s":""} ago`:"Just now"}return(0,o.jsx)(e.List,{isLoading:i,children:s.length===0&&!i?(0,o.jsx)(e.List.EmptyView,{icon:e.Icon.Document,title:"No Execution Logs",description:"Execution logs will appear here when scheduled commands run"}):s.map(t=>(0,o.jsx)(e.List.Item,{icon:t.status==="success"?e.Icon.CheckCircle:e.Icon.XMarkCircle,title:t.commandName,subtitle:`Executed ${y(t.executedAt)}`,accessories:[{text:new Date(t.executedAt).toLocaleString(),tooltip:`Executed at: ${new Date(t.executedAt).toLocaleString()}`},{icon:t.status==="success"?e.Icon.CheckCircle:e.Icon.XMarkCircle,tooltip:t.status==="success"?"Success":"Error"}],detail:(0,o.jsx)(e.List.Item.Detail,{metadata:(0,o.jsxs)(e.List.Item.Detail.Metadata,{children:[(0,o.jsx)(e.List.Item.Detail.Metadata.Label,{title:"Command Name",text:t.commandName}),(0,o.jsx)(e.List.Item.Detail.Metadata.Label,{title:"Status",text:t.status}),(0,o.jsx)(e.List.Item.Detail.Metadata.Label,{title:"Executed At",text:new Date(t.executedAt).toLocaleString()}),t.errorMessage&&(0,o.jsx)(e.List.Item.Detail.Metadata.Label,{title:"Error Message",text:t.errorMessage})]})}),actions:(0,o.jsxs)(e.ActionPanel,{children:[(0,o.jsx)(e.ActionPanel.Section,{children:(0,o.jsx)(e.Action,{title:"Copy Log",icon:e.Icon.Clipboard,shortcut:e.Keyboard.Shortcut.Common.Copy,onAction:async()=>{let m=[`Command: ${t.commandName}`,`Status: ${t.status}`,`Executed At: ${new Date(t.executedAt).toLocaleString()}`,t.errorMessage?`Error: ${t.errorMessage}`:null].filter(Boolean).join(`
`);await e.Clipboard.copy(m),await(0,e.showToast)({style:e.Toast.Style.Success,title:"Log copied to clipboard"})}})}),(0,o.jsx)(e.ActionPanel.Section,{children:(0,o.jsx)(e.Action,{title:"Clear Log",icon:e.Icon.Trash,style:e.Action.Style.Destructive,onAction:w,shortcut:e.Keyboard.Shortcut.Common.RemoveAll})})]})},t.id))})}var E=f;0&&(module.exports={ViewLogs});
