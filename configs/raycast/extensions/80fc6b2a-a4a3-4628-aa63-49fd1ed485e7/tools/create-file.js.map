{
  "version": 3,
  "sources": ["../../src/tools/create-file.ts", "../../src/utils/workspace.ts"],
  "sourcesContent": ["import { writeFile, mkdir } from \"node:fs/promises\";\nimport { resolveAndValidatePath, isAutoEditEnabled } from \"../utils/workspace\";\nimport { existsSync } from \"node:fs\";\nimport { dirname } from \"node:path\";\n\ntype Input = {\n  /**\n   * The relative path to the file from the workspace root\n   */\n  path: string;\n  /**\n   * The content to write to the new file\n   */\n  content: string;\n  /**\n   * Optional: Whether to overwrite if file already exists (default: false)\n   */\n  overwrite?: boolean;\n};\n\nexport async function confirmation({ path, content, overwrite = false }: Input) {\n  if (isAutoEditEnabled()) {\n    return undefined;\n  }\n\n  const filePath = resolveAndValidatePath(path);\n\n  // Check if file already exists\n  const fileExists = existsSync(filePath);\n\n  // Truncate content for display\n  const truncate = (text: string, maxLength = 100) => {\n    if (text.length <= maxLength) return text;\n    return text.substring(0, maxLength) + \"...\";\n  };\n\n  const info = [\n    { name: \"File Path\", value: path },\n    { name: \"Action\", value: fileExists ? (overwrite ? \"Overwrite File\" : \"File Already Exists\") : \"Create File\" },\n    { name: \"Content Length\", value: `${content.length} characters` },\n    { name: \"Content Preview\", value: truncate(content) },\n  ];\n\n  if (fileExists && !overwrite) {\n    info.push({ name: \"Warning\", value: \"File already exists. Set overwrite=true to replace it.\" });\n  }\n\n  return {\n    message: `Are you sure you want to ${fileExists && overwrite ? \"overwrite\" : \"create\"} this file?`,\n    info,\n  };\n}\n\nexport default async function ({ path, content, overwrite = false }: Input) {\n  const filePath = resolveAndValidatePath(path);\n\n  // Check if file already exists\n  if (existsSync(filePath) && !overwrite) {\n    throw new Error(`File already exists: ${path}. Set overwrite=true to replace it.`);\n  }\n\n  // Ensure parent directory exists\n  const parentDir = dirname(filePath);\n  await mkdir(parentDir, { recursive: true });\n\n  // Write the file\n  await writeFile(filePath, content, \"utf8\");\n\n  return {\n    success: true,\n    message: `Successfully created file: ${path}`,\n    contentLength: content.length,\n  };\n}\n", "import { getPreferenceValues } from \"@raycast/api\";\nimport { resolve, relative } from \"node:path\";\n\nexport const getWorkspaceRoot = () => {\n  const preferences = getPreferenceValues<Preferences>();\n\n  if (!preferences.workspaceRoot) {\n    throw new Error(\"Workspace root directory is not configured. Please set it in the extension preferences.\");\n  }\n\n  return resolve(preferences.workspaceRoot);\n};\n\nexport const isAutoEditEnabled = () => {\n  const preferences = getPreferenceValues<Preferences>();\n  return preferences.autoEdit === true;\n};\n\nexport const resolveAndValidatePath = (userPath: string) => {\n  if (!userPath) {\n    throw new Error(\"Path is required\");\n  }\n\n  const workspaceRoot = getWorkspaceRoot();\n\n  const absolutePath = resolve(workspaceRoot, userPath);\n\n  const normalizedWorkspaceRoot = resolve(workspaceRoot);\n  const normalizedAbsolutePath = resolve(absolutePath);\n\n  const relativePath = relative(normalizedWorkspaceRoot, normalizedAbsolutePath);\n\n  if (relativePath.startsWith(\"..\") || relativePath === \"..\") {\n    throw new Error(\n      `Path \"${userPath}\" is outside the configured workspace root \"${workspaceRoot}\". ` +\n        \"All file operations must be within the workspace root directory.\",\n    );\n  }\n\n  return normalizedAbsolutePath;\n};\n"],
  "mappings": "yaAAA,IAAAA,EAAA,GAAAC,EAAAD,EAAA,kBAAAE,EAAA,YAAAC,IAAA,eAAAC,EAAAJ,GAAA,IAAAK,EAAiC,4BCAjC,IAAAC,EAAoC,wBACpCC,EAAkC,qBAErBC,EAAmB,IAAM,CACpC,IAAMC,KAAc,uBAAiC,EAErD,GAAI,CAACA,EAAY,cACf,MAAM,IAAI,MAAM,yFAAyF,EAG3G,SAAO,WAAQA,EAAY,aAAa,CAC1C,EAEaC,EAAoB,OACX,uBAAiC,EAClC,WAAa,GAGrBC,EAA0BC,GAAqB,CAC1D,GAAI,CAACA,EACH,MAAM,IAAI,MAAM,kBAAkB,EAGpC,IAAMC,EAAgBL,EAAiB,EAEjCM,KAAe,WAAQD,EAAeD,CAAQ,EAE9CG,KAA0B,WAAQF,CAAa,EAC/CG,KAAyB,WAAQF,CAAY,EAE7CG,KAAe,YAASF,EAAyBC,CAAsB,EAE7E,GAAIC,EAAa,WAAW,IAAI,GAAKA,IAAiB,KACpD,MAAM,IAAI,MACR,SAASL,CAAQ,+CAA+CC,CAAa,qEAE/E,EAGF,OAAOG,CACT,EDtCA,IAAAE,EAA2B,mBAC3BC,EAAwB,qBAiBxB,eAAsBC,EAAa,CAAE,KAAAC,EAAM,QAAAC,EAAS,UAAAC,EAAY,EAAM,EAAU,CAC9E,GAAIC,EAAkB,EACpB,OAGF,IAAMC,EAAWC,EAAuBL,CAAI,EAGtCM,KAAa,cAAWF,CAAQ,EAGhCG,EAAW,CAACC,EAAcC,EAAY,MACtCD,EAAK,QAAUC,EAAkBD,EAC9BA,EAAK,UAAU,EAAGC,CAAS,EAAI,MAGlCC,EAAO,CACX,CAAE,KAAM,YAAa,MAAOV,CAAK,EACjC,CAAE,KAAM,SAAU,MAAOM,EAAcJ,EAAY,iBAAmB,sBAAyB,aAAc,EAC7G,CAAE,KAAM,iBAAkB,MAAO,GAAGD,EAAQ,MAAM,aAAc,EAChE,CAAE,KAAM,kBAAmB,MAAOM,EAASN,CAAO,CAAE,CACtD,EAEA,OAAIK,GAAc,CAACJ,GACjBQ,EAAK,KAAK,CAAE,KAAM,UAAW,MAAO,wDAAyD,CAAC,EAGzF,CACL,QAAS,4BAA4BJ,GAAcJ,EAAY,YAAc,QAAQ,cACrF,KAAAQ,CACF,CACF,CAEA,eAAOC,EAAwB,CAAE,KAAAX,EAAM,QAAAC,EAAS,UAAAC,EAAY,EAAM,EAAU,CAC1E,IAAME,EAAWC,EAAuBL,CAAI,EAG5C,MAAI,cAAWI,CAAQ,GAAK,CAACF,EAC3B,MAAM,IAAI,MAAM,wBAAwBF,CAAI,qCAAqC,EAInF,IAAMY,KAAY,WAAQR,CAAQ,EAClC,eAAM,SAAMQ,EAAW,CAAE,UAAW,EAAK,CAAC,EAG1C,QAAM,aAAUR,EAAUH,EAAS,MAAM,EAElC,CACL,QAAS,GACT,QAAS,8BAA8BD,CAAI,GAC3C,cAAeC,EAAQ,MACzB,CACF",
  "names": ["create_file_exports", "__export", "confirmation", "create_file_default", "__toCommonJS", "import_promises", "import_api", "import_node_path", "getWorkspaceRoot", "preferences", "isAutoEditEnabled", "resolveAndValidatePath", "userPath", "workspaceRoot", "absolutePath", "normalizedWorkspaceRoot", "normalizedAbsolutePath", "relativePath", "import_node_fs", "import_node_path", "confirmation", "path", "content", "overwrite", "isAutoEditEnabled", "filePath", "resolveAndValidatePath", "fileExists", "truncate", "text", "maxLength", "info", "create_file_default", "parentDir"]
}
