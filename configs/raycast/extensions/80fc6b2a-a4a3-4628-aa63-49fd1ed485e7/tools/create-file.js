"use strict";var l=Object.defineProperty;var g=Object.getOwnPropertyDescriptor;var v=Object.getOwnPropertyNames;var P=Object.prototype.hasOwnProperty;var y=(e,t)=>{for(var o in t)l(e,o,{get:t[o],enumerable:!0})},E=(e,t,o,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of v(t))!P.call(e,r)&&r!==o&&l(e,r,{get:()=>t[r],enumerable:!(n=g(t,r))||n.enumerable});return e};var k=e=>E(l({},"__esModule",{value:!0}),e);var F={};y(F,{confirmation:()=>x,default:()=>b});module.exports=k(F);var a=require("node:fs/promises");var u=require("@raycast/api"),i=require("node:path"),A=()=>{let e=(0,u.getPreferenceValues)();if(!e.workspaceRoot)throw new Error("Workspace root directory is not configured. Please set it in the extension preferences.");return(0,i.resolve)(e.workspaceRoot)},h=()=>(0,u.getPreferenceValues)().autoEdit===!0,f=e=>{if(!e)throw new Error("Path is required");let t=A(),o=(0,i.resolve)(t,e),n=(0,i.resolve)(t),r=(0,i.resolve)(o),s=(0,i.relative)(n,r);if(s.startsWith("..")||s==="..")throw new Error(`Path "${e}" is outside the configured workspace root "${t}". All file operations must be within the workspace root directory.`);return r};var p=require("node:fs"),w=require("node:path");async function x({path:e,content:t,overwrite:o=!1}){if(h())return;let n=f(e),r=(0,p.existsSync)(n),s=(c,m=100)=>c.length<=m?c:c.substring(0,m)+"...",d=[{name:"File Path",value:e},{name:"Action",value:r?o?"Overwrite File":"File Already Exists":"Create File"},{name:"Content Length",value:`${t.length} characters`},{name:"Content Preview",value:s(t)}];return r&&!o&&d.push({name:"Warning",value:"File already exists. Set overwrite=true to replace it."}),{message:`Are you sure you want to ${r&&o?"overwrite":"create"} this file?`,info:d}}async function b({path:e,content:t,overwrite:o=!1}){let n=f(e);if((0,p.existsSync)(n)&&!o)throw new Error(`File already exists: ${e}. Set overwrite=true to replace it.`);let r=(0,w.dirname)(n);return await(0,a.mkdir)(r,{recursive:!0}),await(0,a.writeFile)(n,t,"utf8"),{success:!0,message:`Successfully created file: ${e}`,contentLength:t.length}}0&&(module.exports={confirmation});
