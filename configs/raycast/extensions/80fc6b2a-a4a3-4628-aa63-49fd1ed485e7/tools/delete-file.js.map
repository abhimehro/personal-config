{
  "version": 3,
  "sources": ["../../src/tools/delete-file.ts", "../../src/utils/workspace.ts"],
  "sourcesContent": ["import { trash } from \"@raycast/api\";\nimport { resolveAndValidatePath, isAutoEditEnabled } from \"../utils/workspace\";\nimport { existsSync } from \"node:fs\";\n\ntype Input = {\n  /**\n   * The relative path to the file from the workspace root\n   */\n  path: string;\n};\n\nexport async function confirmation({ path }: Input) {\n  if (isAutoEditEnabled()) {\n    return undefined;\n  }\n\n  const filePath = resolveAndValidatePath(path);\n\n  // Check if file exists\n  if (!existsSync(filePath)) {\n    throw new Error(`File does not exist: ${path}`);\n  }\n\n  return {\n    message: `Are you sure you want to move this file to trash?`,\n    info: [\n      { name: \"File Path\", value: path },\n      { name: \"Action\", value: \"Move to Trash\" },\n    ],\n  };\n}\n\nexport default async function ({ path }: Input) {\n  const filePath = resolveAndValidatePath(path);\n\n  // Check if file exists\n  if (!existsSync(filePath)) {\n    throw new Error(`File does not exist: ${path}`);\n  }\n\n  // Delete the file (moves to trash for safer deletion)\n  await trash(filePath);\n\n  return {\n    success: true,\n    message: `Successfully deleted file: ${path}`,\n  };\n}\n", "import { getPreferenceValues } from \"@raycast/api\";\nimport { resolve, relative } from \"node:path\";\n\nexport const getWorkspaceRoot = () => {\n  const preferences = getPreferenceValues<Preferences>();\n\n  if (!preferences.workspaceRoot) {\n    throw new Error(\"Workspace root directory is not configured. Please set it in the extension preferences.\");\n  }\n\n  return resolve(preferences.workspaceRoot);\n};\n\nexport const isAutoEditEnabled = () => {\n  const preferences = getPreferenceValues<Preferences>();\n  return preferences.autoEdit === true;\n};\n\nexport const resolveAndValidatePath = (userPath: string) => {\n  if (!userPath) {\n    throw new Error(\"Path is required\");\n  }\n\n  const workspaceRoot = getWorkspaceRoot();\n\n  const absolutePath = resolve(workspaceRoot, userPath);\n\n  const normalizedWorkspaceRoot = resolve(workspaceRoot);\n  const normalizedAbsolutePath = resolve(absolutePath);\n\n  const relativePath = relative(normalizedWorkspaceRoot, normalizedAbsolutePath);\n\n  if (relativePath.startsWith(\"..\") || relativePath === \"..\") {\n    throw new Error(\n      `Path \"${userPath}\" is outside the configured workspace root \"${workspaceRoot}\". ` +\n        \"All file operations must be within the workspace root directory.\",\n    );\n  }\n\n  return normalizedAbsolutePath;\n};\n"],
  "mappings": "yaAAA,IAAAA,EAAA,GAAAC,EAAAD,EAAA,kBAAAE,EAAA,YAAAC,IAAA,eAAAC,EAAAJ,GAAA,IAAAK,EAAsB,wBCAtB,IAAAC,EAAoC,wBACpCC,EAAkC,qBAErBC,EAAmB,IAAM,CACpC,IAAMC,KAAc,uBAAiC,EAErD,GAAI,CAACA,EAAY,cACf,MAAM,IAAI,MAAM,yFAAyF,EAG3G,SAAO,WAAQA,EAAY,aAAa,CAC1C,EAEaC,EAAoB,OACX,uBAAiC,EAClC,WAAa,GAGrBC,EAA0BC,GAAqB,CAC1D,GAAI,CAACA,EACH,MAAM,IAAI,MAAM,kBAAkB,EAGpC,IAAMC,EAAgBL,EAAiB,EAEjCM,KAAe,WAAQD,EAAeD,CAAQ,EAE9CG,KAA0B,WAAQF,CAAa,EAC/CG,KAAyB,WAAQF,CAAY,EAE7CG,KAAe,YAASF,EAAyBC,CAAsB,EAE7E,GAAIC,EAAa,WAAW,IAAI,GAAKA,IAAiB,KACpD,MAAM,IAAI,MACR,SAASL,CAAQ,+CAA+CC,CAAa,qEAE/E,EAGF,OAAOG,CACT,EDtCA,IAAAE,EAA2B,mBAS3B,eAAsBC,EAAa,CAAE,KAAAC,CAAK,EAAU,CAClD,GAAIC,EAAkB,EACpB,OAGF,IAAMC,EAAWC,EAAuBH,CAAI,EAG5C,GAAI,IAAC,cAAWE,CAAQ,EACtB,MAAM,IAAI,MAAM,wBAAwBF,CAAI,EAAE,EAGhD,MAAO,CACL,QAAS,oDACT,KAAM,CACJ,CAAE,KAAM,YAAa,MAAOA,CAAK,EACjC,CAAE,KAAM,SAAU,MAAO,eAAgB,CAC3C,CACF,CACF,CAEA,eAAOI,EAAwB,CAAE,KAAAJ,CAAK,EAAU,CAC9C,IAAME,EAAWC,EAAuBH,CAAI,EAG5C,GAAI,IAAC,cAAWE,CAAQ,EACtB,MAAM,IAAI,MAAM,wBAAwBF,CAAI,EAAE,EAIhD,eAAM,SAAME,CAAQ,EAEb,CACL,QAAS,GACT,QAAS,8BAA8BF,CAAI,EAC7C,CACF",
  "names": ["delete_file_exports", "__export", "confirmation", "delete_file_default", "__toCommonJS", "import_api", "import_api", "import_node_path", "getWorkspaceRoot", "preferences", "isAutoEditEnabled", "resolveAndValidatePath", "userPath", "workspaceRoot", "absolutePath", "normalizedWorkspaceRoot", "normalizedAbsolutePath", "relativePath", "import_node_fs", "confirmation", "path", "isAutoEditEnabled", "filePath", "resolveAndValidatePath", "delete_file_default"]
}
