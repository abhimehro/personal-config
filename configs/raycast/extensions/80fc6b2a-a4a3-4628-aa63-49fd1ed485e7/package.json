{
  "$schema": "https://www.raycast.com/schemas/extension.json",
  "name": "ray-code",
  "title": "Ray Code",
  "description": "Turn AI Chat into a vibe coding agent",
  "icon": "extension-icon.png",
  "author": "1weiho",
  "platforms": [
    "macOS",
    "Windows"
  ],
  "categories": [
    "Developer Tools"
  ],
  "license": "MIT",
  "commands": [
    {
      "name": "get-started",
      "title": "Get Started with Ray Code",
      "description": "Learn how to configure the Ray Code extension",
      "mode": "view"
    }
  ],
  "preferences": [
    {
      "name": "workspaceRoot",
      "title": "Workspace Root Directory",
      "description": "Specify the root directory for all file-based operations.",
      "type": "directory",
      "required": true
    },
    {
      "name": "autoEdit",
      "title": "Auto Edit",
      "description": "When enabled, file operations (create, edit, delete) will be executed without confirmation prompts.",
      "type": "checkbox",
      "default": false,
      "required": false,
      "label": "Skip confirmation for file operations"
    }
  ],
  "dependencies": {
    "@raycast/api": "^1.103.3",
    "@raycast/utils": "^1.17.0"
  },
  "devDependencies": {
    "@raycast/eslint-config": "^2.0.4",
    "@types/node": "22.13.10",
    "@types/react": "19.0.10",
    "eslint": "^9.22.0",
    "prettier": "^3.5.3",
    "typescript": "^5.8.2"
  },
  "scripts": {
    "build": "ray build",
    "dev": "ray develop",
    "fix-lint": "ray lint --fix",
    "lint": "ray lint",
    "prepublishOnly": "echo \"\\n\\nIt seems like you are trying to publish the Raycast extension to npm.\\n\\nIf you did intend to publish it to npm, remove the \\`prepublishOnly\\` script and rerun \\`npm publish\\` again.\\nIf you wanted to publish it to the Raycast Store instead, use \\`npm run publish\\` instead.\\n\\n\" && exit 1",
    "publish": "npx @raycast/api@latest publish"
  },
  "tools": [
    {
      "name": "read-file",
      "title": "Read File",
      "description": "Read a file from the workspace",
      "input": {
        "type": "object",
        "properties": {
          "path": {
            "type": "string",
            "description": "The relative path to the file from the workspace root"
          }
        },
        "required": [
          "path"
        ]
      },
      "confirmation": false
    },
    {
      "name": "list-dir",
      "title": "List Directory",
      "description": "List a directory from the workspace",
      "input": {
        "type": "object",
        "properties": {
          "path": {
            "type": "string",
            "description": "The relative path to the directory from the workspace root"
          }
        },
        "required": [
          "path"
        ]
      },
      "confirmation": false
    },
    {
      "name": "grep",
      "title": "Grep",
      "description": "Search for text across the workspace (supports glob patterns and recursive search)",
      "input": {
        "type": "object",
        "properties": {
          "query": {
            "type": "string",
            "description": "The search query (text to search for)"
          },
          "path": {
            "type": "string",
            "description": "Optional: The relative path to search within (defaults to \".\" for entire workspace)"
          },
          "glob": {
            "type": "string",
            "description": "Optional: Glob pattern to filter files (e.g., \"*.ts\", \"*.{ts,tsx}\")"
          },
          "caseSensitive": {
            "type": "boolean",
            "description": "Optional: Case-sensitive search (defaults to false)"
          }
        },
        "required": [
          "query"
        ]
      },
      "confirmation": false
    },
    {
      "name": "search-files",
      "title": "Search Files",
      "description": "Search for files by name using fuzzy matching",
      "input": {
        "type": "object",
        "properties": {
          "query": {
            "type": "string",
            "description": "The search query to match against file names (supports fuzzy matching)"
          },
          "path": {
            "type": "string",
            "description": "Optional: The relative path to search within (defaults to workspace root)"
          }
        },
        "required": [
          "query"
        ]
      },
      "confirmation": false
    },
    {
      "name": "apply-edit",
      "title": "Apply Edit",
      "description": "Apply text replacements to a file (search and replace)",
      "input": {
        "type": "object",
        "properties": {
          "path": {
            "type": "string",
            "description": "The relative path to the file from the workspace root"
          },
          "oldText": {
            "type": "string",
            "description": "The original text to be replaced (must match exactly)"
          },
          "newText": {
            "type": "string",
            "description": "The new text to replace with"
          },
          "replaceAll": {
            "type": "boolean",
            "description": "Optional: Whether to replace all occurrences (default: false, only replaces first occurrence)"
          }
        },
        "required": [
          "path",
          "oldText",
          "newText"
        ]
      },
      "confirmation": true
    },
    {
      "name": "delete-file",
      "title": "Delete File",
      "description": "Delete a file from the workspace",
      "input": {
        "type": "object",
        "properties": {
          "path": {
            "type": "string",
            "description": "The relative path to the file from the workspace root"
          }
        },
        "required": [
          "path"
        ]
      },
      "confirmation": true
    },
    {
      "name": "create-file",
      "title": "Create File",
      "description": "Create a new file in the workspace",
      "input": {
        "type": "object",
        "properties": {
          "path": {
            "type": "string",
            "description": "The relative path to the file from the workspace root"
          },
          "content": {
            "type": "string",
            "description": "The content to write to the new file"
          },
          "overwrite": {
            "type": "boolean",
            "description": "Optional: Whether to overwrite if file already exists (default: false)"
          }
        },
        "required": [
          "path",
          "content"
        ]
      },
      "confirmation": true
    },
    {
      "name": "run-command",
      "title": "Run Command",
      "description": "Execute a shell command in the workspace",
      "input": {
        "type": "object",
        "properties": {
          "command": {
            "type": "string",
            "description": "The shell command to execute"
          },
          "cwd": {
            "type": "string",
            "description": "Optional: Working directory relative to workspace root (defaults to workspace root)"
          },
          "timeout": {
            "type": "number",
            "description": "Optional: Timeout in milliseconds (defaults to 30000ms / 30 seconds)"
          }
        },
        "required": [
          "command"
        ]
      },
      "confirmation": true
    },
    {
      "name": "git",
      "title": "Git",
      "description": "Execute git commands",
      "input": {
        "type": "object",
        "properties": {
          "subcommand": {
            "type": "string",
            "description": "The git subcommand to execute",
            "enum": [
              "status",
              "diff",
              "log",
              "add",
              "commit",
              "branch",
              "show",
              "stash",
              "checkout",
              "pull",
              "fetch"
            ]
          },
          "args": {
            "type": "string",
            "description": "Optional: Additional arguments for the git command"
          }
        },
        "required": [
          "subcommand"
        ]
      },
      "confirmation": true
    }
  ],
  "ai": {
    "instructions": "You are a coding assistant. Follow these rules when invoking tools:\n1. Your very first action must be calling `list_dir` to show the workspace root directory.\n2. Whenever you need to inspect directory contents, call `list_dir` and prefer absolute paths.\n3. Use `read_file` to view file contents.\n4. Use `search_files` to locate files by name; always provide a non-empty `query`, and pass `path` if you need to narrow the scope.\n5. Use `grep` to search text across the workspace; provide `query` and optionally `path` to narrow scope, `glob` to filter file types (e.g., \"*.ts\", \"*.{ts,tsx}\"). Results include file paths and line numbers.\n6. For text replacements, call `apply_edit`; consider invoking its `confirmation` helper first, and report when the target text is missing.\n7. Use `create_file` to add new files; set `overwrite=true` only when you intentionally replace an existing file.\n8. Use `delete_file` to remove files; call its `confirmation` helper before deletion when appropriate.\n9. Use `run_command` to execute shell commands (e.g., npm, yarn, tests, build scripts); always use its `confirmation` helper first as this is a powerful operation.\n10. Use `git` for version control operations; read-only commands (status, diff, log, branch, show) don't need confirmation, while write commands (add, commit, checkout, pull, fetch, stash) will prompt for confirmation unless autoEdit is enabled. Dangerous operations like force push are blocked.\n11. Clearly surface any errors, limitations, or constraints to the user.\n12. Rigorously comply with any additional user instructions (e.g., language, formatting, permissions)."
  }
}