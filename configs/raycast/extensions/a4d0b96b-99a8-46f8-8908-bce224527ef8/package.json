{
  "$schema": "https://www.raycast.com/schemas/extension.json",
  "name": "rss-reader",
  "title": "RSS Reader",
  "description": "Browse latest news from your favourite sources",
  "icon": "command-icon.png",
  "author": "fuksman",
  "license": "MIT",
  "contributors": [
    "pernielsentikaer",
    "pomdtr",
    "xmok"
  ],
  "commands": [
    {
      "name": "feeds",
      "title": "View Subscriptions",
      "subtitle": "RSS",
      "description": "Manage your favourite sources and read stories",
      "mode": "view"
    },
    {
      "name": "subscription-form",
      "title": "Add Subscription",
      "subtitle": "RSS",
      "description": "Subscribe to a new sources",
      "mode": "view"
    },
    {
      "name": "stories",
      "title": "Read All Stories",
      "subtitle": "RSS",
      "description": "Get the latest from all your favourite sources at once",
      "mode": "view"
    }
  ],
  "tools": [
    {
      "name": "get-feeds",
      "title": "Get Feeds",
      "description": "Get all RSS feed subscriptions.",
      "instructions": "Get all RSS feed subscriptions.\nReturns a list of all feeds the user is subscribed to.",
      "confirmation": false
    },
    {
      "name": "get-stories",
      "title": "Get Stories",
      "description": "Get RSS stories from subscribed feeds.",
      "instructions": "Get RSS stories from subscribed feeds.\nReturns the latest stories from RSS feeds, optionally filtered by feed URL or read status.",
      "input": {
        "type": "object",
        "properties": {
          "feedUrl": {
            "type": "string",
            "description": "Filter stories by feed URL. If not provided, returns stories from all feeds."
          },
          "limit": {
            "type": "number",
            "description": "Maximum number of stories to return. Defaults to 50."
          },
          "unreadOnly": {
            "type": "boolean",
            "description": "Whether to return only unread stories. Defaults to false."
          }
        },
        "required": []
      },
      "confirmation": false
    },
    {
      "name": "add-feed",
      "title": "Add Feed",
      "description": "Subscribe to a new RSS feed.",
      "instructions": "Subscribe to a new RSS feed.\nAdds a new RSS feed subscription to the user's feed list.",
      "input": {
        "type": "object",
        "properties": {
          "url": {
            "type": "string",
            "description": "The URL of the RSS feed to subscribe to."
          },
          "customTitle": {
            "type": "string",
            "description": "Optional custom title for the feed. If not provided, uses the feed's original title."
          }
        },
        "required": [
          "url"
        ]
      },
      "confirmation": false
    },
    {
      "name": "remove-feed",
      "title": "Remove Feed",
      "description": "Unsubscribe from an RSS feed.",
      "instructions": "Unsubscribe from an RSS feed.\nRemoves an RSS feed subscription from the user's feed list.",
      "input": {
        "type": "object",
        "properties": {
          "url": {
            "type": "string",
            "description": "The URL of the RSS feed to unsubscribe from."
          },
          "confirmation": {
            "type": "object",
            "properties": {
              "title": {
                "type": "string"
              },
              "link": {
                "type": "string"
              },
              "originalTitle": {
                "type": "string"
              }
            },
            "required": [
              "title"
            ],
            "description": "The feed properties to display to the user for confirmation."
          }
        },
        "required": [
          "url",
          "confirmation"
        ]
      },
      "confirmation": true
    },
    {
      "name": "rename-feed",
      "title": "Rename Feed",
      "description": "Rename an RSS feed subscription.",
      "instructions": "Rename an RSS feed.\nChanges the display title of an RSS feed subscription. If no new title is provided, restores the original title.",
      "input": {
        "type": "object",
        "properties": {
          "url": {
            "type": "string",
            "description": "The URL of the RSS feed to rename."
          },
          "newTitle": {
            "type": "string",
            "description": "The new title for the feed. Leave empty to restore the original title."
          }
        },
        "required": [
          "url"
        ]
      },
      "confirmation": false
    },
    {
      "name": "mark-as-read",
      "title": "Mark Story as Read",
      "description": "Mark an RSS story as read.",
      "instructions": "Mark an RSS story as read.\nUpdates the read status of a specific story.",
      "input": {
        "type": "object",
        "properties": {
          "storyGuid": {
            "type": "string",
            "description": "The GUID or unique identifier of the story to mark as read."
          }
        },
        "required": [
          "storyGuid"
        ]
      },
      "confirmation": false
    }
  ],
  "ai": {
    "instructions": "When displaying stories, include links in markdown format using the story's link URL. Example: Instead of saying \"Here are your latest stories: 1. Story Title\", say \"Here are your latest stories: 1. [Story Title](https://example.com/story)\"\\n- Keep feed URLs accurate and use the exact URL provided by the user\\n- When a user asks for news or stories without specifying a feed, return stories from all feeds\\n- If a user wants to subscribe to a feed, validate that the URL is a valid RSS feed\\n- Do not ask for optional information if not necessary for the task\\n- When listing stories, include the feed title to show which feed each story is from\\n- Use markdown formatting for better readability of story lists",
    "evals": [
      {
        "input": "@rss-reader What's the latest news?",
        "mocks": {
          "get-stories": [
            {
              "guid": "story-1",
              "title": "Breaking: AI Makes Major Breakthrough",
              "link": "https://example.com/ai-breakthrough",
              "pubDate": "2025-01-21T10:00:00Z",
              "feedTitle": "Tech News",
              "feedUrl": "https://technews.com/feed"
            },
            {
              "guid": "story-2",
              "title": "New Study on Climate Change",
              "link": "https://example.com/climate-study",
              "pubDate": "2025-01-21T09:00:00Z",
              "feedTitle": "Science Daily",
              "feedUrl": "https://sciencedaily.com/feed"
            }
          ]
        },
        "expected": [
          {
            "callsTool": "get-stories"
          },
          {
            "meetsCriteria": "The answer includes a list of stories with markdown links."
          },
          {
            "meetsCriteria": "The answer includes the feed title for each story."
          }
        ]
      },
      {
        "input": "@rss-reader Subscribe to https://example.com/feed.xml",
        "mocks": {
          "add-feed": {
            "url": "https://example.com/feed.xml",
            "title": "Example News",
            "link": "https://example.com",
            "originalTitle": "Example News"
          }
        },
        "expected": [
          {
            "callsTool": {
              "name": "add-feed",
              "arguments": {
                "url": "https://example.com/feed.xml"
              }
            }
          },
          {
            "meetsCriteria": "The answer confirms subscription to the feed."
          }
        ]
      },
      {
        "input": "@rss-reader What feeds am I subscribed to?",
        "mocks": {
          "get-feeds": [
            {
              "url": "https://technews.com/feed",
              "title": "Tech News",
              "link": "https://technews.com"
            },
            {
              "url": "https://sciencedaily.com/feed",
              "title": "Science Daily",
              "link": "https://sciencedaily.com"
            }
          ]
        },
        "expected": [
          {
            "callsTool": "get-feeds"
          },
          {
            "meetsCriteria": "The answer lists all subscribed feeds with their titles."
          }
        ]
      },
      {
        "input": "@rss-reader Rename Tech News feed to My Tech Feed",
        "mocks": {
          "get-feeds": [
            {
              "url": "https://technews.com/feed",
              "title": "Tech News",
              "link": "https://technews.com",
              "originalTitle": "Tech News"
            }
          ],
          "rename-feed": {
            "url": "https://technews.com/feed",
            "oldTitle": "Tech News",
            "newTitle": "My Tech Feed",
            "originalTitle": "Tech News"
          }
        },
        "expected": [
          {
            "callsTool": {
              "name": "rename-feed",
              "arguments": {
                "url": "https://technews.com/feed",
                "newTitle": "My Tech Feed"
              }
            }
          },
          {
            "meetsCriteria": "The answer confirms the feed has been renamed."
          }
        ]
      }
    ]
  },
  "dependencies": {
    "@raycast/api": "^1.94.0",
    "@raycast/utils": "^1.19.1",
    "javascript-time-ago": "^2.3.9",
    "nanoid": "^5.1.6",
    "node-fetch": "^3.0.0",
    "node-html-markdown": "^1.2.0",
    "rss-parser": "^3.12.0"
  },
  "devDependencies": {
    "@raycast/eslint-config": "^2.0.4",
    "@types/node": "22.13.10",
    "@types/react": "19.0.10",
    "eslint": "^9.22.0",
    "prettier": "^3.5.3",
    "typescript": "^5.8.2"
  },
  "scripts": {
    "build": "ray build",
    "dev": "ray develop",
    "fix-lint": "ray lint --fix",
    "lint": "ray lint",
    "prepublishOnly": "echo \"\\n\\nIt seems like you are trying to publish the Raycast extension to npm.\\n\\nIf you did intend to publish it to npm, remove the \\`prepublishOnly\\` script and rerun \\`npm publish\\` again.\\nIf you wanted to publish it to the Raycast Store instead, use \\`npm run publish\\` instead.\\n\\n\" && exit 1",
    "publish": "npx @raycast/api@latest publish"
  },
  "platforms": [
    "macOS"
  ]
}