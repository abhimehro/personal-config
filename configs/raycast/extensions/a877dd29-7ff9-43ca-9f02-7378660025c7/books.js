"use strict";var Ku=Object.create;var un=Object.defineProperty;var Ju=Object.getOwnPropertyDescriptor;var Zu=Object.getOwnPropertyNames;var el=Object.getPrototypeOf,tl=Object.prototype.hasOwnProperty;var cr=(t,r)=>()=>(t&&(r=t(t=0)),r);var ut=(t,r)=>()=>(r||t((r={exports:{}}).exports,r),r.exports),zo=(t,r)=>{for(var n in r)un(t,n,{get:r[n],enumerable:!0})},No=(t,r,n,o)=>{if(r&&typeof r=="object"||typeof r=="function")for(let i of Zu(r))!tl.call(t,i)&&i!==n&&un(t,i,{get:()=>r[i],enumerable:!(o=Ju(r,i))||o.enumerable});return t};var Ee=(t,r,n)=>(n=t!=null?Ku(el(t)):{},No(r||!t||!t.__esModule?un(n,"default",{value:t,enumerable:!0}):n,t)),rl=t=>No(un({},"__esModule",{value:!0}),t);var $o=ut((od,jo)=>{"use strict";jo.exports=t=>encodeURIComponent(t).replace(/[!'()*]/g,r=>`%${r.charCodeAt(0).toString(16).toUpperCase()}`)});var Go=ut((id,Qo)=>{"use strict";var Vo="%[a-f0-9]{2}",Ho=new RegExp(Vo,"gi"),Yo=new RegExp("("+Vo+")+","gi");function Gn(t,r){try{return decodeURIComponent(t.join(""))}catch{}if(t.length===1)return t;r=r||1;var n=t.slice(0,r),o=t.slice(r);return Array.prototype.concat.call([],Gn(n),Gn(o))}function nl(t){try{return decodeURIComponent(t)}catch{for(var r=t.match(Ho),n=1;n<r.length;n++)t=Gn(r,n).join(""),r=t.match(Ho);return t}}function al(t){for(var r={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},n=Yo.exec(t);n;){try{r[n[0]]=decodeURIComponent(n[0])}catch{var o=nl(n[0]);o!==n[0]&&(r[n[0]]=o)}n=Yo.exec(t)}r["%C2"]="\uFFFD";for(var i=Object.keys(r),u=0;u<i.length;u++){var f=i[u];t=t.replace(new RegExp(f,"g"),r[f])}return t}Qo.exports=function(t){if(typeof t!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch{return al(t)}}});var Ko=ut((sd,Xo)=>{"use strict";Xo.exports=(t,r)=>{if(!(typeof t=="string"&&typeof r=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(r==="")return[t];let n=t.indexOf(r);return n===-1?[t]:[t.slice(0,n),t.slice(n+r.length)]}});var Zo=ut((ud,Jo)=>{"use strict";Jo.exports=function(t,r){for(var n={},o=Object.keys(t),i=Array.isArray(r),u=0;u<o.length;u++){var f=o[u],m=t[f];(i?r.indexOf(f)!==-1:r(f,m,t))&&(n[f]=m)}return n}});var ln=ut(le=>{"use strict";var ol=$o(),il=Go(),ti=Ko(),sl=Zo(),ul=t=>t==null,Xn=Symbol("encodeFragmentIdentifier");function ll(t){switch(t.arrayFormat){case"index":return r=>(n,o)=>{let i=n.length;return o===void 0||t.skipNull&&o===null||t.skipEmptyString&&o===""?n:o===null?[...n,[$(r,t),"[",i,"]"].join("")]:[...n,[$(r,t),"[",$(i,t),"]=",$(o,t)].join("")]};case"bracket":return r=>(n,o)=>o===void 0||t.skipNull&&o===null||t.skipEmptyString&&o===""?n:o===null?[...n,[$(r,t),"[]"].join("")]:[...n,[$(r,t),"[]=",$(o,t)].join("")];case"colon-list-separator":return r=>(n,o)=>o===void 0||t.skipNull&&o===null||t.skipEmptyString&&o===""?n:o===null?[...n,[$(r,t),":list="].join("")]:[...n,[$(r,t),":list=",$(o,t)].join("")];case"comma":case"separator":case"bracket-separator":{let r=t.arrayFormat==="bracket-separator"?"[]=":"=";return n=>(o,i)=>i===void 0||t.skipNull&&i===null||t.skipEmptyString&&i===""?o:(i=i===null?"":i,o.length===0?[[$(n,t),r,$(i,t)].join("")]:[[o,$(i,t)].join(t.arrayFormatSeparator)])}default:return r=>(n,o)=>o===void 0||t.skipNull&&o===null||t.skipEmptyString&&o===""?n:o===null?[...n,$(r,t)]:[...n,[$(r,t),"=",$(o,t)].join("")]}}function fl(t){let r;switch(t.arrayFormat){case"index":return(n,o,i)=>{if(r=/\[(\d*)\]$/.exec(n),n=n.replace(/\[\d*\]$/,""),!r){i[n]=o;return}i[n]===void 0&&(i[n]={}),i[n][r[1]]=o};case"bracket":return(n,o,i)=>{if(r=/(\[\])$/.exec(n),n=n.replace(/\[\]$/,""),!r){i[n]=o;return}if(i[n]===void 0){i[n]=[o];return}i[n]=[].concat(i[n],o)};case"colon-list-separator":return(n,o,i)=>{if(r=/(:list)$/.exec(n),n=n.replace(/:list$/,""),!r){i[n]=o;return}if(i[n]===void 0){i[n]=[o];return}i[n]=[].concat(i[n],o)};case"comma":case"separator":return(n,o,i)=>{let u=typeof o=="string"&&o.includes(t.arrayFormatSeparator),f=typeof o=="string"&&!u&&je(o,t).includes(t.arrayFormatSeparator);o=f?je(o,t):o;let m=u||f?o.split(t.arrayFormatSeparator).map(p=>je(p,t)):o===null?o:je(o,t);i[n]=m};case"bracket-separator":return(n,o,i)=>{let u=/(\[\])$/.test(n);if(n=n.replace(/\[\]$/,""),!u){i[n]=o&&je(o,t);return}let f=o===null?[]:o.split(t.arrayFormatSeparator).map(m=>je(m,t));if(i[n]===void 0){i[n]=f;return}i[n]=[].concat(i[n],f)};default:return(n,o,i)=>{if(i[n]===void 0){i[n]=o;return}i[n]=[].concat(i[n],o)}}}function ri(t){if(typeof t!="string"||t.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function $(t,r){return r.encode?r.strict?ol(t):encodeURIComponent(t):t}function je(t,r){return r.decode?il(t):t}function ni(t){return Array.isArray(t)?t.sort():typeof t=="object"?ni(Object.keys(t)).sort((r,n)=>Number(r)-Number(n)).map(r=>t[r]):t}function ai(t){let r=t.indexOf("#");return r!==-1&&(t=t.slice(0,r)),t}function dl(t){let r="",n=t.indexOf("#");return n!==-1&&(r=t.slice(n)),r}function oi(t){t=ai(t);let r=t.indexOf("?");return r===-1?"":t.slice(r+1)}function ei(t,r){return r.parseNumbers&&!Number.isNaN(Number(t))&&typeof t=="string"&&t.trim()!==""?t=Number(t):r.parseBooleans&&t!==null&&(t.toLowerCase()==="true"||t.toLowerCase()==="false")&&(t=t.toLowerCase()==="true"),t}function ii(t,r){r=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},r),ri(r.arrayFormatSeparator);let n=fl(r),o=Object.create(null);if(typeof t!="string"||(t=t.trim().replace(/^[?#&]/,""),!t))return o;for(let i of t.split("&")){if(i==="")continue;let[u,f]=ti(r.decode?i.replace(/\+/g," "):i,"=");f=f===void 0?null:["comma","separator","bracket-separator"].includes(r.arrayFormat)?f:je(f,r),n(je(u,r),f,o)}for(let i of Object.keys(o)){let u=o[i];if(typeof u=="object"&&u!==null)for(let f of Object.keys(u))u[f]=ei(u[f],r);else o[i]=ei(u,r)}return r.sort===!1?o:(r.sort===!0?Object.keys(o).sort():Object.keys(o).sort(r.sort)).reduce((i,u)=>{let f=o[u];return f&&typeof f=="object"&&!Array.isArray(f)?i[u]=ni(f):i[u]=f,i},Object.create(null))}le.extract=oi;le.parse=ii;le.stringify=(t,r)=>{if(!t)return"";r=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},r),ri(r.arrayFormatSeparator);let n=f=>r.skipNull&&ul(t[f])||r.skipEmptyString&&t[f]==="",o=ll(r),i={};for(let f of Object.keys(t))n(f)||(i[f]=t[f]);let u=Object.keys(i);return r.sort!==!1&&u.sort(r.sort),u.map(f=>{let m=t[f];return m===void 0?"":m===null?$(f,r):Array.isArray(m)?m.length===0&&r.arrayFormat==="bracket-separator"?$(f,r)+"[]":m.reduce(o(f),[]).join("&"):$(f,r)+"="+$(m,r)}).filter(f=>f.length>0).join("&")};le.parseUrl=(t,r)=>{r=Object.assign({decode:!0},r);let[n,o]=ti(t,"#");return Object.assign({url:n.split("?")[0]||"",query:ii(oi(t),r)},r&&r.parseFragmentIdentifier&&o?{fragmentIdentifier:je(o,r)}:{})};le.stringifyUrl=(t,r)=>{r=Object.assign({encode:!0,strict:!0,[Xn]:!0},r);let n=ai(t.url).split("?")[0]||"",o=le.extract(t.url),i=le.parse(o,{sort:!1}),u=Object.assign(i,t.query),f=le.stringify(u,r);f&&(f=`?${f}`);let m=dl(t.url);return t.fragmentIdentifier&&(m=`#${r[Xn]?$(t.fragmentIdentifier,r):t.fragmentIdentifier}`),`${n}${f}${m}`};le.pick=(t,r,n)=>{n=Object.assign({parseFragmentIdentifier:!0,[Xn]:!1},n);let{url:o,query:i,fragmentIdentifier:u}=le.parseUrl(t,n);return le.stringifyUrl({url:o,query:sl(i,r),fragmentIdentifier:u},n)};le.exclude=(t,r,n)=>{let o=Array.isArray(r)?i=>!r.includes(i):(i,u)=>!r(i,u);return le.pick(t,o,n)}});var Pi=ut((mn,Ei)=>{(function(t,r){typeof mn=="object"&&typeof Ei<"u"?r(mn):typeof define=="function"&&define.amd?define(["exports"],r):(t=typeof globalThis<"u"?globalThis:t||self,r(t.WebStreamsPolyfill={}))})(mn,(function(t){"use strict";let r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol:e=>`Symbol(${e})`;function n(){}function o(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}let i=o();function u(e){return typeof e=="object"&&e!==null||typeof e=="function"}let f=n,m=Promise,p=Promise.prototype.then,c=Promise.resolve.bind(m),_=Promise.reject.bind(m);function v(e){return new m(e)}function y(e){return c(e)}function w(e){return _(e)}function S(e,a,s){return p.call(e,a,s)}function E(e,a,s){S(S(e,a,s),void 0,f)}function T(e,a){E(e,a)}function g(e,a){E(e,void 0,a)}function D(e,a,s){return S(e,a,s)}function I(e){S(e,void 0,f)}let P=(()=>{let e=i&&i.queueMicrotask;if(typeof e=="function")return e;let a=y(void 0);return s=>S(a,s)})();function q(e,a,s){if(typeof e!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,a,s)}function O(e,a,s){try{return y(q(e,a,s))}catch(l){return w(l)}}let ee=16384;class X{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(a){let s=this._back,l=s;s._elements.length===ee-1&&(l={_elements:[],_next:void 0}),s._elements.push(a),l!==s&&(this._back=l,s._next=l),++this._size}shift(){let a=this._front,s=a,l=this._cursor,d=l+1,h=a._elements,b=h[l];return d===ee&&(s=a._next,d=0),--this._size,this._cursor=d,a!==s&&(this._front=s),h[l]=void 0,b}forEach(a){let s=this._cursor,l=this._front,d=l._elements;for(;(s!==d.length||l._next!==void 0)&&!(s===d.length&&(l=l._next,d=l._elements,s=0,d.length===0));)a(d[s]),++s}peek(){let a=this._front,s=this._cursor;return a._elements[s]}}function V(e,a){e._ownerReadableStream=a,a._reader=e,a._state==="readable"?Xt(e):a._state==="closed"?Pr(e):be(e,a._storedError)}function mt(e,a){let s=e._ownerReadableStream;return Te(s,a)}function oe(e){e._ownerReadableStream._state==="readable"?qe(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):Ar(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),e._ownerReadableStream._reader=void 0,e._ownerReadableStream=void 0}function Me(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function Xt(e){e._closedPromise=v((a,s)=>{e._closedPromise_resolve=a,e._closedPromise_reject=s})}function be(e,a){Xt(e),qe(e,a)}function Pr(e){Xt(e),Kt(e)}function qe(e,a){e._closedPromise_reject!==void 0&&(I(e._closedPromise),e._closedPromise_reject(a),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function Ar(e,a){be(e,a)}function Kt(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}let Dr=r("[[AbortSteps]]"),Wt=r("[[ErrorSteps]]"),ht=r("[[CancelSteps]]"),Ae=r("[[PullSteps]]"),Ft=Number.isFinite||function(e){return typeof e=="number"&&isFinite(e)},Bt=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function Le(e){return typeof e=="object"||typeof e=="function"}function _e(e,a){if(e!==void 0&&!Le(e))throw new TypeError(`${a} is not an object.`)}function N(e,a){if(typeof e!="function")throw new TypeError(`${a} is not a function.`)}function ie(e){return typeof e=="object"&&e!==null||typeof e=="function"}function re(e,a){if(!ie(e))throw new TypeError(`${a} is not an object.`)}function j(e,a,s){if(e===void 0)throw new TypeError(`Parameter ${a} is required in '${s}'.`)}function Ie(e,a,s){if(e===void 0)throw new TypeError(`${a} is required in '${s}'.`)}function Ue(e){return Number(e)}function ce(e){return e===0?0:e}function K(e){return ce(Bt(e))}function ve(e,a){let l=Number.MAX_SAFE_INTEGER,d=Number(e);if(d=ce(d),!Ft(d))throw new TypeError(`${a} is not a finite number`);if(d=K(d),d<0||d>l)throw new TypeError(`${a} is outside the accepted range of 0 to ${l}, inclusive`);return!Ft(d)||d===0?0:d}function se(e,a){if(!ot(e))throw new TypeError(`${a} is not a ReadableStream.`)}function De(e){return new et(e)}function Ke(e,a){e._reader._readRequests.push(a)}function Oe(e,a,s){let d=e._reader._readRequests.shift();s?d._closeSteps():d._chunkSteps(a)}function Je(e){return e._reader._readRequests.length}function Ze(e){let a=e._reader;return!(a===void 0||!tt(a))}class et{constructor(a){if(j(a,1,"ReadableStreamDefaultReader"),se(a,"First parameter"),it(a))throw new TypeError("This stream has already been locked for exclusive reading by another reader");V(this,a),this._readRequests=new X}get closed(){return tt(this)?this._closedPromise:w(Or("closed"))}cancel(a=void 0){return tt(this)?this._ownerReadableStream===void 0?w(Me("cancel")):mt(this,a):w(Or("cancel"))}read(){if(!tt(this))return w(Or("read"));if(this._ownerReadableStream===void 0)return w(Me("read from"));let a,s,l=v((h,b)=>{a=h,s=b});return Jt(this,{_chunkSteps:h=>a({value:h,done:!1}),_closeSteps:()=>a({value:void 0,done:!0}),_errorSteps:h=>s(h)}),l}releaseLock(){if(!tt(this))throw Or("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");oe(this)}}}Object.defineProperties(et.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(et.prototype,r.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function tt(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_readRequests")?!1:e instanceof et}function Jt(e,a){let s=e._ownerReadableStream;s._disturbed=!0,s._state==="closed"?a._closeSteps():s._state==="errored"?a._errorSteps(s._storedError):s._readableStreamController[Ae](a)}function Or(e){return new TypeError(`ReadableStreamDefaultReader.prototype.${e} can only be used on a ReadableStreamDefaultReader`)}let Ma=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);class qa{constructor(a,s){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=a,this._preventCancel=s}next(){let a=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?D(this._ongoingPromise,a,a):a(),this._ongoingPromise}return(a){let s=()=>this._returnSteps(a);return this._ongoingPromise?D(this._ongoingPromise,s,s):s()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});let a=this._reader;if(a._ownerReadableStream===void 0)return w(Me("iterate"));let s,l,d=v((b,R)=>{s=b,l=R});return Jt(a,{_chunkSteps:b=>{this._ongoingPromise=void 0,P(()=>s({value:b,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,oe(a),s({value:void 0,done:!0})},_errorSteps:b=>{this._ongoingPromise=void 0,this._isFinished=!0,oe(a),l(b)}}),d}_returnSteps(a){if(this._isFinished)return Promise.resolve({value:a,done:!0});this._isFinished=!0;let s=this._reader;if(s._ownerReadableStream===void 0)return w(Me("finish iterating"));if(!this._preventCancel){let l=mt(s,a);return oe(s),D(l,()=>({value:a,done:!0}))}return oe(s),y({value:a,done:!0})}}let La={next(){return Ia(this)?this._asyncIteratorImpl.next():w(Ua("next"))},return(e){return Ia(this)?this._asyncIteratorImpl.return(e):w(Ua("return"))}};Ma!==void 0&&Object.setPrototypeOf(La,Ma);function Ws(e,a){let s=De(e),l=new qa(s,a),d=Object.create(La);return d._asyncIteratorImpl=l,d}function Ia(e){if(!u(e)||!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl"))return!1;try{return e._asyncIteratorImpl instanceof qa}catch{return!1}}function Ua(e){return new TypeError(`ReadableStreamAsyncIterator.${e} can only be used on a ReadableSteamAsyncIterator`)}let za=Number.isNaN||function(e){return e!==e};function Zt(e){return e.slice()}function Na(e,a,s,l,d){new Uint8Array(e).set(new Uint8Array(s,l,d),a)}function nd(e){return e}function kr(e){return!1}function ja(e,a,s){if(e.slice)return e.slice(a,s);let l=s-a,d=new ArrayBuffer(l);return Na(d,0,e,a,l),d}function Fs(e){return!(typeof e!="number"||za(e)||e<0)}function $a(e){let a=ja(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(a)}function En(e){let a=e._queue.shift();return e._queueTotalSize-=a.size,e._queueTotalSize<0&&(e._queueTotalSize=0),a.value}function Pn(e,a,s){if(!Fs(s)||s===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");e._queue.push({value:a,size:s}),e._queueTotalSize+=s}function Bs(e){return e._queue.peek().value}function rt(e){e._queue=new X,e._queueTotalSize=0}class er{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!An(this))throw Wn("view");return this._view}respond(a){if(!An(this))throw Wn("respond");if(j(a,1,"respond"),a=ve(a,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");kr(this._view.buffer),Mr(this._associatedReadableByteStreamController,a)}respondWithNewView(a){if(!An(this))throw Wn("respondWithNewView");if(j(a,1,"respondWithNewView"),!ArrayBuffer.isView(a))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");kr(a.buffer),qr(this._associatedReadableByteStreamController,a)}}Object.defineProperties(er.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(er.prototype,r.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class xt{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!pt(this))throw rr("byobRequest");return kn(this)}get desiredSize(){if(!pt(this))throw rr("desiredSize");return Ja(this)}close(){if(!pt(this))throw rr("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");let a=this._controlledReadableByteStream._state;if(a!=="readable")throw new TypeError(`The stream (in ${a} state) is not in the readable state and cannot be closed`);tr(this)}enqueue(a){if(!pt(this))throw rr("enqueue");if(j(a,1,"enqueue"),!ArrayBuffer.isView(a))throw new TypeError("chunk must be an array buffer view");if(a.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(a.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");let s=this._controlledReadableByteStream._state;if(s!=="readable")throw new TypeError(`The stream (in ${s} state) is not in the readable state and cannot be enqueued to`);xr(this,a)}error(a=void 0){if(!pt(this))throw rr("error");Re(this,a)}[ht](a){Ha(this),rt(this);let s=this._cancelAlgorithm(a);return Br(this),s}[Ae](a){let s=this._controlledReadableByteStream;if(this._queueTotalSize>0){let d=this._queue.shift();this._queueTotalSize-=d.byteLength,Ga(this);let h=new Uint8Array(d.buffer,d.byteOffset,d.byteLength);a._chunkSteps(h);return}let l=this._autoAllocateChunkSize;if(l!==void 0){let d;try{d=new ArrayBuffer(l)}catch(b){a._errorSteps(b);return}let h={buffer:d,bufferByteLength:l,byteOffset:0,byteLength:l,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(h)}Ke(s,a),bt(this)}}Object.defineProperties(xt.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(xt.prototype,r.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function pt(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")?!1:e instanceof xt}function An(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")?!1:e instanceof er}function bt(e){if(!Ls(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let s=e._pullAlgorithm();E(s,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,bt(e))},l=>{Re(e,l)})}function Ha(e){On(e),e._pendingPullIntos=new X}function Dn(e,a){let s=!1;e._state==="closed"&&(s=!0);let l=Ya(a);a.readerType==="default"?Oe(e,l,s):zs(e,l,s)}function Ya(e){let a=e.bytesFilled,s=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,a/s)}function Wr(e,a,s,l){e._queue.push({buffer:a,byteOffset:s,byteLength:l}),e._queueTotalSize+=l}function Va(e,a){let s=a.elementSize,l=a.bytesFilled-a.bytesFilled%s,d=Math.min(e._queueTotalSize,a.byteLength-a.bytesFilled),h=a.bytesFilled+d,b=h-h%s,R=d,A=!1;b>l&&(R=b-a.bytesFilled,A=!0);let W=e._queue;for(;R>0;){let F=W.peek(),B=Math.min(R,F.byteLength),Y=a.byteOffset+a.bytesFilled;Na(a.buffer,Y,F.buffer,F.byteOffset,B),F.byteLength===B?W.shift():(F.byteOffset+=B,F.byteLength-=B),e._queueTotalSize-=B,Qa(e,B,a),R-=B}return A}function Qa(e,a,s){s.bytesFilled+=a}function Ga(e){e._queueTotalSize===0&&e._closeRequested?(Br(e),fr(e._controlledReadableByteStream)):bt(e)}function On(e){e._byobRequest!==null&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function Xa(e){for(;e._pendingPullIntos.length>0;){if(e._queueTotalSize===0)return;let a=e._pendingPullIntos.peek();Va(e,a)&&(Fr(e),Dn(e._controlledReadableByteStream,a))}}function xs(e,a,s){let l=e._controlledReadableByteStream,d=1;a.constructor!==DataView&&(d=a.constructor.BYTES_PER_ELEMENT);let h=a.constructor,b=a.buffer,R={buffer:b,bufferByteLength:b.byteLength,byteOffset:a.byteOffset,byteLength:a.byteLength,bytesFilled:0,elementSize:d,viewConstructor:h,readerType:"byob"};if(e._pendingPullIntos.length>0){e._pendingPullIntos.push(R),to(l,s);return}if(l._state==="closed"){let A=new h(R.buffer,R.byteOffset,0);s._closeSteps(A);return}if(e._queueTotalSize>0){if(Va(e,R)){let A=Ya(R);Ga(e),s._chunkSteps(A);return}if(e._closeRequested){let A=new TypeError("Insufficient bytes to fill elements in the given buffer");Re(e,A),s._errorSteps(A);return}}e._pendingPullIntos.push(R),to(l,s),bt(e)}function Ms(e,a){let s=e._controlledReadableByteStream;if(Fn(s))for(;ro(s)>0;){let l=Fr(e);Dn(s,l)}}function qs(e,a,s){if(Qa(e,a,s),s.bytesFilled<s.elementSize)return;Fr(e);let l=s.bytesFilled%s.elementSize;if(l>0){let d=s.byteOffset+s.bytesFilled,h=ja(s.buffer,d-l,d);Wr(e,h,0,h.byteLength)}s.bytesFilled-=l,Dn(e._controlledReadableByteStream,s),Xa(e)}function Ka(e,a){let s=e._pendingPullIntos.peek();On(e),e._controlledReadableByteStream._state==="closed"?Ms(e):qs(e,a,s),bt(e)}function Fr(e){return e._pendingPullIntos.shift()}function Ls(e){let a=e._controlledReadableByteStream;return a._state!=="readable"||e._closeRequested||!e._started?!1:!!(Ze(a)&&Je(a)>0||Fn(a)&&ro(a)>0||Ja(e)>0)}function Br(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function tr(e){let a=e._controlledReadableByteStream;if(!(e._closeRequested||a._state!=="readable")){if(e._queueTotalSize>0){e._closeRequested=!0;return}if(e._pendingPullIntos.length>0&&e._pendingPullIntos.peek().bytesFilled>0){let l=new TypeError("Insufficient bytes to fill elements in the given buffer");throw Re(e,l),l}Br(e),fr(a)}}function xr(e,a){let s=e._controlledReadableByteStream;if(e._closeRequested||s._state!=="readable")return;let l=a.buffer,d=a.byteOffset,h=a.byteLength,b=l;if(e._pendingPullIntos.length>0){let R=e._pendingPullIntos.peek();kr(R.buffer),R.buffer=R.buffer}if(On(e),Ze(s))if(Je(s)===0)Wr(e,b,d,h);else{e._pendingPullIntos.length>0&&Fr(e);let R=new Uint8Array(b,d,h);Oe(s,R,!1)}else Fn(s)?(Wr(e,b,d,h),Xa(e)):Wr(e,b,d,h);bt(e)}function Re(e,a){let s=e._controlledReadableByteStream;s._state==="readable"&&(Ha(e),rt(e),Br(e),Po(s,a))}function kn(e){if(e._byobRequest===null&&e._pendingPullIntos.length>0){let a=e._pendingPullIntos.peek(),s=new Uint8Array(a.buffer,a.byteOffset+a.bytesFilled,a.byteLength-a.bytesFilled),l=Object.create(er.prototype);Us(l,e,s),e._byobRequest=l}return e._byobRequest}function Ja(e){let a=e._controlledReadableByteStream._state;return a==="errored"?null:a==="closed"?0:e._strategyHWM-e._queueTotalSize}function Mr(e,a){let s=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(a!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(a===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(s.bytesFilled+a>s.byteLength)throw new RangeError("bytesWritten out of range")}s.buffer=s.buffer,Ka(e,a)}function qr(e,a){let s=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(a.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(a.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(s.byteOffset+s.bytesFilled!==a.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(s.bufferByteLength!==a.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(s.bytesFilled+a.byteLength>s.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");let d=a.byteLength;s.buffer=a.buffer,Ka(e,d)}function Za(e,a,s,l,d,h,b){a._controlledReadableByteStream=e,a._pullAgain=!1,a._pulling=!1,a._byobRequest=null,a._queue=a._queueTotalSize=void 0,rt(a),a._closeRequested=!1,a._started=!1,a._strategyHWM=h,a._pullAlgorithm=l,a._cancelAlgorithm=d,a._autoAllocateChunkSize=b,a._pendingPullIntos=new X,e._readableStreamController=a;let R=s();E(y(R),()=>{a._started=!0,bt(a)},A=>{Re(a,A)})}function Is(e,a,s){let l=Object.create(xt.prototype),d=()=>{},h=()=>y(void 0),b=()=>y(void 0);a.start!==void 0&&(d=()=>a.start(l)),a.pull!==void 0&&(h=()=>a.pull(l)),a.cancel!==void 0&&(b=A=>a.cancel(A));let R=a.autoAllocateChunkSize;if(R===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");Za(e,l,d,h,b,s,R)}function Us(e,a,s){e._associatedReadableByteStreamController=a,e._view=s}function Wn(e){return new TypeError(`ReadableStreamBYOBRequest.prototype.${e} can only be used on a ReadableStreamBYOBRequest`)}function rr(e){return new TypeError(`ReadableByteStreamController.prototype.${e} can only be used on a ReadableByteStreamController`)}function eo(e){return new nr(e)}function to(e,a){e._reader._readIntoRequests.push(a)}function zs(e,a,s){let d=e._reader._readIntoRequests.shift();s?d._closeSteps(a):d._chunkSteps(a)}function ro(e){return e._reader._readIntoRequests.length}function Fn(e){let a=e._reader;return!(a===void 0||!gt(a))}class nr{constructor(a){if(j(a,1,"ReadableStreamBYOBReader"),se(a,"First parameter"),it(a))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!pt(a._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");V(this,a),this._readIntoRequests=new X}get closed(){return gt(this)?this._closedPromise:w(Lr("closed"))}cancel(a=void 0){return gt(this)?this._ownerReadableStream===void 0?w(Me("cancel")):mt(this,a):w(Lr("cancel"))}read(a){if(!gt(this))return w(Lr("read"));if(!ArrayBuffer.isView(a))return w(new TypeError("view must be an array buffer view"));if(a.byteLength===0)return w(new TypeError("view must have non-zero byteLength"));if(a.buffer.byteLength===0)return w(new TypeError("view's buffer must have non-zero byteLength"));if(kr(a.buffer),this._ownerReadableStream===void 0)return w(Me("read from"));let s,l,d=v((b,R)=>{s=b,l=R});return no(this,a,{_chunkSteps:b=>s({value:b,done:!1}),_closeSteps:b=>s({value:b,done:!0}),_errorSteps:b=>l(b)}),d}releaseLock(){if(!gt(this))throw Lr("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");oe(this)}}}Object.defineProperties(nr.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(nr.prototype,r.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function gt(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")?!1:e instanceof nr}function no(e,a,s){let l=e._ownerReadableStream;l._disturbed=!0,l._state==="errored"?s._errorSteps(l._storedError):xs(l._readableStreamController,a,s)}function Lr(e){return new TypeError(`ReadableStreamBYOBReader.prototype.${e} can only be used on a ReadableStreamBYOBReader`)}function ar(e,a){let{highWaterMark:s}=e;if(s===void 0)return a;if(za(s)||s<0)throw new RangeError("Invalid highWaterMark");return s}function Ir(e){let{size:a}=e;return a||(()=>1)}function Ur(e,a){_e(e,a);let s=e?.highWaterMark,l=e?.size;return{highWaterMark:s===void 0?void 0:Ue(s),size:l===void 0?void 0:Ns(l,`${a} has member 'size' that`)}}function Ns(e,a){return N(e,a),s=>Ue(e(s))}function js(e,a){_e(e,a);let s=e?.abort,l=e?.close,d=e?.start,h=e?.type,b=e?.write;return{abort:s===void 0?void 0:$s(s,e,`${a} has member 'abort' that`),close:l===void 0?void 0:Hs(l,e,`${a} has member 'close' that`),start:d===void 0?void 0:Ys(d,e,`${a} has member 'start' that`),write:b===void 0?void 0:Vs(b,e,`${a} has member 'write' that`),type:h}}function $s(e,a,s){return N(e,s),l=>O(e,a,[l])}function Hs(e,a,s){return N(e,s),()=>O(e,a,[])}function Ys(e,a,s){return N(e,s),l=>q(e,a,[l])}function Vs(e,a,s){return N(e,s),(l,d)=>O(e,a,[l,d])}function ao(e,a){if(!Mt(e))throw new TypeError(`${a} is not a WritableStream.`)}function Qs(e){if(typeof e!="object"||e===null)return!1;try{return typeof e.aborted=="boolean"}catch{return!1}}let Gs=typeof AbortController=="function";function Xs(){if(Gs)return new AbortController}class or{constructor(a={},s={}){a===void 0?a=null:re(a,"First parameter");let l=Ur(s,"Second parameter"),d=js(a,"First parameter");if(io(this),d.type!==void 0)throw new RangeError("Invalid type is specified");let b=Ir(l),R=ar(l,1);fu(this,d,R,b)}get locked(){if(!Mt(this))throw Hr("locked");return qt(this)}abort(a=void 0){return Mt(this)?qt(this)?w(new TypeError("Cannot abort a stream that already has a writer")):zr(this,a):w(Hr("abort"))}close(){return Mt(this)?qt(this)?w(new TypeError("Cannot close a stream that already has a writer")):ke(this)?w(new TypeError("Cannot close an already-closing stream")):so(this):w(Hr("close"))}getWriter(){if(!Mt(this))throw Hr("getWriter");return oo(this)}}Object.defineProperties(or.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(or.prototype,r.toStringTag,{value:"WritableStream",configurable:!0});function oo(e){return new ir(e)}function Ks(e,a,s,l,d=1,h=()=>1){let b=Object.create(or.prototype);io(b);let R=Object.create(Lt.prototype);return ho(b,R,e,a,s,l,d,h),b}function io(e){e._state="writable",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=new X,e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1}function Mt(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")?!1:e instanceof or}function qt(e){return e._writer!==void 0}function zr(e,a){var s;if(e._state==="closed"||e._state==="errored")return y(void 0);e._writableStreamController._abortReason=a,(s=e._writableStreamController._abortController)===null||s===void 0||s.abort();let l=e._state;if(l==="closed"||l==="errored")return y(void 0);if(e._pendingAbortRequest!==void 0)return e._pendingAbortRequest._promise;let d=!1;l==="erroring"&&(d=!0,a=void 0);let h=v((b,R)=>{e._pendingAbortRequest={_promise:void 0,_resolve:b,_reject:R,_reason:a,_wasAlreadyErroring:d}});return e._pendingAbortRequest._promise=h,d||xn(e,a),h}function so(e){let a=e._state;if(a==="closed"||a==="errored")return w(new TypeError(`The stream (in ${a} state) is not in the writable state and cannot be closed`));let s=v((d,h)=>{let b={_resolve:d,_reject:h};e._closeRequest=b}),l=e._writer;return l!==void 0&&e._backpressure&&a==="writable"&&$n(l),du(e._writableStreamController),s}function Js(e){return v((s,l)=>{let d={_resolve:s,_reject:l};e._writeRequests.push(d)})}function Bn(e,a){if(e._state==="writable"){xn(e,a);return}Mn(e)}function xn(e,a){let s=e._writableStreamController;e._state="erroring",e._storedError=a;let l=e._writer;l!==void 0&&lo(l,a),!nu(e)&&s._started&&Mn(e)}function Mn(e){e._state="errored",e._writableStreamController[Wt]();let a=e._storedError;if(e._writeRequests.forEach(d=>{d._reject(a)}),e._writeRequests=new X,e._pendingAbortRequest===void 0){Nr(e);return}let s=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,s._wasAlreadyErroring){s._reject(a),Nr(e);return}let l=e._writableStreamController[Dr](s._reason);E(l,()=>{s._resolve(),Nr(e)},d=>{s._reject(d),Nr(e)})}function Zs(e){e._inFlightWriteRequest._resolve(void 0),e._inFlightWriteRequest=void 0}function eu(e,a){e._inFlightWriteRequest._reject(a),e._inFlightWriteRequest=void 0,Bn(e,a)}function tu(e){e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0,e._state==="erroring"&&(e._storedError=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state="closed";let s=e._writer;s!==void 0&&yo(s)}function ru(e,a){e._inFlightCloseRequest._reject(a),e._inFlightCloseRequest=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._reject(a),e._pendingAbortRequest=void 0),Bn(e,a)}function ke(e){return!(e._closeRequest===void 0&&e._inFlightCloseRequest===void 0)}function nu(e){return!(e._inFlightWriteRequest===void 0&&e._inFlightCloseRequest===void 0)}function au(e){e._inFlightCloseRequest=e._closeRequest,e._closeRequest=void 0}function ou(e){e._inFlightWriteRequest=e._writeRequests.shift()}function Nr(e){e._closeRequest!==void 0&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);let a=e._writer;a!==void 0&&Nn(a,e._storedError)}function qn(e,a){let s=e._writer;s!==void 0&&a!==e._backpressure&&(a?yu(s):$n(s)),e._backpressure=a}class ir{constructor(a){if(j(a,1,"WritableStreamDefaultWriter"),ao(a,"First parameter"),qt(a))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=a,a._writer=this;let s=a._state;if(s==="writable")!ke(a)&&a._backpressure?Vr(this):wo(this),Yr(this);else if(s==="erroring")jn(this,a._storedError),Yr(this);else if(s==="closed")wo(this),bu(this);else{let l=a._storedError;jn(this,l),go(this,l)}}get closed(){return yt(this)?this._closedPromise:w(wt("closed"))}get desiredSize(){if(!yt(this))throw wt("desiredSize");if(this._ownerWritableStream===void 0)throw sr("desiredSize");return lu(this)}get ready(){return yt(this)?this._readyPromise:w(wt("ready"))}abort(a=void 0){return yt(this)?this._ownerWritableStream===void 0?w(sr("abort")):iu(this,a):w(wt("abort"))}close(){if(!yt(this))return w(wt("close"));let a=this._ownerWritableStream;return a===void 0?w(sr("close")):ke(a)?w(new TypeError("Cannot close an already-closing stream")):uo(this)}releaseLock(){if(!yt(this))throw wt("releaseLock");this._ownerWritableStream!==void 0&&fo(this)}write(a=void 0){return yt(this)?this._ownerWritableStream===void 0?w(sr("write to")):co(this,a):w(wt("write"))}}Object.defineProperties(ir.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(ir.prototype,r.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function yt(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")?!1:e instanceof ir}function iu(e,a){let s=e._ownerWritableStream;return zr(s,a)}function uo(e){let a=e._ownerWritableStream;return so(a)}function su(e){let a=e._ownerWritableStream,s=a._state;return ke(a)||s==="closed"?y(void 0):s==="errored"?w(a._storedError):uo(e)}function uu(e,a){e._closedPromiseState==="pending"?Nn(e,a):gu(e,a)}function lo(e,a){e._readyPromiseState==="pending"?So(e,a):wu(e,a)}function lu(e){let a=e._ownerWritableStream,s=a._state;return s==="errored"||s==="erroring"?null:s==="closed"?0:po(a._writableStreamController)}function fo(e){let a=e._ownerWritableStream,s=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");lo(e,s),uu(e,s),a._writer=void 0,e._ownerWritableStream=void 0}function co(e,a){let s=e._ownerWritableStream,l=s._writableStreamController,d=cu(l,a);if(s!==e._ownerWritableStream)return w(sr("write to"));let h=s._state;if(h==="errored")return w(s._storedError);if(ke(s)||h==="closed")return w(new TypeError("The stream is closing or closed and cannot be written to"));if(h==="erroring")return w(s._storedError);let b=Js(s);return mu(l,a,d),b}let mo={};class Lt{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!Ln(this))throw zn("abortReason");return this._abortReason}get signal(){if(!Ln(this))throw zn("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(a=void 0){if(!Ln(this))throw zn("error");this._controlledWritableStream._state==="writable"&&bo(this,a)}[Dr](a){let s=this._abortAlgorithm(a);return jr(this),s}[Wt](){rt(this)}}Object.defineProperties(Lt.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Lt.prototype,r.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function Ln(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream")?!1:e instanceof Lt}function ho(e,a,s,l,d,h,b,R){a._controlledWritableStream=e,e._writableStreamController=a,a._queue=void 0,a._queueTotalSize=void 0,rt(a),a._abortReason=void 0,a._abortController=Xs(),a._started=!1,a._strategySizeAlgorithm=R,a._strategyHWM=b,a._writeAlgorithm=l,a._closeAlgorithm=d,a._abortAlgorithm=h;let A=Un(a);qn(e,A);let W=s(),F=y(W);E(F,()=>{a._started=!0,$r(a)},B=>{a._started=!0,Bn(e,B)})}function fu(e,a,s,l){let d=Object.create(Lt.prototype),h=()=>{},b=()=>y(void 0),R=()=>y(void 0),A=()=>y(void 0);a.start!==void 0&&(h=()=>a.start(d)),a.write!==void 0&&(b=W=>a.write(W,d)),a.close!==void 0&&(R=()=>a.close()),a.abort!==void 0&&(A=W=>a.abort(W)),ho(e,d,h,b,R,A,s,l)}function jr(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function du(e){Pn(e,mo,0),$r(e)}function cu(e,a){try{return e._strategySizeAlgorithm(a)}catch(s){return In(e,s),1}}function po(e){return e._strategyHWM-e._queueTotalSize}function mu(e,a,s){try{Pn(e,a,s)}catch(d){In(e,d);return}let l=e._controlledWritableStream;if(!ke(l)&&l._state==="writable"){let d=Un(e);qn(l,d)}$r(e)}function $r(e){let a=e._controlledWritableStream;if(!e._started||a._inFlightWriteRequest!==void 0)return;if(a._state==="erroring"){Mn(a);return}if(e._queue.length===0)return;let l=Bs(e);l===mo?hu(e):pu(e,l)}function In(e,a){e._controlledWritableStream._state==="writable"&&bo(e,a)}function hu(e){let a=e._controlledWritableStream;au(a),En(e);let s=e._closeAlgorithm();jr(e),E(s,()=>{tu(a)},l=>{ru(a,l)})}function pu(e,a){let s=e._controlledWritableStream;ou(s);let l=e._writeAlgorithm(a);E(l,()=>{Zs(s);let d=s._state;if(En(e),!ke(s)&&d==="writable"){let h=Un(e);qn(s,h)}$r(e)},d=>{s._state==="writable"&&jr(e),eu(s,d)})}function Un(e){return po(e)<=0}function bo(e,a){let s=e._controlledWritableStream;jr(e),xn(s,a)}function Hr(e){return new TypeError(`WritableStream.prototype.${e} can only be used on a WritableStream`)}function zn(e){return new TypeError(`WritableStreamDefaultController.prototype.${e} can only be used on a WritableStreamDefaultController`)}function wt(e){return new TypeError(`WritableStreamDefaultWriter.prototype.${e} can only be used on a WritableStreamDefaultWriter`)}function sr(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function Yr(e){e._closedPromise=v((a,s)=>{e._closedPromise_resolve=a,e._closedPromise_reject=s,e._closedPromiseState="pending"})}function go(e,a){Yr(e),Nn(e,a)}function bu(e){Yr(e),yo(e)}function Nn(e,a){e._closedPromise_reject!==void 0&&(I(e._closedPromise),e._closedPromise_reject(a),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected")}function gu(e,a){go(e,a)}function yo(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved")}function Vr(e){e._readyPromise=v((a,s)=>{e._readyPromise_resolve=a,e._readyPromise_reject=s}),e._readyPromiseState="pending"}function jn(e,a){Vr(e),So(e,a)}function wo(e){Vr(e),$n(e)}function So(e,a){e._readyPromise_reject!==void 0&&(I(e._readyPromise),e._readyPromise_reject(a),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected")}function yu(e){Vr(e)}function wu(e,a){jn(e,a)}function $n(e){e._readyPromise_resolve!==void 0&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled")}let _o=typeof DOMException<"u"?DOMException:void 0;function Su(e){if(!(typeof e=="function"||typeof e=="object"))return!1;try{return new e,!0}catch{return!1}}function _u(){let e=function(s,l){this.message=s||"",this.name=l||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return e.prototype=Object.create(Error.prototype),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,configurable:!0}),e}let vu=Su(_o)?_o:_u();function vo(e,a,s,l,d,h){let b=De(e),R=oo(a);e._disturbed=!0;let A=!1,W=y(void 0);return v((F,B)=>{let Y;if(h!==void 0){if(Y=()=>{let C=new vu("Aborted","AbortError"),k=[];l||k.push(()=>a._state==="writable"?zr(a,C):y(void 0)),d||k.push(()=>e._state==="readable"?Te(e,C):y(void 0)),ue(()=>Promise.all(k.map(U=>U())),!0,C)},h.aborted){Y();return}h.addEventListener("abort",Y)}function Ce(){return v((C,k)=>{function U(me){me?C():S(zt(),U,k)}U(!1)})}function zt(){return A?y(!0):S(R._readyPromise,()=>v((C,k)=>{Jt(b,{_chunkSteps:U=>{W=S(co(R,U),void 0,n),C(!1)},_closeSteps:()=>C(!0),_errorSteps:k})}))}if(ze(e,b._closedPromise,C=>{l?ge(!0,C):ue(()=>zr(a,C),!0,C)}),ze(a,R._closedPromise,C=>{d?ge(!0,C):ue(()=>Te(e,C),!0,C)}),ne(e,b._closedPromise,()=>{s?ge():ue(()=>su(R))}),ke(a)||a._state==="closed"){let C=new TypeError("the destination writable stream closed before all data could be piped to it");d?ge(!0,C):ue(()=>Te(e,C),!0,C)}I(Ce());function st(){let C=W;return S(W,()=>C!==W?st():void 0)}function ze(C,k,U){C._state==="errored"?U(C._storedError):g(k,U)}function ne(C,k,U){C._state==="closed"?U():T(k,U)}function ue(C,k,U){if(A)return;A=!0,a._state==="writable"&&!ke(a)?T(st(),me):me();function me(){E(C(),()=>Ne(k,U),Nt=>Ne(!0,Nt))}}function ge(C,k){A||(A=!0,a._state==="writable"&&!ke(a)?T(st(),()=>Ne(C,k)):Ne(C,k))}function Ne(C,k){fo(R),oe(b),h!==void 0&&h.removeEventListener("abort",Y),C?B(k):F(void 0)}})}class It{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Qr(this))throw Kr("desiredSize");return Hn(this)}close(){if(!Qr(this))throw Kr("close");if(!Ut(this))throw new TypeError("The stream is not in a state that permits close");lr(this)}enqueue(a=void 0){if(!Qr(this))throw Kr("enqueue");if(!Ut(this))throw new TypeError("The stream is not in a state that permits enqueue");return Xr(this,a)}error(a=void 0){if(!Qr(this))throw Kr("error");nt(this,a)}[ht](a){rt(this);let s=this._cancelAlgorithm(a);return Gr(this),s}[Ae](a){let s=this._controlledReadableStream;if(this._queue.length>0){let l=En(this);this._closeRequested&&this._queue.length===0?(Gr(this),fr(s)):ur(this),a._chunkSteps(l)}else Ke(s,a),ur(this)}}Object.defineProperties(It.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(It.prototype,r.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function Qr(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")?!1:e instanceof It}function ur(e){if(!Ro(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let s=e._pullAlgorithm();E(s,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,ur(e))},l=>{nt(e,l)})}function Ro(e){let a=e._controlledReadableStream;return!Ut(e)||!e._started?!1:!!(it(a)&&Je(a)>0||Hn(e)>0)}function Gr(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function lr(e){if(!Ut(e))return;let a=e._controlledReadableStream;e._closeRequested=!0,e._queue.length===0&&(Gr(e),fr(a))}function Xr(e,a){if(!Ut(e))return;let s=e._controlledReadableStream;if(it(s)&&Je(s)>0)Oe(s,a,!1);else{let l;try{l=e._strategySizeAlgorithm(a)}catch(d){throw nt(e,d),d}try{Pn(e,a,l)}catch(d){throw nt(e,d),d}}ur(e)}function nt(e,a){let s=e._controlledReadableStream;s._state==="readable"&&(rt(e),Gr(e),Po(s,a))}function Hn(e){let a=e._controlledReadableStream._state;return a==="errored"?null:a==="closed"?0:e._strategyHWM-e._queueTotalSize}function Ru(e){return!Ro(e)}function Ut(e){let a=e._controlledReadableStream._state;return!e._closeRequested&&a==="readable"}function To(e,a,s,l,d,h,b){a._controlledReadableStream=e,a._queue=void 0,a._queueTotalSize=void 0,rt(a),a._started=!1,a._closeRequested=!1,a._pullAgain=!1,a._pulling=!1,a._strategySizeAlgorithm=b,a._strategyHWM=h,a._pullAlgorithm=l,a._cancelAlgorithm=d,e._readableStreamController=a;let R=s();E(y(R),()=>{a._started=!0,ur(a)},A=>{nt(a,A)})}function Tu(e,a,s,l){let d=Object.create(It.prototype),h=()=>{},b=()=>y(void 0),R=()=>y(void 0);a.start!==void 0&&(h=()=>a.start(d)),a.pull!==void 0&&(b=()=>a.pull(d)),a.cancel!==void 0&&(R=A=>a.cancel(A)),To(e,d,h,b,R,s,l)}function Kr(e){return new TypeError(`ReadableStreamDefaultController.prototype.${e} can only be used on a ReadableStreamDefaultController`)}function Cu(e,a){return pt(e._readableStreamController)?Pu(e):Eu(e)}function Eu(e,a){let s=De(e),l=!1,d=!1,h=!1,b=!1,R,A,W,F,B,Y=v(ne=>{B=ne});function Ce(){return l?(d=!0,y(void 0)):(l=!0,Jt(s,{_chunkSteps:ue=>{P(()=>{d=!1;let ge=ue,Ne=ue;h||Xr(W._readableStreamController,ge),b||Xr(F._readableStreamController,Ne),l=!1,d&&Ce()})},_closeSteps:()=>{l=!1,h||lr(W._readableStreamController),b||lr(F._readableStreamController),(!h||!b)&&B(void 0)},_errorSteps:()=>{l=!1}}),y(void 0))}function zt(ne){if(h=!0,R=ne,b){let ue=Zt([R,A]),ge=Te(e,ue);B(ge)}return Y}function st(ne){if(b=!0,A=ne,h){let ue=Zt([R,A]),ge=Te(e,ue);B(ge)}return Y}function ze(){}return W=Yn(ze,Ce,zt),F=Yn(ze,Ce,st),g(s._closedPromise,ne=>{nt(W._readableStreamController,ne),nt(F._readableStreamController,ne),(!h||!b)&&B(void 0)}),[W,F]}function Pu(e){let a=De(e),s=!1,l=!1,d=!1,h=!1,b=!1,R,A,W,F,B,Y=v(C=>{B=C});function Ce(C){g(C._closedPromise,k=>{C===a&&(Re(W._readableStreamController,k),Re(F._readableStreamController,k),(!h||!b)&&B(void 0))})}function zt(){gt(a)&&(oe(a),a=De(e),Ce(a)),Jt(a,{_chunkSteps:k=>{P(()=>{l=!1,d=!1;let U=k,me=k;if(!h&&!b)try{me=$a(k)}catch(Nt){Re(W._readableStreamController,Nt),Re(F._readableStreamController,Nt),B(Te(e,Nt));return}h||xr(W._readableStreamController,U),b||xr(F._readableStreamController,me),s=!1,l?ze():d&&ne()})},_closeSteps:()=>{s=!1,h||tr(W._readableStreamController),b||tr(F._readableStreamController),W._readableStreamController._pendingPullIntos.length>0&&Mr(W._readableStreamController,0),F._readableStreamController._pendingPullIntos.length>0&&Mr(F._readableStreamController,0),(!h||!b)&&B(void 0)},_errorSteps:()=>{s=!1}})}function st(C,k){tt(a)&&(oe(a),a=eo(e),Ce(a));let U=k?F:W,me=k?W:F;no(a,C,{_chunkSteps:jt=>{P(()=>{l=!1,d=!1;let $t=k?b:h;if(k?h:b)$t||qr(U._readableStreamController,jt);else{let Uo;try{Uo=$a(jt)}catch(Qn){Re(U._readableStreamController,Qn),Re(me._readableStreamController,Qn),B(Te(e,Qn));return}$t||qr(U._readableStreamController,jt),xr(me._readableStreamController,Uo)}s=!1,l?ze():d&&ne()})},_closeSteps:jt=>{s=!1;let $t=k?b:h,sn=k?h:b;$t||tr(U._readableStreamController),sn||tr(me._readableStreamController),jt!==void 0&&($t||qr(U._readableStreamController,jt),!sn&&me._readableStreamController._pendingPullIntos.length>0&&Mr(me._readableStreamController,0)),(!$t||!sn)&&B(void 0)},_errorSteps:()=>{s=!1}})}function ze(){if(s)return l=!0,y(void 0);s=!0;let C=kn(W._readableStreamController);return C===null?zt():st(C._view,!1),y(void 0)}function ne(){if(s)return d=!0,y(void 0);s=!0;let C=kn(F._readableStreamController);return C===null?zt():st(C._view,!0),y(void 0)}function ue(C){if(h=!0,R=C,b){let k=Zt([R,A]),U=Te(e,k);B(U)}return Y}function ge(C){if(b=!0,A=C,h){let k=Zt([R,A]),U=Te(e,k);B(U)}return Y}function Ne(){}return W=Eo(Ne,ze,ue),F=Eo(Ne,ne,ge),Ce(a),[W,F]}function Au(e,a){_e(e,a);let s=e,l=s?.autoAllocateChunkSize,d=s?.cancel,h=s?.pull,b=s?.start,R=s?.type;return{autoAllocateChunkSize:l===void 0?void 0:ve(l,`${a} has member 'autoAllocateChunkSize' that`),cancel:d===void 0?void 0:Du(d,s,`${a} has member 'cancel' that`),pull:h===void 0?void 0:Ou(h,s,`${a} has member 'pull' that`),start:b===void 0?void 0:ku(b,s,`${a} has member 'start' that`),type:R===void 0?void 0:Wu(R,`${a} has member 'type' that`)}}function Du(e,a,s){return N(e,s),l=>O(e,a,[l])}function Ou(e,a,s){return N(e,s),l=>O(e,a,[l])}function ku(e,a,s){return N(e,s),l=>q(e,a,[l])}function Wu(e,a){if(e=`${e}`,e!=="bytes")throw new TypeError(`${a} '${e}' is not a valid enumeration value for ReadableStreamType`);return e}function Fu(e,a){_e(e,a);let s=e?.mode;return{mode:s===void 0?void 0:Bu(s,`${a} has member 'mode' that`)}}function Bu(e,a){if(e=`${e}`,e!=="byob")throw new TypeError(`${a} '${e}' is not a valid enumeration value for ReadableStreamReaderMode`);return e}function xu(e,a){return _e(e,a),{preventCancel:!!e?.preventCancel}}function Co(e,a){_e(e,a);let s=e?.preventAbort,l=e?.preventCancel,d=e?.preventClose,h=e?.signal;return h!==void 0&&Mu(h,`${a} has member 'signal' that`),{preventAbort:!!s,preventCancel:!!l,preventClose:!!d,signal:h}}function Mu(e,a){if(!Qs(e))throw new TypeError(`${a} is not an AbortSignal.`)}function qu(e,a){_e(e,a);let s=e?.readable;Ie(s,"readable","ReadableWritablePair"),se(s,`${a} has member 'readable' that`);let l=e?.writable;return Ie(l,"writable","ReadableWritablePair"),ao(l,`${a} has member 'writable' that`),{readable:s,writable:l}}class at{constructor(a={},s={}){a===void 0?a=null:re(a,"First parameter");let l=Ur(s,"Second parameter"),d=Au(a,"First parameter");if(Vn(this),d.type==="bytes"){if(l.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");let h=ar(l,0);Is(this,d,h)}else{let h=Ir(l),b=ar(l,1);Tu(this,d,b,h)}}get locked(){if(!ot(this))throw St("locked");return it(this)}cancel(a=void 0){return ot(this)?it(this)?w(new TypeError("Cannot cancel a stream that already has a reader")):Te(this,a):w(St("cancel"))}getReader(a=void 0){if(!ot(this))throw St("getReader");return Fu(a,"First parameter").mode===void 0?De(this):eo(this)}pipeThrough(a,s={}){if(!ot(this))throw St("pipeThrough");j(a,1,"pipeThrough");let l=qu(a,"First parameter"),d=Co(s,"Second parameter");if(it(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(qt(l.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");let h=vo(this,l.writable,d.preventClose,d.preventAbort,d.preventCancel,d.signal);return I(h),l.readable}pipeTo(a,s={}){if(!ot(this))return w(St("pipeTo"));if(a===void 0)return w("Parameter 1 is required in 'pipeTo'.");if(!Mt(a))return w(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let l;try{l=Co(s,"Second parameter")}catch(d){return w(d)}return it(this)?w(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):qt(a)?w(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):vo(this,a,l.preventClose,l.preventAbort,l.preventCancel,l.signal)}tee(){if(!ot(this))throw St("tee");let a=Cu(this);return Zt(a)}values(a=void 0){if(!ot(this))throw St("values");let s=xu(a,"First parameter");return Ws(this,s.preventCancel)}}Object.defineProperties(at.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(at.prototype,r.toStringTag,{value:"ReadableStream",configurable:!0}),typeof r.asyncIterator=="symbol"&&Object.defineProperty(at.prototype,r.asyncIterator,{value:at.prototype.values,writable:!0,configurable:!0});function Yn(e,a,s,l=1,d=()=>1){let h=Object.create(at.prototype);Vn(h);let b=Object.create(It.prototype);return To(h,b,e,a,s,l,d),h}function Eo(e,a,s){let l=Object.create(at.prototype);Vn(l);let d=Object.create(xt.prototype);return Za(l,d,e,a,s,0,void 0),l}function Vn(e){e._state="readable",e._reader=void 0,e._storedError=void 0,e._disturbed=!1}function ot(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")?!1:e instanceof at}function it(e){return e._reader!==void 0}function Te(e,a){if(e._disturbed=!0,e._state==="closed")return y(void 0);if(e._state==="errored")return w(e._storedError);fr(e);let s=e._reader;s!==void 0&&gt(s)&&(s._readIntoRequests.forEach(d=>{d._closeSteps(void 0)}),s._readIntoRequests=new X);let l=e._readableStreamController[ht](a);return D(l,n)}function fr(e){e._state="closed";let a=e._reader;a!==void 0&&(Kt(a),tt(a)&&(a._readRequests.forEach(s=>{s._closeSteps()}),a._readRequests=new X))}function Po(e,a){e._state="errored",e._storedError=a;let s=e._reader;s!==void 0&&(qe(s,a),tt(s)?(s._readRequests.forEach(l=>{l._errorSteps(a)}),s._readRequests=new X):(s._readIntoRequests.forEach(l=>{l._errorSteps(a)}),s._readIntoRequests=new X))}function St(e){return new TypeError(`ReadableStream.prototype.${e} can only be used on a ReadableStream`)}function Ao(e,a){_e(e,a);let s=e?.highWaterMark;return Ie(s,"highWaterMark","QueuingStrategyInit"),{highWaterMark:Ue(s)}}let Do=e=>e.byteLength;Object.defineProperty(Do,"name",{value:"size",configurable:!0});class Jr{constructor(a){j(a,1,"ByteLengthQueuingStrategy"),a=Ao(a,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=a.highWaterMark}get highWaterMark(){if(!ko(this))throw Oo("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!ko(this))throw Oo("size");return Do}}Object.defineProperties(Jr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Jr.prototype,r.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function Oo(e){return new TypeError(`ByteLengthQueuingStrategy.prototype.${e} can only be used on a ByteLengthQueuingStrategy`)}function ko(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_byteLengthQueuingStrategyHighWaterMark")?!1:e instanceof Jr}let Wo=()=>1;Object.defineProperty(Wo,"name",{value:"size",configurable:!0});class Zr{constructor(a){j(a,1,"CountQueuingStrategy"),a=Ao(a,"First parameter"),this._countQueuingStrategyHighWaterMark=a.highWaterMark}get highWaterMark(){if(!Bo(this))throw Fo("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!Bo(this))throw Fo("size");return Wo}}Object.defineProperties(Zr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Zr.prototype,r.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function Fo(e){return new TypeError(`CountQueuingStrategy.prototype.${e} can only be used on a CountQueuingStrategy`)}function Bo(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_countQueuingStrategyHighWaterMark")?!1:e instanceof Zr}function Lu(e,a){_e(e,a);let s=e?.flush,l=e?.readableType,d=e?.start,h=e?.transform,b=e?.writableType;return{flush:s===void 0?void 0:Iu(s,e,`${a} has member 'flush' that`),readableType:l,start:d===void 0?void 0:Uu(d,e,`${a} has member 'start' that`),transform:h===void 0?void 0:zu(h,e,`${a} has member 'transform' that`),writableType:b}}function Iu(e,a,s){return N(e,s),l=>O(e,a,[l])}function Uu(e,a,s){return N(e,s),l=>q(e,a,[l])}function zu(e,a,s){return N(e,s),(l,d)=>O(e,a,[l,d])}class en{constructor(a={},s={},l={}){a===void 0&&(a=null);let d=Ur(s,"Second parameter"),h=Ur(l,"Third parameter"),b=Lu(a,"First parameter");if(b.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(b.writableType!==void 0)throw new RangeError("Invalid writableType specified");let R=ar(h,0),A=Ir(h),W=ar(d,1),F=Ir(d),B,Y=v(Ce=>{B=Ce});Nu(this,Y,W,F,R,A),$u(this,b),b.start!==void 0?B(b.start(this._transformStreamController)):B(void 0)}get readable(){if(!xo(this))throw Io("readable");return this._readable}get writable(){if(!xo(this))throw Io("writable");return this._writable}}Object.defineProperties(en.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(en.prototype,r.toStringTag,{value:"TransformStream",configurable:!0});function Nu(e,a,s,l,d,h){function b(){return a}function R(Y){return Vu(e,Y)}function A(Y){return Qu(e,Y)}function W(){return Gu(e)}e._writable=Ks(b,R,W,A,s,l);function F(){return Xu(e)}function B(Y){return rn(e,Y),y(void 0)}e._readable=Yn(b,F,B,d,h),e._backpressure=void 0,e._backpressureChangePromise=void 0,e._backpressureChangePromise_resolve=void 0,nn(e,!0),e._transformStreamController=void 0}function xo(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")?!1:e instanceof en}function tn(e,a){nt(e._readable._readableStreamController,a),rn(e,a)}function rn(e,a){Mo(e._transformStreamController),In(e._writable._writableStreamController,a),e._backpressure&&nn(e,!1)}function nn(e,a){e._backpressureChangePromise!==void 0&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=v(s=>{e._backpressureChangePromise_resolve=s}),e._backpressure=a}class dr{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!an(this))throw on("desiredSize");let a=this._controlledTransformStream._readable._readableStreamController;return Hn(a)}enqueue(a=void 0){if(!an(this))throw on("enqueue");qo(this,a)}error(a=void 0){if(!an(this))throw on("error");Hu(this,a)}terminate(){if(!an(this))throw on("terminate");Yu(this)}}Object.defineProperties(dr.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(dr.prototype,r.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function an(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")?!1:e instanceof dr}function ju(e,a,s,l){a._controlledTransformStream=e,e._transformStreamController=a,a._transformAlgorithm=s,a._flushAlgorithm=l}function $u(e,a){let s=Object.create(dr.prototype),l=h=>{try{return qo(s,h),y(void 0)}catch(b){return w(b)}},d=()=>y(void 0);a.transform!==void 0&&(l=h=>a.transform(h,s)),a.flush!==void 0&&(d=()=>a.flush(s)),ju(e,s,l,d)}function Mo(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0}function qo(e,a){let s=e._controlledTransformStream,l=s._readable._readableStreamController;if(!Ut(l))throw new TypeError("Readable side is not in a state that permits enqueue");try{Xr(l,a)}catch(h){throw rn(s,h),s._readable._storedError}Ru(l)!==s._backpressure&&nn(s,!0)}function Hu(e,a){tn(e._controlledTransformStream,a)}function Lo(e,a){let s=e._transformAlgorithm(a);return D(s,void 0,l=>{throw tn(e._controlledTransformStream,l),l})}function Yu(e){let a=e._controlledTransformStream,s=a._readable._readableStreamController;lr(s);let l=new TypeError("TransformStream terminated");rn(a,l)}function Vu(e,a){let s=e._transformStreamController;if(e._backpressure){let l=e._backpressureChangePromise;return D(l,()=>{let d=e._writable;if(d._state==="erroring")throw d._storedError;return Lo(s,a)})}return Lo(s,a)}function Qu(e,a){return tn(e,a),y(void 0)}function Gu(e){let a=e._readable,s=e._transformStreamController,l=s._flushAlgorithm();return Mo(s),D(l,()=>{if(a._state==="errored")throw a._storedError;lr(a._readableStreamController)},d=>{throw tn(e,d),a._storedError})}function Xu(e){return nn(e,!1),e._backpressureChangePromise}function on(e){return new TypeError(`TransformStreamDefaultController.prototype.${e} can only be used on a TransformStreamDefaultController`)}function Io(e){return new TypeError(`TransformStream.prototype.${e} can only be used on a TransformStream`)}t.ByteLengthQueuingStrategy=Jr,t.CountQueuingStrategy=Zr,t.ReadableByteStreamController=xt,t.ReadableStream=at,t.ReadableStreamBYOBReader=nr,t.ReadableStreamBYOBRequest=er,t.ReadableStreamDefaultController=It,t.ReadableStreamDefaultReader=et,t.TransformStream=en,t.TransformStreamDefaultController=dr,t.WritableStream=or,t.WritableStreamDefaultController=Lt,t.WritableStreamDefaultWriter=ir,Object.defineProperty(t,"__esModule",{value:!0})}))});var Ai=ut(()=>{if(!globalThis.ReadableStream)try{let t=require("node:process"),{emitWarning:r}=t;try{t.emitWarning=()=>{},Object.assign(globalThis,require("node:stream/web")),t.emitWarning=r}catch(n){throw t.emitWarning=r,n}}catch{Object.assign(globalThis,Pi())}try{let{Blob:t}=require("buffer");t&&!t.prototype.stream&&(t.prototype.stream=function(n){let o=0,i=this;return new ReadableStream({type:"bytes",async pull(u){let m=await i.slice(o,Math.min(i.size,o+65536)).arrayBuffer();o+=m.byteLength,u.enqueue(new Uint8Array(m)),o===i.size&&u.close()}})})}catch{}});async function*sa(t,r=!0){for(let n of t)if("stream"in n)yield*n.stream();else if(ArrayBuffer.isView(n))if(r){let o=n.byteOffset,i=n.byteOffset+n.byteLength;for(;o!==i;){let u=Math.min(i-o,Di),f=n.buffer.slice(o,o+u);o+=f.byteLength,yield new Uint8Array(f)}}else yield n;else{let o=0,i=n;for(;o!==i.size;){let f=await i.slice(o,Math.min(i.size,o+Di)).arrayBuffer();o+=f.byteLength,yield new Uint8Array(f)}}}var bd,Di,Oi,Bl,He,gr=cr(()=>{bd=Ee(Ai(),1);Di=65536;Oi=class ua{#e=[];#t="";#r=0;#n="transparent";constructor(r=[],n={}){if(typeof r!="object"||r===null)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if(typeof r[Symbol.iterator]!="function")throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if(typeof n!="object"&&typeof n!="function")throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");n===null&&(n={});let o=new TextEncoder;for(let u of r){let f;ArrayBuffer.isView(u)?f=new Uint8Array(u.buffer.slice(u.byteOffset,u.byteOffset+u.byteLength)):u instanceof ArrayBuffer?f=new Uint8Array(u.slice(0)):u instanceof ua?f=u:f=o.encode(`${u}`);let m=ArrayBuffer.isView(f)?f.byteLength:f.size;m&&(this.#r+=m,this.#e.push(f))}this.#n=`${n.endings===void 0?"transparent":n.endings}`;let i=n.type===void 0?"":String(n.type);this.#t=/^[\x20-\x7E]*$/.test(i)?i:""}get size(){return this.#r}get type(){return this.#t}async text(){let r=new TextDecoder,n="";for await(let o of sa(this.#e,!1))n+=r.decode(o,{stream:!0});return n+=r.decode(),n}async arrayBuffer(){let r=new Uint8Array(this.size),n=0;for await(let o of sa(this.#e,!1))r.set(o,n),n+=o.length;return r.buffer}stream(){let r=sa(this.#e,!0);return new globalThis.ReadableStream({type:"bytes",async pull(n){let o=await r.next();o.done?n.close():n.enqueue(o.value)},async cancel(){await r.return()}})}slice(r=0,n=this.size,o=""){let{size:i}=this,u=r<0?Math.max(i+r,0):Math.min(r,i),f=n<0?Math.max(i+n,0):Math.min(n,i),m=Math.max(f-u,0),p=this.#e,c=[],_=0;for(let y of p){if(_>=m)break;let w=ArrayBuffer.isView(y)?y.byteLength:y.size;if(u&&w<=u)u-=w,f-=w;else{let S;ArrayBuffer.isView(y)?(S=y.subarray(u,Math.min(w,f)),_+=S.byteLength):(S=y.slice(u,Math.min(w,f)),_+=S.size),f-=w,c.push(S),u=0}}let v=new ua([],{type:String(o).toLowerCase()});return v.#r=m,v.#e=c,v}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](r){return r&&typeof r=="object"&&typeof r.constructor=="function"&&(typeof r.stream=="function"||typeof r.arrayBuffer=="function")&&/^(Blob|File)$/.test(r[Symbol.toStringTag])}};Object.defineProperties(Oi.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});Bl=Oi,He=Bl});var xl,Ml,Ht,la=cr(()=>{gr();xl=class extends He{#e=0;#t="";constructor(r,n,o={}){if(arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(r,o),o===null&&(o={});let i=o.lastModified===void 0?Date.now():Number(o.lastModified);Number.isNaN(i)||(this.#e=i),this.#t=String(n)}get name(){return this.#t}get lastModified(){return this.#e}get[Symbol.toStringTag](){return"File"}static[Symbol.hasInstance](r){return!!r&&r instanceof He&&/^(File)$/.test(r[Symbol.toStringTag])}},Ml=xl,Ht=Ml});function Fi(t,r=He){var n=`${ki()}${ki()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),o=[],i=`--${n}\r
Content-Disposition: form-data; name="`;return t.forEach((u,f)=>typeof u=="string"?o.push(i+fa(f)+`"\r
\r
${u.replace(/\r(?!\n)|(?<!\r)\n/g,`\r
`)}\r
`):o.push(i+fa(f)+`"; filename="${fa(u.name,1)}"\r
Content-Type: ${u.type||"application/octet-stream"}\r
\r
`,u,`\r
`)),o.push(`--${n}--`),new r(o,{type:"multipart/form-data; boundary="+n})}var yr,ql,Ll,ki,Il,Wi,fa,Rt,Tt,hn=cr(()=>{gr();la();({toStringTag:yr,iterator:ql,hasInstance:Ll}=Symbol),ki=Math.random,Il="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),Wi=(t,r,n)=>(t+="",/^(Blob|File)$/.test(r&&r[yr])?[(n=n!==void 0?n+"":r[yr]=="File"?r.name:"blob",t),r.name!==n||r[yr]=="blob"?new Ht([r],n,r):r]:[t,r+""]),fa=(t,r)=>(r?t:t.replace(/\r?\n|\r/g,`\r
`)).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),Rt=(t,r,n)=>{if(r.length<n)throw new TypeError(`Failed to execute '${t}' on 'FormData': ${n} arguments required, but only ${r.length} present.`)},Tt=class{#e=[];constructor(...r){if(r.length)throw new TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[yr](){return"FormData"}[ql](){return this.entries()}static[Ll](r){return r&&typeof r=="object"&&r[yr]==="FormData"&&!Il.some(n=>typeof r[n]!="function")}append(...r){Rt("append",arguments,2),this.#e.push(Wi(...r))}delete(r){Rt("delete",arguments,1),r+="",this.#e=this.#e.filter(([n])=>n!==r)}get(r){Rt("get",arguments,1),r+="";for(var n=this.#e,o=n.length,i=0;i<o;i++)if(n[i][0]===r)return n[i][1];return null}getAll(r,n){return Rt("getAll",arguments,1),n=[],r+="",this.#e.forEach(o=>o[0]===r&&n.push(o[1])),n}has(r){return Rt("has",arguments,1),r+="",this.#e.some(n=>n[0]===r)}forEach(r,n){Rt("forEach",arguments,1);for(var[o,i]of this)r.call(n,i,o,this)}set(...r){Rt("set",arguments,2);var n=[],o=!0;r=Wi(...r),this.#e.forEach(i=>{i[0]===r[0]?o&&(o=!n.push(r)):n.push(i)}),o&&n.push(r),this.#e=n}*entries(){yield*this.#e}*keys(){for(var[r]of this)yield r}*values(){for(var[,r]of this)yield r}}});var qi=ut((Dd,Mi)=>{if(!globalThis.DOMException)try{let{MessageChannel:t}=require("worker_threads"),r=new t().port1,n=new ArrayBuffer;r.postMessage(n,[n,n])}catch(t){t.constructor.name==="DOMException"&&(globalThis.DOMException=t.constructor)}Mi.exports=globalThis.DOMException});var bn,Ul,Wd,ca=cr(()=>{bn=require("node:fs"),Ul=Ee(qi(),1);la();gr();({stat:Wd}=bn.promises)});var Ii={};zo(Ii,{toFormData:()=>Vl});function Yl(t){let r=t.match(/\bfilename=("(.*?)"|([^()<>@,;:\\"/[\]?={}\s\t]+))($|;\s)/i);if(!r)return;let n=r[2]||r[3]||"",o=n.slice(n.lastIndexOf("\\")+1);return o=o.replace(/%22/g,'"'),o=o.replace(/&#(\d{4});/g,(i,u)=>String.fromCharCode(u)),o}async function Vl(t,r){if(!/multipart/i.test(r))throw new TypeError("Failed to fetch");let n=r.match(/boundary=(?:"([^"]+)"|([^;]+))/i);if(!n)throw new TypeError("no or bad content-type header, no multipart boundary");let o=new ma(n[1]||n[2]),i,u,f,m,p,c,_=[],v=new Tt,y=g=>{f+=T.decode(g,{stream:!0})},w=g=>{_.push(g)},S=()=>{let g=new Ht(_,c,{type:p});v.append(m,g)},E=()=>{v.append(m,f)},T=new TextDecoder("utf-8");T.decode(),o.onPartBegin=function(){o.onPartData=y,o.onPartEnd=E,i="",u="",f="",m="",p="",c=null,_.length=0},o.onHeaderField=function(g){i+=T.decode(g,{stream:!0})},o.onHeaderValue=function(g){u+=T.decode(g,{stream:!0})},o.onHeaderEnd=function(){if(u+=T.decode(),i=i.toLowerCase(),i==="content-disposition"){let g=u.match(/\bname=("([^"]*)"|([^()<>@,;:\\"/[\]?={}\s\t]+))/i);g&&(m=g[2]||g[3]||""),c=Yl(u),c&&(o.onPartData=w,o.onPartEnd=S)}else i==="content-type"&&(p=u);u="",i=""};for await(let g of t)o.write(g);return o.end(),v}var Fe,z,Li,lt,gn,yn,zl,Sr,Nl,jl,$l,Hl,Ct,ma,Ui=cr(()=>{ca();hn();Fe=0,z={START_BOUNDARY:Fe++,HEADER_FIELD_START:Fe++,HEADER_FIELD:Fe++,HEADER_VALUE_START:Fe++,HEADER_VALUE:Fe++,HEADER_VALUE_ALMOST_DONE:Fe++,HEADERS_ALMOST_DONE:Fe++,PART_DATA_START:Fe++,PART_DATA:Fe++,END:Fe++},Li=1,lt={PART_BOUNDARY:Li,LAST_BOUNDARY:Li*=2},gn=10,yn=13,zl=32,Sr=45,Nl=58,jl=97,$l=122,Hl=t=>t|32,Ct=()=>{},ma=class{constructor(r){this.index=0,this.flags=0,this.onHeaderEnd=Ct,this.onHeaderField=Ct,this.onHeadersEnd=Ct,this.onHeaderValue=Ct,this.onPartBegin=Ct,this.onPartData=Ct,this.onPartEnd=Ct,this.boundaryChars={},r=`\r
--`+r;let n=new Uint8Array(r.length);for(let o=0;o<r.length;o++)n[o]=r.charCodeAt(o),this.boundaryChars[n[o]]=!0;this.boundary=n,this.lookbehind=new Uint8Array(this.boundary.length+8),this.state=z.START_BOUNDARY}write(r){let n=0,o=r.length,i=this.index,{lookbehind:u,boundary:f,boundaryChars:m,index:p,state:c,flags:_}=this,v=this.boundary.length,y=v-1,w=r.length,S,E,T=P=>{this[P+"Mark"]=n},g=P=>{delete this[P+"Mark"]},D=(P,q,O,ee)=>{(q===void 0||q!==O)&&this[P](ee&&ee.subarray(q,O))},I=(P,q)=>{let O=P+"Mark";O in this&&(q?(D(P,this[O],n,r),delete this[O]):(D(P,this[O],r.length,r),this[O]=0))};for(n=0;n<o;n++)switch(S=r[n],c){case z.START_BOUNDARY:if(p===f.length-2){if(S===Sr)_|=lt.LAST_BOUNDARY;else if(S!==yn)return;p++;break}else if(p-1===f.length-2){if(_&lt.LAST_BOUNDARY&&S===Sr)c=z.END,_=0;else if(!(_&lt.LAST_BOUNDARY)&&S===gn)p=0,D("onPartBegin"),c=z.HEADER_FIELD_START;else return;break}S!==f[p+2]&&(p=-2),S===f[p+2]&&p++;break;case z.HEADER_FIELD_START:c=z.HEADER_FIELD,T("onHeaderField"),p=0;case z.HEADER_FIELD:if(S===yn){g("onHeaderField"),c=z.HEADERS_ALMOST_DONE;break}if(p++,S===Sr)break;if(S===Nl){if(p===1)return;I("onHeaderField",!0),c=z.HEADER_VALUE_START;break}if(E=Hl(S),E<jl||E>$l)return;break;case z.HEADER_VALUE_START:if(S===zl)break;T("onHeaderValue"),c=z.HEADER_VALUE;case z.HEADER_VALUE:S===yn&&(I("onHeaderValue",!0),D("onHeaderEnd"),c=z.HEADER_VALUE_ALMOST_DONE);break;case z.HEADER_VALUE_ALMOST_DONE:if(S!==gn)return;c=z.HEADER_FIELD_START;break;case z.HEADERS_ALMOST_DONE:if(S!==gn)return;D("onHeadersEnd"),c=z.PART_DATA_START;break;case z.PART_DATA_START:c=z.PART_DATA,T("onPartData");case z.PART_DATA:if(i=p,p===0){for(n+=y;n<w&&!(r[n]in m);)n+=v;n-=y,S=r[n]}if(p<f.length)f[p]===S?(p===0&&I("onPartData",!0),p++):p=0;else if(p===f.length)p++,S===yn?_|=lt.PART_BOUNDARY:S===Sr?_|=lt.LAST_BOUNDARY:p=0;else if(p-1===f.length)if(_&lt.PART_BOUNDARY){if(p=0,S===gn){_&=~lt.PART_BOUNDARY,D("onPartEnd"),D("onPartBegin"),c=z.HEADER_FIELD_START;break}}else _&lt.LAST_BOUNDARY&&S===Sr?(D("onPartEnd"),c=z.END,_=0):p=0;if(p>0)u[p-1]=S;else if(i>0){let P=new Uint8Array(u.buffer,u.byteOffset,u.byteLength);D("onPartData",0,i,P),i=0,T("onPartData"),n--}break;case z.END:break;default:throw new Error(`Unexpected state entered: ${c}`)}I("onHeaderField"),I("onHeaderValue"),I("onPartData"),this.index=p,this.state=c,this.flags=_}end(){if(this.state===z.HEADER_FIELD_START&&this.index===0||this.state===z.PART_DATA&&this.index===this.boundary.length)this.onPartEnd();else if(this.state!==z.END)throw new Error("MultipartParser.end(): stream ended unexpectedly")}}});var rd={};zo(rd,{default:()=>ks});module.exports=rl(rd);var Er=require("@raycast/api");var ls=Ee(ln());var ss=require("react");var L=require("react");function fi(t,r,n,o){function i(u){return u instanceof n?u:new n(function(f){f(u)})}return new(n||(n=Promise))(function(u,f){function m(_){try{c(o.next(_))}catch(v){f(v)}}function p(_){try{c(o.throw(_))}catch(v){f(v)}}function c(_){_.done?u(_.value):i(_.value).then(m,p)}c((o=o.apply(t,r||[])).next())})}function di(t,r){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},o,i,u,f;return f={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function m(c){return function(_){return p([c,_])}}function p(c){if(o)throw new TypeError("Generator is already executing.");for(;n;)try{if(o=1,i&&(u=c[0]&2?i.return:c[0]?i.throw||((u=i.return)&&u.call(i),0):i.next)&&!(u=u.call(i,c[1])).done)return u;switch(i=0,u&&(c=[c[0]&2,u.value]),c[0]){case 0:case 1:u=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!u||c[1]>u[0]&&c[1]<u[3])){n.label=c[1];break}if(c[0]===6&&n.label<u[1]){n.label=u[1],u=c;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(c);break}u[2]&&n.ops.pop(),n.trys.pop();continue}c=r.call(t,n)}catch(_){c=[6,_],i=0}finally{o=u=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}var We=function(){},te=We(),mr=Object,ae=function(t){return t===te},vt=function(t){return typeof t=="function"},$e=function(t,r){return mr.assign({},t,r)},aa="undefined",oa=function(){return typeof window!=aa},cl=function(){return typeof document!=aa},ml=function(){return oa()&&typeof window.requestAnimationFrame!=aa},fn=new WeakMap,hl=0,br=function(t){var r=typeof t,n=t&&t.constructor,o=n==Date,i,u;if(mr(t)===t&&!o&&n!=RegExp){if(i=fn.get(t),i)return i;if(i=++hl+"~",fn.set(t,i),n==Array){for(i="@",u=0;u<t.length;u++)i+=br(t[u])+",";fn.set(t,i)}if(n==mr){i="#";for(var f=mr.keys(t).sort();!ae(u=f.pop());)ae(t[u])||(i+=u+":"+br(t[u])+",");fn.set(t,i)}}else i=o?t.toJSON():r=="symbol"?t.toString():r=="string"?JSON.stringify(t):""+t;return i},Zn=!0,pl=function(){return Zn},ci=oa(),ia=cl(),ea=ci&&window.addEventListener?window.addEventListener.bind(window):We,bl=ia?document.addEventListener.bind(document):We,ta=ci&&window.removeEventListener?window.removeEventListener.bind(window):We,gl=ia?document.removeEventListener.bind(document):We,yl=function(){var t=ia&&document.visibilityState;return ae(t)||t!=="hidden"},wl=function(t){return bl("visibilitychange",t),ea("focus",t),function(){gl("visibilitychange",t),ta("focus",t)}},Sl=function(t){var r=function(){Zn=!0,t()},n=function(){Zn=!1};return ea("online",r),ea("offline",n),function(){ta("online",r),ta("offline",n)}},_l={isOnline:pl,isVisible:yl},vl={initFocus:wl,initReconnect:Sl},dn=!oa()||"Deno"in window,Rl=function(t){return ml()?window.requestAnimationFrame(t):setTimeout(t,1)},hr=dn?L.useEffect:L.useLayoutEffect,Kn=typeof navigator<"u"&&navigator.connection,si=!dn&&Kn&&(["slow-2g","2g"].includes(Kn.effectiveType)||Kn.saveData),mi=function(t){if(vt(t))try{t=t()}catch{t=""}var r=[].concat(t);t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?br(t):"";var n=t?"$swr$"+t:"";return[t,r,n]},_t=new WeakMap,hi=0,pi=1,bi=2,pr=function(t,r,n,o,i,u,f){f===void 0&&(f=!0);var m=_t.get(t),p=m[0],c=m[1],_=m[3],v=p[r],y=c[r];if(f&&y)for(var w=0;w<y.length;++w)y[w](n,o,i);return u&&(delete _[r],v&&v[0])?v[0](bi).then(function(){return t.get(r)}):t.get(r)},Tl=0,ra=function(){return++Tl},gi=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return fi(void 0,void 0,void 0,function(){var n,o,i,u,f,m,p,c,_,v,y,w,S,E,T,g,D,I,P,q;return di(this,function(O){switch(O.label){case 0:if(n=t[0],o=t[1],i=t[2],u=t[3],f=typeof u=="boolean"?{revalidate:u}:u||{},m=ae(f.populateCache)?!0:f.populateCache,p=f.revalidate!==!1,c=f.rollbackOnError!==!1,_=f.optimisticData,v=mi(o),y=v[0],w=v[2],!y)return[2];if(S=_t.get(n),E=S[2],t.length<3)return[2,pr(n,y,n.get(y),te,te,p,!0)];if(T=i,D=ra(),E[y]=[D,0],I=!ae(_),P=n.get(y),I&&(n.set(y,_),pr(n,y,_)),vt(T))try{T=T(n.get(y))}catch(ee){g=ee}return T&&vt(T.then)?[4,T.catch(function(ee){g=ee})]:[3,2];case 1:if(T=O.sent(),D!==E[y][0]){if(g)throw g;return[2,T]}else g&&I&&c&&(m=!0,T=P,n.set(y,P));O.label=2;case 2:return m&&(g||(vt(m)&&(T=m(T,P)),n.set(y,T)),n.set(w,$e(n.get(w),{error:g}))),E[y][1]=ra(),[4,pr(n,y,T,g,te,p,!!m)];case 3:if(q=O.sent(),g)throw g;return[2,m?q:T]}})})},ui=function(t,r){for(var n in t)t[n][0]&&t[n][0](r)},yi=function(t,r){if(!_t.has(t)){var n=$e(vl,r),o={},i=gi.bind(te,t),u=We;if(_t.set(t,[o,{},{},{},i]),!dn){var f=n.initFocus(setTimeout.bind(te,ui.bind(te,o,hi))),m=n.initReconnect(setTimeout.bind(te,ui.bind(te,o,pi)));u=function(){f&&f(),m&&m(),_t.delete(t)}}return[t,i,u]}return[t,_t.get(t)[4]]},Cl=function(t,r,n,o,i){var u=n.errorRetryCount,f=i.retryCount,m=~~((Math.random()+.5)*(1<<(f<8?f:8)))*n.errorRetryInterval;!ae(u)&&f>u||setTimeout(o,m,i)},wi=yi(new Map),Si=wi[0],El=wi[1],_i=$e({onLoadingSlow:We,onSuccess:We,onError:We,onErrorRetry:Cl,onDiscarded:We,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:si?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:si?5e3:3e3,compare:function(t,r){return br(t)==br(r)},isPaused:function(){return!1},cache:Si,mutate:El,fallback:{}},_l),vi=function(t,r){var n=$e(t,r);if(r){var o=t.use,i=t.fallback,u=r.use,f=r.fallback;o&&u&&(n.use=o.concat(u)),i&&f&&(n.fallback=$e(i,f))}return n},na=(0,L.createContext)({}),Pl=function(t){var r=t.value,n=vi((0,L.useContext)(na),r),o=r&&r.provider,i=(0,L.useState)(function(){return o?yi(o(n.cache||Si),r):te})[0];return i&&(n.cache=i[0],n.mutate=i[1]),hr(function(){return i?i[2]:te},[]),(0,L.createElement)(na.Provider,$e(t,{value:n}))},Al=function(t,r){var n=(0,L.useState)({})[1],o=(0,L.useRef)(t),i=(0,L.useRef)({data:!1,error:!1,isValidating:!1}),u=(0,L.useCallback)(function(f){var m=!1,p=o.current;for(var c in f){var _=c;p[_]!==f[_]&&(p[_]=f[_],i.current[_]&&(m=!0))}m&&!r.current&&n({})},[]);return hr(function(){o.current=t}),[o,i.current,u]},Dl=function(t){return vt(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}]},Ol=function(){return $e(_i,(0,L.useContext)(na))},kl=function(t){return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var i=Ol(),u=Dl(n),f=u[0],m=u[1],p=u[2],c=vi(i,p),_=t,v=c.use;if(v)for(var y=v.length;y-- >0;)_=v[y](_);return _(f,m||c.fetcher,c)}},li=function(t,r,n){var o=r[t]||(r[t]=[]);return o.push(n),function(){var i=o.indexOf(n);i>=0&&(o[i]=o[o.length-1],o.pop())}},Jn={dedupe:!0},Wl=function(t,r,n){var o=n.cache,i=n.compare,u=n.fallbackData,f=n.suspense,m=n.revalidateOnMount,p=n.refreshInterval,c=n.refreshWhenHidden,_=n.refreshWhenOffline,v=_t.get(o),y=v[0],w=v[1],S=v[2],E=v[3],T=mi(t),g=T[0],D=T[1],I=T[2],P=(0,L.useRef)(!1),q=(0,L.useRef)(!1),O=(0,L.useRef)(g),ee=(0,L.useRef)(r),X=(0,L.useRef)(n),V=function(){return X.current},mt=function(){return V().isVisible()&&V().isOnline()},oe=function(N){return o.set(I,$e(o.get(I),N))},Me=o.get(g),Xt=ae(u)?n.fallback[g]:u,be=ae(Me)?Xt:Me,Pr=o.get(I)||{},qe=Pr.error,Ar=!P.current,Kt=function(){return Ar&&!ae(m)?m:V().isPaused()?!1:f?!ae(be):ae(be)||n.revalidateIfStale},Dr=function(){return!g||!r?!1:Pr.isValidating?!0:Ar&&Kt()},Wt=Dr(),ht=Al({data:be,error:qe,isValidating:Wt},q),Ae=ht[0],Ft=ht[1],Bt=ht[2],Le=(0,L.useCallback)(function(N){return fi(void 0,void 0,void 0,function(){var ie,re,j,Ie,Ue,ce,K,ve,se,De,Ke,Oe,Je;return di(this,function(Ze){switch(Ze.label){case 0:if(ie=ee.current,!g||!ie||q.current||V().isPaused())return[2,!1];Ie=!0,Ue=N||{},ce=!E[g]||!Ue.dedupe,K=function(){return!q.current&&g===O.current&&P.current},ve=function(){var et=E[g];et&&et[1]===j&&delete E[g]},se={isValidating:!1},De=function(){oe({isValidating:!1}),K()&&Bt(se)},oe({isValidating:!0}),Bt({isValidating:!0}),Ze.label=1;case 1:return Ze.trys.push([1,3,,4]),ce&&(pr(o,g,Ae.current.data,Ae.current.error,!0),n.loadingTimeout&&!o.get(g)&&setTimeout(function(){Ie&&K()&&V().onLoadingSlow(g,n)},n.loadingTimeout),E[g]=[ie.apply(void 0,D),ra()]),Je=E[g],re=Je[0],j=Je[1],[4,re];case 2:return re=Ze.sent(),ce&&setTimeout(ve,n.dedupingInterval),!E[g]||E[g][1]!==j?(ce&&K()&&V().onDiscarded(g),[2,!1]):(oe({error:te}),se.error=te,Ke=S[g],!ae(Ke)&&(j<=Ke[0]||j<=Ke[1]||Ke[1]===0)?(De(),ce&&K()&&V().onDiscarded(g),[2,!1]):(i(Ae.current.data,re)?se.data=Ae.current.data:se.data=re,i(o.get(g),re)||o.set(g,re),ce&&K()&&V().onSuccess(re,g,n),[3,4]));case 3:return Oe=Ze.sent(),ve(),V().isPaused()||(oe({error:Oe}),se.error=Oe,ce&&K()&&(V().onError(Oe,g,n),(typeof n.shouldRetryOnError=="boolean"&&n.shouldRetryOnError||vt(n.shouldRetryOnError)&&n.shouldRetryOnError(Oe))&&mt()&&V().onErrorRetry(Oe,g,n,Le,{retryCount:(Ue.retryCount||0)+1,dedupe:!0}))),[3,4];case 4:return Ie=!1,De(),K()&&ce&&pr(o,g,se.data,se.error,!1),[2,!0]}})})},[g]),_e=(0,L.useCallback)(gi.bind(te,o,function(){return O.current}),[]);if(hr(function(){ee.current=r,X.current=n}),hr(function(){if(g){var N=g!==O.current,ie=Le.bind(te,Jn),re=function(K,ve,se){Bt($e({error:ve,isValidating:se},i(Ae.current.data,K)?te:{data:K}))},j=0,Ie=function(K){if(K==hi){var ve=Date.now();V().revalidateOnFocus&&ve>j&&mt()&&(j=ve+V().focusThrottleInterval,ie())}else if(K==pi)V().revalidateOnReconnect&&mt()&&ie();else if(K==bi)return Le()},Ue=li(g,w,re),ce=li(g,y,Ie);return q.current=!1,O.current=g,P.current=!0,N&&Bt({data:be,error:qe,isValidating:Wt}),Kt()&&(ae(be)||dn?ie():Rl(ie)),function(){q.current=!0,Ue(),ce()}}},[g,Le]),hr(function(){var N;function ie(){var j=vt(p)?p(be):p;j&&N!==-1&&(N=setTimeout(re,j))}function re(){!Ae.current.error&&(c||V().isVisible())&&(_||V().isOnline())?Le(Jn).then(ie):ie()}return ie(),function(){N&&(clearTimeout(N),N=-1)}},[p,c,_,Le]),(0,L.useDebugValue)(be),f&&ae(be)&&g)throw ee.current=r,X.current=n,q.current=!1,ae(qe)?Le(Jn):qe;return{mutate:_e,get data(){return Ft.data=!0,be},get error(){return Ft.error=!0,qe},get isValidating(){return Ft.isValidating=!0,Wt}}},fd=mr.defineProperty(Pl,"default",{value:_i});var Ri=kl(Wl);var Ti=require("@raycast/api"),cn=()=>(0,Ti.getPreferenceValues)();var ts=Ee(require("node:http"),1),rs=Ee(require("node:https"),1),Pt=Ee(require("node:zlib"),1),pe=Ee(require("node:stream"),1),vr=require("node:buffer");function Fl(t){if(!/^data:/i.test(t))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');t=t.replace(/\r?\n/g,"");let r=t.indexOf(",");if(r===-1||r<=4)throw new TypeError("malformed data: URI");let n=t.substring(5,r).split(";"),o="",i=!1,u=n[0]||"text/plain",f=u;for(let _=1;_<n.length;_++)n[_]==="base64"?i=!0:(f+=`;${n[_]}`,n[_].indexOf("charset=")===0&&(o=n[_].substring(8)));!n[0]&&!o.length&&(f+=";charset=US-ASCII",o="US-ASCII");let m=i?"base64":"ascii",p=unescape(t.substring(r+1)),c=Buffer.from(p,m);return c.type=u,c.typeFull=f,c.charset=o,c}var Ci=Fl;var ye=Ee(require("node:stream"),1),Ve=require("node:util"),he=require("node:buffer");gr();hn();var Ye=class extends Error{constructor(r,n){super(r),Error.captureStackTrace(this,this.constructor),this.type=n}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};var fe=class extends Ye{constructor(r,n,o){super(r,n),o&&(this.code=this.errno=o.code,this.erroredSysCall=o.syscall)}};var pn=Symbol.toStringTag,da=t=>typeof t=="object"&&typeof t.append=="function"&&typeof t.delete=="function"&&typeof t.get=="function"&&typeof t.getAll=="function"&&typeof t.has=="function"&&typeof t.set=="function"&&typeof t.sort=="function"&&t[pn]==="URLSearchParams",wr=t=>t&&typeof t=="object"&&typeof t.arrayBuffer=="function"&&typeof t.type=="string"&&typeof t.stream=="function"&&typeof t.constructor=="function"&&/^(Blob|File)$/.test(t[pn]),Bi=t=>typeof t=="object"&&(t[pn]==="AbortSignal"||t[pn]==="EventTarget"),xi=(t,r)=>{let n=new URL(r).hostname,o=new URL(t).hostname;return n===o||n.endsWith(`.${o}`)};var Ql=(0,Ve.promisify)(ye.default.pipeline),de=Symbol("Body internals"),Be=class{constructor(r,{size:n=0}={}){let o=null;r===null?r=null:da(r)?r=he.Buffer.from(r.toString()):wr(r)||he.Buffer.isBuffer(r)||(Ve.types.isAnyArrayBuffer(r)?r=he.Buffer.from(r):ArrayBuffer.isView(r)?r=he.Buffer.from(r.buffer,r.byteOffset,r.byteLength):r instanceof ye.default||(r instanceof Tt?(r=Fi(r),o=r.type.split("=")[1]):r=he.Buffer.from(String(r))));let i=r;he.Buffer.isBuffer(r)?i=ye.default.Readable.from(r):wr(r)&&(i=ye.default.Readable.from(r.stream())),this[de]={body:r,stream:i,boundary:o,disturbed:!1,error:null},this.size=n,r instanceof ye.default&&r.on("error",u=>{let f=u instanceof Ye?u:new fe(`Invalid response body while trying to fetch ${this.url}: ${u.message}`,"system",u);this[de].error=f})}get body(){return this[de].stream}get bodyUsed(){return this[de].disturbed}async arrayBuffer(){let{buffer:r,byteOffset:n,byteLength:o}=await ha(this);return r.slice(n,n+o)}async formData(){let r=this.headers.get("content-type");if(r.startsWith("application/x-www-form-urlencoded")){let o=new Tt,i=new URLSearchParams(await this.text());for(let[u,f]of i)o.append(u,f);return o}let{toFormData:n}=await Promise.resolve().then(()=>(Ui(),Ii));return n(this.body,r)}async blob(){let r=this.headers&&this.headers.get("content-type")||this[de].body&&this[de].body.type||"",n=await this.arrayBuffer();return new He([n],{type:r})}async json(){let r=await this.text();return JSON.parse(r)}async text(){let r=await ha(this);return new TextDecoder().decode(r)}buffer(){return ha(this)}};Be.prototype.buffer=(0,Ve.deprecate)(Be.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer");Object.defineProperties(Be.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},data:{get:(0,Ve.deprecate)(()=>{},"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});async function ha(t){if(t[de].disturbed)throw new TypeError(`body used already for: ${t.url}`);if(t[de].disturbed=!0,t[de].error)throw t[de].error;let{body:r}=t;if(r===null)return he.Buffer.alloc(0);if(!(r instanceof ye.default))return he.Buffer.alloc(0);let n=[],o=0;try{for await(let i of r){if(t.size>0&&o+i.length>t.size){let u=new fe(`content size at ${t.url} over limit: ${t.size}`,"max-size");throw r.destroy(u),u}o+=i.length,n.push(i)}}catch(i){throw i instanceof Ye?i:new fe(`Invalid response body while trying to fetch ${t.url}: ${i.message}`,"system",i)}if(r.readableEnded===!0||r._readableState.ended===!0)try{return n.every(i=>typeof i=="string")?he.Buffer.from(n.join("")):he.Buffer.concat(n,o)}catch(i){throw new fe(`Could not create Buffer from response body for ${t.url}: ${i.message}`,"system",i)}else throw new fe(`Premature close of server response while trying to fetch ${t.url}`)}var Yt=(t,r)=>{let n,o,{body:i}=t[de];if(t.bodyUsed)throw new Error("cannot clone body after it is used");return i instanceof ye.default&&typeof i.getBoundary!="function"&&(n=new ye.PassThrough({highWaterMark:r}),o=new ye.PassThrough({highWaterMark:r}),i.pipe(n),i.pipe(o),t[de].stream=n,i=o),i},Gl=(0,Ve.deprecate)(t=>t.getBoundary(),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),wn=(t,r)=>t===null?null:typeof t=="string"?"text/plain;charset=UTF-8":da(t)?"application/x-www-form-urlencoded;charset=UTF-8":wr(t)?t.type||null:he.Buffer.isBuffer(t)||Ve.types.isAnyArrayBuffer(t)||ArrayBuffer.isView(t)?null:t instanceof Tt?`multipart/form-data; boundary=${r[de].boundary}`:t&&typeof t.getBoundary=="function"?`multipart/form-data;boundary=${Gl(t)}`:t instanceof ye.default?null:"text/plain;charset=UTF-8",zi=t=>{let{body:r}=t[de];return r===null?0:wr(r)?r.size:he.Buffer.isBuffer(r)?r.length:r&&typeof r.getLengthSync=="function"&&r.hasKnownLength&&r.hasKnownLength()?r.getLengthSync():null},Ni=async(t,{body:r})=>{r===null?t.end():await Ql(r,t)};var pa=require("node:util"),_r=Ee(require("node:http"),1),Sn=typeof _r.default.validateHeaderName=="function"?_r.default.validateHeaderName:t=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(t)){let r=new TypeError(`Header name must be a valid HTTP token [${t}]`);throw Object.defineProperty(r,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),r}},ba=typeof _r.default.validateHeaderValue=="function"?_r.default.validateHeaderValue:(t,r)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(r)){let n=new TypeError(`Invalid character in header content ["${t}"]`);throw Object.defineProperty(n,"code",{value:"ERR_INVALID_CHAR"}),n}},we=class t extends URLSearchParams{constructor(r){let n=[];if(r instanceof t){let o=r.raw();for(let[i,u]of Object.entries(o))n.push(...u.map(f=>[i,f]))}else if(r!=null)if(typeof r=="object"&&!pa.types.isBoxedPrimitive(r)){let o=r[Symbol.iterator];if(o==null)n.push(...Object.entries(r));else{if(typeof o!="function")throw new TypeError("Header pairs must be iterable");n=[...r].map(i=>{if(typeof i!="object"||pa.types.isBoxedPrimitive(i))throw new TypeError("Each header pair must be an iterable object");return[...i]}).map(i=>{if(i.length!==2)throw new TypeError("Each header pair must be a name/value tuple");return[...i]})}}else throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");return n=n.length>0?n.map(([o,i])=>(Sn(o),ba(o,String(i)),[String(o).toLowerCase(),String(i)])):void 0,super(n),new Proxy(this,{get(o,i,u){switch(i){case"append":case"set":return(f,m)=>(Sn(f),ba(f,String(m)),URLSearchParams.prototype[i].call(o,String(f).toLowerCase(),String(m)));case"delete":case"has":case"getAll":return f=>(Sn(f),URLSearchParams.prototype[i].call(o,String(f).toLowerCase()));case"keys":return()=>(o.sort(),new Set(URLSearchParams.prototype.keys.call(o)).keys());default:return Reflect.get(o,i,u)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(r){let n=this.getAll(r);if(n.length===0)return null;let o=n.join(", ");return/^content-encoding$/i.test(r)&&(o=o.toLowerCase()),o}forEach(r,n=void 0){for(let o of this.keys())Reflect.apply(r,n,[this.get(o),o,this])}*values(){for(let r of this.keys())yield this.get(r)}*entries(){for(let r of this.keys())yield[r,this.get(r)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((r,n)=>(r[n]=this.getAll(n),r),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((r,n)=>{let o=this.getAll(n);return n==="host"?r[n]=o[0]:r[n]=o.length>1?o:o[0],r},{})}};Object.defineProperties(we.prototype,["get","entries","forEach","values"].reduce((t,r)=>(t[r]={enumerable:!0},t),{}));function ji(t=[]){return new we(t.reduce((r,n,o,i)=>(o%2===0&&r.push(i.slice(o,o+2)),r),[]).filter(([r,n])=>{try{return Sn(r),ba(r,String(n)),!0}catch{return!1}}))}var Xl=new Set([301,302,303,307,308]),_n=t=>Xl.has(t);var Pe=Symbol("Response internals"),Se=class t extends Be{constructor(r=null,n={}){super(r,n);let o=n.status!=null?n.status:200,i=new we(n.headers);if(r!==null&&!i.has("Content-Type")){let u=wn(r,this);u&&i.append("Content-Type",u)}this[Pe]={type:"default",url:n.url,status:o,statusText:n.statusText||"",headers:i,counter:n.counter,highWaterMark:n.highWaterMark}}get type(){return this[Pe].type}get url(){return this[Pe].url||""}get status(){return this[Pe].status}get ok(){return this[Pe].status>=200&&this[Pe].status<300}get redirected(){return this[Pe].counter>0}get statusText(){return this[Pe].statusText}get headers(){return this[Pe].headers}get highWaterMark(){return this[Pe].highWaterMark}clone(){return new t(Yt(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(r,n=302){if(!_n(n))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new t(null,{headers:{location:new URL(r).toString()},status:n})}static error(){let r=new t(null,{status:0,statusText:""});return r[Pe].type="error",r}get[Symbol.toStringTag](){return"Response"}};Object.defineProperties(Se.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});var Ji=require("node:url"),Zi=require("node:util");var $i=t=>{if(t.search)return t.search;let r=t.href.length-1,n=t.hash||(t.href[r]==="#"?"#":"");return t.href[r-n.length]==="?"?"?":""};var Yi=require("node:net");function Hi(t,r=!1){return t==null||(t=new URL(t),/^(about|blob|data):$/.test(t.protocol))?"no-referrer":(t.username="",t.password="",t.hash="",r&&(t.pathname="",t.search=""),t)}var Vi=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]),Qi="strict-origin-when-cross-origin";function Gi(t){if(!Vi.has(t))throw new TypeError(`Invalid referrerPolicy: ${t}`);return t}function Kl(t){if(/^(http|ws)s:$/.test(t.protocol))return!0;let r=t.host.replace(/(^\[)|(]$)/g,""),n=(0,Yi.isIP)(r);return n===4&&/^127\./.test(r)||n===6&&/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(r)?!0:/^(.+\.)*localhost$/.test(t.host)?!1:t.protocol==="file:"}function Vt(t){return/^about:(blank|srcdoc)$/.test(t)||t.protocol==="data:"||/^(blob|filesystem):$/.test(t.protocol)?!0:Kl(t)}function Xi(t,{referrerURLCallback:r,referrerOriginCallback:n}={}){if(t.referrer==="no-referrer"||t.referrerPolicy==="")return null;let o=t.referrerPolicy;if(t.referrer==="about:client")return"no-referrer";let i=t.referrer,u=Hi(i),f=Hi(i,!0);u.toString().length>4096&&(u=f),r&&(u=r(u)),n&&(f=n(f));let m=new URL(t.url);switch(o){case"no-referrer":return"no-referrer";case"origin":return f;case"unsafe-url":return u;case"strict-origin":return Vt(u)&&!Vt(m)?"no-referrer":f.toString();case"strict-origin-when-cross-origin":return u.origin===m.origin?u:Vt(u)&&!Vt(m)?"no-referrer":f;case"same-origin":return u.origin===m.origin?u:"no-referrer";case"origin-when-cross-origin":return u.origin===m.origin?u:f;case"no-referrer-when-downgrade":return Vt(u)&&!Vt(m)?"no-referrer":u;default:throw new TypeError(`Invalid referrerPolicy: ${o}`)}}function Ki(t){let r=(t.get("referrer-policy")||"").split(/[,\s]+/),n="";for(let o of r)o&&Vi.has(o)&&(n=o);return n}var G=Symbol("Request internals"),vn=t=>typeof t=="object"&&typeof t[G]=="object",Jl=(0,Zi.deprecate)(()=>{},".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)"),Et=class t extends Be{constructor(r,n={}){let o;if(vn(r)?o=new URL(r.url):(o=new URL(r),r={}),o.username!==""||o.password!=="")throw new TypeError(`${o} is an url with embedded credentials.`);let i=n.method||r.method||"GET";if(i=i.toUpperCase(),"data"in n&&Jl(),(n.body!=null||vn(r)&&r.body!==null)&&(i==="GET"||i==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let u=n.body?n.body:vn(r)&&r.body!==null?Yt(r):null;super(u,{size:n.size||r.size||0});let f=new we(n.headers||r.headers||{});if(u!==null&&!f.has("Content-Type")){let c=wn(u,this);c&&f.set("Content-Type",c)}let m=vn(r)?r.signal:null;if("signal"in n&&(m=n.signal),m!=null&&!Bi(m))throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");let p=n.referrer==null?r.referrer:n.referrer;if(p==="")p="no-referrer";else if(p){let c=new URL(p);p=/^about:(\/\/)?client$/.test(c)?"client":c}else p=void 0;this[G]={method:i,redirect:n.redirect||r.redirect||"follow",headers:f,parsedURL:o,signal:m,referrer:p},this.follow=n.follow===void 0?r.follow===void 0?20:r.follow:n.follow,this.compress=n.compress===void 0?r.compress===void 0?!0:r.compress:n.compress,this.counter=n.counter||r.counter||0,this.agent=n.agent||r.agent,this.highWaterMark=n.highWaterMark||r.highWaterMark||16384,this.insecureHTTPParser=n.insecureHTTPParser||r.insecureHTTPParser||!1,this.referrerPolicy=n.referrerPolicy||r.referrerPolicy||""}get method(){return this[G].method}get url(){return(0,Ji.format)(this[G].parsedURL)}get headers(){return this[G].headers}get redirect(){return this[G].redirect}get signal(){return this[G].signal}get referrer(){if(this[G].referrer==="no-referrer")return"";if(this[G].referrer==="client")return"about:client";if(this[G].referrer)return this[G].referrer.toString()}get referrerPolicy(){return this[G].referrerPolicy}set referrerPolicy(r){this[G].referrerPolicy=Gi(r)}clone(){return new t(this)}get[Symbol.toStringTag](){return"Request"}};Object.defineProperties(Et.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});var es=t=>{let{parsedURL:r}=t[G],n=new we(t[G].headers);n.has("Accept")||n.set("Accept","*/*");let o=null;if(t.body===null&&/^(post|put)$/i.test(t.method)&&(o="0"),t.body!==null){let m=zi(t);typeof m=="number"&&!Number.isNaN(m)&&(o=String(m))}o&&n.set("Content-Length",o),t.referrerPolicy===""&&(t.referrerPolicy=Qi),t.referrer&&t.referrer!=="no-referrer"?t[G].referrer=Xi(t):t[G].referrer="no-referrer",t[G].referrer instanceof URL&&n.set("Referer",t.referrer),n.has("User-Agent")||n.set("User-Agent","node-fetch"),t.compress&&!n.has("Accept-Encoding")&&n.set("Accept-Encoding","gzip,deflate,br");let{agent:i}=t;typeof i=="function"&&(i=i(r)),!n.has("Connection")&&!i&&n.set("Connection","close");let u=$i(r),f={path:r.pathname+u,method:t.method,headers:n[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:t.insecureHTTPParser,agent:i};return{parsedURL:r,options:f}};var Rn=class extends Ye{constructor(r,n="aborted"){super(r,n)}};hn();ca();var Zl=new Set(["data:","http:","https:"]);async function Tn(t,r){return new Promise((n,o)=>{let i=new Et(t,r),{parsedURL:u,options:f}=es(i);if(!Zl.has(u.protocol))throw new TypeError(`node-fetch cannot load ${t}. URL scheme "${u.protocol.replace(/:$/,"")}" is not supported.`);if(u.protocol==="data:"){let S=Ci(i.url),E=new Se(S,{headers:{"Content-Type":S.typeFull}});n(E);return}let m=(u.protocol==="https:"?rs.default:ts.default).request,{signal:p}=i,c=null,_=()=>{let S=new Rn("The operation was aborted.");o(S),i.body&&i.body instanceof pe.default.Readable&&i.body.destroy(S),!(!c||!c.body)&&c.body.emit("error",S)};if(p&&p.aborted){_();return}let v=()=>{_(),w()},y=m(u.toString(),f);p&&p.addEventListener("abort",v);let w=()=>{y.abort(),p&&p.removeEventListener("abort",v)};y.on("error",S=>{o(new fe(`request to ${i.url} failed, reason: ${S.message}`,"system",S)),w()}),ef(y,S=>{c.body.destroy(S)}),process.version<"v14"&&y.on("socket",S=>{let E;S.prependListener("end",()=>{E=S._eventsCount}),S.prependListener("close",T=>{if(c&&E<S._eventsCount&&!T){let g=new Error("Premature close");g.code="ERR_STREAM_PREMATURE_CLOSE",c.body.emit("error",g)}})}),y.on("response",S=>{y.setTimeout(0);let E=ji(S.rawHeaders);if(_n(S.statusCode)){let P=E.get("Location"),q=null;try{q=P===null?null:new URL(P,i.url)}catch{if(i.redirect!=="manual"){o(new fe(`uri requested responds with an invalid redirect URL: ${P}`,"invalid-redirect")),w();return}}switch(i.redirect){case"error":o(new fe(`uri requested responds with a redirect, redirect mode is set to error: ${i.url}`,"no-redirect")),w();return;case"manual":break;case"follow":{if(q===null)break;if(i.counter>=i.follow){o(new fe(`maximum redirect reached at: ${i.url}`,"max-redirect")),w();return}let O={headers:new we(i.headers),follow:i.follow,counter:i.counter+1,agent:i.agent,compress:i.compress,method:i.method,body:Yt(i),signal:i.signal,size:i.size,referrer:i.referrer,referrerPolicy:i.referrerPolicy};if(!xi(i.url,q))for(let X of["authorization","www-authenticate","cookie","cookie2"])O.headers.delete(X);if(S.statusCode!==303&&i.body&&r.body instanceof pe.default.Readable){o(new fe("Cannot follow redirect with body being a readable stream","unsupported-redirect")),w();return}(S.statusCode===303||(S.statusCode===301||S.statusCode===302)&&i.method==="POST")&&(O.method="GET",O.body=void 0,O.headers.delete("content-length"));let ee=Ki(E);ee&&(O.referrerPolicy=ee),n(Tn(new Et(q,O))),w();return}default:return o(new TypeError(`Redirect option '${i.redirect}' is not a valid value of RequestRedirect`))}}p&&S.once("end",()=>{p.removeEventListener("abort",v)});let T=(0,pe.pipeline)(S,new pe.PassThrough,P=>{P&&o(P)});process.version<"v12.10"&&S.on("aborted",v);let g={url:i.url,status:S.statusCode,statusText:S.statusMessage,headers:E,size:i.size,counter:i.counter,highWaterMark:i.highWaterMark},D=E.get("Content-Encoding");if(!i.compress||i.method==="HEAD"||D===null||S.statusCode===204||S.statusCode===304){c=new Se(T,g),n(c);return}let I={flush:Pt.default.Z_SYNC_FLUSH,finishFlush:Pt.default.Z_SYNC_FLUSH};if(D==="gzip"||D==="x-gzip"){T=(0,pe.pipeline)(T,Pt.default.createGunzip(I),P=>{P&&o(P)}),c=new Se(T,g),n(c);return}if(D==="deflate"||D==="x-deflate"){let P=(0,pe.pipeline)(S,new pe.PassThrough,q=>{q&&o(q)});P.once("data",q=>{(q[0]&15)===8?T=(0,pe.pipeline)(T,Pt.default.createInflate(),O=>{O&&o(O)}):T=(0,pe.pipeline)(T,Pt.default.createInflateRaw(),O=>{O&&o(O)}),c=new Se(T,g),n(c)}),P.once("end",()=>{c||(c=new Se(T,g),n(c))});return}if(D==="br"){T=(0,pe.pipeline)(T,Pt.default.createBrotliDecompress(),P=>{P&&o(P)}),c=new Se(T,g),n(c);return}c=new Se(T,g),n(c)}),Ni(y,i).catch(o)})}function ef(t,r){let n=vr.Buffer.from(`0\r
\r
`),o=!1,i=!1,u;t.on("response",f=>{let{headers:m}=f;o=m["transfer-encoding"]==="chunked"&&!m["content-length"]}),t.on("socket",f=>{let m=()=>{if(o&&!i){let p=new Error("Premature close");p.code="ERR_STREAM_PREMATURE_CLOSE",r(p)}};f.prependListener("close",m),t.on("abort",()=>{f.removeListener("close",m)}),f.on("data",p=>{i=vr.Buffer.compare(p.slice(-5),n)===0,!i&&u&&(i=vr.Buffer.compare(u.slice(-3),n.slice(0,3))===0&&vr.Buffer.compare(p.slice(-2),n.slice(3))===0),u=p})})}var ns=Ee(ln());var{token:tf}=cn(),rf={method:"get",headers:{Authorization:`Token ${tf}`}},as=async(t,r)=>{let n=await Tn(`https://readwise.io/api${t}?${ns.default.stringify(r)}`,rf),o=await n.json();if(!n.ok){let i=new Error("An error occurred while fetching the data.");throw i.status=n.status,i}return o};var os=require("react"),Qt=require("@raycast/api"),is=t=>{(0,os.useEffect)(()=>{t&&(t.status===401||t.status===403?(0,Qt.showToast)(Qt.Toast.Style.Failure,"Invalid API token","Please, validate your Readwise API token is correct and you added one."):(0,Qt.showToast)(Qt.Toast.Style.Failure,"Something went wrong.","Please, try it again."))},[t])};var{pageSize:nf}=cn(),af={page_size:nf},us=(t,r)=>{let n=r||af,[o,i]=(0,ss.useState)(n),{data:u,error:f,isValidating:m}=Ri([t,o],as);return is(f),{currentParams:o,data:u,defaultParams:n,loading:!u&&!f||m,setParams:i}};var of="/v2/books";function fs(){let{data:t,loading:r,setParams:n,defaultParams:o}=us(of);return{data:t,loading:r,refetch:async i=>{n({...o,...ls.default.parse(i)})}}}var Ge=require("@raycast/api");var Z=require("@raycast/api");var ga=require("@raycast/api"),ya=require("react/jsx-runtime"),ds=({tags:t})=>t.length===0?null:(0,ya.jsx)(ga.Detail.Metadata.TagList,{title:"Tag",children:t.map(r=>(0,ya.jsx)(ga.Detail.Metadata.TagList.Item,{text:r.name},r.name))});var Wa=Ee(ln());function M(t,r){if(r.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+r.length+" present")}function wa(t){return M(1,arguments),t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function H(t){M(1,arguments);var r=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&r==="[object Date]"?new Date(t.getTime()):typeof t=="number"||r==="[object Number]"?new Date(t):((typeof t=="string"||r==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn(new Error().stack)),new Date(NaN))}function Sa(t){if(M(1,arguments),!wa(t)&&typeof t!="number")return!1;var r=H(t);return!isNaN(Number(r))}var sf={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},uf=function(t,r,n){var o,i=sf[t];return typeof i=="string"?o=i:r===1?o=i.one:o=i.other.replace("{{count}}",r.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+o:o+" ago":o},cs=uf;function Rr(t){return function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=r.width?String(r.width):t.defaultWidth,o=t.formats[n]||t.formats[t.defaultWidth];return o}}var lf={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},ff={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},df={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},cf={date:Rr({formats:lf,defaultWidth:"full"}),time:Rr({formats:ff,defaultWidth:"full"}),dateTime:Rr({formats:df,defaultWidth:"full"})},ms=cf;var mf={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},hf=function(t,r,n,o){return mf[t]},hs=hf;function At(t){return function(r,n){var o=n||{},i=o.context?String(o.context):"standalone",u;if(i==="formatting"&&t.formattingValues){var f=t.defaultFormattingWidth||t.defaultWidth,m=o.width?String(o.width):f;u=t.formattingValues[m]||t.formattingValues[f]}else{var p=t.defaultWidth,c=o.width?String(o.width):t.defaultWidth;u=t.values[c]||t.values[p]}var _=t.argumentCallback?t.argumentCallback(r):r;return u[_]}}var pf={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},bf={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},gf={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},yf={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},wf={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Sf={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},_f=function(t,r){var n=Number(t),o=n%100;if(o>20||o<10)switch(o%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},vf={ordinalNumber:_f,era:At({values:pf,defaultWidth:"wide"}),quarter:At({values:bf,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:At({values:gf,defaultWidth:"wide"}),day:At({values:yf,defaultWidth:"wide"}),dayPeriod:At({values:wf,defaultWidth:"wide",formattingValues:Sf,defaultFormattingWidth:"wide"})},ps=vf;function Dt(t){return function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=n.width,i=o&&t.matchPatterns[o]||t.matchPatterns[t.defaultMatchWidth],u=r.match(i);if(!u)return null;var f=u[0],m=o&&t.parsePatterns[o]||t.parsePatterns[t.defaultParseWidth],p=Array.isArray(m)?Tf(m,function(v){return v.test(f)}):Rf(m,function(v){return v.test(f)}),c;c=t.valueCallback?t.valueCallback(p):p,c=n.valueCallback?n.valueCallback(c):c;var _=r.slice(f.length);return{value:c,rest:_}}}function Rf(t,r){for(var n in t)if(t.hasOwnProperty(n)&&r(t[n]))return n}function Tf(t,r){for(var n=0;n<t.length;n++)if(r(t[n]))return n}function _a(t){return function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=r.match(t.matchPattern);if(!o)return null;var i=o[0],u=r.match(t.parsePattern);if(!u)return null;var f=t.valueCallback?t.valueCallback(u[0]):u[0];f=n.valueCallback?n.valueCallback(f):f;var m=r.slice(i.length);return{value:f,rest:m}}}var Cf=/^(\d+)(th|st|nd|rd)?/i,Ef=/\d+/i,Pf={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Af={any:[/^b/i,/^(a|c)/i]},Df={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Of={any:[/1/i,/2/i,/3/i,/4/i]},kf={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Wf={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Ff={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Bf={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},xf={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Mf={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},qf={ordinalNumber:_a({matchPattern:Cf,parsePattern:Ef,valueCallback:function(t){return parseInt(t,10)}}),era:Dt({matchPatterns:Pf,defaultMatchWidth:"wide",parsePatterns:Af,defaultParseWidth:"any"}),quarter:Dt({matchPatterns:Df,defaultMatchWidth:"wide",parsePatterns:Of,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:Dt({matchPatterns:kf,defaultMatchWidth:"wide",parsePatterns:Wf,defaultParseWidth:"any"}),day:Dt({matchPatterns:Ff,defaultMatchWidth:"wide",parsePatterns:Bf,defaultParseWidth:"any"}),dayPeriod:Dt({matchPatterns:xf,defaultMatchWidth:"any",parsePatterns:Mf,defaultParseWidth:"any"})},bs=qf;var Lf={code:"en-US",formatDistance:cs,formatLong:ms,formatRelative:hs,localize:ps,match:bs,options:{weekStartsOn:0,firstWeekContainsDate:1}},gs=Lf;function Q(t){if(t===null||t===!0||t===!1)return NaN;var r=Number(t);return isNaN(r)?r:r<0?Math.ceil(r):Math.floor(r)}function va(t,r){M(2,arguments);var n=H(t).getTime(),o=Q(r);return new Date(n+o)}function Ra(t,r){M(2,arguments);var n=Q(r);return va(t,-n)}var If=864e5;function Ta(t){M(1,arguments);var r=H(t),n=r.getTime();r.setUTCMonth(0,1),r.setUTCHours(0,0,0,0);var o=r.getTime(),i=n-o;return Math.floor(i/If)+1}function ft(t){M(1,arguments);var r=1,n=H(t),o=n.getUTCDay(),i=(o<r?7:0)+o-r;return n.setUTCDate(n.getUTCDate()-i),n.setUTCHours(0,0,0,0),n}function Tr(t){M(1,arguments);var r=H(t),n=r.getUTCFullYear(),o=new Date(0);o.setUTCFullYear(n+1,0,4),o.setUTCHours(0,0,0,0);var i=ft(o),u=new Date(0);u.setUTCFullYear(n,0,4),u.setUTCHours(0,0,0,0);var f=ft(u);return r.getTime()>=i.getTime()?n+1:r.getTime()>=f.getTime()?n:n-1}function Ca(t){M(1,arguments);var r=Tr(t),n=new Date(0);n.setUTCFullYear(r,0,4),n.setUTCHours(0,0,0,0);var o=ft(n);return o}var Uf=6048e5;function Ea(t){M(1,arguments);var r=H(t),n=ft(r).getTime()-Ca(r).getTime();return Math.round(n/Uf)+1}function dt(t,r){M(1,arguments);var n=r||{},o=n.locale,i=o&&o.options&&o.options.weekStartsOn,u=i==null?0:Q(i),f=n.weekStartsOn==null?u:Q(n.weekStartsOn);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var m=H(t),p=m.getUTCDay(),c=(p<f?7:0)+p-f;return m.setUTCDate(m.getUTCDate()-c),m.setUTCHours(0,0,0,0),m}function Cr(t,r){M(1,arguments);var n=H(t),o=n.getUTCFullYear(),i=r||{},u=i.locale,f=u&&u.options&&u.options.firstWeekContainsDate,m=f==null?1:Q(f),p=i.firstWeekContainsDate==null?m:Q(i.firstWeekContainsDate);if(!(p>=1&&p<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var c=new Date(0);c.setUTCFullYear(o+1,0,p),c.setUTCHours(0,0,0,0);var _=dt(c,r),v=new Date(0);v.setUTCFullYear(o,0,p),v.setUTCHours(0,0,0,0);var y=dt(v,r);return n.getTime()>=_.getTime()?o+1:n.getTime()>=y.getTime()?o:o-1}function Pa(t,r){M(1,arguments);var n=r||{},o=n.locale,i=o&&o.options&&o.options.firstWeekContainsDate,u=i==null?1:Q(i),f=n.firstWeekContainsDate==null?u:Q(n.firstWeekContainsDate),m=Cr(t,r),p=new Date(0);p.setUTCFullYear(m,0,f),p.setUTCHours(0,0,0,0);var c=dt(p,r);return c}var zf=6048e5;function Aa(t,r){M(1,arguments);var n=H(t),o=dt(n,r).getTime()-Pa(n,r).getTime();return Math.round(o/zf)+1}function x(t,r){for(var n=t<0?"-":"",o=Math.abs(t).toString();o.length<r;)o="0"+o;return n+o}var Nf={y:function(t,r){var n=t.getUTCFullYear(),o=n>0?n:1-n;return x(r==="yy"?o%100:o,r.length)},M:function(t,r){var n=t.getUTCMonth();return r==="M"?String(n+1):x(n+1,2)},d:function(t,r){return x(t.getUTCDate(),r.length)},a:function(t,r){var n=t.getUTCHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h:function(t,r){return x(t.getUTCHours()%12||12,r.length)},H:function(t,r){return x(t.getUTCHours(),r.length)},m:function(t,r){return x(t.getUTCMinutes(),r.length)},s:function(t,r){return x(t.getUTCSeconds(),r.length)},S:function(t,r){var n=r.length,o=t.getUTCMilliseconds(),i=Math.floor(o*Math.pow(10,n-3));return x(i,r.length)}},Qe=Nf;var Gt={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},jf={G:function(t,r,n){var o=t.getUTCFullYear()>0?1:0;switch(r){case"G":case"GG":case"GGG":return n.era(o,{width:"abbreviated"});case"GGGGG":return n.era(o,{width:"narrow"});case"GGGG":default:return n.era(o,{width:"wide"})}},y:function(t,r,n){if(r==="yo"){var o=t.getUTCFullYear(),i=o>0?o:1-o;return n.ordinalNumber(i,{unit:"year"})}return Qe.y(t,r)},Y:function(t,r,n,o){var i=Cr(t,o),u=i>0?i:1-i;if(r==="YY"){var f=u%100;return x(f,2)}return r==="Yo"?n.ordinalNumber(u,{unit:"year"}):x(u,r.length)},R:function(t,r){var n=Tr(t);return x(n,r.length)},u:function(t,r){var n=t.getUTCFullYear();return x(n,r.length)},Q:function(t,r,n){var o=Math.ceil((t.getUTCMonth()+1)/3);switch(r){case"Q":return String(o);case"QQ":return x(o,2);case"Qo":return n.ordinalNumber(o,{unit:"quarter"});case"QQQ":return n.quarter(o,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(o,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(o,{width:"wide",context:"formatting"})}},q:function(t,r,n){var o=Math.ceil((t.getUTCMonth()+1)/3);switch(r){case"q":return String(o);case"qq":return x(o,2);case"qo":return n.ordinalNumber(o,{unit:"quarter"});case"qqq":return n.quarter(o,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(o,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(o,{width:"wide",context:"standalone"})}},M:function(t,r,n){var o=t.getUTCMonth();switch(r){case"M":case"MM":return Qe.M(t,r);case"Mo":return n.ordinalNumber(o+1,{unit:"month"});case"MMM":return n.month(o,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(o,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(o,{width:"wide",context:"formatting"})}},L:function(t,r,n){var o=t.getUTCMonth();switch(r){case"L":return String(o+1);case"LL":return x(o+1,2);case"Lo":return n.ordinalNumber(o+1,{unit:"month"});case"LLL":return n.month(o,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(o,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(o,{width:"wide",context:"standalone"})}},w:function(t,r,n,o){var i=Aa(t,o);return r==="wo"?n.ordinalNumber(i,{unit:"week"}):x(i,r.length)},I:function(t,r,n){var o=Ea(t);return r==="Io"?n.ordinalNumber(o,{unit:"week"}):x(o,r.length)},d:function(t,r,n){return r==="do"?n.ordinalNumber(t.getUTCDate(),{unit:"date"}):Qe.d(t,r)},D:function(t,r,n){var o=Ta(t);return r==="Do"?n.ordinalNumber(o,{unit:"dayOfYear"}):x(o,r.length)},E:function(t,r,n){var o=t.getUTCDay();switch(r){case"E":case"EE":case"EEE":return n.day(o,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(o,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(o,{width:"short",context:"formatting"});case"EEEE":default:return n.day(o,{width:"wide",context:"formatting"})}},e:function(t,r,n,o){var i=t.getUTCDay(),u=(i-o.weekStartsOn+8)%7||7;switch(r){case"e":return String(u);case"ee":return x(u,2);case"eo":return n.ordinalNumber(u,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,r,n,o){var i=t.getUTCDay(),u=(i-o.weekStartsOn+8)%7||7;switch(r){case"c":return String(u);case"cc":return x(u,r.length);case"co":return n.ordinalNumber(u,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,r,n){var o=t.getUTCDay(),i=o===0?7:o;switch(r){case"i":return String(i);case"ii":return x(i,r.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(o,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(o,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(o,{width:"short",context:"formatting"});case"iiii":default:return n.day(o,{width:"wide",context:"formatting"})}},a:function(t,r,n){var o=t.getUTCHours(),i=o/12>=1?"pm":"am";switch(r){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,r,n){var o=t.getUTCHours(),i;switch(o===12?i=Gt.noon:o===0?i=Gt.midnight:i=o/12>=1?"pm":"am",r){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,r,n){var o=t.getUTCHours(),i;switch(o>=17?i=Gt.evening:o>=12?i=Gt.afternoon:o>=4?i=Gt.morning:i=Gt.night,r){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,r,n){if(r==="ho"){var o=t.getUTCHours()%12;return o===0&&(o=12),n.ordinalNumber(o,{unit:"hour"})}return Qe.h(t,r)},H:function(t,r,n){return r==="Ho"?n.ordinalNumber(t.getUTCHours(),{unit:"hour"}):Qe.H(t,r)},K:function(t,r,n){var o=t.getUTCHours()%12;return r==="Ko"?n.ordinalNumber(o,{unit:"hour"}):x(o,r.length)},k:function(t,r,n){var o=t.getUTCHours();return o===0&&(o=24),r==="ko"?n.ordinalNumber(o,{unit:"hour"}):x(o,r.length)},m:function(t,r,n){return r==="mo"?n.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):Qe.m(t,r)},s:function(t,r,n){return r==="so"?n.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):Qe.s(t,r)},S:function(t,r){return Qe.S(t,r)},X:function(t,r,n,o){var i=o._originalDate||t,u=i.getTimezoneOffset();if(u===0)return"Z";switch(r){case"X":return ws(u);case"XXXX":case"XX":return Ot(u);case"XXXXX":case"XXX":default:return Ot(u,":")}},x:function(t,r,n,o){var i=o._originalDate||t,u=i.getTimezoneOffset();switch(r){case"x":return ws(u);case"xxxx":case"xx":return Ot(u);case"xxxxx":case"xxx":default:return Ot(u,":")}},O:function(t,r,n,o){var i=o._originalDate||t,u=i.getTimezoneOffset();switch(r){case"O":case"OO":case"OOO":return"GMT"+ys(u,":");case"OOOO":default:return"GMT"+Ot(u,":")}},z:function(t,r,n,o){var i=o._originalDate||t,u=i.getTimezoneOffset();switch(r){case"z":case"zz":case"zzz":return"GMT"+ys(u,":");case"zzzz":default:return"GMT"+Ot(u,":")}},t:function(t,r,n,o){var i=o._originalDate||t,u=Math.floor(i.getTime()/1e3);return x(u,r.length)},T:function(t,r,n,o){var i=o._originalDate||t,u=i.getTime();return x(u,r.length)}};function ys(t,r){var n=t>0?"-":"+",o=Math.abs(t),i=Math.floor(o/60),u=o%60;if(u===0)return n+String(i);var f=r||"";return n+String(i)+f+x(u,2)}function ws(t,r){if(t%60===0){var n=t>0?"-":"+";return n+x(Math.abs(t)/60,2)}return Ot(t,r)}function Ot(t,r){var n=r||"",o=t>0?"-":"+",i=Math.abs(t),u=x(Math.floor(i/60),2),f=x(i%60,2);return o+u+n+f}var Ss=jf;function _s(t,r){switch(t){case"P":return r.date({width:"short"});case"PP":return r.date({width:"medium"});case"PPP":return r.date({width:"long"});case"PPPP":default:return r.date({width:"full"})}}function vs(t,r){switch(t){case"p":return r.time({width:"short"});case"pp":return r.time({width:"medium"});case"ppp":return r.time({width:"long"});case"pppp":default:return r.time({width:"full"})}}function $f(t,r){var n=t.match(/(P+)(p+)?/)||[],o=n[1],i=n[2];if(!i)return _s(t,r);var u;switch(o){case"P":u=r.dateTime({width:"short"});break;case"PP":u=r.dateTime({width:"medium"});break;case"PPP":u=r.dateTime({width:"long"});break;case"PPPP":default:u=r.dateTime({width:"full"});break}return u.replace("{{date}}",_s(o,r)).replace("{{time}}",vs(i,r))}var Hf={p:vs,P:$f},Rs=Hf;function Da(t){var r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),t.getTime()-r.getTime()}var Yf=["D","DD"],Vf=["YY","YYYY"];function Ts(t){return Yf.indexOf(t)!==-1}function Cs(t){return Vf.indexOf(t)!==-1}function Oa(t,r,n){if(t==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(r,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if(t==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(r,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if(t==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(r,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"));if(t==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(r,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"))}var Qf=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Gf=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Xf=/^'([^]*?)'?$/,Kf=/''/g,Jf=/[a-zA-Z]/;function ka(t,r,n){M(2,arguments);var o=String(r),i=n||{},u=i.locale||gs,f=u.options&&u.options.firstWeekContainsDate,m=f==null?1:Q(f),p=i.firstWeekContainsDate==null?m:Q(i.firstWeekContainsDate);if(!(p>=1&&p<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var c=u.options&&u.options.weekStartsOn,_=c==null?0:Q(c),v=i.weekStartsOn==null?_:Q(i.weekStartsOn);if(!(v>=0&&v<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!u.localize)throw new RangeError("locale must contain localize property");if(!u.formatLong)throw new RangeError("locale must contain formatLong property");var y=H(t);if(!Sa(y))throw new RangeError("Invalid time value");var w=Da(y),S=Ra(y,w),E={firstWeekContainsDate:p,weekStartsOn:v,locale:u,_originalDate:y},T=o.match(Gf).map(function(g){var D=g[0];if(D==="p"||D==="P"){var I=Rs[D];return I(g,u.formatLong,E)}return g}).join("").match(Qf).map(function(g){if(g==="''")return"'";var D=g[0];if(D==="'")return Zf(g);var I=Ss[D];if(I)return!i.useAdditionalWeekYearTokens&&Cs(g)&&Oa(g,r,t),!i.useAdditionalDayOfYearTokens&&Ts(g)&&Oa(g,r,t),I(S,g,u.localize,E);if(D.match(Jf))throw new RangeError("Format string contains an unescaped latin alphabet character `"+D+"`");return g}).join("");return T}function Zf(t){return t.match(Xf)[1].replace(Kf,"'")}var Fa=t=>Wa.default.stringify(Wa.default.parse(new URL(t).search)),Ba=t=>ka(new Date(t),"MMMM dd, yyyy hh:mm");var Es=(t,r)=>t?"Loading...":r.toString();var J=require("react/jsx-runtime"),Ps=({item:t})=>(0,J.jsx)(Z.Detail,{actions:(0,J.jsxs)(Z.ActionPanel,{children:[t.source_url&&(0,J.jsx)(Z.Action.OpenInBrowser,{title:"Open Source",url:t.source_url}),(0,J.jsx)(Z.Action.OpenInBrowser,{title:"Browse Highlights",url:t.highlights_url})]}),navigationTitle:"Source Detail",metadata:(0,J.jsxs)(Z.Detail.Metadata,{children:[(0,J.jsx)(Z.Detail.Metadata.Label,{title:"Author",text:t.author}),(0,J.jsx)(Z.Detail.Metadata.Label,{title:"Category",text:t.category}),(0,J.jsx)(Z.Detail.Metadata.Label,{title:"Source",text:t.source}),(0,J.jsx)(Z.Detail.Metadata.Label,{title:"Last Highlighted At",text:Ba(t.last_highlight_at)}),(0,J.jsx)(Z.Detail.Metadata.Label,{title:"Updated At",text:Ba(t.updated)}),(0,J.jsx)(ds,{tags:t.tags}),(0,J.jsx)(Z.Detail.Metadata.Link,{title:"Highlights",target:t.highlights_url,text:"Link"}),(0,J.jsx)(Z.Detail.Metadata.Label,{title:"Source",text:t.source}),t.source_url&&(0,J.jsx)(Z.Detail.Metadata.Link,{title:"Source URL",target:t.source_url,text:"Link"}),(0,J.jsx)(Z.Detail.Metadata.Separator,{})]}),markdown:`
## ${t.title} - ${t.author}

![cover image](${t.cover_image_url})
`});var kt=require("react/jsx-runtime"),As=({actions:t,item:r})=>(0,kt.jsx)(Ge.List.Item,{title:r.title,subtitle:r.author,keywords:r.tags.map(n=>n.name),actions:(0,kt.jsxs)(Ge.ActionPanel,{children:[(0,kt.jsx)(Ge.Action.Push,{icon:Ge.Icon.Document,title:"Show Details",target:(0,kt.jsx)(Ps,{item:r})}),(0,kt.jsx)(Ge.Action.OpenInBrowser,{title:"Open in Browser",url:r.highlights_url}),t]})});var xa=require("@raycast/api");var Xe=require("react/jsx-runtime"),ed=()=>(0,Xe.jsx)(xa.List.EmptyView,{title:"No Results",icon:{source:"empty-view.png"}}),Ds=({actions:t,data:r,loading:n,listView:o})=>{let i=r?.results.length||0,u=Es(n,i);return(0,Xe.jsxs)(Xe.Fragment,{children:[(0,Xe.jsx)(ed,{}),(0,Xe.jsx)(xa.List.Section,{title:"Results",subtitle:u,children:r?.results.map(f=>(0,Xe.jsx)(o,{item:f,actions:t},f.id))})]})};var Cn=require("@raycast/api"),xe=require("react/jsx-runtime"),Os=({onNextAction:t,onPreviousAction:r,onHomeAction:n})=>(0,xe.jsxs)(xe.Fragment,{children:[t&&(0,xe.jsx)(Cn.Action,{icon:"\u27A1\uFE0F",title:"Next Page",onAction:t,shortcut:{modifiers:["cmd"],key:"arrowRight"}}),r&&(0,xe.jsxs)(xe.Fragment,{children:[(0,xe.jsx)(Cn.Action,{icon:"\u2B05\uFE0F",title:"Previous Page",onAction:r,shortcut:{modifiers:["cmd"],key:"arrowLeft"}}),(0,xe.jsx)(Cn.Action,{icon:"\u{1F3E0}",title:"Back to Home",onAction:n,shortcut:{modifiers:["cmd"],key:"0"}})]})]});var ct=require("react/jsx-runtime"),td=[{label:"Articles",category:"articles"},{label:"Book",category:"books"},{label:"Podcasts",category:"podcasts"},{label:"Supplementals",category:"supplementals"},{label:"Tweets",category:"tweets"}];function ks(){let{data:t,loading:r,refetch:n}=fs(),{next:o,previous:i}=t||{};return(0,ct.jsx)(Er.List,{isLoading:r,enableFiltering:!0,searchBarAccessory:(0,ct.jsxs)(Er.List.Dropdown,{tooltip:"Search Options",onChange:n,children:[(0,ct.jsx)(Er.List.Dropdown.Item,{title:"All Categories",value:""}),td.map(({label:u,category:f})=>(0,ct.jsx)(Er.List.Dropdown.Item,{title:u,value:`category=${f}&page=1`},f))]}),children:(0,ct.jsx)(Ds,{loading:r,data:t,actions:(0,ct.jsx)(Os,{onHomeAction:()=>n(""),onNextAction:o?()=>n(Fa(o)):void 0,onPreviousAction:i?()=>i&&n(Fa(i)):void 0}),listView:As})})}
/*! Bundled license information:

fetch-blob/index.js:
  (*! fetch-blob. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

formdata-polyfill/esm.min.js:
  (*! formdata-polyfill. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

node-domexception/index.js:
  (*! node-domexception. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

swr/dist/index.mjs:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)
*/
