"use strict";var Zu=Object.create;var on=Object.defineProperty;var el=Object.getOwnPropertyDescriptor;var tl=Object.getOwnPropertyNames;var rl=Object.getPrototypeOf,nl=Object.prototype.hasOwnProperty;var dr=(t,r)=>()=>(t&&(r=t(t=0)),r);var ut=(t,r)=>()=>(r||t((r={exports:{}}).exports,r),r.exports),No=(t,r)=>{for(var n in r)on(t,n,{get:r[n],enumerable:!0})},jo=(t,r,n,o)=>{if(r&&typeof r=="object"||typeof r=="function")for(let i of tl(r))!nl.call(t,i)&&i!==n&&on(t,i,{get:()=>r[i],enumerable:!(o=el(r,i))||o.enumerable});return t};var Ee=(t,r,n)=>(n=t!=null?Zu(rl(t)):{},jo(r||!t||!t.__esModule?on(n,"default",{value:t,enumerable:!0}):n,t)),al=t=>jo(on({},"__esModule",{value:!0}),t);var $o=ut((id,Ho)=>{"use strict";Ho.exports=t=>encodeURIComponent(t).replace(/[!'()*]/g,r=>`%${r.charCodeAt(0).toString(16).toUpperCase()}`)});var Xo=ut((sd,Go)=>{"use strict";var Qo="%[a-f0-9]{2}",Yo=new RegExp(Qo,"gi"),Vo=new RegExp("("+Qo+")+","gi");function Qn(t,r){try{return decodeURIComponent(t.join(""))}catch{}if(t.length===1)return t;r=r||1;var n=t.slice(0,r),o=t.slice(r);return Array.prototype.concat.call([],Qn(n),Qn(o))}function ol(t){try{return decodeURIComponent(t)}catch{for(var r=t.match(Yo),n=1;n<r.length;n++)t=Qn(r,n).join(""),r=t.match(Yo);return t}}function il(t){for(var r={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},n=Vo.exec(t);n;){try{r[n[0]]=decodeURIComponent(n[0])}catch{var o=ol(n[0]);o!==n[0]&&(r[n[0]]=o)}n=Vo.exec(t)}r["%C2"]="\uFFFD";for(var i=Object.keys(r),u=0;u<i.length;u++){var f=i[u];t=t.replace(new RegExp(f,"g"),r[f])}return t}Go.exports=function(t){if(typeof t!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch{return il(t)}}});var Jo=ut((ud,Ko)=>{"use strict";Ko.exports=(t,r)=>{if(!(typeof t=="string"&&typeof r=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(r==="")return[t];let n=t.indexOf(r);return n===-1?[t]:[t.slice(0,n),t.slice(n+r.length)]}});var ei=ut((ld,Zo)=>{"use strict";Zo.exports=function(t,r){for(var n={},o=Object.keys(t),i=Array.isArray(r),u=0;u<o.length;u++){var f=o[u],h=t[f];(i?r.indexOf(f)!==-1:r(f,h,t))&&(n[f]=h)}return n}});var sn=ut(le=>{"use strict";var sl=$o(),ul=Xo(),ri=Jo(),ll=ei(),fl=t=>t==null,Gn=Symbol("encodeFragmentIdentifier");function dl(t){switch(t.arrayFormat){case"index":return r=>(n,o)=>{let i=n.length;return o===void 0||t.skipNull&&o===null||t.skipEmptyString&&o===""?n:o===null?[...n,[H(r,t),"[",i,"]"].join("")]:[...n,[H(r,t),"[",H(i,t),"]=",H(o,t)].join("")]};case"bracket":return r=>(n,o)=>o===void 0||t.skipNull&&o===null||t.skipEmptyString&&o===""?n:o===null?[...n,[H(r,t),"[]"].join("")]:[...n,[H(r,t),"[]=",H(o,t)].join("")];case"colon-list-separator":return r=>(n,o)=>o===void 0||t.skipNull&&o===null||t.skipEmptyString&&o===""?n:o===null?[...n,[H(r,t),":list="].join("")]:[...n,[H(r,t),":list=",H(o,t)].join("")];case"comma":case"separator":case"bracket-separator":{let r=t.arrayFormat==="bracket-separator"?"[]=":"=";return n=>(o,i)=>i===void 0||t.skipNull&&i===null||t.skipEmptyString&&i===""?o:(i=i===null?"":i,o.length===0?[[H(n,t),r,H(i,t)].join("")]:[[o,H(i,t)].join(t.arrayFormatSeparator)])}default:return r=>(n,o)=>o===void 0||t.skipNull&&o===null||t.skipEmptyString&&o===""?n:o===null?[...n,H(r,t)]:[...n,[H(r,t),"=",H(o,t)].join("")]}}function cl(t){let r;switch(t.arrayFormat){case"index":return(n,o,i)=>{if(r=/\[(\d*)\]$/.exec(n),n=n.replace(/\[\d*\]$/,""),!r){i[n]=o;return}i[n]===void 0&&(i[n]={}),i[n][r[1]]=o};case"bracket":return(n,o,i)=>{if(r=/(\[\])$/.exec(n),n=n.replace(/\[\]$/,""),!r){i[n]=o;return}if(i[n]===void 0){i[n]=[o];return}i[n]=[].concat(i[n],o)};case"colon-list-separator":return(n,o,i)=>{if(r=/(:list)$/.exec(n),n=n.replace(/:list$/,""),!r){i[n]=o;return}if(i[n]===void 0){i[n]=[o];return}i[n]=[].concat(i[n],o)};case"comma":case"separator":return(n,o,i)=>{let u=typeof o=="string"&&o.includes(t.arrayFormatSeparator),f=typeof o=="string"&&!u&&He(o,t).includes(t.arrayFormatSeparator);o=f?He(o,t):o;let h=u||f?o.split(t.arrayFormatSeparator).map(p=>He(p,t)):o===null?o:He(o,t);i[n]=h};case"bracket-separator":return(n,o,i)=>{let u=/(\[\])$/.test(n);if(n=n.replace(/\[\]$/,""),!u){i[n]=o&&He(o,t);return}let f=o===null?[]:o.split(t.arrayFormatSeparator).map(h=>He(h,t));if(i[n]===void 0){i[n]=f;return}i[n]=[].concat(i[n],f)};default:return(n,o,i)=>{if(i[n]===void 0){i[n]=o;return}i[n]=[].concat(i[n],o)}}}function ni(t){if(typeof t!="string"||t.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function H(t,r){return r.encode?r.strict?sl(t):encodeURIComponent(t):t}function He(t,r){return r.decode?ul(t):t}function ai(t){return Array.isArray(t)?t.sort():typeof t=="object"?ai(Object.keys(t)).sort((r,n)=>Number(r)-Number(n)).map(r=>t[r]):t}function oi(t){let r=t.indexOf("#");return r!==-1&&(t=t.slice(0,r)),t}function hl(t){let r="",n=t.indexOf("#");return n!==-1&&(r=t.slice(n)),r}function ii(t){t=oi(t);let r=t.indexOf("?");return r===-1?"":t.slice(r+1)}function ti(t,r){return r.parseNumbers&&!Number.isNaN(Number(t))&&typeof t=="string"&&t.trim()!==""?t=Number(t):r.parseBooleans&&t!==null&&(t.toLowerCase()==="true"||t.toLowerCase()==="false")&&(t=t.toLowerCase()==="true"),t}function si(t,r){r=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},r),ni(r.arrayFormatSeparator);let n=cl(r),o=Object.create(null);if(typeof t!="string"||(t=t.trim().replace(/^[?#&]/,""),!t))return o;for(let i of t.split("&")){if(i==="")continue;let[u,f]=ri(r.decode?i.replace(/\+/g," "):i,"=");f=f===void 0?null:["comma","separator","bracket-separator"].includes(r.arrayFormat)?f:He(f,r),n(He(u,r),f,o)}for(let i of Object.keys(o)){let u=o[i];if(typeof u=="object"&&u!==null)for(let f of Object.keys(u))u[f]=ti(u[f],r);else o[i]=ti(u,r)}return r.sort===!1?o:(r.sort===!0?Object.keys(o).sort():Object.keys(o).sort(r.sort)).reduce((i,u)=>{let f=o[u];return f&&typeof f=="object"&&!Array.isArray(f)?i[u]=ai(f):i[u]=f,i},Object.create(null))}le.extract=ii;le.parse=si;le.stringify=(t,r)=>{if(!t)return"";r=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},r),ni(r.arrayFormatSeparator);let n=f=>r.skipNull&&fl(t[f])||r.skipEmptyString&&t[f]==="",o=dl(r),i={};for(let f of Object.keys(t))n(f)||(i[f]=t[f]);let u=Object.keys(i);return r.sort!==!1&&u.sort(r.sort),u.map(f=>{let h=t[f];return h===void 0?"":h===null?H(f,r):Array.isArray(h)?h.length===0&&r.arrayFormat==="bracket-separator"?H(f,r)+"[]":h.reduce(o(f),[]).join("&"):H(f,r)+"="+H(h,r)}).filter(f=>f.length>0).join("&")};le.parseUrl=(t,r)=>{r=Object.assign({decode:!0},r);let[n,o]=ri(t,"#");return Object.assign({url:n.split("?")[0]||"",query:si(ii(t),r)},r&&r.parseFragmentIdentifier&&o?{fragmentIdentifier:He(o,r)}:{})};le.stringifyUrl=(t,r)=>{r=Object.assign({encode:!0,strict:!0,[Gn]:!0},r);let n=oi(t.url).split("?")[0]||"",o=le.extract(t.url),i=le.parse(o,{sort:!1}),u=Object.assign(i,t.query),f=le.stringify(u,r);f&&(f=`?${f}`);let h=hl(t.url);return t.fragmentIdentifier&&(h=`#${r[Gn]?H(t.fragmentIdentifier,r):t.fragmentIdentifier}`),`${n}${f}${h}`};le.pick=(t,r,n)=>{n=Object.assign({parseFragmentIdentifier:!0,[Gn]:!1},n);let{url:o,query:i,fragmentIdentifier:u}=le.parseUrl(t,n);return le.stringifyUrl({url:o,query:ll(i,r),fragmentIdentifier:u},n)};le.exclude=(t,r,n)=>{let o=Array.isArray(r)?i=>!r.includes(i):(i,u)=>!r(i,u);return le.pick(t,o,n)}});var Pi=ut((dn,Ei)=>{(function(t,r){typeof dn=="object"&&typeof Ei<"u"?r(dn):typeof define=="function"&&define.amd?define(["exports"],r):(t=typeof globalThis<"u"?globalThis:t||self,r(t.WebStreamsPolyfill={}))})(dn,(function(t){"use strict";let r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol:e=>`Symbol(${e})`;function n(){}function o(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}let i=o();function u(e){return typeof e=="object"&&e!==null||typeof e=="function"}let f=n,h=Promise,p=Promise.prototype.then,c=Promise.resolve.bind(h),_=Promise.reject.bind(h);function v(e){return new h(e)}function y(e){return c(e)}function w(e){return _(e)}function S(e,a,s){return p.call(e,a,s)}function E(e,a,s){S(S(e,a,s),void 0,f)}function T(e,a){E(e,a)}function g(e,a){E(e,void 0,a)}function O(e,a,s){return S(e,a,s)}function I(e){S(e,void 0,f)}let P=(()=>{let e=i&&i.queueMicrotask;if(typeof e=="function")return e;let a=y(void 0);return s=>S(a,s)})();function q(e,a,s){if(typeof e!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,a,s)}function D(e,a,s){try{return y(q(e,a,s))}catch(l){return w(l)}}let ee=16384;class J{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(a){let s=this._back,l=s;s._elements.length===ee-1&&(l={_elements:[],_next:void 0}),s._elements.push(a),l!==s&&(this._back=l,s._next=l),++this._size}shift(){let a=this._front,s=a,l=this._cursor,d=l+1,m=a._elements,b=m[l];return d===ee&&(s=a._next,d=0),--this._size,this._cursor=d,a!==s&&(this._front=s),m[l]=void 0,b}forEach(a){let s=this._cursor,l=this._front,d=l._elements;for(;(s!==d.length||l._next!==void 0)&&!(s===d.length&&(l=l._next,d=l._elements,s=0,d.length===0));)a(d[s]),++s}peek(){let a=this._front,s=this._cursor;return a._elements[s]}}function G(e,a){e._ownerReadableStream=a,a._reader=e,a._state==="readable"?Gt(e):a._state==="closed"?Cr(e):be(e,a._storedError)}function ht(e,a){let s=e._ownerReadableStream;return Te(s,a)}function oe(e){e._ownerReadableStream._state==="readable"?Le(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):Er(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),e._ownerReadableStream._reader=void 0,e._ownerReadableStream=void 0}function qe(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function Gt(e){e._closedPromise=v((a,s)=>{e._closedPromise_resolve=a,e._closedPromise_reject=s})}function be(e,a){Gt(e),Le(e,a)}function Cr(e){Gt(e),Xt(e)}function Le(e,a){e._closedPromise_reject!==void 0&&(I(e._closedPromise),e._closedPromise_reject(a),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function Er(e,a){be(e,a)}function Xt(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}let Pr=r("[[AbortSteps]]"),Wt=r("[[ErrorSteps]]"),mt=r("[[CancelSteps]]"),Oe=r("[[PullSteps]]"),kt=Number.isFinite||function(e){return typeof e=="number"&&isFinite(e)},Ft=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function Ie(e){return typeof e=="object"||typeof e=="function"}function _e(e,a){if(e!==void 0&&!Ie(e))throw new TypeError(`${a} is not an object.`)}function N(e,a){if(typeof e!="function")throw new TypeError(`${a} is not a function.`)}function ie(e){return typeof e=="object"&&e!==null||typeof e=="function"}function re(e,a){if(!ie(e))throw new TypeError(`${a} is not an object.`)}function j(e,a,s){if(e===void 0)throw new TypeError(`Parameter ${a} is required in '${s}'.`)}function Ue(e,a,s){if(e===void 0)throw new TypeError(`${a} is required in '${s}'.`)}function ze(e){return Number(e)}function ce(e){return e===0?0:e}function Z(e){return ce(Ft(e))}function ve(e,a){let l=Number.MAX_SAFE_INTEGER,d=Number(e);if(d=ce(d),!kt(d))throw new TypeError(`${a} is not a finite number`);if(d=Z(d),d<0||d>l)throw new TypeError(`${a} is outside the accepted range of 0 to ${l}, inclusive`);return!kt(d)||d===0?0:d}function se(e,a){if(!ot(e))throw new TypeError(`${a} is not a ReadableStream.`)}function De(e){return new et(e)}function Ke(e,a){e._reader._readRequests.push(a)}function We(e,a,s){let d=e._reader._readRequests.shift();s?d._closeSteps():d._chunkSteps(a)}function Je(e){return e._reader._readRequests.length}function Ze(e){let a=e._reader;return!(a===void 0||!tt(a))}class et{constructor(a){if(j(a,1,"ReadableStreamDefaultReader"),se(a,"First parameter"),it(a))throw new TypeError("This stream has already been locked for exclusive reading by another reader");G(this,a),this._readRequests=new J}get closed(){return tt(this)?this._closedPromise:w(Ar("closed"))}cancel(a=void 0){return tt(this)?this._ownerReadableStream===void 0?w(qe("cancel")):ht(this,a):w(Ar("cancel"))}read(){if(!tt(this))return w(Ar("read"));if(this._ownerReadableStream===void 0)return w(qe("read from"));let a,s,l=v((m,b)=>{a=m,s=b});return Kt(this,{_chunkSteps:m=>a({value:m,done:!1}),_closeSteps:()=>a({value:void 0,done:!0}),_errorSteps:m=>s(m)}),l}releaseLock(){if(!tt(this))throw Ar("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");oe(this)}}}Object.defineProperties(et.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(et.prototype,r.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function tt(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_readRequests")?!1:e instanceof et}function Kt(e,a){let s=e._ownerReadableStream;s._disturbed=!0,s._state==="closed"?a._closeSteps():s._state==="errored"?a._errorSteps(s._storedError):s._readableStreamController[Oe](a)}function Ar(e){return new TypeError(`ReadableStreamDefaultReader.prototype.${e} can only be used on a ReadableStreamDefaultReader`)}let qa=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);class La{constructor(a,s){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=a,this._preventCancel=s}next(){let a=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?O(this._ongoingPromise,a,a):a(),this._ongoingPromise}return(a){let s=()=>this._returnSteps(a);return this._ongoingPromise?O(this._ongoingPromise,s,s):s()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});let a=this._reader;if(a._ownerReadableStream===void 0)return w(qe("iterate"));let s,l,d=v((b,R)=>{s=b,l=R});return Kt(a,{_chunkSteps:b=>{this._ongoingPromise=void 0,P(()=>s({value:b,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,oe(a),s({value:void 0,done:!0})},_errorSteps:b=>{this._ongoingPromise=void 0,this._isFinished=!0,oe(a),l(b)}}),d}_returnSteps(a){if(this._isFinished)return Promise.resolve({value:a,done:!0});this._isFinished=!0;let s=this._reader;if(s._ownerReadableStream===void 0)return w(qe("finish iterating"));if(!this._preventCancel){let l=ht(s,a);return oe(s),O(l,()=>({value:a,done:!0}))}return oe(s),y({value:a,done:!0})}}let Ia={next(){return Ua(this)?this._asyncIteratorImpl.next():w(za("next"))},return(e){return Ua(this)?this._asyncIteratorImpl.return(e):w(za("return"))}};qa!==void 0&&Object.setPrototypeOf(Ia,qa);function xs(e,a){let s=De(e),l=new La(s,a),d=Object.create(Ia);return d._asyncIteratorImpl=l,d}function Ua(e){if(!u(e)||!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl"))return!1;try{return e._asyncIteratorImpl instanceof La}catch{return!1}}function za(e){return new TypeError(`ReadableStreamAsyncIterator.${e} can only be used on a ReadableSteamAsyncIterator`)}let Na=Number.isNaN||function(e){return e!==e};function Jt(e){return e.slice()}function ja(e,a,s,l,d){new Uint8Array(e).set(new Uint8Array(s,l,d),a)}function ad(e){return e}function Or(e){return!1}function Ha(e,a,s){if(e.slice)return e.slice(a,s);let l=s-a,d=new ArrayBuffer(l);return ja(d,0,e,a,l),d}function Bs(e){return!(typeof e!="number"||Na(e)||e<0)}function $a(e){let a=Ha(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(a)}function Cn(e){let a=e._queue.shift();return e._queueTotalSize-=a.size,e._queueTotalSize<0&&(e._queueTotalSize=0),a.value}function En(e,a,s){if(!Bs(s)||s===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");e._queue.push({value:a,size:s}),e._queueTotalSize+=s}function Ms(e){return e._queue.peek().value}function rt(e){e._queue=new J,e._queueTotalSize=0}class Zt{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!Pn(this))throw Wn("view");return this._view}respond(a){if(!Pn(this))throw Wn("respond");if(j(a,1,"respond"),a=ve(a,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");Or(this._view.buffer),xr(this._associatedReadableByteStreamController,a)}respondWithNewView(a){if(!Pn(this))throw Wn("respondWithNewView");if(j(a,1,"respondWithNewView"),!ArrayBuffer.isView(a))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");Or(a.buffer),Br(this._associatedReadableByteStreamController,a)}}Object.defineProperties(Zt.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Zt.prototype,r.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class xt{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!pt(this))throw tr("byobRequest");return Dn(this)}get desiredSize(){if(!pt(this))throw tr("desiredSize");return Za(this)}close(){if(!pt(this))throw tr("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");let a=this._controlledReadableByteStream._state;if(a!=="readable")throw new TypeError(`The stream (in ${a} state) is not in the readable state and cannot be closed`);er(this)}enqueue(a){if(!pt(this))throw tr("enqueue");if(j(a,1,"enqueue"),!ArrayBuffer.isView(a))throw new TypeError("chunk must be an array buffer view");if(a.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(a.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");let s=this._controlledReadableByteStream._state;if(s!=="readable")throw new TypeError(`The stream (in ${s} state) is not in the readable state and cannot be enqueued to`);Fr(this,a)}error(a=void 0){if(!pt(this))throw tr("error");Re(this,a)}[mt](a){Ya(this),rt(this);let s=this._cancelAlgorithm(a);return kr(this),s}[Oe](a){let s=this._controlledReadableByteStream;if(this._queueTotalSize>0){let d=this._queue.shift();this._queueTotalSize-=d.byteLength,Xa(this);let m=new Uint8Array(d.buffer,d.byteOffset,d.byteLength);a._chunkSteps(m);return}let l=this._autoAllocateChunkSize;if(l!==void 0){let d;try{d=new ArrayBuffer(l)}catch(b){a._errorSteps(b);return}let m={buffer:d,bufferByteLength:l,byteOffset:0,byteLength:l,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(m)}Ke(s,a),bt(this)}}Object.defineProperties(xt.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(xt.prototype,r.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function pt(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")?!1:e instanceof xt}function Pn(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")?!1:e instanceof Zt}function bt(e){if(!Us(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let s=e._pullAlgorithm();E(s,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,bt(e))},l=>{Re(e,l)})}function Ya(e){On(e),e._pendingPullIntos=new J}function An(e,a){let s=!1;e._state==="closed"&&(s=!0);let l=Va(a);a.readerType==="default"?We(e,l,s):js(e,l,s)}function Va(e){let a=e.bytesFilled,s=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,a/s)}function Dr(e,a,s,l){e._queue.push({buffer:a,byteOffset:s,byteLength:l}),e._queueTotalSize+=l}function Qa(e,a){let s=a.elementSize,l=a.bytesFilled-a.bytesFilled%s,d=Math.min(e._queueTotalSize,a.byteLength-a.bytesFilled),m=a.bytesFilled+d,b=m-m%s,R=d,A=!1;b>l&&(R=b-a.bytesFilled,A=!0);let k=e._queue;for(;R>0;){let F=k.peek(),x=Math.min(R,F.byteLength),Q=a.byteOffset+a.bytesFilled;ja(a.buffer,Q,F.buffer,F.byteOffset,x),F.byteLength===x?k.shift():(F.byteOffset+=x,F.byteLength-=x),e._queueTotalSize-=x,Ga(e,x,a),R-=x}return A}function Ga(e,a,s){s.bytesFilled+=a}function Xa(e){e._queueTotalSize===0&&e._closeRequested?(kr(e),lr(e._controlledReadableByteStream)):bt(e)}function On(e){e._byobRequest!==null&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function Ka(e){for(;e._pendingPullIntos.length>0;){if(e._queueTotalSize===0)return;let a=e._pendingPullIntos.peek();Qa(e,a)&&(Wr(e),An(e._controlledReadableByteStream,a))}}function qs(e,a,s){let l=e._controlledReadableByteStream,d=1;a.constructor!==DataView&&(d=a.constructor.BYTES_PER_ELEMENT);let m=a.constructor,b=a.buffer,R={buffer:b,bufferByteLength:b.byteLength,byteOffset:a.byteOffset,byteLength:a.byteLength,bytesFilled:0,elementSize:d,viewConstructor:m,readerType:"byob"};if(e._pendingPullIntos.length>0){e._pendingPullIntos.push(R),ro(l,s);return}if(l._state==="closed"){let A=new m(R.buffer,R.byteOffset,0);s._closeSteps(A);return}if(e._queueTotalSize>0){if(Qa(e,R)){let A=Va(R);Xa(e),s._chunkSteps(A);return}if(e._closeRequested){let A=new TypeError("Insufficient bytes to fill elements in the given buffer");Re(e,A),s._errorSteps(A);return}}e._pendingPullIntos.push(R),ro(l,s),bt(e)}function Ls(e,a){let s=e._controlledReadableByteStream;if(kn(s))for(;no(s)>0;){let l=Wr(e);An(s,l)}}function Is(e,a,s){if(Ga(e,a,s),s.bytesFilled<s.elementSize)return;Wr(e);let l=s.bytesFilled%s.elementSize;if(l>0){let d=s.byteOffset+s.bytesFilled,m=Ha(s.buffer,d-l,d);Dr(e,m,0,m.byteLength)}s.bytesFilled-=l,An(e._controlledReadableByteStream,s),Ka(e)}function Ja(e,a){let s=e._pendingPullIntos.peek();On(e),e._controlledReadableByteStream._state==="closed"?Ls(e):Is(e,a,s),bt(e)}function Wr(e){return e._pendingPullIntos.shift()}function Us(e){let a=e._controlledReadableByteStream;return a._state!=="readable"||e._closeRequested||!e._started?!1:!!(Ze(a)&&Je(a)>0||kn(a)&&no(a)>0||Za(e)>0)}function kr(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function er(e){let a=e._controlledReadableByteStream;if(!(e._closeRequested||a._state!=="readable")){if(e._queueTotalSize>0){e._closeRequested=!0;return}if(e._pendingPullIntos.length>0&&e._pendingPullIntos.peek().bytesFilled>0){let l=new TypeError("Insufficient bytes to fill elements in the given buffer");throw Re(e,l),l}kr(e),lr(a)}}function Fr(e,a){let s=e._controlledReadableByteStream;if(e._closeRequested||s._state!=="readable")return;let l=a.buffer,d=a.byteOffset,m=a.byteLength,b=l;if(e._pendingPullIntos.length>0){let R=e._pendingPullIntos.peek();Or(R.buffer),R.buffer=R.buffer}if(On(e),Ze(s))if(Je(s)===0)Dr(e,b,d,m);else{e._pendingPullIntos.length>0&&Wr(e);let R=new Uint8Array(b,d,m);We(s,R,!1)}else kn(s)?(Dr(e,b,d,m),Ka(e)):Dr(e,b,d,m);bt(e)}function Re(e,a){let s=e._controlledReadableByteStream;s._state==="readable"&&(Ya(e),rt(e),kr(e),Ao(s,a))}function Dn(e){if(e._byobRequest===null&&e._pendingPullIntos.length>0){let a=e._pendingPullIntos.peek(),s=new Uint8Array(a.buffer,a.byteOffset+a.bytesFilled,a.byteLength-a.bytesFilled),l=Object.create(Zt.prototype);Ns(l,e,s),e._byobRequest=l}return e._byobRequest}function Za(e){let a=e._controlledReadableByteStream._state;return a==="errored"?null:a==="closed"?0:e._strategyHWM-e._queueTotalSize}function xr(e,a){let s=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(a!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(a===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(s.bytesFilled+a>s.byteLength)throw new RangeError("bytesWritten out of range")}s.buffer=s.buffer,Ja(e,a)}function Br(e,a){let s=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(a.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(a.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(s.byteOffset+s.bytesFilled!==a.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(s.bufferByteLength!==a.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(s.bytesFilled+a.byteLength>s.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");let d=a.byteLength;s.buffer=a.buffer,Ja(e,d)}function eo(e,a,s,l,d,m,b){a._controlledReadableByteStream=e,a._pullAgain=!1,a._pulling=!1,a._byobRequest=null,a._queue=a._queueTotalSize=void 0,rt(a),a._closeRequested=!1,a._started=!1,a._strategyHWM=m,a._pullAlgorithm=l,a._cancelAlgorithm=d,a._autoAllocateChunkSize=b,a._pendingPullIntos=new J,e._readableStreamController=a;let R=s();E(y(R),()=>{a._started=!0,bt(a)},A=>{Re(a,A)})}function zs(e,a,s){let l=Object.create(xt.prototype),d=()=>{},m=()=>y(void 0),b=()=>y(void 0);a.start!==void 0&&(d=()=>a.start(l)),a.pull!==void 0&&(m=()=>a.pull(l)),a.cancel!==void 0&&(b=A=>a.cancel(A));let R=a.autoAllocateChunkSize;if(R===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");eo(e,l,d,m,b,s,R)}function Ns(e,a,s){e._associatedReadableByteStreamController=a,e._view=s}function Wn(e){return new TypeError(`ReadableStreamBYOBRequest.prototype.${e} can only be used on a ReadableStreamBYOBRequest`)}function tr(e){return new TypeError(`ReadableByteStreamController.prototype.${e} can only be used on a ReadableByteStreamController`)}function to(e){return new rr(e)}function ro(e,a){e._reader._readIntoRequests.push(a)}function js(e,a,s){let d=e._reader._readIntoRequests.shift();s?d._closeSteps(a):d._chunkSteps(a)}function no(e){return e._reader._readIntoRequests.length}function kn(e){let a=e._reader;return!(a===void 0||!gt(a))}class rr{constructor(a){if(j(a,1,"ReadableStreamBYOBReader"),se(a,"First parameter"),it(a))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!pt(a._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");G(this,a),this._readIntoRequests=new J}get closed(){return gt(this)?this._closedPromise:w(Mr("closed"))}cancel(a=void 0){return gt(this)?this._ownerReadableStream===void 0?w(qe("cancel")):ht(this,a):w(Mr("cancel"))}read(a){if(!gt(this))return w(Mr("read"));if(!ArrayBuffer.isView(a))return w(new TypeError("view must be an array buffer view"));if(a.byteLength===0)return w(new TypeError("view must have non-zero byteLength"));if(a.buffer.byteLength===0)return w(new TypeError("view's buffer must have non-zero byteLength"));if(Or(a.buffer),this._ownerReadableStream===void 0)return w(qe("read from"));let s,l,d=v((b,R)=>{s=b,l=R});return ao(this,a,{_chunkSteps:b=>s({value:b,done:!1}),_closeSteps:b=>s({value:b,done:!0}),_errorSteps:b=>l(b)}),d}releaseLock(){if(!gt(this))throw Mr("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");oe(this)}}}Object.defineProperties(rr.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(rr.prototype,r.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function gt(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")?!1:e instanceof rr}function ao(e,a,s){let l=e._ownerReadableStream;l._disturbed=!0,l._state==="errored"?s._errorSteps(l._storedError):qs(l._readableStreamController,a,s)}function Mr(e){return new TypeError(`ReadableStreamBYOBReader.prototype.${e} can only be used on a ReadableStreamBYOBReader`)}function nr(e,a){let{highWaterMark:s}=e;if(s===void 0)return a;if(Na(s)||s<0)throw new RangeError("Invalid highWaterMark");return s}function qr(e){let{size:a}=e;return a||(()=>1)}function Lr(e,a){_e(e,a);let s=e?.highWaterMark,l=e?.size;return{highWaterMark:s===void 0?void 0:ze(s),size:l===void 0?void 0:Hs(l,`${a} has member 'size' that`)}}function Hs(e,a){return N(e,a),s=>ze(e(s))}function $s(e,a){_e(e,a);let s=e?.abort,l=e?.close,d=e?.start,m=e?.type,b=e?.write;return{abort:s===void 0?void 0:Ys(s,e,`${a} has member 'abort' that`),close:l===void 0?void 0:Vs(l,e,`${a} has member 'close' that`),start:d===void 0?void 0:Qs(d,e,`${a} has member 'start' that`),write:b===void 0?void 0:Gs(b,e,`${a} has member 'write' that`),type:m}}function Ys(e,a,s){return N(e,s),l=>D(e,a,[l])}function Vs(e,a,s){return N(e,s),()=>D(e,a,[])}function Qs(e,a,s){return N(e,s),l=>q(e,a,[l])}function Gs(e,a,s){return N(e,s),(l,d)=>D(e,a,[l,d])}function oo(e,a){if(!Bt(e))throw new TypeError(`${a} is not a WritableStream.`)}function Xs(e){if(typeof e!="object"||e===null)return!1;try{return typeof e.aborted=="boolean"}catch{return!1}}let Ks=typeof AbortController=="function";function Js(){if(Ks)return new AbortController}class ar{constructor(a={},s={}){a===void 0?a=null:re(a,"First parameter");let l=Lr(s,"Second parameter"),d=$s(a,"First parameter");if(so(this),d.type!==void 0)throw new RangeError("Invalid type is specified");let b=qr(l),R=nr(l,1);cu(this,d,R,b)}get locked(){if(!Bt(this))throw jr("locked");return Mt(this)}abort(a=void 0){return Bt(this)?Mt(this)?w(new TypeError("Cannot abort a stream that already has a writer")):Ir(this,a):w(jr("abort"))}close(){return Bt(this)?Mt(this)?w(new TypeError("Cannot close a stream that already has a writer")):ke(this)?w(new TypeError("Cannot close an already-closing stream")):uo(this):w(jr("close"))}getWriter(){if(!Bt(this))throw jr("getWriter");return io(this)}}Object.defineProperties(ar.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(ar.prototype,r.toStringTag,{value:"WritableStream",configurable:!0});function io(e){return new or(e)}function Zs(e,a,s,l,d=1,m=()=>1){let b=Object.create(ar.prototype);so(b);let R=Object.create(qt.prototype);return po(b,R,e,a,s,l,d,m),b}function so(e){e._state="writable",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=new J,e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1}function Bt(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")?!1:e instanceof ar}function Mt(e){return e._writer!==void 0}function Ir(e,a){var s;if(e._state==="closed"||e._state==="errored")return y(void 0);e._writableStreamController._abortReason=a,(s=e._writableStreamController._abortController)===null||s===void 0||s.abort();let l=e._state;if(l==="closed"||l==="errored")return y(void 0);if(e._pendingAbortRequest!==void 0)return e._pendingAbortRequest._promise;let d=!1;l==="erroring"&&(d=!0,a=void 0);let m=v((b,R)=>{e._pendingAbortRequest={_promise:void 0,_resolve:b,_reject:R,_reason:a,_wasAlreadyErroring:d}});return e._pendingAbortRequest._promise=m,d||xn(e,a),m}function uo(e){let a=e._state;if(a==="closed"||a==="errored")return w(new TypeError(`The stream (in ${a} state) is not in the writable state and cannot be closed`));let s=v((d,m)=>{let b={_resolve:d,_reject:m};e._closeRequest=b}),l=e._writer;return l!==void 0&&e._backpressure&&a==="writable"&&jn(l),hu(e._writableStreamController),s}function eu(e){return v((s,l)=>{let d={_resolve:s,_reject:l};e._writeRequests.push(d)})}function Fn(e,a){if(e._state==="writable"){xn(e,a);return}Bn(e)}function xn(e,a){let s=e._writableStreamController;e._state="erroring",e._storedError=a;let l=e._writer;l!==void 0&&fo(l,a),!ou(e)&&s._started&&Bn(e)}function Bn(e){e._state="errored",e._writableStreamController[Wt]();let a=e._storedError;if(e._writeRequests.forEach(d=>{d._reject(a)}),e._writeRequests=new J,e._pendingAbortRequest===void 0){Ur(e);return}let s=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,s._wasAlreadyErroring){s._reject(a),Ur(e);return}let l=e._writableStreamController[Pr](s._reason);E(l,()=>{s._resolve(),Ur(e)},d=>{s._reject(d),Ur(e)})}function tu(e){e._inFlightWriteRequest._resolve(void 0),e._inFlightWriteRequest=void 0}function ru(e,a){e._inFlightWriteRequest._reject(a),e._inFlightWriteRequest=void 0,Fn(e,a)}function nu(e){e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0,e._state==="erroring"&&(e._storedError=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state="closed";let s=e._writer;s!==void 0&&wo(s)}function au(e,a){e._inFlightCloseRequest._reject(a),e._inFlightCloseRequest=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._reject(a),e._pendingAbortRequest=void 0),Fn(e,a)}function ke(e){return!(e._closeRequest===void 0&&e._inFlightCloseRequest===void 0)}function ou(e){return!(e._inFlightWriteRequest===void 0&&e._inFlightCloseRequest===void 0)}function iu(e){e._inFlightCloseRequest=e._closeRequest,e._closeRequest=void 0}function su(e){e._inFlightWriteRequest=e._writeRequests.shift()}function Ur(e){e._closeRequest!==void 0&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);let a=e._writer;a!==void 0&&zn(a,e._storedError)}function Mn(e,a){let s=e._writer;s!==void 0&&a!==e._backpressure&&(a?Su(s):jn(s)),e._backpressure=a}class or{constructor(a){if(j(a,1,"WritableStreamDefaultWriter"),oo(a,"First parameter"),Mt(a))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=a,a._writer=this;let s=a._state;if(s==="writable")!ke(a)&&a._backpressure?$r(this):So(this),Hr(this);else if(s==="erroring")Nn(this,a._storedError),Hr(this);else if(s==="closed")So(this),yu(this);else{let l=a._storedError;Nn(this,l),yo(this,l)}}get closed(){return yt(this)?this._closedPromise:w(wt("closed"))}get desiredSize(){if(!yt(this))throw wt("desiredSize");if(this._ownerWritableStream===void 0)throw ir("desiredSize");return du(this)}get ready(){return yt(this)?this._readyPromise:w(wt("ready"))}abort(a=void 0){return yt(this)?this._ownerWritableStream===void 0?w(ir("abort")):uu(this,a):w(wt("abort"))}close(){if(!yt(this))return w(wt("close"));let a=this._ownerWritableStream;return a===void 0?w(ir("close")):ke(a)?w(new TypeError("Cannot close an already-closing stream")):lo(this)}releaseLock(){if(!yt(this))throw wt("releaseLock");this._ownerWritableStream!==void 0&&co(this)}write(a=void 0){return yt(this)?this._ownerWritableStream===void 0?w(ir("write to")):ho(this,a):w(wt("write"))}}Object.defineProperties(or.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(or.prototype,r.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function yt(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")?!1:e instanceof or}function uu(e,a){let s=e._ownerWritableStream;return Ir(s,a)}function lo(e){let a=e._ownerWritableStream;return uo(a)}function lu(e){let a=e._ownerWritableStream,s=a._state;return ke(a)||s==="closed"?y(void 0):s==="errored"?w(a._storedError):lo(e)}function fu(e,a){e._closedPromiseState==="pending"?zn(e,a):wu(e,a)}function fo(e,a){e._readyPromiseState==="pending"?_o(e,a):_u(e,a)}function du(e){let a=e._ownerWritableStream,s=a._state;return s==="errored"||s==="erroring"?null:s==="closed"?0:bo(a._writableStreamController)}function co(e){let a=e._ownerWritableStream,s=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");fo(e,s),fu(e,s),a._writer=void 0,e._ownerWritableStream=void 0}function ho(e,a){let s=e._ownerWritableStream,l=s._writableStreamController,d=mu(l,a);if(s!==e._ownerWritableStream)return w(ir("write to"));let m=s._state;if(m==="errored")return w(s._storedError);if(ke(s)||m==="closed")return w(new TypeError("The stream is closing or closed and cannot be written to"));if(m==="erroring")return w(s._storedError);let b=eu(s);return pu(l,a,d),b}let mo={};class qt{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!qn(this))throw Un("abortReason");return this._abortReason}get signal(){if(!qn(this))throw Un("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(a=void 0){if(!qn(this))throw Un("error");this._controlledWritableStream._state==="writable"&&go(this,a)}[Pr](a){let s=this._abortAlgorithm(a);return zr(this),s}[Wt](){rt(this)}}Object.defineProperties(qt.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(qt.prototype,r.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function qn(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream")?!1:e instanceof qt}function po(e,a,s,l,d,m,b,R){a._controlledWritableStream=e,e._writableStreamController=a,a._queue=void 0,a._queueTotalSize=void 0,rt(a),a._abortReason=void 0,a._abortController=Js(),a._started=!1,a._strategySizeAlgorithm=R,a._strategyHWM=b,a._writeAlgorithm=l,a._closeAlgorithm=d,a._abortAlgorithm=m;let A=In(a);Mn(e,A);let k=s(),F=y(k);E(F,()=>{a._started=!0,Nr(a)},x=>{a._started=!0,Fn(e,x)})}function cu(e,a,s,l){let d=Object.create(qt.prototype),m=()=>{},b=()=>y(void 0),R=()=>y(void 0),A=()=>y(void 0);a.start!==void 0&&(m=()=>a.start(d)),a.write!==void 0&&(b=k=>a.write(k,d)),a.close!==void 0&&(R=()=>a.close()),a.abort!==void 0&&(A=k=>a.abort(k)),po(e,d,m,b,R,A,s,l)}function zr(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function hu(e){En(e,mo,0),Nr(e)}function mu(e,a){try{return e._strategySizeAlgorithm(a)}catch(s){return Ln(e,s),1}}function bo(e){return e._strategyHWM-e._queueTotalSize}function pu(e,a,s){try{En(e,a,s)}catch(d){Ln(e,d);return}let l=e._controlledWritableStream;if(!ke(l)&&l._state==="writable"){let d=In(e);Mn(l,d)}Nr(e)}function Nr(e){let a=e._controlledWritableStream;if(!e._started||a._inFlightWriteRequest!==void 0)return;if(a._state==="erroring"){Bn(a);return}if(e._queue.length===0)return;let l=Ms(e);l===mo?bu(e):gu(e,l)}function Ln(e,a){e._controlledWritableStream._state==="writable"&&go(e,a)}function bu(e){let a=e._controlledWritableStream;iu(a),Cn(e);let s=e._closeAlgorithm();zr(e),E(s,()=>{nu(a)},l=>{au(a,l)})}function gu(e,a){let s=e._controlledWritableStream;su(s);let l=e._writeAlgorithm(a);E(l,()=>{tu(s);let d=s._state;if(Cn(e),!ke(s)&&d==="writable"){let m=In(e);Mn(s,m)}Nr(e)},d=>{s._state==="writable"&&zr(e),ru(s,d)})}function In(e){return bo(e)<=0}function go(e,a){let s=e._controlledWritableStream;zr(e),xn(s,a)}function jr(e){return new TypeError(`WritableStream.prototype.${e} can only be used on a WritableStream`)}function Un(e){return new TypeError(`WritableStreamDefaultController.prototype.${e} can only be used on a WritableStreamDefaultController`)}function wt(e){return new TypeError(`WritableStreamDefaultWriter.prototype.${e} can only be used on a WritableStreamDefaultWriter`)}function ir(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function Hr(e){e._closedPromise=v((a,s)=>{e._closedPromise_resolve=a,e._closedPromise_reject=s,e._closedPromiseState="pending"})}function yo(e,a){Hr(e),zn(e,a)}function yu(e){Hr(e),wo(e)}function zn(e,a){e._closedPromise_reject!==void 0&&(I(e._closedPromise),e._closedPromise_reject(a),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected")}function wu(e,a){yo(e,a)}function wo(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved")}function $r(e){e._readyPromise=v((a,s)=>{e._readyPromise_resolve=a,e._readyPromise_reject=s}),e._readyPromiseState="pending"}function Nn(e,a){$r(e),_o(e,a)}function So(e){$r(e),jn(e)}function _o(e,a){e._readyPromise_reject!==void 0&&(I(e._readyPromise),e._readyPromise_reject(a),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected")}function Su(e){$r(e)}function _u(e,a){Nn(e,a)}function jn(e){e._readyPromise_resolve!==void 0&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled")}let vo=typeof DOMException<"u"?DOMException:void 0;function vu(e){if(!(typeof e=="function"||typeof e=="object"))return!1;try{return new e,!0}catch{return!1}}function Ru(){let e=function(s,l){this.message=s||"",this.name=l||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return e.prototype=Object.create(Error.prototype),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,configurable:!0}),e}let Tu=vu(vo)?vo:Ru();function Ro(e,a,s,l,d,m){let b=De(e),R=io(a);e._disturbed=!0;let A=!1,k=y(void 0);return v((F,x)=>{let Q;if(m!==void 0){if(Q=()=>{let C=new Tu("Aborted","AbortError"),W=[];l||W.push(()=>a._state==="writable"?Ir(a,C):y(void 0)),d||W.push(()=>e._state==="readable"?Te(e,C):y(void 0)),ue(()=>Promise.all(W.map(U=>U())),!0,C)},m.aborted){Q();return}m.addEventListener("abort",Q)}function Ce(){return v((C,W)=>{function U(he){he?C():S(Ut(),U,W)}U(!1)})}function Ut(){return A?y(!0):S(R._readyPromise,()=>v((C,W)=>{Kt(b,{_chunkSteps:U=>{k=S(ho(R,U),void 0,n),C(!1)},_closeSteps:()=>C(!0),_errorSteps:W})}))}if(Ne(e,b._closedPromise,C=>{l?ge(!0,C):ue(()=>Ir(a,C),!0,C)}),Ne(a,R._closedPromise,C=>{d?ge(!0,C):ue(()=>Te(e,C),!0,C)}),ne(e,b._closedPromise,()=>{s?ge():ue(()=>lu(R))}),ke(a)||a._state==="closed"){let C=new TypeError("the destination writable stream closed before all data could be piped to it");d?ge(!0,C):ue(()=>Te(e,C),!0,C)}I(Ce());function st(){let C=k;return S(k,()=>C!==k?st():void 0)}function Ne(C,W,U){C._state==="errored"?U(C._storedError):g(W,U)}function ne(C,W,U){C._state==="closed"?U():T(W,U)}function ue(C,W,U){if(A)return;A=!0,a._state==="writable"&&!ke(a)?T(st(),he):he();function he(){E(C(),()=>je(W,U),zt=>je(!0,zt))}}function ge(C,W){A||(A=!0,a._state==="writable"&&!ke(a)?T(st(),()=>je(C,W)):je(C,W))}function je(C,W){co(R),oe(b),m!==void 0&&m.removeEventListener("abort",Q),C?x(W):F(void 0)}})}class Lt{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Yr(this))throw Gr("desiredSize");return Hn(this)}close(){if(!Yr(this))throw Gr("close");if(!It(this))throw new TypeError("The stream is not in a state that permits close");ur(this)}enqueue(a=void 0){if(!Yr(this))throw Gr("enqueue");if(!It(this))throw new TypeError("The stream is not in a state that permits enqueue");return Qr(this,a)}error(a=void 0){if(!Yr(this))throw Gr("error");nt(this,a)}[mt](a){rt(this);let s=this._cancelAlgorithm(a);return Vr(this),s}[Oe](a){let s=this._controlledReadableStream;if(this._queue.length>0){let l=Cn(this);this._closeRequested&&this._queue.length===0?(Vr(this),lr(s)):sr(this),a._chunkSteps(l)}else Ke(s,a),sr(this)}}Object.defineProperties(Lt.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Lt.prototype,r.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function Yr(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")?!1:e instanceof Lt}function sr(e){if(!To(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let s=e._pullAlgorithm();E(s,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,sr(e))},l=>{nt(e,l)})}function To(e){let a=e._controlledReadableStream;return!It(e)||!e._started?!1:!!(it(a)&&Je(a)>0||Hn(e)>0)}function Vr(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function ur(e){if(!It(e))return;let a=e._controlledReadableStream;e._closeRequested=!0,e._queue.length===0&&(Vr(e),lr(a))}function Qr(e,a){if(!It(e))return;let s=e._controlledReadableStream;if(it(s)&&Je(s)>0)We(s,a,!1);else{let l;try{l=e._strategySizeAlgorithm(a)}catch(d){throw nt(e,d),d}try{En(e,a,l)}catch(d){throw nt(e,d),d}}sr(e)}function nt(e,a){let s=e._controlledReadableStream;s._state==="readable"&&(rt(e),Vr(e),Ao(s,a))}function Hn(e){let a=e._controlledReadableStream._state;return a==="errored"?null:a==="closed"?0:e._strategyHWM-e._queueTotalSize}function Cu(e){return!To(e)}function It(e){let a=e._controlledReadableStream._state;return!e._closeRequested&&a==="readable"}function Co(e,a,s,l,d,m,b){a._controlledReadableStream=e,a._queue=void 0,a._queueTotalSize=void 0,rt(a),a._started=!1,a._closeRequested=!1,a._pullAgain=!1,a._pulling=!1,a._strategySizeAlgorithm=b,a._strategyHWM=m,a._pullAlgorithm=l,a._cancelAlgorithm=d,e._readableStreamController=a;let R=s();E(y(R),()=>{a._started=!0,sr(a)},A=>{nt(a,A)})}function Eu(e,a,s,l){let d=Object.create(Lt.prototype),m=()=>{},b=()=>y(void 0),R=()=>y(void 0);a.start!==void 0&&(m=()=>a.start(d)),a.pull!==void 0&&(b=()=>a.pull(d)),a.cancel!==void 0&&(R=A=>a.cancel(A)),Co(e,d,m,b,R,s,l)}function Gr(e){return new TypeError(`ReadableStreamDefaultController.prototype.${e} can only be used on a ReadableStreamDefaultController`)}function Pu(e,a){return pt(e._readableStreamController)?Ou(e):Au(e)}function Au(e,a){let s=De(e),l=!1,d=!1,m=!1,b=!1,R,A,k,F,x,Q=v(ne=>{x=ne});function Ce(){return l?(d=!0,y(void 0)):(l=!0,Kt(s,{_chunkSteps:ue=>{P(()=>{d=!1;let ge=ue,je=ue;m||Qr(k._readableStreamController,ge),b||Qr(F._readableStreamController,je),l=!1,d&&Ce()})},_closeSteps:()=>{l=!1,m||ur(k._readableStreamController),b||ur(F._readableStreamController),(!m||!b)&&x(void 0)},_errorSteps:()=>{l=!1}}),y(void 0))}function Ut(ne){if(m=!0,R=ne,b){let ue=Jt([R,A]),ge=Te(e,ue);x(ge)}return Q}function st(ne){if(b=!0,A=ne,m){let ue=Jt([R,A]),ge=Te(e,ue);x(ge)}return Q}function Ne(){}return k=$n(Ne,Ce,Ut),F=$n(Ne,Ce,st),g(s._closedPromise,ne=>{nt(k._readableStreamController,ne),nt(F._readableStreamController,ne),(!m||!b)&&x(void 0)}),[k,F]}function Ou(e){let a=De(e),s=!1,l=!1,d=!1,m=!1,b=!1,R,A,k,F,x,Q=v(C=>{x=C});function Ce(C){g(C._closedPromise,W=>{C===a&&(Re(k._readableStreamController,W),Re(F._readableStreamController,W),(!m||!b)&&x(void 0))})}function Ut(){gt(a)&&(oe(a),a=De(e),Ce(a)),Kt(a,{_chunkSteps:W=>{P(()=>{l=!1,d=!1;let U=W,he=W;if(!m&&!b)try{he=$a(W)}catch(zt){Re(k._readableStreamController,zt),Re(F._readableStreamController,zt),x(Te(e,zt));return}m||Fr(k._readableStreamController,U),b||Fr(F._readableStreamController,he),s=!1,l?Ne():d&&ne()})},_closeSteps:()=>{s=!1,m||er(k._readableStreamController),b||er(F._readableStreamController),k._readableStreamController._pendingPullIntos.length>0&&xr(k._readableStreamController,0),F._readableStreamController._pendingPullIntos.length>0&&xr(F._readableStreamController,0),(!m||!b)&&x(void 0)},_errorSteps:()=>{s=!1}})}function st(C,W){tt(a)&&(oe(a),a=to(e),Ce(a));let U=W?F:k,he=W?k:F;ao(a,C,{_chunkSteps:Nt=>{P(()=>{l=!1,d=!1;let jt=W?b:m;if(W?m:b)jt||Br(U._readableStreamController,Nt);else{let zo;try{zo=$a(Nt)}catch(Vn){Re(U._readableStreamController,Vn),Re(he._readableStreamController,Vn),x(Te(e,Vn));return}jt||Br(U._readableStreamController,Nt),Fr(he._readableStreamController,zo)}s=!1,l?Ne():d&&ne()})},_closeSteps:Nt=>{s=!1;let jt=W?b:m,an=W?m:b;jt||er(U._readableStreamController),an||er(he._readableStreamController),Nt!==void 0&&(jt||Br(U._readableStreamController,Nt),!an&&he._readableStreamController._pendingPullIntos.length>0&&xr(he._readableStreamController,0)),(!jt||!an)&&x(void 0)},_errorSteps:()=>{s=!1}})}function Ne(){if(s)return l=!0,y(void 0);s=!0;let C=Dn(k._readableStreamController);return C===null?Ut():st(C._view,!1),y(void 0)}function ne(){if(s)return d=!0,y(void 0);s=!0;let C=Dn(F._readableStreamController);return C===null?Ut():st(C._view,!0),y(void 0)}function ue(C){if(m=!0,R=C,b){let W=Jt([R,A]),U=Te(e,W);x(U)}return Q}function ge(C){if(b=!0,A=C,m){let W=Jt([R,A]),U=Te(e,W);x(U)}return Q}function je(){}return k=Po(je,Ne,ue),F=Po(je,ne,ge),Ce(a),[k,F]}function Du(e,a){_e(e,a);let s=e,l=s?.autoAllocateChunkSize,d=s?.cancel,m=s?.pull,b=s?.start,R=s?.type;return{autoAllocateChunkSize:l===void 0?void 0:ve(l,`${a} has member 'autoAllocateChunkSize' that`),cancel:d===void 0?void 0:Wu(d,s,`${a} has member 'cancel' that`),pull:m===void 0?void 0:ku(m,s,`${a} has member 'pull' that`),start:b===void 0?void 0:Fu(b,s,`${a} has member 'start' that`),type:R===void 0?void 0:xu(R,`${a} has member 'type' that`)}}function Wu(e,a,s){return N(e,s),l=>D(e,a,[l])}function ku(e,a,s){return N(e,s),l=>D(e,a,[l])}function Fu(e,a,s){return N(e,s),l=>q(e,a,[l])}function xu(e,a){if(e=`${e}`,e!=="bytes")throw new TypeError(`${a} '${e}' is not a valid enumeration value for ReadableStreamType`);return e}function Bu(e,a){_e(e,a);let s=e?.mode;return{mode:s===void 0?void 0:Mu(s,`${a} has member 'mode' that`)}}function Mu(e,a){if(e=`${e}`,e!=="byob")throw new TypeError(`${a} '${e}' is not a valid enumeration value for ReadableStreamReaderMode`);return e}function qu(e,a){return _e(e,a),{preventCancel:!!e?.preventCancel}}function Eo(e,a){_e(e,a);let s=e?.preventAbort,l=e?.preventCancel,d=e?.preventClose,m=e?.signal;return m!==void 0&&Lu(m,`${a} has member 'signal' that`),{preventAbort:!!s,preventCancel:!!l,preventClose:!!d,signal:m}}function Lu(e,a){if(!Xs(e))throw new TypeError(`${a} is not an AbortSignal.`)}function Iu(e,a){_e(e,a);let s=e?.readable;Ue(s,"readable","ReadableWritablePair"),se(s,`${a} has member 'readable' that`);let l=e?.writable;return Ue(l,"writable","ReadableWritablePair"),oo(l,`${a} has member 'writable' that`),{readable:s,writable:l}}class at{constructor(a={},s={}){a===void 0?a=null:re(a,"First parameter");let l=Lr(s,"Second parameter"),d=Du(a,"First parameter");if(Yn(this),d.type==="bytes"){if(l.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");let m=nr(l,0);zs(this,d,m)}else{let m=qr(l),b=nr(l,1);Eu(this,d,b,m)}}get locked(){if(!ot(this))throw St("locked");return it(this)}cancel(a=void 0){return ot(this)?it(this)?w(new TypeError("Cannot cancel a stream that already has a reader")):Te(this,a):w(St("cancel"))}getReader(a=void 0){if(!ot(this))throw St("getReader");return Bu(a,"First parameter").mode===void 0?De(this):to(this)}pipeThrough(a,s={}){if(!ot(this))throw St("pipeThrough");j(a,1,"pipeThrough");let l=Iu(a,"First parameter"),d=Eo(s,"Second parameter");if(it(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(Mt(l.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");let m=Ro(this,l.writable,d.preventClose,d.preventAbort,d.preventCancel,d.signal);return I(m),l.readable}pipeTo(a,s={}){if(!ot(this))return w(St("pipeTo"));if(a===void 0)return w("Parameter 1 is required in 'pipeTo'.");if(!Bt(a))return w(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let l;try{l=Eo(s,"Second parameter")}catch(d){return w(d)}return it(this)?w(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):Mt(a)?w(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):Ro(this,a,l.preventClose,l.preventAbort,l.preventCancel,l.signal)}tee(){if(!ot(this))throw St("tee");let a=Pu(this);return Jt(a)}values(a=void 0){if(!ot(this))throw St("values");let s=qu(a,"First parameter");return xs(this,s.preventCancel)}}Object.defineProperties(at.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(at.prototype,r.toStringTag,{value:"ReadableStream",configurable:!0}),typeof r.asyncIterator=="symbol"&&Object.defineProperty(at.prototype,r.asyncIterator,{value:at.prototype.values,writable:!0,configurable:!0});function $n(e,a,s,l=1,d=()=>1){let m=Object.create(at.prototype);Yn(m);let b=Object.create(Lt.prototype);return Co(m,b,e,a,s,l,d),m}function Po(e,a,s){let l=Object.create(at.prototype);Yn(l);let d=Object.create(xt.prototype);return eo(l,d,e,a,s,0,void 0),l}function Yn(e){e._state="readable",e._reader=void 0,e._storedError=void 0,e._disturbed=!1}function ot(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")?!1:e instanceof at}function it(e){return e._reader!==void 0}function Te(e,a){if(e._disturbed=!0,e._state==="closed")return y(void 0);if(e._state==="errored")return w(e._storedError);lr(e);let s=e._reader;s!==void 0&&gt(s)&&(s._readIntoRequests.forEach(d=>{d._closeSteps(void 0)}),s._readIntoRequests=new J);let l=e._readableStreamController[mt](a);return O(l,n)}function lr(e){e._state="closed";let a=e._reader;a!==void 0&&(Xt(a),tt(a)&&(a._readRequests.forEach(s=>{s._closeSteps()}),a._readRequests=new J))}function Ao(e,a){e._state="errored",e._storedError=a;let s=e._reader;s!==void 0&&(Le(s,a),tt(s)?(s._readRequests.forEach(l=>{l._errorSteps(a)}),s._readRequests=new J):(s._readIntoRequests.forEach(l=>{l._errorSteps(a)}),s._readIntoRequests=new J))}function St(e){return new TypeError(`ReadableStream.prototype.${e} can only be used on a ReadableStream`)}function Oo(e,a){_e(e,a);let s=e?.highWaterMark;return Ue(s,"highWaterMark","QueuingStrategyInit"),{highWaterMark:ze(s)}}let Do=e=>e.byteLength;Object.defineProperty(Do,"name",{value:"size",configurable:!0});class Xr{constructor(a){j(a,1,"ByteLengthQueuingStrategy"),a=Oo(a,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=a.highWaterMark}get highWaterMark(){if(!ko(this))throw Wo("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!ko(this))throw Wo("size");return Do}}Object.defineProperties(Xr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Xr.prototype,r.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function Wo(e){return new TypeError(`ByteLengthQueuingStrategy.prototype.${e} can only be used on a ByteLengthQueuingStrategy`)}function ko(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_byteLengthQueuingStrategyHighWaterMark")?!1:e instanceof Xr}let Fo=()=>1;Object.defineProperty(Fo,"name",{value:"size",configurable:!0});class Kr{constructor(a){j(a,1,"CountQueuingStrategy"),a=Oo(a,"First parameter"),this._countQueuingStrategyHighWaterMark=a.highWaterMark}get highWaterMark(){if(!Bo(this))throw xo("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!Bo(this))throw xo("size");return Fo}}Object.defineProperties(Kr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Kr.prototype,r.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function xo(e){return new TypeError(`CountQueuingStrategy.prototype.${e} can only be used on a CountQueuingStrategy`)}function Bo(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_countQueuingStrategyHighWaterMark")?!1:e instanceof Kr}function Uu(e,a){_e(e,a);let s=e?.flush,l=e?.readableType,d=e?.start,m=e?.transform,b=e?.writableType;return{flush:s===void 0?void 0:zu(s,e,`${a} has member 'flush' that`),readableType:l,start:d===void 0?void 0:Nu(d,e,`${a} has member 'start' that`),transform:m===void 0?void 0:ju(m,e,`${a} has member 'transform' that`),writableType:b}}function zu(e,a,s){return N(e,s),l=>D(e,a,[l])}function Nu(e,a,s){return N(e,s),l=>q(e,a,[l])}function ju(e,a,s){return N(e,s),(l,d)=>D(e,a,[l,d])}class Jr{constructor(a={},s={},l={}){a===void 0&&(a=null);let d=Lr(s,"Second parameter"),m=Lr(l,"Third parameter"),b=Uu(a,"First parameter");if(b.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(b.writableType!==void 0)throw new RangeError("Invalid writableType specified");let R=nr(m,0),A=qr(m),k=nr(d,1),F=qr(d),x,Q=v(Ce=>{x=Ce});Hu(this,Q,k,F,R,A),Yu(this,b),b.start!==void 0?x(b.start(this._transformStreamController)):x(void 0)}get readable(){if(!Mo(this))throw Uo("readable");return this._readable}get writable(){if(!Mo(this))throw Uo("writable");return this._writable}}Object.defineProperties(Jr.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Jr.prototype,r.toStringTag,{value:"TransformStream",configurable:!0});function Hu(e,a,s,l,d,m){function b(){return a}function R(Q){return Gu(e,Q)}function A(Q){return Xu(e,Q)}function k(){return Ku(e)}e._writable=Zs(b,R,k,A,s,l);function F(){return Ju(e)}function x(Q){return en(e,Q),y(void 0)}e._readable=$n(b,F,x,d,m),e._backpressure=void 0,e._backpressureChangePromise=void 0,e._backpressureChangePromise_resolve=void 0,tn(e,!0),e._transformStreamController=void 0}function Mo(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")?!1:e instanceof Jr}function Zr(e,a){nt(e._readable._readableStreamController,a),en(e,a)}function en(e,a){qo(e._transformStreamController),Ln(e._writable._writableStreamController,a),e._backpressure&&tn(e,!1)}function tn(e,a){e._backpressureChangePromise!==void 0&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=v(s=>{e._backpressureChangePromise_resolve=s}),e._backpressure=a}class fr{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!rn(this))throw nn("desiredSize");let a=this._controlledTransformStream._readable._readableStreamController;return Hn(a)}enqueue(a=void 0){if(!rn(this))throw nn("enqueue");Lo(this,a)}error(a=void 0){if(!rn(this))throw nn("error");Vu(this,a)}terminate(){if(!rn(this))throw nn("terminate");Qu(this)}}Object.defineProperties(fr.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(fr.prototype,r.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function rn(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")?!1:e instanceof fr}function $u(e,a,s,l){a._controlledTransformStream=e,e._transformStreamController=a,a._transformAlgorithm=s,a._flushAlgorithm=l}function Yu(e,a){let s=Object.create(fr.prototype),l=m=>{try{return Lo(s,m),y(void 0)}catch(b){return w(b)}},d=()=>y(void 0);a.transform!==void 0&&(l=m=>a.transform(m,s)),a.flush!==void 0&&(d=()=>a.flush(s)),$u(e,s,l,d)}function qo(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0}function Lo(e,a){let s=e._controlledTransformStream,l=s._readable._readableStreamController;if(!It(l))throw new TypeError("Readable side is not in a state that permits enqueue");try{Qr(l,a)}catch(m){throw en(s,m),s._readable._storedError}Cu(l)!==s._backpressure&&tn(s,!0)}function Vu(e,a){Zr(e._controlledTransformStream,a)}function Io(e,a){let s=e._transformAlgorithm(a);return O(s,void 0,l=>{throw Zr(e._controlledTransformStream,l),l})}function Qu(e){let a=e._controlledTransformStream,s=a._readable._readableStreamController;ur(s);let l=new TypeError("TransformStream terminated");en(a,l)}function Gu(e,a){let s=e._transformStreamController;if(e._backpressure){let l=e._backpressureChangePromise;return O(l,()=>{let d=e._writable;if(d._state==="erroring")throw d._storedError;return Io(s,a)})}return Io(s,a)}function Xu(e,a){return Zr(e,a),y(void 0)}function Ku(e){let a=e._readable,s=e._transformStreamController,l=s._flushAlgorithm();return qo(s),O(l,()=>{if(a._state==="errored")throw a._storedError;ur(a._readableStreamController)},d=>{throw Zr(e,d),a._storedError})}function Ju(e){return tn(e,!1),e._backpressureChangePromise}function nn(e){return new TypeError(`TransformStreamDefaultController.prototype.${e} can only be used on a TransformStreamDefaultController`)}function Uo(e){return new TypeError(`TransformStream.prototype.${e} can only be used on a TransformStream`)}t.ByteLengthQueuingStrategy=Xr,t.CountQueuingStrategy=Kr,t.ReadableByteStreamController=xt,t.ReadableStream=at,t.ReadableStreamBYOBReader=rr,t.ReadableStreamBYOBRequest=Zt,t.ReadableStreamDefaultController=Lt,t.ReadableStreamDefaultReader=et,t.TransformStream=Jr,t.TransformStreamDefaultController=fr,t.WritableStream=ar,t.WritableStreamDefaultController=qt,t.WritableStreamDefaultWriter=or,Object.defineProperty(t,"__esModule",{value:!0})}))});var Ai=ut(()=>{if(!globalThis.ReadableStream)try{let t=require("node:process"),{emitWarning:r}=t;try{t.emitWarning=()=>{},Object.assign(globalThis,require("node:stream/web")),t.emitWarning=r}catch(n){throw t.emitWarning=r,n}}catch{Object.assign(globalThis,Pi())}try{let{Blob:t}=require("buffer");t&&!t.prototype.stream&&(t.prototype.stream=function(n){let o=0,i=this;return new ReadableStream({type:"bytes",async pull(u){let h=await i.slice(o,Math.min(i.size,o+65536)).arrayBuffer();o+=h.byteLength,u.enqueue(new Uint8Array(h)),o===i.size&&u.close()}})})}catch{}});async function*sa(t,r=!0){for(let n of t)if("stream"in n)yield*n.stream();else if(ArrayBuffer.isView(n))if(r){let o=n.byteOffset,i=n.byteOffset+n.byteLength;for(;o!==i;){let u=Math.min(i-o,Oi),f=n.buffer.slice(o,o+u);o+=f.byteLength,yield new Uint8Array(f)}}else yield n;else{let o=0,i=n;for(;o!==i.size;){let f=await i.slice(o,Math.min(i.size,o+Oi)).arrayBuffer();o+=f.byteLength,yield new Uint8Array(f)}}}var gd,Oi,Di,Ml,Ye,br=dr(()=>{gd=Ee(Ai(),1);Oi=65536;Di=class ua{#e=[];#t="";#r=0;#n="transparent";constructor(r=[],n={}){if(typeof r!="object"||r===null)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if(typeof r[Symbol.iterator]!="function")throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if(typeof n!="object"&&typeof n!="function")throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");n===null&&(n={});let o=new TextEncoder;for(let u of r){let f;ArrayBuffer.isView(u)?f=new Uint8Array(u.buffer.slice(u.byteOffset,u.byteOffset+u.byteLength)):u instanceof ArrayBuffer?f=new Uint8Array(u.slice(0)):u instanceof ua?f=u:f=o.encode(`${u}`);let h=ArrayBuffer.isView(f)?f.byteLength:f.size;h&&(this.#r+=h,this.#e.push(f))}this.#n=`${n.endings===void 0?"transparent":n.endings}`;let i=n.type===void 0?"":String(n.type);this.#t=/^[\x20-\x7E]*$/.test(i)?i:""}get size(){return this.#r}get type(){return this.#t}async text(){let r=new TextDecoder,n="";for await(let o of sa(this.#e,!1))n+=r.decode(o,{stream:!0});return n+=r.decode(),n}async arrayBuffer(){let r=new Uint8Array(this.size),n=0;for await(let o of sa(this.#e,!1))r.set(o,n),n+=o.length;return r.buffer}stream(){let r=sa(this.#e,!0);return new globalThis.ReadableStream({type:"bytes",async pull(n){let o=await r.next();o.done?n.close():n.enqueue(o.value)},async cancel(){await r.return()}})}slice(r=0,n=this.size,o=""){let{size:i}=this,u=r<0?Math.max(i+r,0):Math.min(r,i),f=n<0?Math.max(i+n,0):Math.min(n,i),h=Math.max(f-u,0),p=this.#e,c=[],_=0;for(let y of p){if(_>=h)break;let w=ArrayBuffer.isView(y)?y.byteLength:y.size;if(u&&w<=u)u-=w,f-=w;else{let S;ArrayBuffer.isView(y)?(S=y.subarray(u,Math.min(w,f)),_+=S.byteLength):(S=y.slice(u,Math.min(w,f)),_+=S.size),f-=w,c.push(S),u=0}}let v=new ua([],{type:String(o).toLowerCase()});return v.#r=h,v.#e=c,v}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](r){return r&&typeof r=="object"&&typeof r.constructor=="function"&&(typeof r.stream=="function"||typeof r.arrayBuffer=="function")&&/^(Blob|File)$/.test(r[Symbol.toStringTag])}};Object.defineProperties(Di.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});Ml=Di,Ye=Ml});var ql,Ll,Ht,la=dr(()=>{br();ql=class extends Ye{#e=0;#t="";constructor(r,n,o={}){if(arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(r,o),o===null&&(o={});let i=o.lastModified===void 0?Date.now():Number(o.lastModified);Number.isNaN(i)||(this.#e=i),this.#t=String(n)}get name(){return this.#t}get lastModified(){return this.#e}get[Symbol.toStringTag](){return"File"}static[Symbol.hasInstance](r){return!!r&&r instanceof Ye&&/^(File)$/.test(r[Symbol.toStringTag])}},Ll=ql,Ht=Ll});function Fi(t,r=Ye){var n=`${Wi()}${Wi()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),o=[],i=`--${n}\r
Content-Disposition: form-data; name="`;return t.forEach((u,f)=>typeof u=="string"?o.push(i+fa(f)+`"\r
\r
${u.replace(/\r(?!\n)|(?<!\r)\n/g,`\r
`)}\r
`):o.push(i+fa(f)+`"; filename="${fa(u.name,1)}"\r
Content-Type: ${u.type||"application/octet-stream"}\r
\r
`,u,`\r
`)),o.push(`--${n}--`),new r(o,{type:"multipart/form-data; boundary="+n})}var gr,Il,Ul,Wi,zl,ki,fa,Rt,Tt,cn=dr(()=>{br();la();({toStringTag:gr,iterator:Il,hasInstance:Ul}=Symbol),Wi=Math.random,zl="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),ki=(t,r,n)=>(t+="",/^(Blob|File)$/.test(r&&r[gr])?[(n=n!==void 0?n+"":r[gr]=="File"?r.name:"blob",t),r.name!==n||r[gr]=="blob"?new Ht([r],n,r):r]:[t,r+""]),fa=(t,r)=>(r?t:t.replace(/\r?\n|\r/g,`\r
`)).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),Rt=(t,r,n)=>{if(r.length<n)throw new TypeError(`Failed to execute '${t}' on 'FormData': ${n} arguments required, but only ${r.length} present.`)},Tt=class{#e=[];constructor(...r){if(r.length)throw new TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[gr](){return"FormData"}[Il](){return this.entries()}static[Ul](r){return r&&typeof r=="object"&&r[gr]==="FormData"&&!zl.some(n=>typeof r[n]!="function")}append(...r){Rt("append",arguments,2),this.#e.push(ki(...r))}delete(r){Rt("delete",arguments,1),r+="",this.#e=this.#e.filter(([n])=>n!==r)}get(r){Rt("get",arguments,1),r+="";for(var n=this.#e,o=n.length,i=0;i<o;i++)if(n[i][0]===r)return n[i][1];return null}getAll(r,n){return Rt("getAll",arguments,1),n=[],r+="",this.#e.forEach(o=>o[0]===r&&n.push(o[1])),n}has(r){return Rt("has",arguments,1),r+="",this.#e.some(n=>n[0]===r)}forEach(r,n){Rt("forEach",arguments,1);for(var[o,i]of this)r.call(n,i,o,this)}set(...r){Rt("set",arguments,2);var n=[],o=!0;r=ki(...r),this.#e.forEach(i=>{i[0]===r[0]?o&&(o=!n.push(r)):n.push(i)}),o&&n.push(r),this.#e=n}*entries(){yield*this.#e}*keys(){for(var[r]of this)yield r}*values(){for(var[,r]of this)yield r}}});var qi=ut((Dd,Mi)=>{if(!globalThis.DOMException)try{let{MessageChannel:t}=require("worker_threads"),r=new t().port1,n=new ArrayBuffer;r.postMessage(n,[n,n])}catch(t){t.constructor.name==="DOMException"&&(globalThis.DOMException=t.constructor)}Mi.exports=globalThis.DOMException});var mn,Nl,Fd,ca=dr(()=>{mn=require("node:fs"),Nl=Ee(qi(),1);la();br();({stat:Fd}=mn.promises)});var Ii={};No(Ii,{toFormData:()=>Gl});function Ql(t){let r=t.match(/\bfilename=("(.*?)"|([^()<>@,;:\\"/[\]?={}\s\t]+))($|;\s)/i);if(!r)return;let n=r[2]||r[3]||"",o=n.slice(n.lastIndexOf("\\")+1);return o=o.replace(/%22/g,'"'),o=o.replace(/&#(\d{4});/g,(i,u)=>String.fromCharCode(u)),o}async function Gl(t,r){if(!/multipart/i.test(r))throw new TypeError("Failed to fetch");let n=r.match(/boundary=(?:"([^"]+)"|([^;]+))/i);if(!n)throw new TypeError("no or bad content-type header, no multipart boundary");let o=new ha(n[1]||n[2]),i,u,f,h,p,c,_=[],v=new Tt,y=g=>{f+=T.decode(g,{stream:!0})},w=g=>{_.push(g)},S=()=>{let g=new Ht(_,c,{type:p});v.append(h,g)},E=()=>{v.append(h,f)},T=new TextDecoder("utf-8");T.decode(),o.onPartBegin=function(){o.onPartData=y,o.onPartEnd=E,i="",u="",f="",h="",p="",c=null,_.length=0},o.onHeaderField=function(g){i+=T.decode(g,{stream:!0})},o.onHeaderValue=function(g){u+=T.decode(g,{stream:!0})},o.onHeaderEnd=function(){if(u+=T.decode(),i=i.toLowerCase(),i==="content-disposition"){let g=u.match(/\bname=("([^"]*)"|([^()<>@,;:\\"/[\]?={}\s\t]+))/i);g&&(h=g[2]||g[3]||""),c=Ql(u),c&&(o.onPartData=w,o.onPartEnd=S)}else i==="content-type"&&(p=u);u="",i=""};for await(let g of t)o.write(g);return o.end(),v}var xe,z,Li,lt,pn,bn,jl,wr,Hl,$l,Yl,Vl,Ct,ha,Ui=dr(()=>{ca();cn();xe=0,z={START_BOUNDARY:xe++,HEADER_FIELD_START:xe++,HEADER_FIELD:xe++,HEADER_VALUE_START:xe++,HEADER_VALUE:xe++,HEADER_VALUE_ALMOST_DONE:xe++,HEADERS_ALMOST_DONE:xe++,PART_DATA_START:xe++,PART_DATA:xe++,END:xe++},Li=1,lt={PART_BOUNDARY:Li,LAST_BOUNDARY:Li*=2},pn=10,bn=13,jl=32,wr=45,Hl=58,$l=97,Yl=122,Vl=t=>t|32,Ct=()=>{},ha=class{constructor(r){this.index=0,this.flags=0,this.onHeaderEnd=Ct,this.onHeaderField=Ct,this.onHeadersEnd=Ct,this.onHeaderValue=Ct,this.onPartBegin=Ct,this.onPartData=Ct,this.onPartEnd=Ct,this.boundaryChars={},r=`\r
--`+r;let n=new Uint8Array(r.length);for(let o=0;o<r.length;o++)n[o]=r.charCodeAt(o),this.boundaryChars[n[o]]=!0;this.boundary=n,this.lookbehind=new Uint8Array(this.boundary.length+8),this.state=z.START_BOUNDARY}write(r){let n=0,o=r.length,i=this.index,{lookbehind:u,boundary:f,boundaryChars:h,index:p,state:c,flags:_}=this,v=this.boundary.length,y=v-1,w=r.length,S,E,T=P=>{this[P+"Mark"]=n},g=P=>{delete this[P+"Mark"]},O=(P,q,D,ee)=>{(q===void 0||q!==D)&&this[P](ee&&ee.subarray(q,D))},I=(P,q)=>{let D=P+"Mark";D in this&&(q?(O(P,this[D],n,r),delete this[D]):(O(P,this[D],r.length,r),this[D]=0))};for(n=0;n<o;n++)switch(S=r[n],c){case z.START_BOUNDARY:if(p===f.length-2){if(S===wr)_|=lt.LAST_BOUNDARY;else if(S!==bn)return;p++;break}else if(p-1===f.length-2){if(_&lt.LAST_BOUNDARY&&S===wr)c=z.END,_=0;else if(!(_&lt.LAST_BOUNDARY)&&S===pn)p=0,O("onPartBegin"),c=z.HEADER_FIELD_START;else return;break}S!==f[p+2]&&(p=-2),S===f[p+2]&&p++;break;case z.HEADER_FIELD_START:c=z.HEADER_FIELD,T("onHeaderField"),p=0;case z.HEADER_FIELD:if(S===bn){g("onHeaderField"),c=z.HEADERS_ALMOST_DONE;break}if(p++,S===wr)break;if(S===Hl){if(p===1)return;I("onHeaderField",!0),c=z.HEADER_VALUE_START;break}if(E=Vl(S),E<$l||E>Yl)return;break;case z.HEADER_VALUE_START:if(S===jl)break;T("onHeaderValue"),c=z.HEADER_VALUE;case z.HEADER_VALUE:S===bn&&(I("onHeaderValue",!0),O("onHeaderEnd"),c=z.HEADER_VALUE_ALMOST_DONE);break;case z.HEADER_VALUE_ALMOST_DONE:if(S!==pn)return;c=z.HEADER_FIELD_START;break;case z.HEADERS_ALMOST_DONE:if(S!==pn)return;O("onHeadersEnd"),c=z.PART_DATA_START;break;case z.PART_DATA_START:c=z.PART_DATA,T("onPartData");case z.PART_DATA:if(i=p,p===0){for(n+=y;n<w&&!(r[n]in h);)n+=v;n-=y,S=r[n]}if(p<f.length)f[p]===S?(p===0&&I("onPartData",!0),p++):p=0;else if(p===f.length)p++,S===bn?_|=lt.PART_BOUNDARY:S===wr?_|=lt.LAST_BOUNDARY:p=0;else if(p-1===f.length)if(_&lt.PART_BOUNDARY){if(p=0,S===pn){_&=~lt.PART_BOUNDARY,O("onPartEnd"),O("onPartBegin"),c=z.HEADER_FIELD_START;break}}else _&lt.LAST_BOUNDARY&&S===wr?(O("onPartEnd"),c=z.END,_=0):p=0;if(p>0)u[p-1]=S;else if(i>0){let P=new Uint8Array(u.buffer,u.byteOffset,u.byteLength);O("onPartData",0,i,P),i=0,T("onPartData"),n--}break;case z.END:break;default:throw new Error(`Unexpected state entered: ${c}`)}I("onHeaderField"),I("onHeaderValue"),I("onPartData"),this.index=p,this.state=c,this.flags=_}end(){if(this.state===z.HEADER_FIELD_START&&this.index===0||this.state===z.PART_DATA&&this.index===this.boundary.length)this.onPartEnd();else if(this.state!==z.END)throw new Error("MultipartParser.end(): stream ended unexpectedly")}}});var nd={};No(nd,{default:()=>Fs});module.exports=al(nd);var ks=require("@raycast/api");var us=Ee(sn());var os=require("react");var L=require("react");function di(t,r,n,o){function i(u){return u instanceof n?u:new n(function(f){f(u)})}return new(n||(n=Promise))(function(u,f){function h(_){try{c(o.next(_))}catch(v){f(v)}}function p(_){try{c(o.throw(_))}catch(v){f(v)}}function c(_){_.done?u(_.value):i(_.value).then(h,p)}c((o=o.apply(t,r||[])).next())})}function ci(t,r){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},o,i,u,f;return f={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function h(c){return function(_){return p([c,_])}}function p(c){if(o)throw new TypeError("Generator is already executing.");for(;n;)try{if(o=1,i&&(u=c[0]&2?i.return:c[0]?i.throw||((u=i.return)&&u.call(i),0):i.next)&&!(u=u.call(i,c[1])).done)return u;switch(i=0,u&&(c=[c[0]&2,u.value]),c[0]){case 0:case 1:u=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!u||c[1]>u[0]&&c[1]<u[3])){n.label=c[1];break}if(c[0]===6&&n.label<u[1]){n.label=u[1],u=c;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(c);break}u[2]&&n.ops.pop(),n.trys.pop();continue}c=r.call(t,n)}catch(_){c=[6,_],i=0}finally{o=u=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}var Fe=function(){},te=Fe(),cr=Object,ae=function(t){return t===te},vt=function(t){return typeof t=="function"},$e=function(t,r){return cr.assign({},t,r)},na="undefined",aa=function(){return typeof window!=na},ml=function(){return typeof document!=na},pl=function(){return aa()&&typeof window.requestAnimationFrame!=na},un=new WeakMap,bl=0,pr=function(t){var r=typeof t,n=t&&t.constructor,o=n==Date,i,u;if(cr(t)===t&&!o&&n!=RegExp){if(i=un.get(t),i)return i;if(i=++bl+"~",un.set(t,i),n==Array){for(i="@",u=0;u<t.length;u++)i+=pr(t[u])+",";un.set(t,i)}if(n==cr){i="#";for(var f=cr.keys(t).sort();!ae(u=f.pop());)ae(t[u])||(i+=u+":"+pr(t[u])+",");un.set(t,i)}}else i=o?t.toJSON():r=="symbol"?t.toString():r=="string"?JSON.stringify(t):""+t;return i},Jn=!0,gl=function(){return Jn},hi=aa(),oa=ml(),Zn=hi&&window.addEventListener?window.addEventListener.bind(window):Fe,yl=oa?document.addEventListener.bind(document):Fe,ea=hi&&window.removeEventListener?window.removeEventListener.bind(window):Fe,wl=oa?document.removeEventListener.bind(document):Fe,Sl=function(){var t=oa&&document.visibilityState;return ae(t)||t!=="hidden"},_l=function(t){return yl("visibilitychange",t),Zn("focus",t),function(){wl("visibilitychange",t),ea("focus",t)}},vl=function(t){var r=function(){Jn=!0,t()},n=function(){Jn=!1};return Zn("online",r),Zn("offline",n),function(){ea("online",r),ea("offline",n)}},Rl={isOnline:gl,isVisible:Sl},Tl={initFocus:_l,initReconnect:vl},ln=!aa()||"Deno"in window,Cl=function(t){return pl()?window.requestAnimationFrame(t):setTimeout(t,1)},hr=ln?L.useEffect:L.useLayoutEffect,Xn=typeof navigator<"u"&&navigator.connection,ui=!ln&&Xn&&(["slow-2g","2g"].includes(Xn.effectiveType)||Xn.saveData),mi=function(t){if(vt(t))try{t=t()}catch{t=""}var r=[].concat(t);t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?pr(t):"";var n=t?"$swr$"+t:"";return[t,r,n]},_t=new WeakMap,pi=0,bi=1,gi=2,mr=function(t,r,n,o,i,u,f){f===void 0&&(f=!0);var h=_t.get(t),p=h[0],c=h[1],_=h[3],v=p[r],y=c[r];if(f&&y)for(var w=0;w<y.length;++w)y[w](n,o,i);return u&&(delete _[r],v&&v[0])?v[0](gi).then(function(){return t.get(r)}):t.get(r)},El=0,ta=function(){return++El},yi=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return di(void 0,void 0,void 0,function(){var n,o,i,u,f,h,p,c,_,v,y,w,S,E,T,g,O,I,P,q;return ci(this,function(D){switch(D.label){case 0:if(n=t[0],o=t[1],i=t[2],u=t[3],f=typeof u=="boolean"?{revalidate:u}:u||{},h=ae(f.populateCache)?!0:f.populateCache,p=f.revalidate!==!1,c=f.rollbackOnError!==!1,_=f.optimisticData,v=mi(o),y=v[0],w=v[2],!y)return[2];if(S=_t.get(n),E=S[2],t.length<3)return[2,mr(n,y,n.get(y),te,te,p,!0)];if(T=i,O=ta(),E[y]=[O,0],I=!ae(_),P=n.get(y),I&&(n.set(y,_),mr(n,y,_)),vt(T))try{T=T(n.get(y))}catch(ee){g=ee}return T&&vt(T.then)?[4,T.catch(function(ee){g=ee})]:[3,2];case 1:if(T=D.sent(),O!==E[y][0]){if(g)throw g;return[2,T]}else g&&I&&c&&(h=!0,T=P,n.set(y,P));D.label=2;case 2:return h&&(g||(vt(h)&&(T=h(T,P)),n.set(y,T)),n.set(w,$e(n.get(w),{error:g}))),E[y][1]=ta(),[4,mr(n,y,T,g,te,p,!!h)];case 3:if(q=D.sent(),g)throw g;return[2,h?q:T]}})})},li=function(t,r){for(var n in t)t[n][0]&&t[n][0](r)},wi=function(t,r){if(!_t.has(t)){var n=$e(Tl,r),o={},i=yi.bind(te,t),u=Fe;if(_t.set(t,[o,{},{},{},i]),!ln){var f=n.initFocus(setTimeout.bind(te,li.bind(te,o,pi))),h=n.initReconnect(setTimeout.bind(te,li.bind(te,o,bi)));u=function(){f&&f(),h&&h(),_t.delete(t)}}return[t,i,u]}return[t,_t.get(t)[4]]},Pl=function(t,r,n,o,i){var u=n.errorRetryCount,f=i.retryCount,h=~~((Math.random()+.5)*(1<<(f<8?f:8)))*n.errorRetryInterval;!ae(u)&&f>u||setTimeout(o,h,i)},Si=wi(new Map),_i=Si[0],Al=Si[1],vi=$e({onLoadingSlow:Fe,onSuccess:Fe,onError:Fe,onErrorRetry:Pl,onDiscarded:Fe,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:ui?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:ui?5e3:3e3,compare:function(t,r){return pr(t)==pr(r)},isPaused:function(){return!1},cache:_i,mutate:Al,fallback:{}},Rl),Ri=function(t,r){var n=$e(t,r);if(r){var o=t.use,i=t.fallback,u=r.use,f=r.fallback;o&&u&&(n.use=o.concat(u)),i&&f&&(n.fallback=$e(i,f))}return n},ra=(0,L.createContext)({}),Ol=function(t){var r=t.value,n=Ri((0,L.useContext)(ra),r),o=r&&r.provider,i=(0,L.useState)(function(){return o?wi(o(n.cache||_i),r):te})[0];return i&&(n.cache=i[0],n.mutate=i[1]),hr(function(){return i?i[2]:te},[]),(0,L.createElement)(ra.Provider,$e(t,{value:n}))},Dl=function(t,r){var n=(0,L.useState)({})[1],o=(0,L.useRef)(t),i=(0,L.useRef)({data:!1,error:!1,isValidating:!1}),u=(0,L.useCallback)(function(f){var h=!1,p=o.current;for(var c in f){var _=c;p[_]!==f[_]&&(p[_]=f[_],i.current[_]&&(h=!0))}h&&!r.current&&n({})},[]);return hr(function(){o.current=t}),[o,i.current,u]},Wl=function(t){return vt(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}]},kl=function(){return $e(vi,(0,L.useContext)(ra))},Fl=function(t){return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var i=kl(),u=Wl(n),f=u[0],h=u[1],p=u[2],c=Ri(i,p),_=t,v=c.use;if(v)for(var y=v.length;y-- >0;)_=v[y](_);return _(f,h||c.fetcher,c)}},fi=function(t,r,n){var o=r[t]||(r[t]=[]);return o.push(n),function(){var i=o.indexOf(n);i>=0&&(o[i]=o[o.length-1],o.pop())}},Kn={dedupe:!0},xl=function(t,r,n){var o=n.cache,i=n.compare,u=n.fallbackData,f=n.suspense,h=n.revalidateOnMount,p=n.refreshInterval,c=n.refreshWhenHidden,_=n.refreshWhenOffline,v=_t.get(o),y=v[0],w=v[1],S=v[2],E=v[3],T=mi(t),g=T[0],O=T[1],I=T[2],P=(0,L.useRef)(!1),q=(0,L.useRef)(!1),D=(0,L.useRef)(g),ee=(0,L.useRef)(r),J=(0,L.useRef)(n),G=function(){return J.current},ht=function(){return G().isVisible()&&G().isOnline()},oe=function(N){return o.set(I,$e(o.get(I),N))},qe=o.get(g),Gt=ae(u)?n.fallback[g]:u,be=ae(qe)?Gt:qe,Cr=o.get(I)||{},Le=Cr.error,Er=!P.current,Xt=function(){return Er&&!ae(h)?h:G().isPaused()?!1:f?!ae(be):ae(be)||n.revalidateIfStale},Pr=function(){return!g||!r?!1:Cr.isValidating?!0:Er&&Xt()},Wt=Pr(),mt=Dl({data:be,error:Le,isValidating:Wt},q),Oe=mt[0],kt=mt[1],Ft=mt[2],Ie=(0,L.useCallback)(function(N){return di(void 0,void 0,void 0,function(){var ie,re,j,Ue,ze,ce,Z,ve,se,De,Ke,We,Je;return ci(this,function(Ze){switch(Ze.label){case 0:if(ie=ee.current,!g||!ie||q.current||G().isPaused())return[2,!1];Ue=!0,ze=N||{},ce=!E[g]||!ze.dedupe,Z=function(){return!q.current&&g===D.current&&P.current},ve=function(){var et=E[g];et&&et[1]===j&&delete E[g]},se={isValidating:!1},De=function(){oe({isValidating:!1}),Z()&&Ft(se)},oe({isValidating:!0}),Ft({isValidating:!0}),Ze.label=1;case 1:return Ze.trys.push([1,3,,4]),ce&&(mr(o,g,Oe.current.data,Oe.current.error,!0),n.loadingTimeout&&!o.get(g)&&setTimeout(function(){Ue&&Z()&&G().onLoadingSlow(g,n)},n.loadingTimeout),E[g]=[ie.apply(void 0,O),ta()]),Je=E[g],re=Je[0],j=Je[1],[4,re];case 2:return re=Ze.sent(),ce&&setTimeout(ve,n.dedupingInterval),!E[g]||E[g][1]!==j?(ce&&Z()&&G().onDiscarded(g),[2,!1]):(oe({error:te}),se.error=te,Ke=S[g],!ae(Ke)&&(j<=Ke[0]||j<=Ke[1]||Ke[1]===0)?(De(),ce&&Z()&&G().onDiscarded(g),[2,!1]):(i(Oe.current.data,re)?se.data=Oe.current.data:se.data=re,i(o.get(g),re)||o.set(g,re),ce&&Z()&&G().onSuccess(re,g,n),[3,4]));case 3:return We=Ze.sent(),ve(),G().isPaused()||(oe({error:We}),se.error=We,ce&&Z()&&(G().onError(We,g,n),(typeof n.shouldRetryOnError=="boolean"&&n.shouldRetryOnError||vt(n.shouldRetryOnError)&&n.shouldRetryOnError(We))&&ht()&&G().onErrorRetry(We,g,n,Ie,{retryCount:(ze.retryCount||0)+1,dedupe:!0}))),[3,4];case 4:return Ue=!1,De(),Z()&&ce&&mr(o,g,se.data,se.error,!1),[2,!0]}})})},[g]),_e=(0,L.useCallback)(yi.bind(te,o,function(){return D.current}),[]);if(hr(function(){ee.current=r,J.current=n}),hr(function(){if(g){var N=g!==D.current,ie=Ie.bind(te,Kn),re=function(Z,ve,se){Ft($e({error:ve,isValidating:se},i(Oe.current.data,Z)?te:{data:Z}))},j=0,Ue=function(Z){if(Z==pi){var ve=Date.now();G().revalidateOnFocus&&ve>j&&ht()&&(j=ve+G().focusThrottleInterval,ie())}else if(Z==bi)G().revalidateOnReconnect&&ht()&&ie();else if(Z==gi)return Ie()},ze=fi(g,w,re),ce=fi(g,y,Ue);return q.current=!1,D.current=g,P.current=!0,N&&Ft({data:be,error:Le,isValidating:Wt}),Xt()&&(ae(be)||ln?ie():Cl(ie)),function(){q.current=!0,ze(),ce()}}},[g,Ie]),hr(function(){var N;function ie(){var j=vt(p)?p(be):p;j&&N!==-1&&(N=setTimeout(re,j))}function re(){!Oe.current.error&&(c||G().isVisible())&&(_||G().isOnline())?Ie(Kn).then(ie):ie()}return ie(),function(){N&&(clearTimeout(N),N=-1)}},[p,c,_,Ie]),(0,L.useDebugValue)(be),f&&ae(be)&&g)throw ee.current=r,J.current=n,q.current=!1,ae(Le)?Ie(Kn):Le;return{mutate:_e,get data(){return kt.data=!0,be},get error(){return kt.error=!0,Le},get isValidating(){return kt.isValidating=!0,Wt}}},dd=cr.defineProperty(Ol,"default",{value:vi});var ia=Fl(xl);var Ti=require("@raycast/api"),fn=()=>(0,Ti.getPreferenceValues)();var ts=Ee(require("node:http"),1),rs=Ee(require("node:https"),1),Pt=Ee(require("node:zlib"),1),pe=Ee(require("node:stream"),1),_r=require("node:buffer");function Bl(t){if(!/^data:/i.test(t))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');t=t.replace(/\r?\n/g,"");let r=t.indexOf(",");if(r===-1||r<=4)throw new TypeError("malformed data: URI");let n=t.substring(5,r).split(";"),o="",i=!1,u=n[0]||"text/plain",f=u;for(let _=1;_<n.length;_++)n[_]==="base64"?i=!0:(f+=`;${n[_]}`,n[_].indexOf("charset=")===0&&(o=n[_].substring(8)));!n[0]&&!o.length&&(f+=";charset=US-ASCII",o="US-ASCII");let h=i?"base64":"ascii",p=unescape(t.substring(r+1)),c=Buffer.from(p,h);return c.type=u,c.typeFull=f,c.charset=o,c}var Ci=Bl;var ye=Ee(require("node:stream"),1),Qe=require("node:util"),me=require("node:buffer");br();cn();var Ve=class extends Error{constructor(r,n){super(r),Error.captureStackTrace(this,this.constructor),this.type=n}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};var fe=class extends Ve{constructor(r,n,o){super(r,n),o&&(this.code=this.errno=o.code,this.erroredSysCall=o.syscall)}};var hn=Symbol.toStringTag,da=t=>typeof t=="object"&&typeof t.append=="function"&&typeof t.delete=="function"&&typeof t.get=="function"&&typeof t.getAll=="function"&&typeof t.has=="function"&&typeof t.set=="function"&&typeof t.sort=="function"&&t[hn]==="URLSearchParams",yr=t=>t&&typeof t=="object"&&typeof t.arrayBuffer=="function"&&typeof t.type=="string"&&typeof t.stream=="function"&&typeof t.constructor=="function"&&/^(Blob|File)$/.test(t[hn]),xi=t=>typeof t=="object"&&(t[hn]==="AbortSignal"||t[hn]==="EventTarget"),Bi=(t,r)=>{let n=new URL(r).hostname,o=new URL(t).hostname;return n===o||n.endsWith(`.${o}`)};var Xl=(0,Qe.promisify)(ye.default.pipeline),de=Symbol("Body internals"),Be=class{constructor(r,{size:n=0}={}){let o=null;r===null?r=null:da(r)?r=me.Buffer.from(r.toString()):yr(r)||me.Buffer.isBuffer(r)||(Qe.types.isAnyArrayBuffer(r)?r=me.Buffer.from(r):ArrayBuffer.isView(r)?r=me.Buffer.from(r.buffer,r.byteOffset,r.byteLength):r instanceof ye.default||(r instanceof Tt?(r=Fi(r),o=r.type.split("=")[1]):r=me.Buffer.from(String(r))));let i=r;me.Buffer.isBuffer(r)?i=ye.default.Readable.from(r):yr(r)&&(i=ye.default.Readable.from(r.stream())),this[de]={body:r,stream:i,boundary:o,disturbed:!1,error:null},this.size=n,r instanceof ye.default&&r.on("error",u=>{let f=u instanceof Ve?u:new fe(`Invalid response body while trying to fetch ${this.url}: ${u.message}`,"system",u);this[de].error=f})}get body(){return this[de].stream}get bodyUsed(){return this[de].disturbed}async arrayBuffer(){let{buffer:r,byteOffset:n,byteLength:o}=await ma(this);return r.slice(n,n+o)}async formData(){let r=this.headers.get("content-type");if(r.startsWith("application/x-www-form-urlencoded")){let o=new Tt,i=new URLSearchParams(await this.text());for(let[u,f]of i)o.append(u,f);return o}let{toFormData:n}=await Promise.resolve().then(()=>(Ui(),Ii));return n(this.body,r)}async blob(){let r=this.headers&&this.headers.get("content-type")||this[de].body&&this[de].body.type||"",n=await this.arrayBuffer();return new Ye([n],{type:r})}async json(){let r=await this.text();return JSON.parse(r)}async text(){let r=await ma(this);return new TextDecoder().decode(r)}buffer(){return ma(this)}};Be.prototype.buffer=(0,Qe.deprecate)(Be.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer");Object.defineProperties(Be.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},data:{get:(0,Qe.deprecate)(()=>{},"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});async function ma(t){if(t[de].disturbed)throw new TypeError(`body used already for: ${t.url}`);if(t[de].disturbed=!0,t[de].error)throw t[de].error;let{body:r}=t;if(r===null)return me.Buffer.alloc(0);if(!(r instanceof ye.default))return me.Buffer.alloc(0);let n=[],o=0;try{for await(let i of r){if(t.size>0&&o+i.length>t.size){let u=new fe(`content size at ${t.url} over limit: ${t.size}`,"max-size");throw r.destroy(u),u}o+=i.length,n.push(i)}}catch(i){throw i instanceof Ve?i:new fe(`Invalid response body while trying to fetch ${t.url}: ${i.message}`,"system",i)}if(r.readableEnded===!0||r._readableState.ended===!0)try{return n.every(i=>typeof i=="string")?me.Buffer.from(n.join("")):me.Buffer.concat(n,o)}catch(i){throw new fe(`Could not create Buffer from response body for ${t.url}: ${i.message}`,"system",i)}else throw new fe(`Premature close of server response while trying to fetch ${t.url}`)}var $t=(t,r)=>{let n,o,{body:i}=t[de];if(t.bodyUsed)throw new Error("cannot clone body after it is used");return i instanceof ye.default&&typeof i.getBoundary!="function"&&(n=new ye.PassThrough({highWaterMark:r}),o=new ye.PassThrough({highWaterMark:r}),i.pipe(n),i.pipe(o),t[de].stream=n,i=o),i},Kl=(0,Qe.deprecate)(t=>t.getBoundary(),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),gn=(t,r)=>t===null?null:typeof t=="string"?"text/plain;charset=UTF-8":da(t)?"application/x-www-form-urlencoded;charset=UTF-8":yr(t)?t.type||null:me.Buffer.isBuffer(t)||Qe.types.isAnyArrayBuffer(t)||ArrayBuffer.isView(t)?null:t instanceof Tt?`multipart/form-data; boundary=${r[de].boundary}`:t&&typeof t.getBoundary=="function"?`multipart/form-data;boundary=${Kl(t)}`:t instanceof ye.default?null:"text/plain;charset=UTF-8",zi=t=>{let{body:r}=t[de];return r===null?0:yr(r)?r.size:me.Buffer.isBuffer(r)?r.length:r&&typeof r.getLengthSync=="function"&&r.hasKnownLength&&r.hasKnownLength()?r.getLengthSync():null},Ni=async(t,{body:r})=>{r===null?t.end():await Xl(r,t)};var pa=require("node:util"),Sr=Ee(require("node:http"),1),yn=typeof Sr.default.validateHeaderName=="function"?Sr.default.validateHeaderName:t=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(t)){let r=new TypeError(`Header name must be a valid HTTP token [${t}]`);throw Object.defineProperty(r,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),r}},ba=typeof Sr.default.validateHeaderValue=="function"?Sr.default.validateHeaderValue:(t,r)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(r)){let n=new TypeError(`Invalid character in header content ["${t}"]`);throw Object.defineProperty(n,"code",{value:"ERR_INVALID_CHAR"}),n}},we=class t extends URLSearchParams{constructor(r){let n=[];if(r instanceof t){let o=r.raw();for(let[i,u]of Object.entries(o))n.push(...u.map(f=>[i,f]))}else if(r!=null)if(typeof r=="object"&&!pa.types.isBoxedPrimitive(r)){let o=r[Symbol.iterator];if(o==null)n.push(...Object.entries(r));else{if(typeof o!="function")throw new TypeError("Header pairs must be iterable");n=[...r].map(i=>{if(typeof i!="object"||pa.types.isBoxedPrimitive(i))throw new TypeError("Each header pair must be an iterable object");return[...i]}).map(i=>{if(i.length!==2)throw new TypeError("Each header pair must be a name/value tuple");return[...i]})}}else throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");return n=n.length>0?n.map(([o,i])=>(yn(o),ba(o,String(i)),[String(o).toLowerCase(),String(i)])):void 0,super(n),new Proxy(this,{get(o,i,u){switch(i){case"append":case"set":return(f,h)=>(yn(f),ba(f,String(h)),URLSearchParams.prototype[i].call(o,String(f).toLowerCase(),String(h)));case"delete":case"has":case"getAll":return f=>(yn(f),URLSearchParams.prototype[i].call(o,String(f).toLowerCase()));case"keys":return()=>(o.sort(),new Set(URLSearchParams.prototype.keys.call(o)).keys());default:return Reflect.get(o,i,u)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(r){let n=this.getAll(r);if(n.length===0)return null;let o=n.join(", ");return/^content-encoding$/i.test(r)&&(o=o.toLowerCase()),o}forEach(r,n=void 0){for(let o of this.keys())Reflect.apply(r,n,[this.get(o),o,this])}*values(){for(let r of this.keys())yield this.get(r)}*entries(){for(let r of this.keys())yield[r,this.get(r)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((r,n)=>(r[n]=this.getAll(n),r),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((r,n)=>{let o=this.getAll(n);return n==="host"?r[n]=o[0]:r[n]=o.length>1?o:o[0],r},{})}};Object.defineProperties(we.prototype,["get","entries","forEach","values"].reduce((t,r)=>(t[r]={enumerable:!0},t),{}));function ji(t=[]){return new we(t.reduce((r,n,o,i)=>(o%2===0&&r.push(i.slice(o,o+2)),r),[]).filter(([r,n])=>{try{return yn(r),ba(r,String(n)),!0}catch{return!1}}))}var Jl=new Set([301,302,303,307,308]),wn=t=>Jl.has(t);var Pe=Symbol("Response internals"),Se=class t extends Be{constructor(r=null,n={}){super(r,n);let o=n.status!=null?n.status:200,i=new we(n.headers);if(r!==null&&!i.has("Content-Type")){let u=gn(r,this);u&&i.append("Content-Type",u)}this[Pe]={type:"default",url:n.url,status:o,statusText:n.statusText||"",headers:i,counter:n.counter,highWaterMark:n.highWaterMark}}get type(){return this[Pe].type}get url(){return this[Pe].url||""}get status(){return this[Pe].status}get ok(){return this[Pe].status>=200&&this[Pe].status<300}get redirected(){return this[Pe].counter>0}get statusText(){return this[Pe].statusText}get headers(){return this[Pe].headers}get highWaterMark(){return this[Pe].highWaterMark}clone(){return new t($t(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(r,n=302){if(!wn(n))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new t(null,{headers:{location:new URL(r).toString()},status:n})}static error(){let r=new t(null,{status:0,statusText:""});return r[Pe].type="error",r}get[Symbol.toStringTag](){return"Response"}};Object.defineProperties(Se.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});var Ji=require("node:url"),Zi=require("node:util");var Hi=t=>{if(t.search)return t.search;let r=t.href.length-1,n=t.hash||(t.href[r]==="#"?"#":"");return t.href[r-n.length]==="?"?"?":""};var Yi=require("node:net");function $i(t,r=!1){return t==null||(t=new URL(t),/^(about|blob|data):$/.test(t.protocol))?"no-referrer":(t.username="",t.password="",t.hash="",r&&(t.pathname="",t.search=""),t)}var Vi=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]),Qi="strict-origin-when-cross-origin";function Gi(t){if(!Vi.has(t))throw new TypeError(`Invalid referrerPolicy: ${t}`);return t}function Zl(t){if(/^(http|ws)s:$/.test(t.protocol))return!0;let r=t.host.replace(/(^\[)|(]$)/g,""),n=(0,Yi.isIP)(r);return n===4&&/^127\./.test(r)||n===6&&/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(r)?!0:/^(.+\.)*localhost$/.test(t.host)?!1:t.protocol==="file:"}function Yt(t){return/^about:(blank|srcdoc)$/.test(t)||t.protocol==="data:"||/^(blob|filesystem):$/.test(t.protocol)?!0:Zl(t)}function Xi(t,{referrerURLCallback:r,referrerOriginCallback:n}={}){if(t.referrer==="no-referrer"||t.referrerPolicy==="")return null;let o=t.referrerPolicy;if(t.referrer==="about:client")return"no-referrer";let i=t.referrer,u=$i(i),f=$i(i,!0);u.toString().length>4096&&(u=f),r&&(u=r(u)),n&&(f=n(f));let h=new URL(t.url);switch(o){case"no-referrer":return"no-referrer";case"origin":return f;case"unsafe-url":return u;case"strict-origin":return Yt(u)&&!Yt(h)?"no-referrer":f.toString();case"strict-origin-when-cross-origin":return u.origin===h.origin?u:Yt(u)&&!Yt(h)?"no-referrer":f;case"same-origin":return u.origin===h.origin?u:"no-referrer";case"origin-when-cross-origin":return u.origin===h.origin?u:f;case"no-referrer-when-downgrade":return Yt(u)&&!Yt(h)?"no-referrer":u;default:throw new TypeError(`Invalid referrerPolicy: ${o}`)}}function Ki(t){let r=(t.get("referrer-policy")||"").split(/[,\s]+/),n="";for(let o of r)o&&Vi.has(o)&&(n=o);return n}var K=Symbol("Request internals"),Sn=t=>typeof t=="object"&&typeof t[K]=="object",ef=(0,Zi.deprecate)(()=>{},".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)"),Et=class t extends Be{constructor(r,n={}){let o;if(Sn(r)?o=new URL(r.url):(o=new URL(r),r={}),o.username!==""||o.password!=="")throw new TypeError(`${o} is an url with embedded credentials.`);let i=n.method||r.method||"GET";if(i=i.toUpperCase(),"data"in n&&ef(),(n.body!=null||Sn(r)&&r.body!==null)&&(i==="GET"||i==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let u=n.body?n.body:Sn(r)&&r.body!==null?$t(r):null;super(u,{size:n.size||r.size||0});let f=new we(n.headers||r.headers||{});if(u!==null&&!f.has("Content-Type")){let c=gn(u,this);c&&f.set("Content-Type",c)}let h=Sn(r)?r.signal:null;if("signal"in n&&(h=n.signal),h!=null&&!xi(h))throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");let p=n.referrer==null?r.referrer:n.referrer;if(p==="")p="no-referrer";else if(p){let c=new URL(p);p=/^about:(\/\/)?client$/.test(c)?"client":c}else p=void 0;this[K]={method:i,redirect:n.redirect||r.redirect||"follow",headers:f,parsedURL:o,signal:h,referrer:p},this.follow=n.follow===void 0?r.follow===void 0?20:r.follow:n.follow,this.compress=n.compress===void 0?r.compress===void 0?!0:r.compress:n.compress,this.counter=n.counter||r.counter||0,this.agent=n.agent||r.agent,this.highWaterMark=n.highWaterMark||r.highWaterMark||16384,this.insecureHTTPParser=n.insecureHTTPParser||r.insecureHTTPParser||!1,this.referrerPolicy=n.referrerPolicy||r.referrerPolicy||""}get method(){return this[K].method}get url(){return(0,Ji.format)(this[K].parsedURL)}get headers(){return this[K].headers}get redirect(){return this[K].redirect}get signal(){return this[K].signal}get referrer(){if(this[K].referrer==="no-referrer")return"";if(this[K].referrer==="client")return"about:client";if(this[K].referrer)return this[K].referrer.toString()}get referrerPolicy(){return this[K].referrerPolicy}set referrerPolicy(r){this[K].referrerPolicy=Gi(r)}clone(){return new t(this)}get[Symbol.toStringTag](){return"Request"}};Object.defineProperties(Et.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});var es=t=>{let{parsedURL:r}=t[K],n=new we(t[K].headers);n.has("Accept")||n.set("Accept","*/*");let o=null;if(t.body===null&&/^(post|put)$/i.test(t.method)&&(o="0"),t.body!==null){let h=zi(t);typeof h=="number"&&!Number.isNaN(h)&&(o=String(h))}o&&n.set("Content-Length",o),t.referrerPolicy===""&&(t.referrerPolicy=Qi),t.referrer&&t.referrer!=="no-referrer"?t[K].referrer=Xi(t):t[K].referrer="no-referrer",t[K].referrer instanceof URL&&n.set("Referer",t.referrer),n.has("User-Agent")||n.set("User-Agent","node-fetch"),t.compress&&!n.has("Accept-Encoding")&&n.set("Accept-Encoding","gzip,deflate,br");let{agent:i}=t;typeof i=="function"&&(i=i(r)),!n.has("Connection")&&!i&&n.set("Connection","close");let u=Hi(r),f={path:r.pathname+u,method:t.method,headers:n[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:t.insecureHTTPParser,agent:i};return{parsedURL:r,options:f}};var _n=class extends Ve{constructor(r,n="aborted"){super(r,n)}};cn();ca();var tf=new Set(["data:","http:","https:"]);async function vn(t,r){return new Promise((n,o)=>{let i=new Et(t,r),{parsedURL:u,options:f}=es(i);if(!tf.has(u.protocol))throw new TypeError(`node-fetch cannot load ${t}. URL scheme "${u.protocol.replace(/:$/,"")}" is not supported.`);if(u.protocol==="data:"){let S=Ci(i.url),E=new Se(S,{headers:{"Content-Type":S.typeFull}});n(E);return}let h=(u.protocol==="https:"?rs.default:ts.default).request,{signal:p}=i,c=null,_=()=>{let S=new _n("The operation was aborted.");o(S),i.body&&i.body instanceof pe.default.Readable&&i.body.destroy(S),!(!c||!c.body)&&c.body.emit("error",S)};if(p&&p.aborted){_();return}let v=()=>{_(),w()},y=h(u.toString(),f);p&&p.addEventListener("abort",v);let w=()=>{y.abort(),p&&p.removeEventListener("abort",v)};y.on("error",S=>{o(new fe(`request to ${i.url} failed, reason: ${S.message}`,"system",S)),w()}),rf(y,S=>{c.body.destroy(S)}),process.version<"v14"&&y.on("socket",S=>{let E;S.prependListener("end",()=>{E=S._eventsCount}),S.prependListener("close",T=>{if(c&&E<S._eventsCount&&!T){let g=new Error("Premature close");g.code="ERR_STREAM_PREMATURE_CLOSE",c.body.emit("error",g)}})}),y.on("response",S=>{y.setTimeout(0);let E=ji(S.rawHeaders);if(wn(S.statusCode)){let P=E.get("Location"),q=null;try{q=P===null?null:new URL(P,i.url)}catch{if(i.redirect!=="manual"){o(new fe(`uri requested responds with an invalid redirect URL: ${P}`,"invalid-redirect")),w();return}}switch(i.redirect){case"error":o(new fe(`uri requested responds with a redirect, redirect mode is set to error: ${i.url}`,"no-redirect")),w();return;case"manual":break;case"follow":{if(q===null)break;if(i.counter>=i.follow){o(new fe(`maximum redirect reached at: ${i.url}`,"max-redirect")),w();return}let D={headers:new we(i.headers),follow:i.follow,counter:i.counter+1,agent:i.agent,compress:i.compress,method:i.method,body:$t(i),signal:i.signal,size:i.size,referrer:i.referrer,referrerPolicy:i.referrerPolicy};if(!Bi(i.url,q))for(let J of["authorization","www-authenticate","cookie","cookie2"])D.headers.delete(J);if(S.statusCode!==303&&i.body&&r.body instanceof pe.default.Readable){o(new fe("Cannot follow redirect with body being a readable stream","unsupported-redirect")),w();return}(S.statusCode===303||(S.statusCode===301||S.statusCode===302)&&i.method==="POST")&&(D.method="GET",D.body=void 0,D.headers.delete("content-length"));let ee=Ki(E);ee&&(D.referrerPolicy=ee),n(vn(new Et(q,D))),w();return}default:return o(new TypeError(`Redirect option '${i.redirect}' is not a valid value of RequestRedirect`))}}p&&S.once("end",()=>{p.removeEventListener("abort",v)});let T=(0,pe.pipeline)(S,new pe.PassThrough,P=>{P&&o(P)});process.version<"v12.10"&&S.on("aborted",v);let g={url:i.url,status:S.statusCode,statusText:S.statusMessage,headers:E,size:i.size,counter:i.counter,highWaterMark:i.highWaterMark},O=E.get("Content-Encoding");if(!i.compress||i.method==="HEAD"||O===null||S.statusCode===204||S.statusCode===304){c=new Se(T,g),n(c);return}let I={flush:Pt.default.Z_SYNC_FLUSH,finishFlush:Pt.default.Z_SYNC_FLUSH};if(O==="gzip"||O==="x-gzip"){T=(0,pe.pipeline)(T,Pt.default.createGunzip(I),P=>{P&&o(P)}),c=new Se(T,g),n(c);return}if(O==="deflate"||O==="x-deflate"){let P=(0,pe.pipeline)(S,new pe.PassThrough,q=>{q&&o(q)});P.once("data",q=>{(q[0]&15)===8?T=(0,pe.pipeline)(T,Pt.default.createInflate(),D=>{D&&o(D)}):T=(0,pe.pipeline)(T,Pt.default.createInflateRaw(),D=>{D&&o(D)}),c=new Se(T,g),n(c)}),P.once("end",()=>{c||(c=new Se(T,g),n(c))});return}if(O==="br"){T=(0,pe.pipeline)(T,Pt.default.createBrotliDecompress(),P=>{P&&o(P)}),c=new Se(T,g),n(c);return}c=new Se(T,g),n(c)}),Ni(y,i).catch(o)})}function rf(t,r){let n=_r.Buffer.from(`0\r
\r
`),o=!1,i=!1,u;t.on("response",f=>{let{headers:h}=f;o=h["transfer-encoding"]==="chunked"&&!h["content-length"]}),t.on("socket",f=>{let h=()=>{if(o&&!i){let p=new Error("Premature close");p.code="ERR_STREAM_PREMATURE_CLOSE",r(p)}};f.prependListener("close",h),t.on("abort",()=>{f.removeListener("close",h)}),f.on("data",p=>{i=_r.Buffer.compare(p.slice(-5),n)===0,!i&&u&&(i=_r.Buffer.compare(u.slice(-3),n.slice(0,3))===0&&_r.Buffer.compare(p.slice(-2),n.slice(3))===0),u=p})})}var ns=Ee(sn());var{token:nf}=fn(),af={method:"get",headers:{Authorization:`Token ${nf}`}},ga=async(t,r)=>{let n=await vn(`https://readwise.io/api${t}?${ns.default.stringify(r)}`,af),o=await n.json();if(!n.ok){let i=new Error("An error occurred while fetching the data.");throw i.status=n.status,i}return o};var as=require("react"),Vt=require("@raycast/api"),ya=t=>{(0,as.useEffect)(()=>{t&&(t.status===401||t.status===403?(0,Vt.showToast)(Vt.Toast.Style.Failure,"Invalid API token","Please, validate your Readwise API token is correct and you added one."):(0,Vt.showToast)(Vt.Toast.Style.Failure,"Something went wrong.","Please, try it again."))},[t])};var is=t=>{let{data:r,error:n,isValidating:o}=ia(t,ga);return ya(n),{data:r,loading:!r&&!n||o}},{pageSize:of}=fn(),sf={page_size:of},ss=(t,r)=>{let n=r||sf,[o,i]=(0,os.useState)(n),{data:u,error:f,isValidating:h}=ia([t,o],ga);return ya(f),{currentParams:o,data:u,defaultParams:n,loading:!u&&!f||h,setParams:i}};var wa="/v2/highlights";function ls(){let{data:t,loading:r,setParams:n,defaultParams:o}=ss(wa);return{data:t,loading:r,refetch:async i=>{n({...o,...us.default.parse(new URL(i,"https://readwise.io").search)})}}}var Ae=require("@raycast/api");var V=require("@raycast/api");function fs(t){let{data:r,loading:n}=is(`/v2/books/${t}`);return{data:r,loading:n}}var Sa=require("@raycast/api"),_a=require("react/jsx-runtime"),ds=({tags:t})=>t.length===0?null:(0,_a.jsx)(Sa.Detail.Metadata.TagList,{title:"Tag",children:t.map(r=>(0,_a.jsx)(Sa.Detail.Metadata.TagList.Item,{text:r.name},r.name))});var td=Ee(sn());function M(t,r){if(r.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+r.length+" present")}function va(t){return M(1,arguments),t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function $(t){M(1,arguments);var r=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&r==="[object Date]"?new Date(t.getTime()):typeof t=="number"||r==="[object Number]"?new Date(t):((typeof t=="string"||r==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn(new Error().stack)),new Date(NaN))}function Ra(t){if(M(1,arguments),!va(t)&&typeof t!="number")return!1;var r=$(t);return!isNaN(Number(r))}var uf={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},lf=function(t,r,n){var o,i=uf[t];return typeof i=="string"?o=i:r===1?o=i.one:o=i.other.replace("{{count}}",r.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+o:o+" ago":o},cs=lf;function vr(t){return function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=r.width?String(r.width):t.defaultWidth,o=t.formats[n]||t.formats[t.defaultWidth];return o}}var ff={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},df={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},cf={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},hf={date:vr({formats:ff,defaultWidth:"full"}),time:vr({formats:df,defaultWidth:"full"}),dateTime:vr({formats:cf,defaultWidth:"full"})},hs=hf;var mf={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},pf=function(t,r,n,o){return mf[t]},ms=pf;function At(t){return function(r,n){var o=n||{},i=o.context?String(o.context):"standalone",u;if(i==="formatting"&&t.formattingValues){var f=t.defaultFormattingWidth||t.defaultWidth,h=o.width?String(o.width):f;u=t.formattingValues[h]||t.formattingValues[f]}else{var p=t.defaultWidth,c=o.width?String(o.width):t.defaultWidth;u=t.values[c]||t.values[p]}var _=t.argumentCallback?t.argumentCallback(r):r;return u[_]}}var bf={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},gf={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},yf={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},wf={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Sf={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},_f={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},vf=function(t,r){var n=Number(t),o=n%100;if(o>20||o<10)switch(o%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Rf={ordinalNumber:vf,era:At({values:bf,defaultWidth:"wide"}),quarter:At({values:gf,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:At({values:yf,defaultWidth:"wide"}),day:At({values:wf,defaultWidth:"wide"}),dayPeriod:At({values:Sf,defaultWidth:"wide",formattingValues:_f,defaultFormattingWidth:"wide"})},ps=Rf;function Ot(t){return function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=n.width,i=o&&t.matchPatterns[o]||t.matchPatterns[t.defaultMatchWidth],u=r.match(i);if(!u)return null;var f=u[0],h=o&&t.parsePatterns[o]||t.parsePatterns[t.defaultParseWidth],p=Array.isArray(h)?Cf(h,function(v){return v.test(f)}):Tf(h,function(v){return v.test(f)}),c;c=t.valueCallback?t.valueCallback(p):p,c=n.valueCallback?n.valueCallback(c):c;var _=r.slice(f.length);return{value:c,rest:_}}}function Tf(t,r){for(var n in t)if(t.hasOwnProperty(n)&&r(t[n]))return n}function Cf(t,r){for(var n=0;n<t.length;n++)if(r(t[n]))return n}function Ta(t){return function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=r.match(t.matchPattern);if(!o)return null;var i=o[0],u=r.match(t.parsePattern);if(!u)return null;var f=t.valueCallback?t.valueCallback(u[0]):u[0];f=n.valueCallback?n.valueCallback(f):f;var h=r.slice(i.length);return{value:f,rest:h}}}var Ef=/^(\d+)(th|st|nd|rd)?/i,Pf=/\d+/i,Af={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Of={any:[/^b/i,/^(a|c)/i]},Df={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Wf={any:[/1/i,/2/i,/3/i,/4/i]},kf={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Ff={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},xf={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Bf={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Mf={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},qf={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Lf={ordinalNumber:Ta({matchPattern:Ef,parsePattern:Pf,valueCallback:function(t){return parseInt(t,10)}}),era:Ot({matchPatterns:Af,defaultMatchWidth:"wide",parsePatterns:Of,defaultParseWidth:"any"}),quarter:Ot({matchPatterns:Df,defaultMatchWidth:"wide",parsePatterns:Wf,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:Ot({matchPatterns:kf,defaultMatchWidth:"wide",parsePatterns:Ff,defaultParseWidth:"any"}),day:Ot({matchPatterns:xf,defaultMatchWidth:"wide",parsePatterns:Bf,defaultParseWidth:"any"}),dayPeriod:Ot({matchPatterns:Mf,defaultMatchWidth:"any",parsePatterns:qf,defaultParseWidth:"any"})},bs=Lf;var If={code:"en-US",formatDistance:cs,formatLong:hs,formatRelative:ms,localize:ps,match:bs,options:{weekStartsOn:0,firstWeekContainsDate:1}},gs=If;function X(t){if(t===null||t===!0||t===!1)return NaN;var r=Number(t);return isNaN(r)?r:r<0?Math.ceil(r):Math.floor(r)}function Ca(t,r){M(2,arguments);var n=$(t).getTime(),o=X(r);return new Date(n+o)}function Ea(t,r){M(2,arguments);var n=X(r);return Ca(t,-n)}var Uf=864e5;function Pa(t){M(1,arguments);var r=$(t),n=r.getTime();r.setUTCMonth(0,1),r.setUTCHours(0,0,0,0);var o=r.getTime(),i=n-o;return Math.floor(i/Uf)+1}function ft(t){M(1,arguments);var r=1,n=$(t),o=n.getUTCDay(),i=(o<r?7:0)+o-r;return n.setUTCDate(n.getUTCDate()-i),n.setUTCHours(0,0,0,0),n}function Rr(t){M(1,arguments);var r=$(t),n=r.getUTCFullYear(),o=new Date(0);o.setUTCFullYear(n+1,0,4),o.setUTCHours(0,0,0,0);var i=ft(o),u=new Date(0);u.setUTCFullYear(n,0,4),u.setUTCHours(0,0,0,0);var f=ft(u);return r.getTime()>=i.getTime()?n+1:r.getTime()>=f.getTime()?n:n-1}function Aa(t){M(1,arguments);var r=Rr(t),n=new Date(0);n.setUTCFullYear(r,0,4),n.setUTCHours(0,0,0,0);var o=ft(n);return o}var zf=6048e5;function Oa(t){M(1,arguments);var r=$(t),n=ft(r).getTime()-Aa(r).getTime();return Math.round(n/zf)+1}function dt(t,r){M(1,arguments);var n=r||{},o=n.locale,i=o&&o.options&&o.options.weekStartsOn,u=i==null?0:X(i),f=n.weekStartsOn==null?u:X(n.weekStartsOn);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=$(t),p=h.getUTCDay(),c=(p<f?7:0)+p-f;return h.setUTCDate(h.getUTCDate()-c),h.setUTCHours(0,0,0,0),h}function Tr(t,r){M(1,arguments);var n=$(t),o=n.getUTCFullYear(),i=r||{},u=i.locale,f=u&&u.options&&u.options.firstWeekContainsDate,h=f==null?1:X(f),p=i.firstWeekContainsDate==null?h:X(i.firstWeekContainsDate);if(!(p>=1&&p<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var c=new Date(0);c.setUTCFullYear(o+1,0,p),c.setUTCHours(0,0,0,0);var _=dt(c,r),v=new Date(0);v.setUTCFullYear(o,0,p),v.setUTCHours(0,0,0,0);var y=dt(v,r);return n.getTime()>=_.getTime()?o+1:n.getTime()>=y.getTime()?o:o-1}function Da(t,r){M(1,arguments);var n=r||{},o=n.locale,i=o&&o.options&&o.options.firstWeekContainsDate,u=i==null?1:X(i),f=n.firstWeekContainsDate==null?u:X(n.firstWeekContainsDate),h=Tr(t,r),p=new Date(0);p.setUTCFullYear(h,0,f),p.setUTCHours(0,0,0,0);var c=dt(p,r);return c}var Nf=6048e5;function Wa(t,r){M(1,arguments);var n=$(t),o=dt(n,r).getTime()-Da(n,r).getTime();return Math.round(o/Nf)+1}function B(t,r){for(var n=t<0?"-":"",o=Math.abs(t).toString();o.length<r;)o="0"+o;return n+o}var jf={y:function(t,r){var n=t.getUTCFullYear(),o=n>0?n:1-n;return B(r==="yy"?o%100:o,r.length)},M:function(t,r){var n=t.getUTCMonth();return r==="M"?String(n+1):B(n+1,2)},d:function(t,r){return B(t.getUTCDate(),r.length)},a:function(t,r){var n=t.getUTCHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h:function(t,r){return B(t.getUTCHours()%12||12,r.length)},H:function(t,r){return B(t.getUTCHours(),r.length)},m:function(t,r){return B(t.getUTCMinutes(),r.length)},s:function(t,r){return B(t.getUTCSeconds(),r.length)},S:function(t,r){var n=r.length,o=t.getUTCMilliseconds(),i=Math.floor(o*Math.pow(10,n-3));return B(i,r.length)}},Ge=jf;var Qt={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Hf={G:function(t,r,n){var o=t.getUTCFullYear()>0?1:0;switch(r){case"G":case"GG":case"GGG":return n.era(o,{width:"abbreviated"});case"GGGGG":return n.era(o,{width:"narrow"});case"GGGG":default:return n.era(o,{width:"wide"})}},y:function(t,r,n){if(r==="yo"){var o=t.getUTCFullYear(),i=o>0?o:1-o;return n.ordinalNumber(i,{unit:"year"})}return Ge.y(t,r)},Y:function(t,r,n,o){var i=Tr(t,o),u=i>0?i:1-i;if(r==="YY"){var f=u%100;return B(f,2)}return r==="Yo"?n.ordinalNumber(u,{unit:"year"}):B(u,r.length)},R:function(t,r){var n=Rr(t);return B(n,r.length)},u:function(t,r){var n=t.getUTCFullYear();return B(n,r.length)},Q:function(t,r,n){var o=Math.ceil((t.getUTCMonth()+1)/3);switch(r){case"Q":return String(o);case"QQ":return B(o,2);case"Qo":return n.ordinalNumber(o,{unit:"quarter"});case"QQQ":return n.quarter(o,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(o,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(o,{width:"wide",context:"formatting"})}},q:function(t,r,n){var o=Math.ceil((t.getUTCMonth()+1)/3);switch(r){case"q":return String(o);case"qq":return B(o,2);case"qo":return n.ordinalNumber(o,{unit:"quarter"});case"qqq":return n.quarter(o,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(o,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(o,{width:"wide",context:"standalone"})}},M:function(t,r,n){var o=t.getUTCMonth();switch(r){case"M":case"MM":return Ge.M(t,r);case"Mo":return n.ordinalNumber(o+1,{unit:"month"});case"MMM":return n.month(o,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(o,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(o,{width:"wide",context:"formatting"})}},L:function(t,r,n){var o=t.getUTCMonth();switch(r){case"L":return String(o+1);case"LL":return B(o+1,2);case"Lo":return n.ordinalNumber(o+1,{unit:"month"});case"LLL":return n.month(o,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(o,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(o,{width:"wide",context:"standalone"})}},w:function(t,r,n,o){var i=Wa(t,o);return r==="wo"?n.ordinalNumber(i,{unit:"week"}):B(i,r.length)},I:function(t,r,n){var o=Oa(t);return r==="Io"?n.ordinalNumber(o,{unit:"week"}):B(o,r.length)},d:function(t,r,n){return r==="do"?n.ordinalNumber(t.getUTCDate(),{unit:"date"}):Ge.d(t,r)},D:function(t,r,n){var o=Pa(t);return r==="Do"?n.ordinalNumber(o,{unit:"dayOfYear"}):B(o,r.length)},E:function(t,r,n){var o=t.getUTCDay();switch(r){case"E":case"EE":case"EEE":return n.day(o,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(o,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(o,{width:"short",context:"formatting"});case"EEEE":default:return n.day(o,{width:"wide",context:"formatting"})}},e:function(t,r,n,o){var i=t.getUTCDay(),u=(i-o.weekStartsOn+8)%7||7;switch(r){case"e":return String(u);case"ee":return B(u,2);case"eo":return n.ordinalNumber(u,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,r,n,o){var i=t.getUTCDay(),u=(i-o.weekStartsOn+8)%7||7;switch(r){case"c":return String(u);case"cc":return B(u,r.length);case"co":return n.ordinalNumber(u,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,r,n){var o=t.getUTCDay(),i=o===0?7:o;switch(r){case"i":return String(i);case"ii":return B(i,r.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(o,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(o,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(o,{width:"short",context:"formatting"});case"iiii":default:return n.day(o,{width:"wide",context:"formatting"})}},a:function(t,r,n){var o=t.getUTCHours(),i=o/12>=1?"pm":"am";switch(r){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,r,n){var o=t.getUTCHours(),i;switch(o===12?i=Qt.noon:o===0?i=Qt.midnight:i=o/12>=1?"pm":"am",r){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,r,n){var o=t.getUTCHours(),i;switch(o>=17?i=Qt.evening:o>=12?i=Qt.afternoon:o>=4?i=Qt.morning:i=Qt.night,r){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,r,n){if(r==="ho"){var o=t.getUTCHours()%12;return o===0&&(o=12),n.ordinalNumber(o,{unit:"hour"})}return Ge.h(t,r)},H:function(t,r,n){return r==="Ho"?n.ordinalNumber(t.getUTCHours(),{unit:"hour"}):Ge.H(t,r)},K:function(t,r,n){var o=t.getUTCHours()%12;return r==="Ko"?n.ordinalNumber(o,{unit:"hour"}):B(o,r.length)},k:function(t,r,n){var o=t.getUTCHours();return o===0&&(o=24),r==="ko"?n.ordinalNumber(o,{unit:"hour"}):B(o,r.length)},m:function(t,r,n){return r==="mo"?n.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):Ge.m(t,r)},s:function(t,r,n){return r==="so"?n.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):Ge.s(t,r)},S:function(t,r){return Ge.S(t,r)},X:function(t,r,n,o){var i=o._originalDate||t,u=i.getTimezoneOffset();if(u===0)return"Z";switch(r){case"X":return ws(u);case"XXXX":case"XX":return Dt(u);case"XXXXX":case"XXX":default:return Dt(u,":")}},x:function(t,r,n,o){var i=o._originalDate||t,u=i.getTimezoneOffset();switch(r){case"x":return ws(u);case"xxxx":case"xx":return Dt(u);case"xxxxx":case"xxx":default:return Dt(u,":")}},O:function(t,r,n,o){var i=o._originalDate||t,u=i.getTimezoneOffset();switch(r){case"O":case"OO":case"OOO":return"GMT"+ys(u,":");case"OOOO":default:return"GMT"+Dt(u,":")}},z:function(t,r,n,o){var i=o._originalDate||t,u=i.getTimezoneOffset();switch(r){case"z":case"zz":case"zzz":return"GMT"+ys(u,":");case"zzzz":default:return"GMT"+Dt(u,":")}},t:function(t,r,n,o){var i=o._originalDate||t,u=Math.floor(i.getTime()/1e3);return B(u,r.length)},T:function(t,r,n,o){var i=o._originalDate||t,u=i.getTime();return B(u,r.length)}};function ys(t,r){var n=t>0?"-":"+",o=Math.abs(t),i=Math.floor(o/60),u=o%60;if(u===0)return n+String(i);var f=r||"";return n+String(i)+f+B(u,2)}function ws(t,r){if(t%60===0){var n=t>0?"-":"+";return n+B(Math.abs(t)/60,2)}return Dt(t,r)}function Dt(t,r){var n=r||"",o=t>0?"-":"+",i=Math.abs(t),u=B(Math.floor(i/60),2),f=B(i%60,2);return o+u+n+f}var Ss=Hf;function _s(t,r){switch(t){case"P":return r.date({width:"short"});case"PP":return r.date({width:"medium"});case"PPP":return r.date({width:"long"});case"PPPP":default:return r.date({width:"full"})}}function vs(t,r){switch(t){case"p":return r.time({width:"short"});case"pp":return r.time({width:"medium"});case"ppp":return r.time({width:"long"});case"pppp":default:return r.time({width:"full"})}}function $f(t,r){var n=t.match(/(P+)(p+)?/)||[],o=n[1],i=n[2];if(!i)return _s(t,r);var u;switch(o){case"P":u=r.dateTime({width:"short"});break;case"PP":u=r.dateTime({width:"medium"});break;case"PPP":u=r.dateTime({width:"long"});break;case"PPPP":default:u=r.dateTime({width:"full"});break}return u.replace("{{date}}",_s(o,r)).replace("{{time}}",vs(i,r))}var Yf={p:vs,P:$f},Rs=Yf;function ka(t){var r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),t.getTime()-r.getTime()}var Vf=["D","DD"],Qf=["YY","YYYY"];function Ts(t){return Vf.indexOf(t)!==-1}function Cs(t){return Qf.indexOf(t)!==-1}function Fa(t,r,n){if(t==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(r,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if(t==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(r,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if(t==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(r,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"));if(t==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(r,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"))}var Gf=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Xf=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Kf=/^'([^]*?)'?$/,Jf=/''/g,Zf=/[a-zA-Z]/;function xa(t,r,n){M(2,arguments);var o=String(r),i=n||{},u=i.locale||gs,f=u.options&&u.options.firstWeekContainsDate,h=f==null?1:X(f),p=i.firstWeekContainsDate==null?h:X(i.firstWeekContainsDate);if(!(p>=1&&p<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var c=u.options&&u.options.weekStartsOn,_=c==null?0:X(c),v=i.weekStartsOn==null?_:X(i.weekStartsOn);if(!(v>=0&&v<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!u.localize)throw new RangeError("locale must contain localize property");if(!u.formatLong)throw new RangeError("locale must contain formatLong property");var y=$(t);if(!Ra(y))throw new RangeError("Invalid time value");var w=ka(y),S=Ea(y,w),E={firstWeekContainsDate:p,weekStartsOn:v,locale:u,_originalDate:y},T=o.match(Xf).map(function(g){var O=g[0];if(O==="p"||O==="P"){var I=Rs[O];return I(g,u.formatLong,E)}return g}).join("").match(Gf).map(function(g){if(g==="''")return"'";var O=g[0];if(O==="'")return ed(g);var I=Ss[O];if(I)return!i.useAdditionalWeekYearTokens&&Cs(g)&&Fa(g,r,t),!i.useAdditionalDayOfYearTokens&&Ts(g)&&Fa(g,r,t),I(S,g,u.localize,E);if(O.match(Zf))throw new RangeError("Format string contains an unescaped latin alphabet character `"+O+"`");return g}).join("");return T}function ed(t){return t.match(Kf)[1].replace(Jf,"'")}var Ba=t=>xa(new Date(t),"MMMM dd, yyyy hh:mm"),Es=(t,r)=>t?t.filter(Boolean).join(r):"",Ps=(t,r)=>t?"Loading...":r.toString();var Y=require("react/jsx-runtime"),As=({item:t})=>{let{data:r,loading:n}=fs(t.book_id),o=r?.highlights_url,i=`https://readwise.io/open/${t.id}`;return(0,Y.jsx)(V.Detail,{isLoading:n,actions:(0,Y.jsxs)(V.ActionPanel,{children:[(0,Y.jsx)(V.Action.CopyToClipboard,{title:"Copy Text",content:t.text,shortcut:{modifiers:["cmd"],key:"."}}),t.url&&(0,Y.jsx)(V.Action.OpenInBrowser,{title:"Open Source",url:t.url}),(0,Y.jsx)(V.Action.OpenInBrowser,{title:"Open Highlight",url:i}),o&&(0,Y.jsx)(V.Action.OpenInBrowser,{title:"Browse related highlights",url:o})]}),navigationTitle:"Highlight Detail",metadata:(0,Y.jsxs)(V.Detail.Metadata,{children:[(0,Y.jsx)(V.Detail.Metadata.Label,{title:"Author",text:r?.author||"-"}),(0,Y.jsx)(V.Detail.Metadata.Label,{title:"Category",text:r?.category||"-"}),(0,Y.jsx)(V.Detail.Metadata.Label,{title:"Source",text:r?.source||"-"}),(0,Y.jsx)(V.Detail.Metadata.Separator,{}),(0,Y.jsx)(V.Detail.Metadata.Label,{title:"Highlighted At",text:Ba(t.highlighted_at)}),(0,Y.jsx)(V.Detail.Metadata.Label,{title:"Updated At",text:Ba(t.updated)}),(0,Y.jsx)(ds,{tags:t.tags}),(0,Y.jsx)(V.Detail.Metadata.Separator,{}),t.url&&(0,Y.jsx)(V.Detail.Metadata.Link,{title:"Source",target:t.url,text:t.url}),(0,Y.jsx)(V.Action.OpenInBrowser,{title:"Open Highlight",url:i}),o&&(0,Y.jsx)(V.Detail.Metadata.Link,{title:"Related",text:"Browse related highlights",target:o}),(0,Y.jsx)(V.Detail.Metadata.Separator,{})]}),markdown:Es([`## Highlight
${t.text}`,t.note&&`## Notes
${t.note}`],`

`)})};var ct=require("react/jsx-runtime"),Os=({actions:t,item:r})=>(0,ct.jsx)(Ae.List.Item,{title:r.text,subtitle:r.note,keywords:r.tags.map(n=>n.name),accessories:r.url&&[{text:r.url,icon:Ae.Icon.Link}]||void 0,actions:(0,ct.jsxs)(Ae.ActionPanel,{children:[(0,ct.jsx)(Ae.Action.Push,{icon:Ae.Icon.Document,title:"Show Details",target:(0,ct.jsx)(As,{item:r})}),r.url&&(0,ct.jsx)(Ae.Action.OpenInBrowser,{title:"Open in Browser",url:r.url}),(0,ct.jsx)(Ae.Action.CopyToClipboard,{title:"Copy Text",content:r.text,shortcut:{modifiers:["cmd"],key:"."}}),t]})});var Ma=require("@raycast/api");var Xe=require("react/jsx-runtime"),rd=()=>(0,Xe.jsx)(Ma.List.EmptyView,{title:"No Results",icon:{source:"empty-view.png"}}),Ds=({actions:t,data:r,loading:n,listView:o})=>{let i=r?.results.length||0,u=Ps(n,i);return(0,Xe.jsxs)(Xe.Fragment,{children:[(0,Xe.jsx)(rd,{}),(0,Xe.jsx)(Ma.List.Section,{title:"Results",subtitle:u,children:r?.results.map(f=>(0,Xe.jsx)(o,{item:f,actions:t},f.id))})]})};var Rn=require("@raycast/api"),Me=require("react/jsx-runtime"),Ws=({onNextAction:t,onPreviousAction:r,onHomeAction:n})=>(0,Me.jsxs)(Me.Fragment,{children:[t&&(0,Me.jsx)(Rn.Action,{icon:"\u27A1\uFE0F",title:"Next Page",onAction:t,shortcut:{modifiers:["cmd"],key:"arrowRight"}}),r&&(0,Me.jsxs)(Me.Fragment,{children:[(0,Me.jsx)(Rn.Action,{icon:"\u2B05\uFE0F",title:"Previous Page",onAction:r,shortcut:{modifiers:["cmd"],key:"arrowLeft"}}),(0,Me.jsx)(Rn.Action,{icon:"\u{1F3E0}",title:"Back to Home",onAction:n,shortcut:{modifiers:["cmd"],key:"0"}})]})]});var Tn=require("react/jsx-runtime");function Fs(){let{data:t,loading:r,refetch:n}=ls(),{next:o,previous:i}=t||{};return(0,Tn.jsx)(ks.List,{isLoading:r,enableFiltering:!0,children:(0,Tn.jsx)(Ds,{loading:r,data:t,actions:(0,Tn.jsx)(Ws,{onHomeAction:()=>n(wa),onNextAction:o?()=>n(o):void 0,onPreviousAction:i?()=>i&&n(i):void 0}),listView:Os})})}
/*! Bundled license information:

fetch-blob/index.js:
  (*! fetch-blob. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

formdata-polyfill/esm.min.js:
  (*! formdata-polyfill. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

node-domexception/index.js:
  (*! node-domexception. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

swr/dist/index.mjs:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)
*/
