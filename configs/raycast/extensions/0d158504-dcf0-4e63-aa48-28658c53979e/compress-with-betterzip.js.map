{
  "version": 3,
  "sources": ["../src/compress-with-betterzip.tsx", "../node_modules/run-applescript/index.js", "../src/utils/applescript-utils.ts", "../src/utils/common-utils.ts"],
  "sourcesContent": ["import { closeMainWindow, getSelectedFinderItems, showToast, Toast } from \"@raycast/api\";\nimport { scriptArchiveFiles } from \"./utils/applescript-utils\";\nimport { betterZipInstalled, betterZipNotInstallDialog } from \"./utils/common-utils\";\n\nexport default async () => {\n  try {\n    if (!betterZipInstalled()) {\n      await betterZipNotInstallDialog();\n      return;\n    }\n    await closeMainWindow({ clearRootSearch: false });\n    const fileSystemItems = await getSelectedFinderItems();\n    if (fileSystemItems.length === 0) {\n      await showToast({ title: \"No files selected\", style: Toast.Style.Failure });\n      return;\n    }\n    const filePaths = fileSystemItems.map((value) => {\n      return value.path;\n    });\n    await scriptArchiveFiles(filePaths);\n  } catch (e) {\n    console.error(String(e));\n    await showToast({ title: String(e), style: Toast.Style.Failure });\n  }\n};\n", "import process from 'node:process';\nimport {promisify} from 'node:util';\nimport {execFile, execFileSync} from 'node:child_process';\n\nconst execFileAsync = promisify(execFile);\n\nexport async function runAppleScript(script, {humanReadableOutput = true} = {}) {\n\tif (process.platform !== 'darwin') {\n\t\tthrow new Error('macOS only');\n\t}\n\n\tconst outputArguments = humanReadableOutput ? [] : ['-ss'];\n\n\tconst {stdout} = await execFileAsync('osascript', ['-e', script, outputArguments]);\n\treturn stdout.trim();\n}\n\nexport function runAppleScriptSync(script, {humanReadableOutput = true} = {}) {\n\tif (process.platform !== 'darwin') {\n\t\tthrow new Error('macOS only');\n\t}\n\n\tconst outputArguments = humanReadableOutput ? [] : ['-ss'];\n\n\tconst stdout = execFileSync('osascript', ['-e', script, ...outputArguments], {\n\t\tencoding: 'utf8',\n\t\tstdio: ['ignore', 'pipe', 'ignore'],\n\t\ttimeout: 500,\n\t});\n\n\treturn stdout.trim();\n}\n", "import { runAppleScript } from \"run-applescript\";\n\nexport const scriptArchiveFiles = async (filePaths: string[]) => {\n  try {\n    const _filePaths = filePaths.map((value) => `\"${value}\"`);\n    const script = `tell application \"BetterZip\"\n    set someFiles to {${_filePaths.join(\",\")}}  \n    queued archive someFiles with options {destination:original, format:zip, compression level:normal} show ui true\nend tell`;\n    await runAppleScript(script);\n  } catch (e) {\n    console.error(String(e));\n  }\n};\n\nexport const scriptExtractArchives = async (filePaths: string[]) => {\n  try {\n    const _filePaths = filePaths.map((value) => `\"${value}\"`);\n    const script = `tell application \"BetterZip\"\n    set archFiles to {${_filePaths.join(\",\")}}\n    queued unarchive archFiles with options {destination:original} show ui true\nend tell`;\n    await runAppleScript(script);\n  } catch (e) {\n    console.error(String(e));\n  }\n};\n", "import * as fs from \"fs\";\nimport { Alert, confirmAlert, open } from \"@raycast/api\";\n\nexport const betterZipInstalled = () => {\n  try {\n    const appPath1 = \"/Applications/BetterZip.app\";\n    const appPath2 = \"/Applications/Setapp/BetterZip.app\";\n    return fs.existsSync(appPath1) || fs.existsSync(appPath2);\n  } catch (e) {\n    console.error(String(e));\n    return false;\n  }\n};\n\nexport const betterZipNotInstallDialog = async () => {\n  const options: Alert.Options = {\n    icon: { source: \"betterzip-icon.png\" },\n    title: \"BetterZip Not Installed\",\n    message: \"BetterZip is not installed on your Mac. Please install BetterZip to use this command.\",\n    primaryAction: {\n      title: \"Get BetterZip\",\n      onAction: () => {\n        open(\"https://macitbetter.com\");\n      },\n    },\n  };\n  await confirmAlert(options);\n};\n"],
  "mappings": "0jBAAA,IAAAA,EAAA,GAAAC,EAAAD,EAAA,aAAAE,IAAA,eAAAC,EAAAH,GAAA,IAAAI,EAA0E,wBCA1E,IAAAC,EAAoB,6BACpBC,EAAwB,qBACxBC,EAAqC,8BAE/BC,KAAgB,aAAU,UAAQ,EAExC,eAAsBC,EAAeC,EAAQ,CAAC,oBAAAC,EAAsB,EAAI,EAAI,CAAC,EAAG,CAC/E,GAAI,EAAAC,QAAQ,WAAa,SACxB,MAAM,IAAI,MAAM,YAAY,EAG7B,IAAMC,EAAkBF,EAAsB,CAAC,EAAI,CAAC,KAAK,EAEnD,CAAC,OAAAG,CAAM,EAAI,MAAMN,EAAc,YAAa,CAAC,KAAME,EAAQG,CAAe,CAAC,EACjF,OAAOC,EAAO,KAAK,CACpB,CCbO,IAAMC,EAAqB,MAAOC,GAAwB,CAC/D,GAAI,CAEF,IAAMC,EAAS;AAAA,wBADID,EAAU,IAAKE,GAAU,IAAIA,CAAK,GAAG,EAEzB,KAAK,GAAG,CAAC;AAAA;AAAA,UAGxC,MAAMC,EAAeF,CAAM,CAC7B,OAAS,EAAG,CACV,QAAQ,MAAM,OAAO,CAAC,CAAC,CACzB,CACF,ECbA,IAAAG,EAAoB,iBACpBC,EAA0C,wBAE7BC,EAAqB,IAAM,CACtC,GAAI,CAGF,OAAU,aAFO,6BAEY,GAAQ,aADpB,oCACuC,CAC1D,OAASC,EAAG,CACV,eAAQ,MAAM,OAAOA,CAAC,CAAC,EAChB,EACT,CACF,EAEaC,EAA4B,SAAY,CAYnD,QAAM,gBAXyB,CAC7B,KAAM,CAAE,OAAQ,oBAAqB,EACrC,MAAO,0BACP,QAAS,wFACT,cAAe,CACb,MAAO,gBACP,SAAU,IAAM,IACd,QAAK,yBAAyB,CAChC,CACF,CACF,CAC0B,CAC5B,EHvBA,IAAOC,EAAQ,SAAY,CACzB,GAAI,CACF,GAAI,CAACC,EAAmB,EAAG,CACzB,MAAMC,EAA0B,EAChC,MACF,CACA,QAAM,mBAAgB,CAAE,gBAAiB,EAAM,CAAC,EAChD,IAAMC,EAAkB,QAAM,0BAAuB,EACrD,GAAIA,EAAgB,SAAW,EAAG,CAChC,QAAM,aAAU,CAAE,MAAO,oBAAqB,MAAO,QAAM,MAAM,OAAQ,CAAC,EAC1E,MACF,CACA,IAAMC,EAAYD,EAAgB,IAAKE,GAC9BA,EAAM,IACd,EACD,MAAMC,EAAmBF,CAAS,CACpC,OAASG,EAAG,CACV,QAAQ,MAAM,OAAOA,CAAC,CAAC,EACvB,QAAM,aAAU,CAAE,MAAO,OAAOA,CAAC,EAAG,MAAO,QAAM,MAAM,OAAQ,CAAC,CAClE,CACF",
  "names": ["compress_with_betterzip_exports", "__export", "compress_with_betterzip_default", "__toCommonJS", "import_api", "import_node_process", "import_node_util", "import_node_child_process", "execFileAsync", "runAppleScript", "script", "humanReadableOutput", "process", "outputArguments", "stdout", "scriptArchiveFiles", "filePaths", "script", "value", "runAppleScript", "fs", "import_api", "betterZipInstalled", "e", "betterZipNotInstallDialog", "compress_with_betterzip_default", "betterZipInstalled", "betterZipNotInstallDialog", "fileSystemItems", "filePaths", "value", "scriptArchiveFiles", "e"]
}
