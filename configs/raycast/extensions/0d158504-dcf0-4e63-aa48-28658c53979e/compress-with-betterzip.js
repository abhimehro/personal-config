"use strict";var g=Object.create;var n=Object.defineProperty;var S=Object.getOwnPropertyDescriptor;var A=Object.getOwnPropertyNames;var x=Object.getPrototypeOf,F=Object.prototype.hasOwnProperty;var Z=(t,e)=>{for(var i in e)n(t,i,{get:e[i],enumerable:!0})},l=(t,e,i,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of A(e))!F.call(t,s)&&s!==i&&n(t,s,{get:()=>e[s],enumerable:!(o=S(e,s))||o.enumerable});return t};var m=(t,e,i)=>(i=t!=null?g(x(t)):{},l(e||!t||!t.__esModule?n(i,"default",{value:t,enumerable:!0}):i,t)),P=t=>l(n({},"__esModule",{value:!0}),t);var b={};Z(b,{default:()=>I});module.exports=P(b);var r=require("@raycast/api");var u=m(require("node:process"),1),f=require("node:util"),p=require("node:child_process"),B=(0,f.promisify)(p.execFile);async function h(t,{humanReadableOutput:e=!0}={}){if(u.default.platform!=="darwin")throw new Error("macOS only");let i=e?[]:["-ss"],{stdout:o}=await B("osascript",["-e",t,i]);return o.trim()}var y=async t=>{try{let i=`tell application "BetterZip"
    set someFiles to {${t.map(o=>`"${o}"`).join(",")}}  
    queued archive someFiles with options {destination:original, format:zip, compression level:normal} show ui true
end tell`;await h(i)}catch(e){console.error(String(e))}};var c=m(require("fs")),a=require("@raycast/api"),d=()=>{try{return c.existsSync("/Applications/BetterZip.app")||c.existsSync("/Applications/Setapp/BetterZip.app")}catch(t){return console.error(String(t)),!1}},w=async()=>{await(0,a.confirmAlert)({icon:{source:"betterzip-icon.png"},title:"BetterZip Not Installed",message:"BetterZip is not installed on your Mac. Please install BetterZip to use this command.",primaryAction:{title:"Get BetterZip",onAction:()=>{(0,a.open)("https://macitbetter.com")}}})};var I=async()=>{try{if(!d()){await w();return}await(0,r.closeMainWindow)({clearRootSearch:!1});let t=await(0,r.getSelectedFinderItems)();if(t.length===0){await(0,r.showToast)({title:"No files selected",style:r.Toast.Style.Failure});return}let e=t.map(i=>i.path);await y(e)}catch(t){console.error(String(t)),await(0,r.showToast)({title:String(t),style:r.Toast.Style.Failure})}};
