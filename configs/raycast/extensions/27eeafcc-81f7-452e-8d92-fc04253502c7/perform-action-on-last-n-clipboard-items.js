"use strict";var u=Object.defineProperty;var A=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var p=Object.prototype.hasOwnProperty;var f=(e,o)=>{for(var n in o)u(e,n,{get:o[n],enumerable:!0})},C=(e,o,n,a)=>{if(o&&typeof o=="object"||typeof o=="function")for(let r of g(o))!p.call(e,r)&&r!==n&&u(e,r,{get:()=>o[r],enumerable:!(a=A(o,r))||a.enumerable});return e};var h=e=>C(u({},"__esModule",{value:!0}),e);var y={};f(y,{default:()=>d});module.exports=h(y);var t=require("@raycast/api"),i=require("react"),s=require("react/jsx-runtime"),m={"+":[(e,o)=>e+o],"*":[(e,o)=>e*o],Average:[(e,o)=>e+o,(e,o)=>e/o],custom:null},v=({items})=>{let[selectedAction,setSelectedAction]=(0,i.useState)("+"),[customAction,setCustomAction]=(0,i.useState)(""),[isStrings,setIsStrings]=(0,i.useState)(!1);return(0,s.jsxs)(t.Form,{actions:(0,s.jsx)(t.ActionPanel,{children:(0,s.jsx)(t.Action,{title:"Perform Action",icon:t.Icon.Calculator,onAction:async()=>{let result,first=isStrings?items[0].text:Number(items[0].text),rest=[];try{rest=items.slice(1).map(e=>{if(!isStrings){let o=Number(e.text);if(isNaN(o))throw new Error("Invalid number");return o}return e.text})}catch(e){await(0,t.showToast)({title:"Error parsing numbers",style:t.Toast.Style.Failure});return}try{console.log(first),console.log(rest),result=rest.reduce(m[selectedAction]?.[0]||eval(`(${customAction})`),first),m[selectedAction]?.[1]&&(result=m[selectedAction][1](result,items.length))}catch(e){await(0,t.showToast)({title:"Error performing action",style:t.Toast.Style.Failure});return}console.log("Result",result),t.Clipboard.copy(result),await(0,t.showToast)({title:"Result Copied to Clipboard",message:String(result)})}})}),children:[(0,s.jsxs)(t.Form.Dropdown,{id:"action",title:"Action",value:selectedAction,onChange:e=>{setSelectedAction(e),e!=="custom"&&setIsStrings(!1)},children:[(0,s.jsx)(t.Form.Dropdown.Item,{value:"+",title:"Add (+)"}),(0,s.jsx)(t.Form.Dropdown.Item,{value:"*",title:"Multiply (\xD7)"}),(0,s.jsx)(t.Form.Dropdown.Item,{value:"Average",title:"Average"}),(0,s.jsx)(t.Form.Dropdown.Item,{value:"custom",title:"Custom Action"})]}),selectedAction==="custom"&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.Form.TextField,{id:"custom-action",title:"Custom Action (JS)",placeholder:"Enter a valid JS reducer function (e.g. (a, b) => a + b)",value:customAction,onChange:e=>setCustomAction(e)}),(0,s.jsx)(t.Form.Checkbox,{id:"is-strings",label:"Are these strings?",value:isStrings,onChange:e=>setIsStrings(e)})]})]})};function d(){let[e,o]=(0,i.useState)([]),[n,a]=(0,i.useState)(!0);return(0,i.useEffect)(()=>{(async()=>{let l=await Promise.all([0,1,2,3,4,5].map(async c=>await t.Clipboard.read({offset:c})));o(l),a(!1)})()},[]),(0,s.jsx)(t.List,{searchBarPlaceholder:"Search Clipboard Items",isLoading:n,children:e.map((r,l)=>(0,s.jsx)(t.List.Item,{title:r.text??"Empty: Probably a File",actions:(0,s.jsxs)(t.ActionPanel,{children:[(0,s.jsx)(t.Action.Push,{title:"Choose Up To This Item",icon:t.Icon.ArrowUp,target:(0,s.jsx)(v,{items:e.slice(0,l+1)})}),(0,s.jsx)(t.Action,{title:"Remove from List",shortcut:t.Keyboard.Shortcut.Common.Remove,style:t.Action.Style.Destructive,icon:t.Icon.Trash,onAction:async()=>{o(c=>c.filter((I,b)=>b!==l))}})]})},l))})}
