{
  "version": 3,
  "sources": ["../src/perform-action-on-last-n-clipboard-items.tsx"],
  "sourcesContent": ["import { List, Clipboard, ActionPanel, Action, Form, showToast, Toast, Keyboard, Icon } from \"@raycast/api\";\nimport { useEffect, useState } from \"react\";\n\ntype AvailableActions = \"+\" | \"*\" | \"Average\" | \"custom\";\n\nconst actions = {\n  \"+\": [(a: number, b: number) => a + b],\n  \"*\": [(a: number, b: number) => a * b],\n  Average: [(a: number, b: number) => a + b, (r1: number, count: number) => r1 / count],\n  custom: null,\n};\n\nconst ActionView = ({ items }: { items: Clipboard.ReadContent[] }) => {\n  const [selectedAction, setSelectedAction] = useState<AvailableActions>(\"+\");\n  const [customAction, setCustomAction] = useState<string>(\"\");\n  const [isStrings, setIsStrings] = useState<boolean>(false);\n\n  return (\n    <Form\n      actions={\n        <ActionPanel>\n          <Action\n            title=\"Perform Action\"\n            icon={Icon.Calculator}\n            onAction={async () => {\n              let result: number | string | undefined = undefined;\n              const first: number | string = isStrings ? items[0].text : Number(items[0].text);\n              let rest: (number | string)[] = [];\n\n              try {\n                rest = items.slice(1).map((item) => {\n                  if (!isStrings) {\n                    const number = Number(item.text);\n                    if (isNaN(number)) {\n                      throw new Error(\"Invalid number\");\n                    }\n                    return number;\n                  }\n                  return item.text;\n                });\n              } catch (error) {\n                await showToast({ title: \"Error parsing numbers\", style: Toast.Style.Failure });\n                return;\n              }\n\n              try {\n                console.log(first);\n                console.log(rest);\n                result = rest.reduce(actions[selectedAction]?.[0] || eval(`(${customAction})`), first);\n\n                if (actions[selectedAction]?.[1]) {\n                  result = actions[selectedAction]![1](result as number, items.length);\n                }\n              } catch (error) {\n                await showToast({\n                  title: \"Error performing action\",\n                  style: Toast.Style.Failure,\n                });\n                return;\n              }\n\n              console.log(\"Result\", result);\n              Clipboard.copy(result);\n              await showToast({ title: \"Result Copied to Clipboard\", message: String(result) });\n            }}\n          />\n        </ActionPanel>\n      }\n    >\n      <Form.Dropdown\n        id=\"action\"\n        title=\"Action\"\n        value={selectedAction}\n        onChange={(value) => {\n          setSelectedAction(value as AvailableActions);\n          if (value !== \"custom\") setIsStrings(false);\n        }}\n      >\n        <Form.Dropdown.Item value=\"+\" title=\"Add (+)\" />\n        <Form.Dropdown.Item value=\"*\" title=\"Multiply (\u00D7)\" />\n        <Form.Dropdown.Item value=\"Average\" title=\"Average\" />\n        <Form.Dropdown.Item value=\"custom\" title=\"Custom Action\" />\n      </Form.Dropdown>\n      {selectedAction === \"custom\" && (\n        <>\n          <Form.TextField\n            id=\"custom-action\"\n            title=\"Custom Action (JS)\"\n            placeholder=\"Enter a valid JS reducer function (e.g. (a, b) => a + b)\"\n            value={customAction}\n            onChange={(value) => setCustomAction(value)}\n          />\n          <Form.Checkbox\n            id=\"is-strings\"\n            label=\"Are these strings?\"\n            value={isStrings}\n            onChange={(value) => setIsStrings(value)}\n          />\n        </>\n      )}\n    </Form>\n  );\n};\n\nexport default function Command() {\n  const [clipboardItems, setClipboardItems] = useState<Clipboard.ReadContent[]>([]);\n  const [isLoading, setIsLoading] = useState<boolean>(true);\n\n  useEffect(() => {\n    const fetchClipboardItems = async () => {\n      const initialItems: Clipboard.ReadContent[] = await Promise.all(\n        [0, 1, 2, 3, 4, 5].map(async (index) => {\n          return await Clipboard.read({ offset: index });\n        }),\n      );\n      setClipboardItems(initialItems);\n      setIsLoading(false);\n    };\n\n    fetchClipboardItems();\n  }, []);\n\n  return (\n    <List searchBarPlaceholder=\"Search Clipboard Items\" isLoading={isLoading}>\n      {clipboardItems.map((item, index) => (\n        <List.Item\n          key={index}\n          title={item.text ?? \"Empty: Probably a File\"}\n          actions={\n            <ActionPanel>\n              <Action.Push\n                title=\"Choose Up To This Item\"\n                icon={Icon.ArrowUp}\n                target={<ActionView items={clipboardItems.slice(0, index + 1)} />}\n              />\n              <Action\n                title=\"Remove from List\"\n                shortcut={Keyboard.Shortcut.Common.Remove}\n                style={Action.Style.Destructive}\n                icon={Icon.Trash}\n                onAction={async () => {\n                  setClipboardItems((items) => items.filter((_, i) => i !== index));\n                }}\n              />\n            </ActionPanel>\n          }\n        />\n      ))}\n    </List>\n  );\n}\n"],
  "mappings": "yaAAA,IAAAA,EAAA,GAAAC,EAAAD,EAAA,aAAAE,IAAA,eAAAC,EAAAH,GAAA,IAAAI,EAA6F,wBAC7FC,EAAoC,iBAoB1BC,EAAA,6BAhBJC,EAAU,CACd,IAAK,CAAC,CAACC,EAAWC,IAAcD,EAAIC,CAAC,EACrC,IAAK,CAAC,CAACD,EAAWC,IAAcD,EAAIC,CAAC,EACrC,QAAS,CAAC,CAACD,EAAWC,IAAcD,EAAIC,EAAG,CAACC,EAAYC,IAAkBD,EAAKC,CAAK,EACpF,OAAQ,IACV,EAEMC,EAAa,CAAC,CAAE,KAAM,IAA0C,CACpE,GAAM,CAAC,eAAgB,iBAAiB,KAAI,YAA2B,GAAG,EACpE,CAAC,aAAc,eAAe,KAAI,YAAiB,EAAE,EACrD,CAAC,UAAW,YAAY,KAAI,YAAkB,EAAK,EAEzD,SACE,QAAC,QACC,WACE,OAAC,eACC,mBAAC,UACC,MAAM,iBACN,KAAM,OAAK,WACX,SAAU,SAAY,CACpB,IAAI,OACE,MAAyB,UAAY,MAAM,CAAC,EAAE,KAAO,OAAO,MAAM,CAAC,EAAE,IAAI,EAC3E,KAA4B,CAAC,EAEjC,GAAI,CACF,KAAO,MAAM,MAAM,CAAC,EAAE,IAAKC,GAAS,CAClC,GAAI,CAAC,UAAW,CACd,IAAMC,EAAS,OAAOD,EAAK,IAAI,EAC/B,GAAI,MAAMC,CAAM,EACd,MAAM,IAAI,MAAM,gBAAgB,EAElC,OAAOA,CACT,CACA,OAAOD,EAAK,IACd,CAAC,CACH,OAASE,EAAO,CACd,QAAM,aAAU,CAAE,MAAO,wBAAyB,MAAO,QAAM,MAAM,OAAQ,CAAC,EAC9E,MACF,CAEA,GAAI,CACF,QAAQ,IAAI,KAAK,EACjB,QAAQ,IAAI,IAAI,EAChB,OAAS,KAAK,OAAOR,EAAQ,cAAc,IAAI,CAAC,GAAK,KAAK,IAAI,YAAY,GAAG,EAAG,KAAK,EAEjFA,EAAQ,cAAc,IAAI,CAAC,IAC7B,OAASA,EAAQ,cAAc,EAAG,CAAC,EAAE,OAAkB,MAAM,MAAM,EAEvE,OAASQ,EAAO,CACd,QAAM,aAAU,CACd,MAAO,0BACP,MAAO,QAAM,MAAM,OACrB,CAAC,EACD,MACF,CAEA,QAAQ,IAAI,SAAU,MAAM,EAC5B,YAAU,KAAK,MAAM,EACrB,QAAM,aAAU,CAAE,MAAO,6BAA8B,QAAS,OAAO,MAAM,CAAE,CAAC,CAClF,EACF,EACF,EAGF,qBAAC,OAAK,SAAL,CACC,GAAG,SACH,MAAM,SACN,MAAO,eACP,SAAWC,GAAU,CACnB,kBAAkBA,CAAyB,EACvCA,IAAU,UAAU,aAAa,EAAK,CAC5C,EAEA,oBAAC,OAAK,SAAS,KAAd,CAAmB,MAAM,IAAI,MAAM,UAAU,KAC9C,OAAC,OAAK,SAAS,KAAd,CAAmB,MAAM,IAAI,MAAM,kBAAe,KACnD,OAAC,OAAK,SAAS,KAAd,CAAmB,MAAM,UAAU,MAAM,UAAU,KACpD,OAAC,OAAK,SAAS,KAAd,CAAmB,MAAM,SAAS,MAAM,gBAAgB,GAC3D,EACC,iBAAmB,aAClB,oBACE,oBAAC,OAAK,UAAL,CACC,GAAG,gBACH,MAAM,qBACN,YAAY,2DACZ,MAAO,aACP,SAAWA,GAAU,gBAAgBA,CAAK,EAC5C,KACA,OAAC,OAAK,SAAL,CACC,GAAG,aACH,MAAM,qBACN,MAAO,UACP,SAAWA,GAAU,aAAaA,CAAK,EACzC,GACF,GAEJ,CAEJ,EAEe,SAARd,GAA2B,CAChC,GAAM,CAACe,EAAgBC,CAAiB,KAAI,YAAkC,CAAC,CAAC,EAC1E,CAACC,EAAWC,CAAY,KAAI,YAAkB,EAAI,EAExD,sBAAU,IAAM,EACc,SAAY,CACtC,IAAMC,EAAwC,MAAM,QAAQ,IAC1D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,CAAC,EAAE,IAAI,MAAOC,GACrB,MAAM,YAAU,KAAK,CAAE,OAAQA,CAAM,CAAC,CAC9C,CACH,EACAJ,EAAkBG,CAAY,EAC9BD,EAAa,EAAK,CACpB,GAEoB,CACtB,EAAG,CAAC,CAAC,KAGH,OAAC,QAAK,qBAAqB,yBAAyB,UAAWD,EAC5D,SAAAF,EAAe,IAAI,CAACJ,EAAMS,OACzB,OAAC,OAAK,KAAL,CAEC,MAAOT,EAAK,MAAQ,yBACpB,WACE,QAAC,eACC,oBAAC,SAAO,KAAP,CACC,MAAM,yBACN,KAAM,OAAK,QACX,UAAQ,OAACD,EAAA,CAAW,MAAOK,EAAe,MAAM,EAAGK,EAAQ,CAAC,EAAG,EACjE,KACA,OAAC,UACC,MAAM,mBACN,SAAU,WAAS,SAAS,OAAO,OACnC,MAAO,SAAO,MAAM,YACpB,KAAM,OAAK,MACX,SAAU,SAAY,CACpBJ,EAAmBK,GAAUA,EAAM,OAAO,CAACC,EAAGC,IAAMA,IAAMH,CAAK,CAAC,CAClE,EACF,GACF,GAlBGA,CAoBP,CACD,EACH,CAEJ",
  "names": ["perform_action_on_last_n_clipboard_items_exports", "__export", "Command", "__toCommonJS", "import_api", "import_react", "import_jsx_runtime", "actions", "a", "b", "r1", "count", "ActionView", "item", "number", "error", "value", "clipboardItems", "setClipboardItems", "isLoading", "setIsLoading", "initialItems", "index", "items", "_", "i"]
}
