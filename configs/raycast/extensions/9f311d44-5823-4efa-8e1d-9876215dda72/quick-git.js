"use strict";var Zr=Object.create;var ve=Object.defineProperty;var Yr=Object.getOwnPropertyDescriptor;var qr=Object.getOwnPropertyNames;var Xr=Object.getPrototypeOf,Qr=Object.prototype.hasOwnProperty;var en=(e,r)=>{for(var t in r)ve(e,t,{get:r[t],enumerable:!0})},yt=(e,r,t,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let a of qr(r))!Qr.call(e,a)&&a!==t&&ve(e,a,{get:()=>r[a],enumerable:!(n=Yr(r,a))||n.enumerable});return e};var ae=(e,r,t)=>(t=e!=null?Zr(Xr(e)):{},yt(r||!e||!e.__esModule?ve(t,"default",{value:e,enumerable:!0}):t,e)),tn=e=>yt(ve({},"__esModule",{value:!0}),e);var En={};en(En,{default:()=>Kr});module.exports=tn(En);var Je=require("react"),Ze=require("@raycast/api");var u=ae(require("react")),m=require("@raycast/api");var wt=Object.prototype.hasOwnProperty;function Ce(e,r){var t,n;if(e===r)return!0;if(e&&r&&(t=e.constructor)===r.constructor){if(t===Date)return e.getTime()===r.getTime();if(t===RegExp)return e.toString()===r.toString();if(t===Array){if((n=e.length)===r.length)for(;n--&&Ce(e[n],r[n]););return n===-1}if(!t||typeof e=="object"){n=0;for(t in e)if(wt.call(e,t)&&++n&&!wt.call(r,t)||!(t in r)||!Ce(e[t],r[t]))return!1;return Object.keys(r).length===n}}return e!==e&&r!==r}var ee=ae(require("node:fs")),Pe=ae(require("node:path")),It=ae(require("node:crypto")),Tt=ae(require("node:child_process")),Rt=require("node:buffer"),se=ae(require("node:stream")),Ut=require("node:util");var Ft=require("react/jsx-runtime");var Qe=globalThis;function rn(e){let r=(0,u.useRef)(e),t=(0,u.useRef)(0);return Ce(e,r.current)||(r.current=e,t.current+=1),(0,u.useMemo)(()=>r.current,[t.current])}function F(e){let r=(0,u.useRef)(e);return r.current=e,r}function f(e,r){let t=e instanceof Error?e.message:String(e);return(0,m.showToast)({style:m.Toast.Style.Failure,title:r?.title??"Something went wrong",message:r?.message??t,primaryAction:r?.primaryAction??kt(e),secondaryAction:r?.primaryAction?kt(e):void 0})}var kt=e=>{let r=!0,t="[Extension Name]...",n="";try{let s=JSON.parse((0,ee.readFileSync)((0,Pe.join)(m.environment.assetsPath,"..","package.json"),"utf8"));t=`[${s.title}]...`,n=`https://raycast.com/${s.owner||s.author}/${s.name}`,(!s.owner||s.access==="public")&&(r=!1)}catch{}let a=m.environment.isDevelopment||r,o=e instanceof Error?e?.stack||e?.message||"":String(e);return{title:a?"Copy Logs":"Report Error",onAction(s){s.hide(),a?m.Clipboard.copy(o):(0,m.open)(`https://github.com/raycast/extensions/issues/new?&labels=extension%2Cbug&template=extension_bug_report.yml&title=${encodeURIComponent(t)}&extension-url=${encodeURI(n)}&description=${encodeURIComponent(`#### Error:
\`\`\`
${o}
\`\`\`
`)}`)}}};function _t(e,r,t){let n=(0,u.useRef)(0),[a,o]=(0,u.useState)({isLoading:!0}),s=F(e),i=F(t?.abortable),c=F(r||[]),l=F(t?.onError),d=F(t?.onData),y=F(t?.onWillExecute),A=F(t?.failureToastOptions),T=F(a.data),E=(0,u.useRef)(null),k=(0,u.useRef)({page:0}),R=(0,u.useRef)(!1),S=(0,u.useRef)(!0),w=(0,u.useRef)(50),p=(0,u.useCallback)(()=>(i.current&&(i.current.current?.abort(),i.current.current=new AbortController),++n.current),[i]),g=(0,u.useCallback)((...N)=>{let U=p();y.current?.(N),o($=>({...$,isLoading:!0}));let Z=nn(s.current)(...N);function Y($){return $.name=="AbortError"||U===n.current&&(l.current?l.current($):m.environment.launchType!==m.LaunchType.Background&&f($,{title:"Failed to fetch latest data",primaryAction:{title:"Retry",onAction(j){j.hide(),E.current?.(...c.current||[])}},...A.current}),o({error:$,isLoading:!1})),$}return typeof Z=="function"?(R.current=!0,Z(k.current).then(({data:$,hasMore:j,cursor:qe})=>(U===n.current&&(k.current&&(k.current.cursor=qe,k.current.lastItem=$?.[$.length-1]),d.current&&d.current($,k.current),j&&(w.current=$.length),S.current=j,o(Xe=>k.current.page===0?{data:$,isLoading:!1}:{data:(Xe.data||[])?.concat($),isLoading:!1})),$),$=>(S.current=!1,Y($)))):(R.current=!1,Z.then($=>(U===n.current&&(d.current&&d.current($),o({data:$,isLoading:!1})),$),Y))},[d,l,c,s,o,E,y,k,A,p]);E.current=g;let C=(0,u.useCallback)(()=>{k.current={page:0};let N=c.current||[];return g(...N)},[g,c]),I=(0,u.useCallback)(async(N,U)=>{let Z;try{if(U?.optimisticUpdate){p(),typeof U?.rollbackOnError!="function"&&U?.rollbackOnError!==!1&&(Z=structuredClone(T.current?.value));let Y=U.optimisticUpdate;o($=>({...$,data:Y($.data)}))}return await N}catch(Y){if(typeof U?.rollbackOnError=="function"){let $=U.rollbackOnError;o(j=>({...j,data:$(j.data)}))}else U?.optimisticUpdate&&U?.rollbackOnError!==!1&&o($=>({...$,data:Z}));throw Y}finally{U?.shouldRevalidateAfter!==!1&&(m.environment.launchType===m.LaunchType.Background||m.environment.commandMode==="menu-bar"?await C():C())}},[C,T,o,p]),ne=(0,u.useCallback)(()=>{k.current.page+=1;let N=c.current||[];g(...N)},[k,c,g]);(0,u.useEffect)(()=>{k.current={page:0},t?.execute!==!1?g(...r||[]):p()},[rn([r,t?.execute,g]),i,k]),(0,u.useEffect)(()=>()=>{p()},[p]);let J=t?.execute!==!1?a.isLoading:!1,be={...a,isLoading:J},Ye=R.current?{pageSize:w.current,hasMore:S.current,onLoadMore:ne}:void 0;return{...be,revalidate:C,mutate:I,pagination:Ye}}function nn(e){return e===Promise.all||e===Promise.race||e===Promise.resolve||e===Promise.reject?e.bind(Promise):e}function St(e){return typeof e!="function"?!1:/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(e))!==null}function an(e){return e instanceof URLSearchParams?e.toString():e}function Dt(e,r=[]){function t(n){return"update"in e?e.update(n,"utf8"):e.write(n)}return{dispatch:function(n){n=an(n),n===null?this._null():this["_"+typeof n](n)},_object:function(n){let a=/\[object (.*)\]/i,o=Object.prototype.toString.call(n),s=a.exec(o)?.[1]??"unknown:["+o+"]";s=s.toLowerCase();let i=null;if((i=r.indexOf(n))>=0){this.dispatch("[CIRCULAR:"+i+"]");return}else r.push(n);if(Buffer.isBuffer(n))return t("buffer:"),t(n.toString("utf8"));if(s!=="object"&&s!=="function"&&s!=="asyncfunction")if(this["_"+s])this["_"+s](n);else throw new Error('Unknown object type "'+s+'"');else{let c=Object.keys(n);c=c.sort(),St(n)||c.splice(0,0,"prototype","__proto__","constructor"),t("object:"+c.length+":");let l=this;return c.forEach(function(d){l.dispatch(d),t(":"),l.dispatch(n[d]),t(",")})}},_array:function(n,a){a=typeof a<"u"?a:!1;let o=this;if(t("array:"+n.length+":"),!a||n.length<=1){n.forEach(function(c){o.dispatch(c)});return}let s=[],i=n.map(function(c){let l=on(),d=r.slice();return Dt(l,d).dispatch(c),s=s.concat(d.slice(r.length)),l.read().toString()});r=r.concat(s),i.sort(),this._array(i,!1)},_date:function(n){t("date:"+n.toJSON())},_symbol:function(n){t("symbol:"+n.toString())},_error:function(n){t("error:"+n.toString())},_boolean:function(n){t("bool:"+n.toString())},_string:function(n){t("string:"+n.length+":"),t(n.toString())},_function:function(n){t("fn:"),St(n)?this.dispatch("[native]"):this.dispatch(n.toString()),this.dispatch("function-name:"+String(n.name)),this._object(n)},_number:function(n){t("number:"+n.toString())},_xml:function(n){t("xml:"+n.toString())},_null:function(){t("Null")},_undefined:function(){t("Undefined")},_regexp:function(n){t("regex:"+n.toString())},_uint8array:function(n){t("uint8array:"),this.dispatch(Array.prototype.slice.call(n))},_uint8clampedarray:function(n){t("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(n))},_int8array:function(n){t("int8array:"),this.dispatch(Array.prototype.slice.call(n))},_uint16array:function(n){t("uint16array:"),this.dispatch(Array.prototype.slice.call(n))},_int16array:function(n){t("int16array:"),this.dispatch(Array.prototype.slice.call(n))},_uint32array:function(n){t("uint32array:"),this.dispatch(Array.prototype.slice.call(n))},_int32array:function(n){t("int32array:"),this.dispatch(Array.prototype.slice.call(n))},_float32array:function(n){t("float32array:"),this.dispatch(Array.prototype.slice.call(n))},_float64array:function(n){t("float64array:"),this.dispatch(Array.prototype.slice.call(n))},_arraybuffer:function(n){t("arraybuffer:"),this.dispatch(new Uint8Array(n))},_url:function(n){t("url:"+n.toString())},_map:function(n){t("map:");let a=Array.from(n);this._array(a,!0)},_set:function(n){t("set:");let a=Array.from(n);this._array(a,!0)},_file:function(n){t("file:"),this.dispatch([n.name,n.size,n.type,n.lastModified])},_blob:function(){throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){t("domwindow")},_bigint:function(n){t("bigint:"+n.toString())},_process:function(){t("process")},_timer:function(){t("timer")},_pipe:function(){t("pipe")},_tcp:function(){t("tcp")},_udp:function(){t("udp")},_tty:function(){t("tty")},_statwatcher:function(){t("statwatcher")},_securecontext:function(){t("securecontext")},_connection:function(){t("connection")},_zlib:function(){t("zlib")},_context:function(){t("context")},_nodescript:function(){t("nodescript")},_httpparser:function(){t("httpparser")},_dataview:function(){t("dataview")},_signal:function(){t("signal")},_fsevent:function(){t("fsevent")},_tlswrap:function(){t("tlswrap")}}}function on(){return{buf:"",write:function(e){this.buf+=e},end:function(e){this.buf+=e},read:function(){return this.buf}}}function Lt(e,r){let t=this[e];return t instanceof Date?`__raycast_cached_date__${t.toString()}`:Buffer.isBuffer(t)?`__raycast_cached_buffer__${t.toString("base64")}`:r}function Mt(e,r){return typeof r=="string"&&r.startsWith("__raycast_cached_date__")?new Date(r.replace("__raycast_cached_date__","")):typeof r=="string"&&r.startsWith("__raycast_cached_buffer__")?Buffer.from(r.replace("__raycast_cached_buffer__",""),"base64"):r}function xt(e){let r=It.default.createHash("sha1");return Dt(r).dispatch(e),r.digest("hex")}var sn=Symbol("cache without namespace"),vt=new Map;function cn(e,r,t){let n=t?.cacheNamespace||sn,a=vt.get(n)||vt.set(n,new m.Cache({namespace:t?.cacheNamespace})).get(n);if(!a)throw new Error("Missing cache");let o=F(e),s=F(r),i=(0,u.useSyncExternalStore)(a.subscribe,()=>{try{return a.get(o.current)}catch(y){console.error("Could not get Cache data:",y);return}}),c=(0,u.useMemo)(()=>{if(typeof i<"u"){if(i==="undefined")return;try{return JSON.parse(i,Mt)}catch(y){return console.warn("The cached data is corrupted",y),s.current}}else return s.current},[i,s]),l=F(c),d=(0,u.useCallback)(y=>{let A=typeof y=="function"?y(l.current):y;if(typeof A>"u")a.set(o.current,"undefined");else{let T=JSON.stringify(A,Lt);a.set(o.current,T)}return A},[a,o,l]);return[c,d]}var oe=Symbol();function un(e,r,t){let{initialData:n,keepPreviousData:a,internal_cacheKeySuffix:o,...s}=t||{},i=(0,u.useRef)(null),[c,l]=cn(xt(r||[])+o,oe,{cacheNamespace:xt(e)}),d=(0,u.useRef)(c!==oe?c:n),y=(0,u.useRef)(void 0),{mutate:A,revalidate:T,...E}=_t(e,r||[],{...s,onData(p,g){y.current=g,s.onData&&s.onData(p,g),!(g&&g.page>0)&&(i.current="promise",d.current=p,l(p))}}),k,R=E.pagination;y.current&&y.current.page>0&&E.data?k=E.data:i.current==="promise"?k=d.current:a&&c!==oe?(k=c,R&&(R.hasMore=!0,R.pageSize=c.length)):a&&c===oe?k=d.current:c!==oe?(k=c,R&&(R.hasMore=!0,R.pageSize=c.length)):k=n;let S=F(k),w=(0,u.useCallback)(async(p,g)=>{let C;try{if(g?.optimisticUpdate){typeof g?.rollbackOnError!="function"&&g?.rollbackOnError!==!1&&(C=structuredClone(S.current));let I=g.optimisticUpdate(S.current);i.current="cache",d.current=I,l(I)}return await A(p,{shouldRevalidateAfter:g?.shouldRevalidateAfter})}catch(I){if(typeof g?.rollbackOnError=="function"){let ne=g.rollbackOnError(S.current);i.current="cache",d.current=ne,l(ne)}else g?.optimisticUpdate&&g?.rollbackOnError!==!1&&(i.current="cache",d.current=C,l(C));throw I}},[l,A,S,d,i]);return(0,u.useEffect)(()=>{c!==oe&&(i.current="cache",d.current=c)},[c]),{data:k,isLoading:E.isLoading,error:E.error,mutate:y.current&&y.current.page>0?A:w,pagination:R,revalidate:T}}var Ae=e=>!!e&&typeof e=="object"&&typeof e.removeListener=="function"&&typeof e.emit=="function"&&typeof e.reallyExit=="function"&&typeof e.listeners=="function"&&typeof e.kill=="function"&&typeof e.pid=="number"&&typeof e.on=="function",et=Symbol.for("signal-exit emitter"),nt=class{constructor(){if(this.emitted={afterExit:!1,exit:!1},this.listeners={afterExit:[],exit:[]},this.count=0,this.id=Math.random(),Qe[et])return Qe[et];Object.defineProperty(Qe,et,{value:this,writable:!1,enumerable:!1,configurable:!1})}on(r,t){this.listeners[r].push(t)}removeListener(r,t){let n=this.listeners[r],a=n.indexOf(t);a!==-1&&(a===0&&n.length===1?n.length=0:n.splice(a,1))}emit(r,t,n){if(this.emitted[r])return!1;this.emitted[r]=!0;let a=!1;for(let o of this.listeners[r])a=o(t,n)===!0||a;return r==="exit"&&(a=this.emit("afterExit",t,n)||a),a}},at=class{onExit(){return()=>{}}load(){}unload(){}},ot=class{#i;#t;#e;#o;#s;#a;#n;#r;constructor(r){this.#i=process.platform==="win32"?"SIGINT":"SIGHUP",this.#t=new nt,this.#a={},this.#n=!1,this.#r=[],this.#r.push("SIGHUP","SIGINT","SIGTERM"),globalThis.process.platform!=="win32"&&this.#r.push("SIGALRM","SIGABRT","SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT"),globalThis.process.platform==="linux"&&this.#r.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT"),this.#e=r,this.#a={};for(let t of this.#r)this.#a[t]=()=>{let n=this.#e.listeners(t),{count:a}=this.#t,o=r;if(typeof o.__signal_exit_emitter__=="object"&&typeof o.__signal_exit_emitter__.count=="number"&&(a+=o.__signal_exit_emitter__.count),n.length===a){this.unload();let s=this.#t.emit("exit",null,t),i=t==="SIGHUP"?this.#i:t;s||r.kill(r.pid,i)}};this.#s=r.reallyExit,this.#o=r.emit}onExit(r,t){if(!Ae(this.#e))return()=>{};this.#n===!1&&this.load();let n=t?.alwaysLast?"afterExit":"exit";return this.#t.on(n,r),()=>{this.#t.removeListener(n,r),this.#t.listeners.exit.length===0&&this.#t.listeners.afterExit.length===0&&this.unload()}}load(){if(!this.#n){this.#n=!0,this.#t.count+=1;for(let r of this.#r)try{let t=this.#a[r];t&&this.#e.on(r,t)}catch{}this.#e.emit=(r,...t)=>this.#u(r,...t),this.#e.reallyExit=r=>this.#c(r)}}unload(){this.#n&&(this.#n=!1,this.#r.forEach(r=>{let t=this.#a[r];if(!t)throw new Error("Listener not defined for signal: "+r);try{this.#e.removeListener(r,t)}catch{}}),this.#e.emit=this.#o,this.#e.reallyExit=this.#s,this.#t.count-=1)}#c(r){return Ae(this.#e)?(this.#e.exitCode=r||0,this.#t.emit("exit",this.#e.exitCode,null),this.#s.call(this.#e,this.#e.exitCode)):0}#u(r,...t){let n=this.#o;if(r==="exit"&&Ae(this.#e)){typeof t[0]=="number"&&(this.#e.exitCode=t[0]);let a=n.call(this.#e,r,...t);return this.#t.emit("exit",this.#e.exitCode,null),a}else return n.call(this.#e,r,...t)}},tt=null,ln=(e,r)=>(tt||(tt=Ae(process)?new ot(process):new at),tt.onExit(e,r));function fn(e,{timeout:r}={}){let t=new Promise((i,c)=>{e.on("exit",(l,d)=>{i({exitCode:l,signal:d,timedOut:!1})}),e.on("error",l=>{c(l)}),e.stdin&&e.stdin.on("error",l=>{c(l)})}),n=ln(()=>{e.kill()});if(r===0||r===void 0)return t.finally(()=>n());let a,o=new Promise((i,c)=>{a=setTimeout(()=>{e.kill("SIGTERM"),c(Object.assign(new Error("Timed out"),{timedOut:!0,signal:"SIGTERM"}))},r)}),s=t.finally(()=>{clearTimeout(a)});return Promise.race([o,s]).finally(()=>n())}var st=class extends Error{constructor(){super("The output is too big"),this.name="MaxBufferError"}};function dn(e){let{encoding:r}=e,t=r==="buffer",n=new se.default.PassThrough({objectMode:!1});r&&r!=="buffer"&&n.setEncoding(r);let a=0,o=[];return n.on("data",s=>{o.push(s),a+=s.length}),n.getBufferedValue=()=>t?Buffer.concat(o,a):o.join(""),n.getBufferedLength=()=>a,n}async function Ct(e,r){let t=dn(r);return await new Promise((n,a)=>{let o=s=>{s&&t.getBufferedLength()<=Rt.constants.MAX_LENGTH&&(s.bufferedData=t.getBufferedValue()),a(s)};(async()=>{try{await(0,Ut.promisify)(se.default.pipeline)(e,t),n()}catch(s){o(s)}})(),t.on("data",()=>{t.getBufferedLength()>8e7&&o(new st)})}),t.getBufferedValue()}async function At(e,r){e.destroy();try{return await r}catch(t){return t.bufferedData}}async function hn({stdout:e,stderr:r},{encoding:t},n){let a=Ct(e,{encoding:t}),o=Ct(r,{encoding:t});try{return await Promise.all([n,a,o])}catch(s){return Promise.all([{error:s,exitCode:null,signal:s.signal,timedOut:s.timedOut||!1},At(e,a),At(r,o)])}}function mn(e){let r=typeof e=="string"?`
`:10,t=typeof e=="string"?"\r":13;return e[e.length-1]===r&&(e=e.slice(0,-1)),e[e.length-1]===t&&(e=e.slice(0,-1)),e}function Pt(e,r){return e.stripFinalNewline?mn(r):r}function pn({timedOut:e,timeout:r,signal:t,exitCode:n}){return e?`timed out after ${r} milliseconds`:t!=null?`was killed with ${t}`:n!=null?`failed with exit code ${n}`:"failed"}function gn({stdout:e,stderr:r,error:t,signal:n,exitCode:a,command:o,timedOut:s,options:i,parentError:c}){let d=`Command ${pn({timedOut:s,timeout:i?.timeout,signal:n,exitCode:a})}: ${o}`,y=t?`${d}
${t.message}`:d,A=[y,r,e].filter(Boolean).join(`
`);return t?t.originalMessage=t.message:t=c,t.message=A,t.shortMessage=y,t.command=o,t.exitCode=a,t.signal=n,t.stdout=e,t.stderr=r,"bufferedData"in t&&delete t.bufferedData,t}function bn({stdout:e,stderr:r,error:t,exitCode:n,signal:a,timedOut:o,command:s,options:i,parentError:c}){if(t||n!==0||a!==null)throw gn({error:t,exitCode:n,signal:a,stdout:e,stderr:r,command:s,timedOut:o,options:i,parentError:c});return e}var $n=/ +/g;function yn(e,r){if(r)return[e,...r];let t=[];for(let n of e.trim().split($n)){let a=t[t.length-1];a&&a.endsWith("\\")?t[t.length-1]=`${a.slice(0,-1)} ${n}`:t.push(n)}return t}function h(e,r,t){let{parseOutput:n,input:a,onData:o,onWillExecute:s,initialData:i,execute:c,keepPreviousData:l,onError:d,failureToastOptions:y,...A}=Array.isArray(r)?t||{}:r||{},T={initialData:i,execute:c,keepPreviousData:l,onError:d,onData:o,onWillExecute:s,failureToastOptions:y},E=(0,u.useRef)(null),k=F(n||bn),R=(0,u.useCallback)(async(S,w,p,g)=>{let[C,...I]=yn(S,w),ne=[C,...I].join(" "),J={stripFinalNewline:!0,...p,timeout:p?.timeout||1e4,signal:E.current?.signal,encoding:p?.encoding===null?"buffer":p?.encoding||"utf8",env:{PATH:"/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin",...process.env,...p?.env}},be=Tt.default.spawn(C,I,J),Ye=fn(be,J);g&&be.stdin.end(g);let[{error:N,exitCode:U,signal:Z,timedOut:Y},$,j]=await hn(be,J,Ye),qe=Pt(J,$),Xe=Pt(J,j);return k.current({stdout:qe,stderr:Xe,error:N,exitCode:U,signal:Z,timedOut:Y,command:ne,options:J,parentError:new Error})},[k]);return un(R,[e,Array.isArray(r)?r:[],A,a],{...T,abortable:E})}var Ot=(function(e){return e.Required="required",e})({});function rt(e,r){if(e){if(typeof e=="function")return e(r);if(e==="required"){let t=typeof r<"u"&&r!==null;if(t)switch(typeof r){case"string":t=r.length>0;break;case"object":Array.isArray(r)?t=r.length>0:r instanceof Date&&(t=r.getTime()>0);break;default:break}if(!t)return"The item is required"}}}function Ee(e){let{onSubmit:r,validation:t,initialValues:n={}}=e,[a,o]=(0,u.useState)(n),[s,i]=(0,u.useState)({}),c=(0,u.useRef)({}),l=F(t||{}),d=F(r),y=(0,u.useCallback)(S=>{c.current[S]?.focus()},[c]),A=(0,u.useCallback)(async S=>{let w=!1;for(let[g,C]of Object.entries(l.current)){let I=rt(C,S[g]);I&&(w||(w={},y(g)),w[g]=I)}if(w)return i(w),!1;let p=await d.current(S);return typeof p=="boolean"?p:!0},[l,d,y]),T=(0,u.useCallback)((S,w)=>{i(p=>({...p,[S]:w}))},[i]),E=(0,u.useCallback)(function(S,w){o(p=>({...p,[S]:typeof w=="function"?w(p[S]):w}))},[o]),k=(0,u.useMemo)(()=>new Proxy({},{get(S,w){let p=l.current[w],g=a[w];return{onChange(C){s[w]&&(rt(p,C)||T(w,void 0)),E(w,C)},onBlur(C){let I=rt(p,C.target.value);I&&T(w,I)},error:s[w],id:w,value:typeof g>"u"?null:g,ref:C=>{c.current[w]=C}}}}),[s,l,T,a,c,E]),R=(0,u.useCallback)(S=>{i({}),Object.entries(c.current).forEach(([w,p])=>{S?.[w]||p?.reset()}),S&&o(S)},[o,i,c]);return{handleSubmit:A,setValidationError:T,setValue:E,values:a,itemProps:k,focus:y,reset:R}}function Bt(e,r){let{data:t,isLoading:n,mutate:a}=_t(async i=>{let c=await m.LocalStorage.getItem(i);return typeof c<"u"?JSON.parse(c,Mt):r},[e]);async function o(i){try{await a(m.LocalStorage.setItem(e,JSON.stringify(i,Lt)),{optimisticUpdate(c){return c}})}catch(c){await f(c,{title:"Failed to set value in local storage"})}}async function s(){try{await a(m.LocalStorage.removeItem(e),{optimisticUpdate(){}})}catch(i){await f(i,{title:"Failed to remove value from local storage"})}}return{value:t,setValue:o,removeValue:s,isLoading:n}}function Et(e,r,t,n){let a=(n-90)*Math.PI/180;return{x:e+t*Math.cos(a),y:r+t*Math.sin(a)}}function wn(e,r,t,n,a){let o=Et(e,r,t,a),s=Et(e,r,t,n),i=a-n<=180?"0":"1";return["M",o.x,o.y,"A",t,t,0,i,0,s.x,s.y].join(" ")}function Wt(e,r=m.Color.Red,t){let n=t?.background||(m.environment.appearance==="light"?"black":"white"),a=t?.backgroundOpacity||.1,o=10,i=50-5-o/2,c=`<svg xmlns="http://www.w3.org/2000/svg" width="100px" height="100px">
      <circle cx="50" cy="50" r="${i}" stroke-width="${o}" stroke="${e<1?n:r}" opacity="${e<1?a:"1"}" fill="none" />
      ${e>0&&e<1?`<path d="${wn(50,50,i,0,e*360)}" stroke="${r}" stroke-width="${o}" fill="none" />`:""}
    </svg>
  `.replaceAll(`
`,"");return`data:image/svg+xml,${encodeURIComponent(c)}`}function Nt(e,r){if(!e.startsWith("# branch"))return;let t=e.split(" ");switch(t[1]){case"branch.oid":r.commit=t[2];break;case"branch.head":r.name=t[2];break;case"branch.upstream":r.upstream=t[2];break;case"branch.ab":{let n=t.find(o=>o.startsWith("+"))?.replace("+","")??"0",a=t.find(o=>o.startsWith("-"))?.replace("-","")??"0";r.ahead=+n,r.behind=+a;break}default:break}}function Vt(e){let r=e.charAt(0);switch(r){case"1":return kn(e);case"2":return Sn(e);case"u":return xn(e);default:{let[,...t]=e.split(Ie),[n]=Te(t);return{indicator:r,path:n}}}}var Ie=/(?<!\\) /;function Te(e){let r=e.join(" "),[t,n]=r.split(/\t/);return[t,n]}function kn(e){let[,r,t,n,a,o,s,i,...c]=e.split(Ie),[l]=Te(c);return{indicator:"1",xy:r,submodule:t,mH:n,mI:a,mW:o,hH:s,hI:i,path:l}}function Sn(e){let[,r,t,n,a,o,s,i,c,...l]=e.split(Ie),d=c.charAt(0),y=+c.substring(1),[A,T]=Te(l);return{indicator:"2",xy:r,submodule:t,mH:n,mI:a,mW:o,hH:s,hI:i,rc:d,rcScore:+y,path:A,origPath:T}}function xn(e){let[,r,t,n,a,o,s,i,c,l,...d]=e.split(Ie),[y]=Te(d);return{indicator:"u",xy:r,submodule:t,m1:n,m2:a,m3:o,mW:s,h1:i,h2:c,h3:l,path:y}}function zt(e){if(e.indicator==="!"||e.indicator==="?")return{isTracked:!1,hasStagedChanges:!1,stagedChanges:e.indicator,hasUnstagedChanges:!0,unstagedChanges:e.indicator,unmergedChanges:!1};let[r,t]=vn(e.xy),n={isTracked:!0,hasUnstagedChanges:/[^.?!]/.test(t),unstagedChanges:t,hasStagedChanges:r!==".",stagedChanges:r,unmergedChanges:r==="U"||t==="U"||r==="A"&&t==="A"||r==="D"&&t==="D"};return e.indicator==="2"&&(n.changeScore=e.rcScore),n}function vn(e){return[e.charAt(0),e.charAt(1)]}function it(e){if(e!==".")switch(e){case"M":return"Modified";case"T":return"Type changed";case"A":return"Added";case"D":return"Deleted";case"R":return"Renamed";case"C":return"Copied";case"U":return"Unmerged";case"?":return"Untracked";case"!":return"Ignored"}}function jt(e){return Cn(e)?An(e):{isSubmodule:!1}}function Cn(e){return!!e&&e.startsWith("S")}function An(e){return{isSubmodule:!0,commitHasChanged:e.charAt(1)==="C",hasTrackedChanges:e.charAt(2)==="M",hasUntrackedChanges:e.charAt(3)==="U"}}function Gt(e){if(!e)return;let r={branch:{name:"",commit:""},files:[]};return e.split(`
`).forEach(t=>{t&&(t.startsWith("#")?Nt(t,r.branch):r.files.push(Pn(t)))}),r}function Pn(e){let r=Vt(e),t="";return r.indicator!=="?"&&r.indicator!=="!"&&(t=r.submodule),{fileName:r.path,origPath:r.indicator==="2"?r.origPath:void 0,submodule:jt(t),changes:zt(r)}}var Re=require("react"),ct=(0,Re.createContext)("");function q(){return Bt("selectedRepo")}function b(){return(0,Re.useContext)(ct)}var xe=require("react"),ge=require("@raycast/api");var M=require("@raycast/api");var ut=require("react"),_=require("@raycast/api");var lt=require("react/jsx-runtime");function Ht(e){if(e!==".")switch(e){case"A":return _.Color.Green;case"M":return _.Color.Blue;case"T":return _.Color.Blue;case"D":return _.Color.Red;case"R":return _.Color.Magenta;case"C":return _.Color.Magenta;case"U":return _.Color.Orange;case"?":return _.Color.Green;case"!":return _.Color.SecondaryText}}function Kt({changes:e}){let r=(0,ut.useMemo)(()=>{let n=[];if(e.hasStagedChanges){n.push(["Staged",_.Color.PrimaryText]);let a=it(e.stagedChanges);a&&n.push([a,Ht(e.stagedChanges)])}if(e.hasUnstagedChanges&&(n.push(["Unstaged",_.Color.SecondaryText]),e.unstagedChanges!==e.stagedChanges)){let a=it(e.unstagedChanges);a&&n.push([a,Ht(e.unstagedChanges)])}return n},[e.hasStagedChanges,e.stagedChanges,e.hasUnstagedChanges,e.unstagedChanges]),t=(0,ut.useMemo)(()=>r.map((n,a)=>(0,lt.jsx)(_.List.Item.Detail.Metadata.TagList.Item,{text:n[0],color:n[1]},a)),[r]);return(0,lt.jsx)(_.List.Item.Detail.Metadata.TagList,{title:"Status",children:t})}var Ue=require("react");var P=require("react/jsx-runtime");function Jt({branch:e,status:r,diff:t}){let n=(0,Ue.useMemo)(()=>e.upstream?(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(M.List.Item.Detail.Metadata.Label,{title:"Upstream",text:e.upstream}),(0,P.jsx)(M.List.Item.Detail.Metadata.Label,{title:"Ahead",text:`${e.ahead} commits`}),(0,P.jsx)(M.List.Item.Detail.Metadata.Label,{title:"Behind",text:`${e.behind} commits`})]}):null,[e.ahead,e.behind,e.upstream]),a=(0,Ue.useMemo)(()=>{if(!r.changes.changeScore&&!r.origPath)return null;let s=Wt(r.changes.changeScore??0/100,M.Color.Magenta);return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(M.List.Item.Detail.Metadata.Label,{title:"Original path",text:r.origPath}),(0,P.jsx)(M.List.Item.Detail.Metadata.Label,{title:"Similarity to original file",text:r.changes.changeScore+"%",icon:s})]})},[r.changes.changeScore,r.origPath]),o=(0,Ue.useMemo)(()=>t?"```diff\n"+t:null,[t]);return(0,P.jsx)(M.List.Item.Detail,{markdown:o,metadata:(0,P.jsxs)(M.List.Item.Detail.Metadata,{children:[(0,P.jsx)(M.List.Item.Detail.Metadata.Label,{title:"File path",text:r.fileName}),a,(0,P.jsx)(Kt,{changes:r.changes}),(0,P.jsx)(M.List.Item.Detail.Metadata.Separator,{}),(0,P.jsx)(M.List.Item.Detail.Metadata.Label,{title:"Branch",text:e.name}),n]})})}var bt=require("react"),Se=require("@raycast/api");var tr=require("@raycast/api");var D=require("@raycast/api");var Fe=require("react"),ft=(0,Fe.createContext)(()=>{throw Error("Cannot check status: CheckStatusContext was not initialized")});function x(){return(0,Fe.useContext)(ft)}var Yt=require("react/jsx-runtime");function Zt(){let e=b(),r=x(),{revalidate:t}=h("git",["push","--force-with-lease"],{cwd:e,execute:!1,onWillExecute:()=>{(0,D.showToast)({title:"Pushing branch",style:D.Toast.Style.Animated})},onData:()=>{r(),(0,D.showToast)({title:"Remote up to date"})},onError:a=>{f(a,{title:"Could not push this branch"})}}),{revalidate:n}=h("git",["push"],{cwd:e,execute:!1,onWillExecute:()=>{(0,D.showToast)({title:"Pushing branch",style:D.Toast.Style.Animated})},onData:()=>{r(),(0,D.showToast)({title:"Remote up to date"})},onError:a=>{f(a,{title:"Could not push this branch",primaryAction:{onAction:t,title:"Force Push Branch?"}})}});return(0,Yt.jsx)(D.Action,{title:"Push",icon:D.Icon.Upload,onAction:n,shortcut:D.Keyboard.Shortcut.Common.MoveUp})}var W=require("@raycast/api");var Xt=require("react/jsx-runtime");function qt(){let e=b(),r=x(),{revalidate:t}=h("git",["pull"],{cwd:e,execute:!1,onWillExecute:()=>{(0,W.showToast)({title:"Pulling branch",style:W.Toast.Style.Animated})},onData:()=>{r(),(0,W.showToast)({title:"Branch up to date"})},onError:n=>{f(n,{title:"Could not pull this branch"})}});return(0,Xt.jsx)(W.Action,{title:"Pull",icon:W.Icon.Download,onAction:t,shortcut:W.Keyboard.Shortcut.Common.MoveDown})}var G=require("@raycast/api");var er=require("react/jsx-runtime");function Qt(){let e=b(),r=x(),{revalidate:t}=h("git",["fetch"],{cwd:e,execute:!1,onWillExecute:()=>{(0,G.showToast)({title:"Fetching repo data",style:G.Toast.Style.Animated})},onData:()=>{r(),(0,G.showToast)({title:"Fetched data"})},onError:n=>{f(n,{title:"Could not fetch data"})}});return(0,er.jsx)(G.Action,{title:"Fetch",icon:G.Icon.ArrowClockwise,onAction:t})}var ie=require("react/jsx-runtime");function _e(){return(0,ie.jsxs)(tr.ActionPanel.Section,{title:"Remote",children:[(0,ie.jsx)(Zt,{}),(0,ie.jsx)(qt,{}),(0,ie.jsx)(Qt,{})]})}var ce=require("@raycast/api");var nr=require("react/jsx-runtime");function rr({fileName:e}){let r=b(),t=x(),{revalidate:n}=h("git",["add",e],{cwd:r,execute:!1,onData:()=>{t(),(0,ce.showToast)({title:`Added ${e}`})},onError:a=>{f(a,{title:`Could not stage ${e}`})}});return(0,nr.jsx)(ce.Action,{title:"Add",icon:ce.Icon.Plus,onAction:n})}var ue=require("@raycast/api");var or=require("react/jsx-runtime");function ar({fileName:e}){let r=b(),t=x(),{revalidate:n}=h("git",["restore","--staged",e],{cwd:r,execute:!1,onData:()=>{t(),(0,ue.showToast)({title:`Unstaged ${e}`})},onError:a=>{f(a,{title:`Could not unstage ${e}`})}});return(0,or.jsx)(ue.Action,{title:"Unstage",icon:ue.Icon.Minus,onAction:n})}var De=require("@raycast/api");var sr=require("react"),O=require("@raycast/api");var $e=require("react/jsx-runtime");function ir({checkStatus:e}){let r=q(),{pop:t}=(0,O.useNavigation)(),[n,a]=(0,sr.useState)(""),{revalidate:o}=h("git",["commit","-m",n],{cwd:r.value,execute:!1,onData:()=>{e(),(0,O.showToast)({title:"Committed changed"}),t()},onError:c=>{f(c,{title:"Could not commit changes"})}}),{handleSubmit:s,itemProps:i}=Ee({onSubmit:o,validation:{commitMsg:Ot.Required}});return(0,$e.jsx)(O.Form,{navigationTitle:"Commit Staged Changes",actions:(0,$e.jsx)(O.ActionPanel,{children:(0,$e.jsx)(O.Action.SubmitForm,{title:"Commit",onSubmit:s,icon:O.Icon.Checkmark})}),children:(0,$e.jsx)(O.Form.TextArea,{id:"commitMsg",title:"Commit message",value:n,onChange:a,error:i.commitMsg.error})})}var dt=require("react/jsx-runtime");function cr(){let e=x();return(0,dt.jsx)(De.Action.Push,{title:"Commit Message",icon:De.Icon.Pencil,target:(0,dt.jsx)(ir,{checkStatus:e})})}var H=require("@raycast/api");var lr=require("react/jsx-runtime");function ur({fileName:e}){let r=b(),t=x(),{revalidate:n}=h("git",["restore",e],{cwd:r,execute:!1,onData:()=>{t(),(0,H.showToast)({title:`Reset ${e} to its previous state`})},onError:a=>{f(a,{title:`Could not reset ${e}`})}});return(0,lr.jsx)(H.Action,{title:"Reset File",icon:H.Icon.Undo,onAction:n,shortcut:H.Keyboard.Shortcut.Common.Remove,style:H.Action.Style.Destructive})}var We=require("@raycast/api");var Sr=require("react"),we=require("@raycast/api");var ht=require("react/jsx-runtime");function Le({repo:e,checkStatus:r,children:t}){return(0,ht.jsx)(ct,{value:e??"",children:(0,ht.jsx)(ft,{value:r,children:t})})}var Be=require("react"),wr=require("@raycast/api");var $r=require("@raycast/api");var le=require("@raycast/api");var dr=require("react/jsx-runtime");function fr({branch:e,checkBranches:r}){let t=b(),{revalidate:n}=h("git",["switch",e],{cwd:t,execute:!1,onData:()=>{r(),(0,le.showToast)({title:`Switched branch to ${e}`})},onError:a=>{f(a,{title:`Could not switch to ${e}`})}});return(0,dr.jsx)(le.Action,{title:"Switch to This Branch",icon:le.Icon.Repeat,onAction:n})}var X=require("@raycast/api");var mr=require("react/jsx-runtime");function hr({branch:e,checkBranches:r}){let t=b(),{revalidate:n}=h("git",["branch","-D",e],{cwd:t,execute:!1,onData:()=>{(0,X.showToast)({title:`Deleted branch ${e}`}),r()},onError:o=>{f(o,{title:`Could not delete branch ${e}`})}}),{revalidate:a}=h("git",["branch","-d",e],{cwd:t,execute:!1,onData:()=>{(0,X.showToast)({title:`Deleted branch ${e}`}),r()},onError:o=>{f(o,{title:`Could not delete ${e}`,primaryAction:{title:"Force Delete Branch?",onAction:n}})}});return(0,mr.jsx)(X.Action,{title:"Delete This Branch",icon:X.Icon.Trash,onAction:a,style:X.Action.Style.Destructive})}var fe=require("@raycast/api");var pr=require("react"),B=require("@raycast/api");var ye=require("react/jsx-runtime");function gr({checkBranches:e}){let r=q(),{pop:t}=(0,B.useNavigation)(),[n,a]=(0,pr.useState)(""),{revalidate:o,isLoading:s}=h("git",["switch","-c",n],{cwd:r.value,execute:!1,onData:()=>{e(),(0,B.showToast)({title:"Created branch"}),t()},onError:l=>{f(l,{title:`Could not create a branch called ${n}`})}}),{handleSubmit:i,itemProps:c}=Ee({onSubmit:o,validation:{newBranch:l=>{let d=l.trim();if(d){if(/[~^:?*[\\\s]/g.test(d))return"Branch name contains invalid characters. Avoid using ~, ^, :, ?, *, [, \\, or any whitespace characters";if(d.startsWith("-"))return"Branch name cannot start with '-'"}else return"A branch name is required"}}});return(0,ye.jsx)(B.Form,{navigationTitle:"Create New Branch",isLoading:s,actions:(0,ye.jsx)(B.ActionPanel,{children:(0,ye.jsx)(B.Action.SubmitForm,{title:"Create Branch",onSubmit:i,icon:B.Icon.Checkmark})}),children:(0,ye.jsx)(B.Form.TextField,{id:"newBranch",title:"New branch name",info:"Do not include any whitespace characters",value:n,onChange:a,placeholder:"new-feature-branch",autoFocus:!0,error:c.newBranch.error})})}var mt=require("react/jsx-runtime");function Me({checkBranches:e}){return(0,mt.jsx)(fe.Action.Push,{title:"Create a New Branch",icon:fe.Icon.Plus,shortcut:fe.Keyboard.Shortcut.Common.New,target:(0,mt.jsx)(gr,{checkBranches:e})})}var de=require("@raycast/api");var br=require("react/jsx-runtime");function Oe({checkBranches:e}){let r=b(),{revalidate:t}=h("git",["switch","-"],{cwd:r,execute:!1,onData:()=>{e(),(0,de.showToast)({title:"Changed branch"})},onError:n=>{f(n,{title:"Could not switch branches"})}});return(0,br.jsx)(de.Action,{title:"Switch to Your Last Branch",icon:de.Icon.Replace,onAction:t,shortcut:{key:"-",modifiers:["cmd"]}})}var V=require("react/jsx-runtime");function yr({branch:e,isCurrentBranch:r,checkBranches:t}){return(0,V.jsxs)($r.ActionPanel,{children:[r?null:(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(fr,{branch:e,checkBranches:t}),(0,V.jsx)(hr,{branch:e,checkBranches:t})]}),(0,V.jsx)(Me,{checkBranches:t}),(0,V.jsx)(Oe,{checkBranches:t})]})}var pt=require("react/jsx-runtime");function kr({branch:e,checkBranches:r}){let t=(0,Be.useMemo)(()=>e.startsWith("*"),[e]),n=(0,Be.useMemo)(()=>t?e.slice(2):e,[e,t]),a=(0,Be.useMemo)(()=>{if(t)return[{text:"Current branch"}]},[t]);return(0,pt.jsx)(wr.List.Item,{title:n,accessories:a,actions:(0,pt.jsx)(yr,{branch:n,isCurrentBranch:t,checkBranches:r})})}var K=require("react/jsx-runtime");function xr({checkStatus:e}){let r=q(),{data:t,isLoading:n,revalidate:a}=h("git",["branch","--sort=-committerdate","--no-color"],{cwd:r.value,parseOutput:({stdout:s})=>s.split(`
`),onData:()=>{e()},onError:s=>{f(s,{title:"Could not get branch list"})},stripFinalNewline:!0}),o=(0,Sr.useMemo)(()=>t?t.map(s=>(0,K.jsx)(kr,{branch:s.trim(),checkBranches:a},s.replace(/^\*\s/,""))):(0,K.jsx)(we.List.EmptyView,{title:"There are no branches"}),[t,a]);return(0,K.jsx)(Le,{repo:r.value,checkStatus:e,children:(0,K.jsx)(we.List,{searchBarPlaceholder:"Search branches\u2026",navigationTitle:"Change Branches",isLoading:n,actions:(0,K.jsxs)(we.ActionPanel,{children:[(0,K.jsx)(Me,{checkBranches:a}),(0,K.jsx)(Oe,{checkBranches:a})]}),children:o})})}var gt=require("react/jsx-runtime");function Ne(){let e=x();return(0,gt.jsx)(We.Action.Push,{title:"Change Current Branch",icon:We.Icon.Switch,target:(0,gt.jsx)(xr,{checkStatus:e}),shortcut:{key:"b",modifiers:["cmd"]}})}var Cr=require("react"),ze=require("@raycast/api");var Ve=require("@raycast/api");function vr(){(0,Ve.launchCommand)({name:"set-repo",type:Ve.LaunchType.UserInitiated}).catch(e=>{f(e,{title:"Could not launch the Set Repo command"})})}var Ar=require("react/jsx-runtime");function ke({title:e}){let r=(0,Cr.useMemo)(()=>e||"Set Repo",[e]);return(0,Ar.jsx)(ze.Action,{title:r,icon:ze.Icon.Folder,onAction:vr})}var je=require("@raycast/api"),Er=require("react/jsx-runtime");function Pr({fileName:e}){return(0,Er.jsx)(je.Action.CopyToClipboard,{title:"Copy Filename",content:e,shortcut:je.Keyboard.Shortcut.Common.Copy})}var Ir=require("node:path"),he=require("react"),z=require("@raycast/api");var te=require("react/jsx-runtime");function Tr({fileName:e}){let[r,t]=(0,he.useState)(),n=b(),a=(0,he.useMemo)(()=>(0,Ir.join)(n??"",e),[e,n]);return(0,he.useEffect)(()=>{(0,z.getDefaultApplication)(a).then(o=>{t({fileIcon:o.path})}).catch(()=>{})},[a,n]),(0,te.jsxs)(te.Fragment,{children:[(0,te.jsx)(z.Action.Open,{title:"Open File",icon:r,target:a,shortcut:z.Keyboard.Shortcut.Common.Open}),(0,te.jsx)(z.Action.OpenWith,{icon:z.Icon.Finder,path:a,shortcut:z.Keyboard.Shortcut.Common.OpenWith})]})}var me=require("@raycast/api");var Ur=require("react/jsx-runtime");function Rr(){let e=b(),r=x(),{revalidate:t}=h("git",["add","."],{cwd:e,execute:!1,onData:()=>{r(),(0,me.showToast)({title:"Added files"})},onError:n=>{f(n,{title:"Could not stage files"})}});return(0,Ur.jsx)(me.Action,{title:"Add All Files",icon:me.Icon.PlusCircle,onAction:t,shortcut:{key:"a",modifiers:["cmd","shift"]}})}var Q=require("@raycast/api");var _r=require("react/jsx-runtime");function Fr(){let e=b(),r=x(),{revalidate:t}=h("git",["restore","--staged","."],{cwd:e,execute:!1,onData:()=>{r(),(0,Q.showToast)({title:"Unstaged files"})},onError:n=>{f(n,{title:"Could not unstage files"})}});return(0,_r.jsx)(Q.Action,{title:"Unstage All Files",icon:Q.Icon.MinusCircle,onAction:t,shortcut:Q.Keyboard.Shortcut.Common.RemoveAll})}var pe=require("@raycast/api");var Lr=require("react/jsx-runtime");function Dr(){let e=b(),r=x(),{revalidate:t}=h("git",["stash"],{cwd:e,execute:!1,onData:()=>{r(),(0,pe.showToast)({title:"Stashed files"})},onError:n=>{f(n,{title:"Could not stash files"})}});return(0,Lr.jsx)(pe.Action,{title:"Stash All Files",icon:pe.Icon.SaveDocument,onAction:t})}var Ge=require("@raycast/api");var He=require("react"),Or=require("react/jsx-runtime");function Mr({fileName:e,isShowingDiff:r,updateDiff:t}){let n=b(),{revalidate:a}=h("git",["diff","--histogram","HEAD",e],{cwd:n,execute:!1,keepPreviousData:!1,onData:i=>{t(i)},onError:i=>{f(i,{title:`Could not generate diff for ${e}`})}}),o=(0,He.useMemo)(()=>r?"Hide Diff":"Show Diff",[r]),s=(0,He.useCallback)(()=>{r?t(""):a()},[r,a,t]);return(0,Or.jsx)(Ge.Action,{title:o,icon:Ge.Icon.CodeBlock,onAction:s,shortcut:{key:"d",modifiers:["cmd"]}})}var re=require("@raycast/api");var Wr=require("react/jsx-runtime");function Br(){let e=b(),r=x(),{revalidate:t}=h("git",["restore","."],{cwd:e,execute:!1,onData:()=>{r(),(0,re.showToast)({title:"Reset all unstaged files to their previous state"})},onError:n=>{f(n,{title:"Could not reset unstaged files"})}});return(0,Wr.jsx)(re.Action,{title:"Reset All Unstaged Files",icon:re.Icon.Undo,onAction:t,style:re.Action.Style.Destructive})}var v=require("react/jsx-runtime");function Nr({isNotStaged:e,isCommittedFile:r,isShowingDiff:t,fileName:n,updateDiff:a}){let o=(0,bt.useMemo)(()=>e?(0,v.jsx)(rr,{fileName:n}):(0,v.jsx)(ar,{fileName:n}),[n,e]),s=(0,bt.useMemo)(()=>!e||!r?null:(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(Mr,{fileName:n,updateDiff:a,isShowingDiff:t}),(0,v.jsx)(ur,{fileName:n})]}),[n,r,e,t,a]);return(0,v.jsxs)(Se.ActionPanel,{children:[(0,v.jsxs)(Se.ActionPanel.Section,{children:[o,(0,v.jsx)(cr,{}),s]}),(0,v.jsx)(Ne,{}),(0,v.jsxs)(Se.ActionPanel.Section,{title:"Bulk Actions",children:[(0,v.jsx)(Rr,{}),(0,v.jsx)(Fr,{}),(0,v.jsx)(Br,{}),(0,v.jsx)(Dr,{})]}),(0,v.jsx)(_e,{}),(0,v.jsxs)(Se.ActionPanel.Section,{title:"Utilities",children:[(0,v.jsx)(ke,{}),(0,v.jsx)(Pr,{fileName:n}),(0,v.jsx)(Tr,{fileName:n})]})]})}var Ke=require("react/jsx-runtime");function Vr({status:e,branch:r}){let[t,n]=(0,xe.useState)(""),a=(0,xe.useMemo)(()=>e.origPath?`${e.origPath} -> ${e.fileName}`:e.fileName,[e.fileName,e.origPath]),o=(0,xe.useMemo)(()=>e.changes.hasStagedChanges&&e.changes.hasUnstagedChanges?ge.Icon.CircleProgress50:e.changes.hasStagedChanges&&!e.changes.hasUnstagedChanges?ge.Icon.CheckCircle:ge.Icon.Circle,[e.changes.hasStagedChanges,e.changes.hasUnstagedChanges]);return(0,Ke.jsx)(ge.List.Item,{icon:o,title:a,actions:(0,Ke.jsx)(Nr,{isNotStaged:e.changes.hasUnstagedChanges,isCommittedFile:e.changes.isTracked,isShowingDiff:!!t,fileName:e.fileName,updateDiff:n}),detail:(0,Ke.jsx)(Jt,{branch:r,status:e,diff:t})})}var $t=require("react"),zr=require("@raycast/api");var Gr=require("react/jsx-runtime");function jr({branch:e}){let r=b(),t=(0,$t.useMemo)(()=>r&&e?`On branch ${e.name}`:"Please select a repo",[e,r]),n=(0,$t.useMemo)(()=>{if(!r||!e)return;let{ahead:a,behind:o,upstream:s}=e;return s?a&&o?`Ahead of '${s}' by ${a}, and behind by ${o} commits`:a&&!o?`Ahead of '${s}' by ${a} commits.`:!a&&o?`Behind '${s}' by ${o} commits.`:`Up to date with ${s}`:"Nothing to commit, working tree clean"},[e,r]);return(0,Gr.jsx)(zr.List.EmptyView,{title:t,description:n})}var L=require("react/jsx-runtime");function Hr(){let e=q(),{data:r,isLoading:t,revalidate:n}=h("git",["status","--porcelain=2","--branch"],{cwd:e.value,execute:!!e.value,keepPreviousData:!1,onError:i=>{f(i,{title:"Could not fetch git status"})},parseOutput:({stdout:i})=>Gt(i)}),a=(0,Je.useMemo)(()=>!!e.value&&!!r?.files.length,[r?.files.length,e.value]),o=(0,Je.useMemo)(()=>e.value?(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(Ne,{}),(0,L.jsx)(_e,{}),(0,L.jsx)(ke,{title:"Change Current Repo"})]}):(0,L.jsx)(ke,{}),[e.value]),s=(0,Je.useMemo)(()=>r?.files.length?r.files.map(i=>(0,L.jsx)(Vr,{status:i,branch:r.branch},i.fileName)):(0,L.jsx)(jr,{branch:r?.branch}),[r]);return(0,L.jsx)(Le,{repo:e.value,checkStatus:n,children:(0,L.jsx)(Ze.List,{searchBarPlaceholder:"Search modified files\u2026",navigationTitle:"Git Status",isShowingDetail:a,isLoading:e.isLoading||t,actions:(0,L.jsx)(Ze.ActionPanel,{children:o}),children:s})})}var Jr=require("react/jsx-runtime");function Kr(){return(0,Jr.jsx)(Hr,{})}
