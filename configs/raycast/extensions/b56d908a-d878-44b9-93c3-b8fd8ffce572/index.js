"use strict";var ie=Object.create;var V=Object.defineProperty;var oe=Object.getOwnPropertyDescriptor;var ce=Object.getOwnPropertyNames;var le=Object.getPrototypeOf,ue=Object.prototype.hasOwnProperty;var fe=(t,n)=>{for(var r in n)V(t,r,{get:n[r],enumerable:!0})},G=(t,n,r,e)=>{if(n&&typeof n=="object"||typeof n=="function")for(let a of ce(n))!ue.call(t,a)&&a!==r&&V(t,a,{get:()=>n[a],enumerable:!(e=oe(n,a))||e.enumerable});return t};var N=(t,n,r)=>(r=t!=null?ie(le(t)):{},G(n||!t||!t.__esModule?V(r,"default",{value:t,enumerable:!0}):r,t)),de=t=>G(V({},"__esModule",{value:!0}),t);var Ie={};fe(Ie,{default:()=>re});module.exports=de(Ie);var f=require("@raycast/api");var s=N(require("react")),d=require("@raycast/api");var K=Object.prototype.hasOwnProperty;function j(t,n){var r,e;if(t===n)return!0;if(t&&n&&(r=t.constructor)===n.constructor){if(r===Date)return t.getTime()===n.getTime();if(r===RegExp)return t.toString()===n.toString();if(r===Array){if((e=t.length)===n.length)for(;e--&&j(t[e],n[e]););return e===-1}if(!r||typeof t=="object"){e=0;for(r in t)if(K.call(t,r)&&++e&&!K.call(n,r)||!(r in n)||!j(t[r],n[r]))return!1;return Object.keys(n).length===e}}return t!==t&&n!==n}var C=N(require("node:fs")),B=N(require("node:path")),q=N(require("node:crypto"));var Y=require("react/jsx-runtime");function he(t){let n=(0,s.useRef)(t),r=(0,s.useRef)(0);return j(t,n.current)||(n.current=t,r.current+=1),(0,s.useMemo)(()=>n.current,[r.current])}function x(t){let n=(0,s.useRef)(t);return n.current=t,n}function pe(t,n){let r=t instanceof Error?t.message:String(t);return(0,d.showToast)({style:d.Toast.Style.Failure,title:n?.title??"Something went wrong",message:n?.message??r,primaryAction:n?.primaryAction??H(t),secondaryAction:n?.primaryAction?H(t):void 0})}var H=t=>{let n=!0,r="[Extension Name]...",e="";try{let i=JSON.parse((0,C.readFileSync)((0,B.join)(d.environment.assetsPath,"..","package.json"),"utf8"));r=`[${i.title}]...`,e=`https://raycast.com/${i.owner||i.author}/${i.name}`,(!i.owner||i.access==="public")&&(n=!1)}catch{}let a=d.environment.isDevelopment||n,o=t instanceof Error?t?.stack||t?.message||"":String(t);return{title:a?"Copy Logs":"Report Error",onAction(i){i.hide(),a?d.Clipboard.copy(o):(0,d.open)(`https://github.com/raycast/extensions/issues/new?&labels=extension%2Cbug&template=extension_bug_report.yml&title=${encodeURIComponent(r)}&extension-url=${encodeURI(e)}&description=${encodeURIComponent(`#### Error:
\`\`\`
${o}
\`\`\`
`)}`)}}};function me(t,n,r){let e=(0,s.useRef)(0),[a,o]=(0,s.useState)({isLoading:!0}),i=x(t),l=x(r?.abortable),c=x(n||[]),g=x(r?.onError),b=x(r?.onData),$=x(r?.onWillExecute),S=x(r?.failureToastOptions),E=x(a.data),k=(0,s.useRef)(null),p=(0,s.useRef)({page:0}),y=(0,s.useRef)(!1),A=(0,s.useRef)(!0),U=(0,s.useRef)(50),w=(0,s.useCallback)(()=>(l.current&&(l.current.current?.abort(),l.current.current=new AbortController),++e.current),[l]),m=(0,s.useCallback)((...P)=>{let v=w();$.current?.(P),o(u=>({...u,isLoading:!0}));let O=be(i.current)(...P);function L(u){return u.name=="AbortError"||v===e.current&&(g.current?g.current(u):d.environment.launchType!==d.LaunchType.Background&&pe(u,{title:"Failed to fetch latest data",primaryAction:{title:"Retry",onAction(I){I.hide(),k.current?.(...c.current||[])}},...S.current}),o({error:u,isLoading:!1})),u}return typeof O=="function"?(y.current=!0,O(p.current).then(({data:u,hasMore:I,cursor:ae})=>(v===e.current&&(p.current&&(p.current.cursor=ae,p.current.lastItem=u?.[u.length-1]),b.current&&b.current(u,p.current),I&&(U.current=u.length),A.current=I,o(se=>p.current.page===0?{data:u,isLoading:!1}:{data:(se.data||[])?.concat(u),isLoading:!1})),u),u=>(A.current=!1,L(u)))):(y.current=!1,O.then(u=>(v===e.current&&(b.current&&b.current(u),o({data:u,isLoading:!1})),u),L))},[b,g,c,i,o,k,$,p,S,w]);k.current=m;let R=(0,s.useCallback)(()=>{p.current={page:0};let P=c.current||[];return m(...P)},[m,c]),T=(0,s.useCallback)(async(P,v)=>{let O;try{if(v?.optimisticUpdate){w(),typeof v?.rollbackOnError!="function"&&v?.rollbackOnError!==!1&&(O=structuredClone(E.current?.value));let L=v.optimisticUpdate;o(u=>({...u,data:L(u.data)}))}return await P}catch(L){if(typeof v?.rollbackOnError=="function"){let u=v.rollbackOnError;o(I=>({...I,data:u(I.data)}))}else v?.optimisticUpdate&&v?.rollbackOnError!==!1&&o(u=>({...u,data:O}));throw L}finally{v?.shouldRevalidateAfter!==!1&&(d.environment.launchType===d.LaunchType.Background||d.environment.commandMode==="menu-bar"?await R():R())}},[R,E,o,w]),_=(0,s.useCallback)(()=>{p.current.page+=1;let P=c.current||[];m(...P)},[p,c,m]);(0,s.useEffect)(()=>{p.current={page:0},r?.execute!==!1?m(...n||[]):w()},[he([n,r?.execute,m]),l,p]),(0,s.useEffect)(()=>()=>{w()},[w]);let M=r?.execute!==!1?a.isLoading:!1,W={...a,isLoading:M},z=y.current?{pageSize:U.current,hasMore:A.current,onLoadMore:_}:void 0;return{...W,revalidate:R,mutate:T,pagination:z}}function be(t){return t===Promise.all||t===Promise.race||t===Promise.resolve||t===Promise.reject?t.bind(Promise):t}function J(t){return typeof t!="function"?!1:/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(t))!==null}function ge(t){return t instanceof URLSearchParams?t.toString():t}function X(t,n=[]){function r(e){return"update"in t?t.update(e,"utf8"):t.write(e)}return{dispatch:function(e){e=ge(e),e===null?this._null():this["_"+typeof e](e)},_object:function(e){let a=/\[object (.*)\]/i,o=Object.prototype.toString.call(e),i=a.exec(o)?.[1]??"unknown:["+o+"]";i=i.toLowerCase();let l=null;if((l=n.indexOf(e))>=0){this.dispatch("[CIRCULAR:"+l+"]");return}else n.push(e);if(Buffer.isBuffer(e))return r("buffer:"),r(e.toString("utf8"));if(i!=="object"&&i!=="function"&&i!=="asyncfunction")if(this["_"+i])this["_"+i](e);else throw new Error('Unknown object type "'+i+'"');else{let c=Object.keys(e);c=c.sort(),J(e)||c.splice(0,0,"prototype","__proto__","constructor"),r("object:"+c.length+":");let g=this;return c.forEach(function(b){g.dispatch(b),r(":"),g.dispatch(e[b]),r(",")})}},_array:function(e,a){a=typeof a<"u"?a:!1;let o=this;if(r("array:"+e.length+":"),!a||e.length<=1){e.forEach(function(c){o.dispatch(c)});return}let i=[],l=e.map(function(c){let g=$e(),b=n.slice();return X(g,b).dispatch(c),i=i.concat(b.slice(n.length)),g.read().toString()});n=n.concat(i),l.sort(),this._array(l,!1)},_date:function(e){r("date:"+e.toJSON())},_symbol:function(e){r("symbol:"+e.toString())},_error:function(e){r("error:"+e.toString())},_boolean:function(e){r("bool:"+e.toString())},_string:function(e){r("string:"+e.length+":"),r(e.toString())},_function:function(e){r("fn:"),J(e)?this.dispatch("[native]"):this.dispatch(e.toString()),this.dispatch("function-name:"+String(e.name)),this._object(e)},_number:function(e){r("number:"+e.toString())},_xml:function(e){r("xml:"+e.toString())},_null:function(){r("Null")},_undefined:function(){r("Undefined")},_regexp:function(e){r("regex:"+e.toString())},_uint8array:function(e){r("uint8array:"),this.dispatch(Array.prototype.slice.call(e))},_uint8clampedarray:function(e){r("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(e))},_int8array:function(e){r("int8array:"),this.dispatch(Array.prototype.slice.call(e))},_uint16array:function(e){r("uint16array:"),this.dispatch(Array.prototype.slice.call(e))},_int16array:function(e){r("int16array:"),this.dispatch(Array.prototype.slice.call(e))},_uint32array:function(e){r("uint32array:"),this.dispatch(Array.prototype.slice.call(e))},_int32array:function(e){r("int32array:"),this.dispatch(Array.prototype.slice.call(e))},_float32array:function(e){r("float32array:"),this.dispatch(Array.prototype.slice.call(e))},_float64array:function(e){r("float64array:"),this.dispatch(Array.prototype.slice.call(e))},_arraybuffer:function(e){r("arraybuffer:"),this.dispatch(new Uint8Array(e))},_url:function(e){r("url:"+e.toString())},_map:function(e){r("map:");let a=Array.from(e);this._array(a,!0)},_set:function(e){r("set:");let a=Array.from(e);this._array(a,!0)},_file:function(e){r("file:"),this.dispatch([e.name,e.size,e.type,e.lastModified])},_blob:function(){throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){r("domwindow")},_bigint:function(e){r("bigint:"+e.toString())},_process:function(){r("process")},_timer:function(){r("timer")},_pipe:function(){r("pipe")},_tcp:function(){r("tcp")},_udp:function(){r("udp")},_tty:function(){r("tty")},_statwatcher:function(){r("statwatcher")},_securecontext:function(){r("securecontext")},_connection:function(){r("connection")},_zlib:function(){r("zlib")},_context:function(){r("context")},_nodescript:function(){r("nodescript")},_httpparser:function(){r("httpparser")},_dataview:function(){r("dataview")},_signal:function(){r("signal")},_fsevent:function(){r("fsevent")},_tlswrap:function(){r("tlswrap")}}}function $e(){return{buf:"",write:function(t){this.buf+=t},end:function(t){this.buf+=t},read:function(){return this.buf}}}function ye(t,n){let r=this[t];return r instanceof Date?`__raycast_cached_date__${r.toISOString()}`:Buffer.isBuffer(r)?`__raycast_cached_buffer__${r.toString("base64")}`:n}function we(t,n){return typeof n=="string"&&n.startsWith("__raycast_cached_date__")?new Date(n.replace("__raycast_cached_date__","")):typeof n=="string"&&n.startsWith("__raycast_cached_buffer__")?Buffer.from(n.replace("__raycast_cached_buffer__",""),"base64"):n}function F(t){let n=q.default.createHash("sha1");return X(n).dispatch(t),n.digest("hex")}var ke=Symbol("cache without namespace"),Z=new Map;function xe(t,n,r){let e=r?.cacheNamespace||ke,a=Z.get(e)||Z.set(e,new d.Cache({namespace:r?.cacheNamespace})).get(e);if(!a)throw new Error("Missing cache");let o=x(t),i=x(n),l=(0,s.useSyncExternalStore)(a.subscribe,()=>{try{return a.get(o.current)}catch($){console.error("Could not get Cache data:",$);return}}),c=(0,s.useMemo)(()=>{if(typeof l<"u"){if(l==="undefined")return;try{return JSON.parse(l,we)}catch($){return console.warn("The cached data is corrupted",$),i.current}}else return i.current},[l,i]),g=x(c),b=(0,s.useCallback)($=>{let S=typeof $=="function"?$(g.current):$;if(typeof S>"u")a.set(o.current,"undefined");else{let E=JSON.stringify(S,ye);a.set(o.current,E)}return S},[a,o,g]);return[c,b]}var D=Symbol();function ve(t,n,r){let{initialData:e,keepPreviousData:a,internal_cacheKeySuffix:o,...i}=r||{},l=(0,s.useRef)(null),[c,g]=xe(F(n||[])+o,D,{cacheNamespace:F(t)}),b=(0,s.useRef)(c!==D?c:e),$=(0,s.useRef)(void 0),{mutate:S,revalidate:E,...k}=me(t,n||[],{...i,onData(w,m){$.current=m,i.onData&&i.onData(w,m),!(m&&m.page>0)&&(l.current="promise",b.current=w,g(w))}}),p,y=k.pagination;$.current&&$.current.page>0&&k.data?p=k.data:l.current==="promise"?p=b.current:a&&c!==D?(p=c,y&&(y.hasMore=!0,y.pageSize=c.length)):a&&c===D?p=b.current:c!==D?(p=c,y&&(y.hasMore=!0,y.pageSize=c.length)):p=e;let A=x(p),U=(0,s.useCallback)(async(w,m)=>{let R;try{if(m?.optimisticUpdate){typeof m?.rollbackOnError!="function"&&m?.rollbackOnError!==!1&&(R=structuredClone(A.current));let T=m.optimisticUpdate(A.current);l.current="cache",b.current=T,g(T)}return await S(w,{shouldRevalidateAfter:m?.shouldRevalidateAfter})}catch(T){if(typeof m?.rollbackOnError=="function"){let _=m.rollbackOnError(A.current);l.current="cache",b.current=_,g(_)}else m?.optimisticUpdate&&m?.rollbackOnError!==!1&&(l.current="cache",b.current=R,g(R));throw T}},[g,S,A,b,l]);return(0,s.useEffect)(()=>{c!==D&&(l.current="cache",b.current=c)},[c]),{data:p,isLoading:k.isLoading,error:k.error,mutate:$.current&&$.current.page>0?S:U,pagination:y,revalidate:E}}function Se(t){if(t){let n=Ae(t);if(!n)return!1;if(n.subtype==="json"||n.suffix==="json"||n.suffix&&/\bjson\b/i.test(n.suffix)||n.subtype&&/\bjson\b/i.test(n.subtype))return!0}return!1}var Ee=/^([A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126})\/([A-Za-z0-9][A-Za-z0-9!#$&^_.+-]{0,126});?$/;function Ae(t){let n=t.indexOf(";"),r=n!==-1?t.slice(0,n).trim():t.trim(),e=Ee.exec(r.toLowerCase().toLowerCase());if(!e)return;let a=e[1],o=e[2],i,l=o.lastIndexOf("+");return l!==-1&&(i=o.substring(l+1),o=o.substring(0,l)),{type:a,subtype:o,suffix:i}}async function Re(t){if(!t.ok)throw new Error(t.statusText);let n=t.headers.get("content-type");return n&&Se(n)?await t.json():await t.text()}function Te(t){return{data:t,hasMore:!1}}function Q(t,n){let{parseResponse:r,mapResult:e,initialData:a,execute:o,keepPreviousData:i,onError:l,onData:c,onWillExecute:g,failureToastOptions:b,...$}=n||{},S={initialData:a,execute:o,keepPreviousData:i,onError:l,onData:c,onWillExecute:g,failureToastOptions:b},E=x(r||Re),k=x(e||Te),p=(0,s.useRef)(null),y=(0,s.useRef)(null),A=typeof t=="function"?t({page:0}):void 0;(!p.current||typeof y.current>"u"||y.current!==A)&&(p.current=t),y.current=A;let U=(0,s.useRef)(null),w=(0,s.useCallback)((T,_)=>async M=>{let W=await fetch(T(M),{signal:U.current?.signal,..._}),z=await E.current(W);return k.current?.(z)},[E,k]),m=(0,s.useCallback)(async(T,_)=>{let M=await fetch(T,{signal:U.current?.signal,..._}),W=await E.current(M);return k.current(W)?.data},[E,k]),R=(0,s.useMemo)(()=>y.current?w:m,[y,m,w]);return ve(R,[p.current,$],{...S,internal_cacheKeySuffix:y.current+F(k.current)+F(E.current),abortable:U})}var te=require("react"),h=require("react/jsx-runtime");function re(t){let[n,r]=(0,te.useState)(t.arguments.query??""),{isLoading:e,data:a}=ne("autocomplete-extra",n);return(0,h.jsx)(f.List,{isLoading:e,onSearchTextChange:r,searchBarPlaceholder:"Search Urban Dictionary",throttle:!0,searchText:n,children:(0,h.jsx)(f.List.Section,{title:"Suggestions",subtitle:`${a?.length??0}`,children:a?.map(o=>(0,h.jsx)(Ue,{searchResult:o},o.preview))})})}function Ue({searchResult:t}){return(0,h.jsx)(f.List.Item,{title:t.term,subtitle:t.preview,actions:(0,h.jsx)(f.ActionPanel,{children:(0,h.jsxs)(f.ActionPanel.Section,{children:[(0,h.jsx)(f.Action.Push,{title:"See Results",icon:f.Icon.Sidebar,target:(0,h.jsx)(_e,{term:t.term})}),(0,h.jsx)(f.Action.OpenInBrowser,{url:`https://www.urbandictionary.com/define.php?term=${t.term}`}),(0,h.jsx)(f.Action.CopyToClipboard,{title:`Copy "${t.term}" to Clipboard`,content:t.term,shortcut:{modifiers:["cmd","shift"],key:"c"}})]})})})}function _e({term:t}){let{isLoading:n,data:r}=ne("define",t);return(0,h.jsx)(f.List,{isLoading:n,searchBarPlaceholder:`Definitions for "${t}"`,isShowingDetail:!0,filtering:!0,navigationTitle:"Show Definitions",children:(0,h.jsx)(f.List.Section,{title:"Results",subtitle:`${r?.length??0}`,children:r?.map(e=>(0,h.jsx)(f.List.Item,{title:e.definition,detail:(0,h.jsx)(f.List.Item.Detail,{markdown:Pe(e),metadata:(0,h.jsxs)(f.List.Item.Detail.Metadata,{children:[(0,h.jsx)(f.List.Item.Detail.Metadata.Label,{title:"Thumbs Up",text:e.thumbs_up.toString()}),(0,h.jsx)(f.List.Item.Detail.Metadata.Label,{title:"Thumbs Down",text:e.thumbs_down.toString()}),(0,h.jsx)(f.List.Item.Detail.Metadata.Separator,{}),(0,h.jsx)(f.List.Item.Detail.Metadata.Label,{title:"Author",text:e.author}),(0,h.jsx)(f.List.Item.Detail.Metadata.Label,{title:"Date",text:new Date(e.written_on).toLocaleDateString()})]})}),actions:(0,h.jsx)(f.ActionPanel,{children:(0,h.jsxs)(f.ActionPanel.Section,{children:[(0,h.jsx)(f.Action.OpenInBrowser,{url:`https://www.urbandictionary.com/define.php?term=${t}`}),(0,h.jsx)(f.Action.CopyToClipboard,{title:`Copy "${t}" to Clipboard`,content:t,shortcut:f.Keyboard.Shortcut.Common.Copy})]})})},e.defid))})})}function ee(t){return t.replace(/\[(.*?)\]/gm,(n,r)=>`[${r}](https://www.urbandictionary.com/define.php?term=${r.replace(/\s/g,"+")})`)}function Pe(t){return`
${ee(t.definition)}
> ${ee(t.example.replace(/\r?\n/gm,`
> `))}
`}function ne(t,n=""){let r=new URLSearchParams({term:n});return Q(`https://api.urbandictionary.com/v0/${t}?${r.toString()}`,{method:"GET",parseResponse:async e=>{if(!e.ok)throw new Error(e.statusText);let a=await e.json();return"list"in a?a.list:a.results},keepPreviousData:!0,execute:n!==""})}
