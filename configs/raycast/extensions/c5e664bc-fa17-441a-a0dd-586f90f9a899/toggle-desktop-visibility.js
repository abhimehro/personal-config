"use strict";var rn=Object.create;var de=Object.defineProperty;var nn=Object.getOwnPropertyDescriptor;var on=Object.getOwnPropertyNames;var cn=Object.getPrototypeOf,sn=Object.prototype.hasOwnProperty;var d=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),an=(e,t)=>{for(var r in t)de(e,r,{get:t[r],enumerable:!0})},Ge=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of on(t))!sn.call(e,i)&&i!==r&&de(e,i,{get:()=>t[i],enumerable:!(n=nn(t,i))||n.enumerable});return e};var Ke=(e,t,r)=>(r=e!=null?rn(cn(e)):{},Ge(t||!e||!e.__esModule?de(r,"default",{value:e,enumerable:!0}):r,e)),un=e=>Ge(de({},"__esModule",{value:!0}),e);var P=d(Pe=>{"use strict";Pe.fromCallback=function(e){return Object.defineProperty(function(...t){if(typeof t[t.length-1]=="function")e.apply(this,t);else return new Promise((r,n)=>{t.push((i,o)=>i!=null?n(i):r(o)),e.apply(this,t)})},"name",{value:e.name})};Pe.fromPromise=function(e){return Object.defineProperty(function(...t){let r=t[t.length-1];if(typeof r!="function")return e.apply(this,t);t.pop(),e.apply(this,t).then(n=>r(null,n),r)},"name",{value:e.name})}});var ze=d((Do,Qe)=>{var Y=require("constants"),ln=process.cwd,he=null,fn=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return he||(he=ln.call(process)),he};try{process.cwd()}catch{}typeof process.chdir=="function"&&(be=process.chdir,process.chdir=function(e){he=null,be.call(process,e)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,be));var be;Qe.exports=yn;function yn(e){Y.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&t(e),e.lutimes||r(e),e.chown=o(e.chown),e.fchown=o(e.fchown),e.lchown=o(e.lchown),e.chmod=n(e.chmod),e.fchmod=n(e.fchmod),e.lchmod=n(e.lchmod),e.chownSync=c(e.chownSync),e.fchownSync=c(e.fchownSync),e.lchownSync=c(e.lchownSync),e.chmodSync=i(e.chmodSync),e.fchmodSync=i(e.fchmodSync),e.lchmodSync=i(e.lchmodSync),e.stat=a(e.stat),e.fstat=a(e.fstat),e.lstat=a(e.lstat),e.statSync=p(e.statSync),e.fstatSync=p(e.fstatSync),e.lstatSync=p(e.lstatSync),e.chmod&&!e.lchmod&&(e.lchmod=function(s,m,f){f&&process.nextTick(f)},e.lchmodSync=function(){}),e.chown&&!e.lchown&&(e.lchown=function(s,m,f,u){u&&process.nextTick(u)},e.lchownSync=function(){}),fn==="win32"&&(e.rename=typeof e.rename!="function"?e.rename:(function(s){function m(f,u,y){var v=Date.now(),S=0;s(f,u,function F(A){if(A&&(A.code==="EACCES"||A.code==="EPERM"||A.code==="EBUSY")&&Date.now()-v<6e4){setTimeout(function(){e.stat(u,function(T,ie){T&&T.code==="ENOENT"?s(f,u,F):y(A)})},S),S<100&&(S+=10);return}y&&y(A)})}return Object.setPrototypeOf&&Object.setPrototypeOf(m,s),m})(e.rename)),e.read=typeof e.read!="function"?e.read:(function(s){function m(f,u,y,v,S,F){var A;if(F&&typeof F=="function"){var T=0;A=function(ie,Ye,Ue){if(ie&&ie.code==="EAGAIN"&&T<10)return T++,s.call(e,f,u,y,v,S,A);F.apply(this,arguments)}}return s.call(e,f,u,y,v,S,A)}return Object.setPrototypeOf&&Object.setPrototypeOf(m,s),m})(e.read),e.readSync=typeof e.readSync!="function"?e.readSync:(function(s){return function(m,f,u,y,v){for(var S=0;;)try{return s.call(e,m,f,u,y,v)}catch(F){if(F.code==="EAGAIN"&&S<10){S++;continue}throw F}}})(e.readSync);function t(s){s.lchmod=function(m,f,u){s.open(m,Y.O_WRONLY|Y.O_SYMLINK,f,function(y,v){if(y){u&&u(y);return}s.fchmod(v,f,function(S){s.close(v,function(F){u&&u(S||F)})})})},s.lchmodSync=function(m,f){var u=s.openSync(m,Y.O_WRONLY|Y.O_SYMLINK,f),y=!0,v;try{v=s.fchmodSync(u,f),y=!1}finally{if(y)try{s.closeSync(u)}catch{}else s.closeSync(u)}return v}}function r(s){Y.hasOwnProperty("O_SYMLINK")&&s.futimes?(s.lutimes=function(m,f,u,y){s.open(m,Y.O_SYMLINK,function(v,S){if(v){y&&y(v);return}s.futimes(S,f,u,function(F){s.close(S,function(A){y&&y(F||A)})})})},s.lutimesSync=function(m,f,u){var y=s.openSync(m,Y.O_SYMLINK),v,S=!0;try{v=s.futimesSync(y,f,u),S=!1}finally{if(S)try{s.closeSync(y)}catch{}else s.closeSync(y)}return v}):s.futimes&&(s.lutimes=function(m,f,u,y){y&&process.nextTick(y)},s.lutimesSync=function(){})}function n(s){return s&&function(m,f,u){return s.call(e,m,f,function(y){C(y)&&(y=null),u&&u.apply(this,arguments)})}}function i(s){return s&&function(m,f){try{return s.call(e,m,f)}catch(u){if(!C(u))throw u}}}function o(s){return s&&function(m,f,u,y){return s.call(e,m,f,u,function(v){C(v)&&(v=null),y&&y.apply(this,arguments)})}}function c(s){return s&&function(m,f,u){try{return s.call(e,m,f,u)}catch(y){if(!C(y))throw y}}}function a(s){return s&&function(m,f,u){typeof f=="function"&&(u=f,f=null);function y(v,S){S&&(S.uid<0&&(S.uid+=4294967296),S.gid<0&&(S.gid+=4294967296)),u&&u.apply(this,arguments)}return f?s.call(e,m,f,y):s.call(e,m,y)}}function p(s){return s&&function(m,f){var u=f?s.call(e,m,f):s.call(e,m);return u&&(u.uid<0&&(u.uid+=4294967296),u.gid<0&&(u.gid+=4294967296)),u}}function C(s){if(!s||s.code==="ENOSYS")return!0;var m=!process.getuid||process.getuid()!==0;return!!(m&&(s.code==="EINVAL"||s.code==="EPERM"))}}});var et=d((xo,Ze)=>{var Xe=require("stream").Stream;Ze.exports=mn;function mn(e){return{ReadStream:t,WriteStream:r};function t(n,i){if(!(this instanceof t))return new t(n,i);Xe.call(this);var o=this;this.path=n,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,i=i||{};for(var c=Object.keys(i),a=0,p=c.length;a<p;a++){var C=c[a];this[C]=i[C]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){o._read()});return}e.open(this.path,this.flags,this.mode,function(s,m){if(s){o.emit("error",s),o.readable=!1;return}o.fd=m,o.emit("open",m),o._read()})}function r(n,i){if(!(this instanceof r))return new r(n,i);Xe.call(this),this.path=n,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,i=i||{};for(var o=Object.keys(i),c=0,a=o.length;c<a;c++){var p=o[c];this[p]=i[p]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=e.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}});var rt=d((qo,tt)=>{"use strict";tt.exports=hn;var dn=Object.getPrototypeOf||function(e){return e.__proto__};function hn(e){if(e===null||typeof e!="object")return e;if(e instanceof Object)var t={__proto__:dn(e)};else var t=Object.create(null);return Object.getOwnPropertyNames(e).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}),t}});var ee=d((Po,Le)=>{var D=require("fs"),pn=ze(),wn=et(),Sn=rt(),pe=require("util"),_,Se;typeof Symbol=="function"&&typeof Symbol.for=="function"?(_=Symbol.for("graceful-fs.queue"),Se=Symbol.for("graceful-fs.previous")):(_="___graceful-fs.queue",Se="___graceful-fs.previous");function gn(){}function ot(e,t){Object.defineProperty(e,_,{get:function(){return t}})}var z=gn;pe.debuglog?z=pe.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(z=function(){var e=pe.format.apply(pe,arguments);e="GFS4: "+e.split(/\n/).join(`
GFS4: `),console.error(e)});D[_]||(nt=global[_]||[],ot(D,nt),D.close=(function(e){function t(r,n){return e.call(D,r,function(i){i||it(),typeof n=="function"&&n.apply(this,arguments)})}return Object.defineProperty(t,Se,{value:e}),t})(D.close),D.closeSync=(function(e){function t(r){e.apply(D,arguments),it()}return Object.defineProperty(t,Se,{value:e}),t})(D.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){z(D[_]),require("assert").equal(D[_].length,0)}));var nt;global[_]||ot(global,D[_]);Le.exports=Oe(Sn(D));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!D.__patched&&(Le.exports=Oe(D),D.__patched=!0);function Oe(e){pn(e),e.gracefulify=Oe,e.createReadStream=Ye,e.createWriteStream=Ue;var t=e.readFile;e.readFile=r;function r(l,w,h){return typeof w=="function"&&(h=w,w=null),O(l,w,h);function O(I,q,k,x){return t(I,q,function(g){g&&(g.code==="EMFILE"||g.code==="ENFILE")?Z([O,[I,q,k],g,x||Date.now(),Date.now()]):typeof k=="function"&&k.apply(this,arguments)})}}var n=e.writeFile;e.writeFile=i;function i(l,w,h,O){return typeof h=="function"&&(O=h,h=null),I(l,w,h,O);function I(q,k,x,g,L){return n(q,k,x,function(E){E&&(E.code==="EMFILE"||E.code==="ENFILE")?Z([I,[q,k,x,g],E,L||Date.now(),Date.now()]):typeof g=="function"&&g.apply(this,arguments)})}}var o=e.appendFile;o&&(e.appendFile=c);function c(l,w,h,O){return typeof h=="function"&&(O=h,h=null),I(l,w,h,O);function I(q,k,x,g,L){return o(q,k,x,function(E){E&&(E.code==="EMFILE"||E.code==="ENFILE")?Z([I,[q,k,x,g],E,L||Date.now(),Date.now()]):typeof g=="function"&&g.apply(this,arguments)})}}var a=e.copyFile;a&&(e.copyFile=p);function p(l,w,h,O){return typeof h=="function"&&(O=h,h=0),I(l,w,h,O);function I(q,k,x,g,L){return a(q,k,x,function(E){E&&(E.code==="EMFILE"||E.code==="ENFILE")?Z([I,[q,k,x,g],E,L||Date.now(),Date.now()]):typeof g=="function"&&g.apply(this,arguments)})}}var C=e.readdir;e.readdir=m;var s=/^v[0-5]\./;function m(l,w,h){typeof w=="function"&&(h=w,w=null);var O=s.test(process.version)?function(k,x,g,L){return C(k,I(k,x,g,L))}:function(k,x,g,L){return C(k,x,I(k,x,g,L))};return O(l,w,h);function I(q,k,x,g){return function(L,E){L&&(L.code==="EMFILE"||L.code==="ENFILE")?Z([O,[q,k,x],L,g||Date.now(),Date.now()]):(E&&E.sort&&E.sort(),typeof x=="function"&&x.call(this,L,E))}}}if(process.version.substr(0,4)==="v0.8"){var f=wn(e);F=f.ReadStream,T=f.WriteStream}var u=e.ReadStream;u&&(F.prototype=Object.create(u.prototype),F.prototype.open=A);var y=e.WriteStream;y&&(T.prototype=Object.create(y.prototype),T.prototype.open=ie),Object.defineProperty(e,"ReadStream",{get:function(){return F},set:function(l){F=l},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WriteStream",{get:function(){return T},set:function(l){T=l},enumerable:!0,configurable:!0});var v=F;Object.defineProperty(e,"FileReadStream",{get:function(){return v},set:function(l){v=l},enumerable:!0,configurable:!0});var S=T;Object.defineProperty(e,"FileWriteStream",{get:function(){return S},set:function(l){S=l},enumerable:!0,configurable:!0});function F(l,w){return this instanceof F?(u.apply(this,arguments),this):F.apply(Object.create(F.prototype),arguments)}function A(){var l=this;qe(l.path,l.flags,l.mode,function(w,h){w?(l.autoClose&&l.destroy(),l.emit("error",w)):(l.fd=h,l.emit("open",h),l.read())})}function T(l,w){return this instanceof T?(y.apply(this,arguments),this):T.apply(Object.create(T.prototype),arguments)}function ie(){var l=this;qe(l.path,l.flags,l.mode,function(w,h){w?(l.destroy(),l.emit("error",w)):(l.fd=h,l.emit("open",h))})}function Ye(l,w){return new e.ReadStream(l,w)}function Ue(l,w){return new e.WriteStream(l,w)}var tn=e.open;e.open=qe;function qe(l,w,h,O){return typeof h=="function"&&(O=h,h=null),I(l,w,h,O);function I(q,k,x,g,L){return tn(q,k,x,function(E,So){E&&(E.code==="EMFILE"||E.code==="ENFILE")?Z([I,[q,k,x,g],E,L||Date.now(),Date.now()]):typeof g=="function"&&g.apply(this,arguments)})}}return e}function Z(e){z("ENQUEUE",e[0].name,e[1]),D[_].push(e),Ie()}var we;function it(){for(var e=Date.now(),t=0;t<D[_].length;++t)D[_][t].length>2&&(D[_][t][3]=e,D[_][t][4]=e);Ie()}function Ie(){if(clearTimeout(we),we=void 0,D[_].length!==0){var e=D[_].shift(),t=e[0],r=e[1],n=e[2],i=e[3],o=e[4];if(i===void 0)z("RETRY",t.name,r),t.apply(null,r);else if(Date.now()-i>=6e4){z("TIMEOUT",t.name,r);var c=r.pop();typeof c=="function"&&c.call(null,n)}else{var a=Date.now()-o,p=Math.max(o-i,1),C=Math.min(p*1.2,100);a>=C?(z("RETRY",t.name,r),t.apply(null,r.concat([i]))):D[_].push(e)}we===void 0&&(we=setTimeout(Ie,0))}}});var R=d(V=>{"use strict";var ct=P().fromCallback,$=ee(),vn=["access","appendFile","chmod","chown","close","copyFile","cp","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","glob","lchmod","lchown","lutimes","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","statfs","symlink","truncate","unlink","utimes","writeFile"].filter(e=>typeof $[e]=="function");Object.assign(V,$);vn.forEach(e=>{V[e]=ct($[e])});V.exists=function(e,t){return typeof t=="function"?$.exists(e,t):new Promise(r=>$.exists(e,r))};V.read=function(e,t,r,n,i,o){return typeof o=="function"?$.read(e,t,r,n,i,o):new Promise((c,a)=>{$.read(e,t,r,n,i,(p,C,s)=>{if(p)return a(p);c({bytesRead:C,buffer:s})})})};V.write=function(e,t,...r){return typeof r[r.length-1]=="function"?$.write(e,t,...r):new Promise((n,i)=>{$.write(e,t,...r,(o,c,a)=>{if(o)return i(o);n({bytesWritten:c,buffer:a})})})};V.readv=function(e,t,...r){return typeof r[r.length-1]=="function"?$.readv(e,t,...r):new Promise((n,i)=>{$.readv(e,t,...r,(o,c,a)=>{if(o)return i(o);n({bytesRead:c,buffers:a})})})};V.writev=function(e,t,...r){return typeof r[r.length-1]=="function"?$.writev(e,t,...r):new Promise((n,i)=>{$.writev(e,t,...r,(o,c,a)=>{if(o)return i(o);n({bytesWritten:c,buffers:a})})})};typeof $.realpath.native=="function"?V.realpath.native=ct($.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")});var at=d((Oo,st)=>{"use strict";var En=require("path");st.exports.checkPath=function(t){if(process.platform==="win32"&&/[<>:"|?*]/.test(t.replace(En.parse(t).root,""))){let n=new Error(`Path contains invalid characters: ${t}`);throw n.code="EINVAL",n}}});var yt=d((Io,_e)=>{"use strict";var ut=R(),{checkPath:lt}=at(),ft=e=>{let t={mode:511};return typeof e=="number"?e:{...t,...e}.mode};_e.exports.makeDir=async(e,t)=>(lt(e),ut.mkdir(e,{mode:ft(t),recursive:!0}));_e.exports.makeDirSync=(e,t)=>(lt(e),ut.mkdirSync(e,{mode:ft(t),recursive:!0}))});var M=d((Lo,mt)=>{"use strict";var Fn=P().fromPromise,{makeDir:kn,makeDirSync:Ce}=yt(),Ne=Fn(kn);mt.exports={mkdirs:Ne,mkdirsSync:Ce,mkdirp:Ne,mkdirpSync:Ce,ensureDir:Ne,ensureDirSync:Ce}});var U=d((_o,ht)=>{"use strict";var Dn=P().fromPromise,dt=R();function xn(e){return dt.access(e).then(()=>!0).catch(()=>!1)}ht.exports={pathExists:Dn(xn),pathExistsSync:dt.existsSync}});var Te=d((Co,pt)=>{"use strict";var te=R(),qn=P().fromPromise;async function Pn(e,t,r){let n=await te.open(e,"r+"),i=null;try{await te.futimes(n,t,r)}finally{try{await te.close(n)}catch(o){i=o}}if(i)throw i}function bn(e,t,r){let n=te.openSync(e,"r+");return te.futimesSync(n,t,r),te.closeSync(n)}pt.exports={utimesMillis:qn(Pn),utimesMillisSync:bn}});var X=d((No,vt)=>{"use strict";var re=R(),b=require("path"),wt=P().fromPromise;function On(e,t,r){let n=r.dereference?i=>re.stat(i,{bigint:!0}):i=>re.lstat(i,{bigint:!0});return Promise.all([n(e),n(t).catch(i=>{if(i.code==="ENOENT")return null;throw i})]).then(([i,o])=>({srcStat:i,destStat:o}))}function In(e,t,r){let n,i=r.dereference?c=>re.statSync(c,{bigint:!0}):c=>re.lstatSync(c,{bigint:!0}),o=i(e);try{n=i(t)}catch(c){if(c.code==="ENOENT")return{srcStat:o,destStat:null};throw c}return{srcStat:o,destStat:n}}async function Ln(e,t,r,n){let{srcStat:i,destStat:o}=await On(e,t,n);if(o){if(oe(i,o)){let c=b.basename(e),a=b.basename(t);if(r==="move"&&c!==a&&c.toLowerCase()===a.toLowerCase())return{srcStat:i,destStat:o,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(i.isDirectory()&&!o.isDirectory())throw new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`);if(!i.isDirectory()&&o.isDirectory())throw new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`)}if(i.isDirectory()&&$e(e,t))throw new Error(ge(e,t,r));return{srcStat:i,destStat:o}}function _n(e,t,r,n){let{srcStat:i,destStat:o}=In(e,t,n);if(o){if(oe(i,o)){let c=b.basename(e),a=b.basename(t);if(r==="move"&&c!==a&&c.toLowerCase()===a.toLowerCase())return{srcStat:i,destStat:o,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(i.isDirectory()&&!o.isDirectory())throw new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`);if(!i.isDirectory()&&o.isDirectory())throw new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`)}if(i.isDirectory()&&$e(e,t))throw new Error(ge(e,t,r));return{srcStat:i,destStat:o}}async function St(e,t,r,n){let i=b.resolve(b.dirname(e)),o=b.resolve(b.dirname(r));if(o===i||o===b.parse(o).root)return;let c;try{c=await re.stat(o,{bigint:!0})}catch(a){if(a.code==="ENOENT")return;throw a}if(oe(t,c))throw new Error(ge(e,r,n));return St(e,t,o,n)}function gt(e,t,r,n){let i=b.resolve(b.dirname(e)),o=b.resolve(b.dirname(r));if(o===i||o===b.parse(o).root)return;let c;try{c=re.statSync(o,{bigint:!0})}catch(a){if(a.code==="ENOENT")return;throw a}if(oe(t,c))throw new Error(ge(e,r,n));return gt(e,t,o,n)}function oe(e,t){return t.ino&&t.dev&&t.ino===e.ino&&t.dev===e.dev}function $e(e,t){let r=b.resolve(e).split(b.sep).filter(i=>i),n=b.resolve(t).split(b.sep).filter(i=>i);return r.every((i,o)=>n[o]===i)}function ge(e,t,r){return`Cannot ${r} '${e}' to a subdirectory of itself, '${t}'.`}vt.exports={checkPaths:wt(Ln),checkPathsSync:_n,checkParentPaths:wt(St),checkParentPathsSync:gt,isSrcSubdir:$e,areIdentical:oe}});var xt=d((To,Dt)=>{"use strict";var N=R(),ce=require("path"),{mkdirs:Cn}=M(),{pathExists:Nn}=U(),{utimesMillis:Tn}=Te(),se=X();async function $n(e,t,r={}){typeof r=="function"&&(r={filter:r}),r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0001");let{srcStat:n,destStat:i}=await se.checkPaths(e,t,"copy",r);if(await se.checkParentPaths(e,n,t,"copy"),!await Ft(e,t,r))return;let c=ce.dirname(t);await Nn(c)||await Cn(c),await kt(i,e,t,r)}async function Ft(e,t,r){return r.filter?r.filter(e,t):!0}async function kt(e,t,r,n){let o=await(n.dereference?N.stat:N.lstat)(t);if(o.isDirectory())return An(o,e,t,r,n);if(o.isFile()||o.isCharacterDevice()||o.isBlockDevice())return Rn(o,e,t,r,n);if(o.isSymbolicLink())return Mn(e,t,r,n);throw o.isSocket()?new Error(`Cannot copy a socket file: ${t}`):o.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${t}`):new Error(`Unknown file: ${t}`)}async function Rn(e,t,r,n,i){if(!t)return Et(e,r,n,i);if(i.overwrite)return await N.unlink(n),Et(e,r,n,i);if(i.errorOnExist)throw new Error(`'${n}' already exists`)}async function Et(e,t,r,n){if(await N.copyFile(t,r),n.preserveTimestamps){Wn(e.mode)&&await jn(r,e.mode);let i=await N.stat(t);await Tn(r,i.atime,i.mtime)}return N.chmod(r,e.mode)}function Wn(e){return(e&128)===0}function jn(e,t){return N.chmod(e,t|128)}async function An(e,t,r,n,i){t||await N.mkdir(n);let o=[];for await(let c of await N.opendir(r)){let a=ce.join(r,c.name),p=ce.join(n,c.name);o.push(Ft(a,p,i).then(C=>{if(C)return se.checkPaths(a,p,"copy",i).then(({destStat:s})=>kt(s,a,p,i))}))}await Promise.all(o),t||await N.chmod(n,e.mode)}async function Mn(e,t,r,n){let i=await N.readlink(t);if(n.dereference&&(i=ce.resolve(process.cwd(),i)),!e)return N.symlink(i,r);let o=null;try{o=await N.readlink(r)}catch(c){if(c.code==="EINVAL"||c.code==="UNKNOWN")return N.symlink(i,r);throw c}if(n.dereference&&(o=ce.resolve(process.cwd(),o)),se.isSrcSubdir(i,o))throw new Error(`Cannot copy '${i}' to a subdirectory of itself, '${o}'.`);if(se.isSrcSubdir(o,i))throw new Error(`Cannot overwrite '${o}' with '${i}'.`);return await N.unlink(r),N.symlink(i,r)}Dt.exports=$n});var It=d(($o,Ot)=>{"use strict";var W=ee(),ae=require("path"),Jn=M().mkdirsSync,Hn=Te().utimesMillisSync,ue=X();function Vn(e,t,r){typeof r=="function"&&(r={filter:r}),r=r||{},r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0002");let{srcStat:n,destStat:i}=ue.checkPathsSync(e,t,"copy",r);if(ue.checkParentPathsSync(e,n,t,"copy"),r.filter&&!r.filter(e,t))return;let o=ae.dirname(t);return W.existsSync(o)||Jn(o),qt(i,e,t,r)}function qt(e,t,r,n){let o=(n.dereference?W.statSync:W.lstatSync)(t);if(o.isDirectory())return zn(o,e,t,r,n);if(o.isFile()||o.isCharacterDevice()||o.isBlockDevice())return Bn(o,e,t,r,n);if(o.isSymbolicLink())return ei(e,t,r,n);throw o.isSocket()?new Error(`Cannot copy a socket file: ${t}`):o.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${t}`):new Error(`Unknown file: ${t}`)}function Bn(e,t,r,n,i){return t?Yn(e,r,n,i):Pt(e,r,n,i)}function Yn(e,t,r,n){if(n.overwrite)return W.unlinkSync(r),Pt(e,t,r,n);if(n.errorOnExist)throw new Error(`'${r}' already exists`)}function Pt(e,t,r,n){return W.copyFileSync(t,r),n.preserveTimestamps&&Un(e.mode,t,r),Re(r,e.mode)}function Un(e,t,r){return Gn(e)&&Kn(r,e),Qn(t,r)}function Gn(e){return(e&128)===0}function Kn(e,t){return Re(e,t|128)}function Re(e,t){return W.chmodSync(e,t)}function Qn(e,t){let r=W.statSync(e);return Hn(t,r.atime,r.mtime)}function zn(e,t,r,n,i){return t?bt(r,n,i):Xn(e.mode,r,n,i)}function Xn(e,t,r,n){return W.mkdirSync(r),bt(t,r,n),Re(r,e)}function bt(e,t,r){let n=W.opendirSync(e);try{let i;for(;(i=n.readSync())!==null;)Zn(i.name,e,t,r)}finally{n.closeSync()}}function Zn(e,t,r,n){let i=ae.join(t,e),o=ae.join(r,e);if(n.filter&&!n.filter(i,o))return;let{destStat:c}=ue.checkPathsSync(i,o,"copy",n);return qt(c,i,o,n)}function ei(e,t,r,n){let i=W.readlinkSync(t);if(n.dereference&&(i=ae.resolve(process.cwd(),i)),e){let o;try{o=W.readlinkSync(r)}catch(c){if(c.code==="EINVAL"||c.code==="UNKNOWN")return W.symlinkSync(i,r);throw c}if(n.dereference&&(o=ae.resolve(process.cwd(),o)),ue.isSrcSubdir(i,o))throw new Error(`Cannot copy '${i}' to a subdirectory of itself, '${o}'.`);if(ue.isSrcSubdir(o,i))throw new Error(`Cannot overwrite '${o}' with '${i}'.`);return ti(i,r)}else return W.symlinkSync(i,r)}function ti(e,t){return W.unlinkSync(t),W.symlinkSync(e,t)}Ot.exports=Vn});var ve=d((Ro,Lt)=>{"use strict";var ri=P().fromPromise;Lt.exports={copy:ri(xt()),copySync:It()}});var le=d((Wo,Ct)=>{"use strict";var _t=ee(),ni=P().fromCallback;function ii(e,t){_t.rm(e,{recursive:!0,force:!0},t)}function oi(e){_t.rmSync(e,{recursive:!0,force:!0})}Ct.exports={remove:ni(ii),removeSync:oi}});var Mt=d((jo,At)=>{"use strict";var ci=P().fromPromise,$t=R(),Rt=require("path"),Wt=M(),jt=le(),Nt=ci(async function(t){let r;try{r=await $t.readdir(t)}catch{return Wt.mkdirs(t)}return Promise.all(r.map(n=>jt.remove(Rt.join(t,n))))});function Tt(e){let t;try{t=$t.readdirSync(e)}catch{return Wt.mkdirsSync(e)}t.forEach(r=>{r=Rt.join(e,r),jt.removeSync(r)})}At.exports={emptyDirSync:Tt,emptydirSync:Tt,emptyDir:Nt,emptydir:Nt}});var Bt=d((Ao,Vt)=>{"use strict";var si=P().fromPromise,Jt=require("path"),B=R(),Ht=M();async function ai(e){let t;try{t=await B.stat(e)}catch{}if(t&&t.isFile())return;let r=Jt.dirname(e),n=null;try{n=await B.stat(r)}catch(i){if(i.code==="ENOENT"){await Ht.mkdirs(r),await B.writeFile(e,"");return}else throw i}n.isDirectory()?await B.writeFile(e,""):await B.readdir(r)}function ui(e){let t;try{t=B.statSync(e)}catch{}if(t&&t.isFile())return;let r=Jt.dirname(e);try{B.statSync(r).isDirectory()||B.readdirSync(r)}catch(n){if(n&&n.code==="ENOENT")Ht.mkdirsSync(r);else throw n}B.writeFileSync(e,"")}Vt.exports={createFile:si(ai),createFileSync:ui}});var Qt=d((Mo,Kt)=>{"use strict";var li=P().fromPromise,Yt=require("path"),G=R(),Ut=M(),{pathExists:fi}=U(),{areIdentical:Gt}=X();async function yi(e,t){let r;try{r=await G.lstat(t)}catch{}let n;try{n=await G.lstat(e)}catch(c){throw c.message=c.message.replace("lstat","ensureLink"),c}if(r&&Gt(n,r))return;let i=Yt.dirname(t);await fi(i)||await Ut.mkdirs(i),await G.link(e,t)}function mi(e,t){let r;try{r=G.lstatSync(t)}catch{}try{let o=G.lstatSync(e);if(r&&Gt(o,r))return}catch(o){throw o.message=o.message.replace("lstat","ensureLink"),o}let n=Yt.dirname(t);return G.existsSync(n)||Ut.mkdirsSync(n),G.linkSync(e,t)}Kt.exports={createLink:li(yi),createLinkSync:mi}});var Xt=d((Jo,zt)=>{"use strict";var K=require("path"),fe=R(),{pathExists:di}=U(),hi=P().fromPromise;async function pi(e,t){if(K.isAbsolute(e)){try{await fe.lstat(e)}catch(o){throw o.message=o.message.replace("lstat","ensureSymlink"),o}return{toCwd:e,toDst:e}}let r=K.dirname(t),n=K.join(r,e);if(await di(n))return{toCwd:n,toDst:e};try{await fe.lstat(e)}catch(o){throw o.message=o.message.replace("lstat","ensureSymlink"),o}return{toCwd:e,toDst:K.relative(r,e)}}function wi(e,t){if(K.isAbsolute(e)){if(!fe.existsSync(e))throw new Error("absolute srcpath does not exist");return{toCwd:e,toDst:e}}let r=K.dirname(t),n=K.join(r,e);if(fe.existsSync(n))return{toCwd:n,toDst:e};if(!fe.existsSync(e))throw new Error("relative srcpath does not exist");return{toCwd:e,toDst:K.relative(r,e)}}zt.exports={symlinkPaths:hi(pi),symlinkPathsSync:wi}});var tr=d((Ho,er)=>{"use strict";var Zt=R(),Si=P().fromPromise;async function gi(e,t){if(t)return t;let r;try{r=await Zt.lstat(e)}catch{return"file"}return r&&r.isDirectory()?"dir":"file"}function vi(e,t){if(t)return t;let r;try{r=Zt.lstatSync(e)}catch{return"file"}return r&&r.isDirectory()?"dir":"file"}er.exports={symlinkType:Si(gi),symlinkTypeSync:vi}});var or=d((Vo,ir)=>{"use strict";var Ei=P().fromPromise,rr=require("path"),H=R(),{mkdirs:Fi,mkdirsSync:ki}=M(),{symlinkPaths:Di,symlinkPathsSync:xi}=Xt(),{symlinkType:qi,symlinkTypeSync:Pi}=tr(),{pathExists:bi}=U(),{areIdentical:nr}=X();async function Oi(e,t,r){let n;try{n=await H.lstat(t)}catch{}if(n&&n.isSymbolicLink()){let[a,p]=await Promise.all([H.stat(e),H.stat(t)]);if(nr(a,p))return}let i=await Di(e,t);e=i.toDst;let o=await qi(i.toCwd,r),c=rr.dirname(t);return await bi(c)||await Fi(c),H.symlink(e,t,o)}function Ii(e,t,r){let n;try{n=H.lstatSync(t)}catch{}if(n&&n.isSymbolicLink()){let a=H.statSync(e),p=H.statSync(t);if(nr(a,p))return}let i=xi(e,t);e=i.toDst,r=Pi(i.toCwd,r);let o=rr.dirname(t);return H.existsSync(o)||ki(o),H.symlinkSync(e,t,r)}ir.exports={createSymlink:Ei(Oi),createSymlinkSync:Ii}});var mr=d((Bo,yr)=>{"use strict";var{createFile:cr,createFileSync:sr}=Bt(),{createLink:ar,createLinkSync:ur}=Qt(),{createSymlink:lr,createSymlinkSync:fr}=or();yr.exports={createFile:cr,createFileSync:sr,ensureFile:cr,ensureFileSync:sr,createLink:ar,createLinkSync:ur,ensureLink:ar,ensureLinkSync:ur,createSymlink:lr,createSymlinkSync:fr,ensureSymlink:lr,ensureSymlinkSync:fr}});var Ee=d((Yo,dr)=>{function Li(e,{EOL:t=`
`,finalEOL:r=!0,replacer:n=null,spaces:i}={}){let o=r?t:"";return JSON.stringify(e,n,i).replace(/\n/g,t)+o}function _i(e){return Buffer.isBuffer(e)&&(e=e.toString("utf8")),e.replace(/^\uFEFF/,"")}dr.exports={stringify:Li,stripBom:_i}});var Sr=d((Uo,wr)=>{var ne;try{ne=ee()}catch{ne=require("fs")}var Fe=P(),{stringify:hr,stripBom:pr}=Ee();async function Ci(e,t={}){typeof t=="string"&&(t={encoding:t});let r=t.fs||ne,n="throws"in t?t.throws:!0,i=await Fe.fromCallback(r.readFile)(e,t);i=pr(i);let o;try{o=JSON.parse(i,t?t.reviver:null)}catch(c){if(n)throw c.message=`${e}: ${c.message}`,c;return null}return o}var Ni=Fe.fromPromise(Ci);function Ti(e,t={}){typeof t=="string"&&(t={encoding:t});let r=t.fs||ne,n="throws"in t?t.throws:!0;try{let i=r.readFileSync(e,t);return i=pr(i),JSON.parse(i,t.reviver)}catch(i){if(n)throw i.message=`${e}: ${i.message}`,i;return null}}async function $i(e,t,r={}){let n=r.fs||ne,i=hr(t,r);await Fe.fromCallback(n.writeFile)(e,i,r)}var Ri=Fe.fromPromise($i);function Wi(e,t,r={}){let n=r.fs||ne,i=hr(t,r);return n.writeFileSync(e,i,r)}var ji={readFile:Ni,readFileSync:Ti,writeFile:Ri,writeFileSync:Wi};wr.exports=ji});var vr=d((Go,gr)=>{"use strict";var ke=Sr();gr.exports={readJson:ke.readFile,readJsonSync:ke.readFileSync,writeJson:ke.writeFile,writeJsonSync:ke.writeFileSync}});var De=d((Ko,kr)=>{"use strict";var Ai=P().fromPromise,We=R(),Er=require("path"),Fr=M(),Mi=U().pathExists;async function Ji(e,t,r="utf-8"){let n=Er.dirname(e);return await Mi(n)||await Fr.mkdirs(n),We.writeFile(e,t,r)}function Hi(e,...t){let r=Er.dirname(e);We.existsSync(r)||Fr.mkdirsSync(r),We.writeFileSync(e,...t)}kr.exports={outputFile:Ai(Ji),outputFileSync:Hi}});var xr=d((Qo,Dr)=>{"use strict";var{stringify:Vi}=Ee(),{outputFile:Bi}=De();async function Yi(e,t,r={}){let n=Vi(t,r);await Bi(e,n,r)}Dr.exports=Yi});var Pr=d((zo,qr)=>{"use strict";var{stringify:Ui}=Ee(),{outputFileSync:Gi}=De();function Ki(e,t,r){let n=Ui(t,r);Gi(e,n,r)}qr.exports=Ki});var Or=d((Xo,br)=>{"use strict";var Qi=P().fromPromise,j=vr();j.outputJson=Qi(xr());j.outputJsonSync=Pr();j.outputJSON=j.outputJson;j.outputJSONSync=j.outputJsonSync;j.writeJSON=j.writeJson;j.writeJSONSync=j.writeJsonSync;j.readJSON=j.readJson;j.readJSONSync=j.readJsonSync;br.exports=j});var Nr=d((Zo,Cr)=>{"use strict";var zi=R(),Ir=require("path"),{copy:Xi}=ve(),{remove:_r}=le(),{mkdirp:Zi}=M(),{pathExists:eo}=U(),Lr=X();async function to(e,t,r={}){let n=r.overwrite||r.clobber||!1,{srcStat:i,isChangingCase:o=!1}=await Lr.checkPaths(e,t,"move",r);await Lr.checkParentPaths(e,i,t,"move");let c=Ir.dirname(t);return Ir.parse(c).root!==c&&await Zi(c),ro(e,t,n,o)}async function ro(e,t,r,n){if(!n){if(r)await _r(t);else if(await eo(t))throw new Error("dest already exists.")}try{await zi.rename(e,t)}catch(i){if(i.code!=="EXDEV")throw i;await no(e,t,r)}}async function no(e,t,r){return await Xi(e,t,{overwrite:r,errorOnExist:!0,preserveTimestamps:!0}),_r(e)}Cr.exports=to});var jr=d((ec,Wr)=>{"use strict";var $r=ee(),Ae=require("path"),io=ve().copySync,Rr=le().removeSync,oo=M().mkdirpSync,Tr=X();function co(e,t,r){r=r||{};let n=r.overwrite||r.clobber||!1,{srcStat:i,isChangingCase:o=!1}=Tr.checkPathsSync(e,t,"move",r);return Tr.checkParentPathsSync(e,i,t,"move"),so(t)||oo(Ae.dirname(t)),ao(e,t,n,o)}function so(e){let t=Ae.dirname(e);return Ae.parse(t).root===t}function ao(e,t,r,n){if(n)return je(e,t,r);if(r)return Rr(t),je(e,t,r);if($r.existsSync(t))throw new Error("dest already exists.");return je(e,t,r)}function je(e,t,r){try{$r.renameSync(e,t)}catch(n){if(n.code!=="EXDEV")throw n;return uo(e,t,r)}}function uo(e,t,r){return io(e,t,{overwrite:r,errorOnExist:!0,preserveTimestamps:!0}),Rr(e)}Wr.exports=co});var Mr=d((tc,Ar)=>{"use strict";var lo=P().fromPromise;Ar.exports={move:lo(Nr()),moveSync:jr()}});var Me=d((rc,Jr)=>{"use strict";Jr.exports={...R(),...ve(),...Mt(),...mr(),...Or(),...M(),...Mr(),...De(),...U(),...le()}});var wo={};an(wo,{default:()=>po});module.exports=un(wo);var Zr=require("os"),en=require("@raycast/api");var J=require("@raycast/api");var Hr=require("@raycast/api");var Q=require("os");var Eo=[{title:"Desktop",value:`${(0,Q.homedir)()}/Desktop`},{title:"Documents",value:`${(0,Q.homedir)()}/Documents`},{title:"Movies",value:`${(0,Q.homedir)()}/Movies`},{title:"Music",value:`${(0,Q.homedir)()}/Music`},{title:"Pictures",value:`${(0,Q.homedir)()}/Pictures`},{title:"Downloads",value:`${(0,Q.homedir)()}/Downloads`}];var Je=Ke(Me()),He=async e=>{let t=await Hr.LocalStorage.getItem(e);return typeof t>"u"?"":t},Ve=e=>!(e!=null&&String(e).length>0);var Vr=e=>{try{let t=Je.default.lstatSync(e);if(t.isDirectory())return"Directory";if(t.isFile())return"File"}catch(t){return console.error(`Error checking path ${e}:`,t),"File"}return"File"};var Br=(e,t)=>{let r=!1;return t.forEach(n=>{if(n.path===e){r=!0;return}}),r},Yr=e=>{let t=[];try{return Je.default.readdirSync(e).forEach(n=>{n.startsWith(".")||t.push(e+n)}),t}catch(r){return console.error(`Error reading directory ${e}:`,r),t}};var ye=require("path"),Be=require("child_process");var me=require("node:child_process"),Ur=Ke(Me()),fo=async e=>{try{let t=await He("localHideDirectory"),r=Ve(t)?[]:JSON.parse(t),n=new Date().getTime(),i=[];e.sort((c,a)=>c.localeCompare(a)).map((c,a)=>{let p=(0,ye.parse)(c);Br(p.dir+"/"+p.base,r)||i.push({id:"directory_"+(n+a),name:p.base,path:p.dir+"/"+p.base,type:Vr(c),valid:!0,date:n+a})});let o=[...i,...r].sort((c,a)=>a.date-c.date);await J.LocalStorage.setItem("localHideDirectory",JSON.stringify(o))}catch(t){console.error(String(t))}},yo=async e=>{let t=await He("localHideDirectory"),r=[];Ve(t)||(r=JSON.parse(t));let n=(0,ye.parse)(e),i=r.filter(o=>(0,ye.parse)(o.path).dir!==n.dir+"/"+n.base);await J.LocalStorage.setItem("localHideDirectory",JSON.stringify(i))};var mo=e=>{let t=Array.isArray(e)?e[0]:e;return(0,me.spawnSync)("ls",["-lOd",t]).stdout.toString().split(RegExp("\\s+"))[4]!=="-"},ho=e=>{let t=Array.isArray(e)?e[0]:e,r=Ur.default.readdirSync(t).filter(n=>!n.startsWith("."));if(r.length!==0)return mo(t.endsWith("/")?t+r[0]:`${t}/${r[0]}`)},Gr=async e=>{try{let t=e.endsWith("/")?e:`${e}/`,r=ho(t),{name:n}=(0,ye.parse)(t);if(typeof r>"u"){await(0,J.showHUD)(`\u{1F4C2} No files in ${n}`);return}if(r)await(0,J.showHUD)(`\u{1F435} Unhiding files in ${n}`),(0,Be.spawn)("chflags",["nohidden",`${t.replaceAll(" ",'" "')}*`],{shell:!0}),await yo(t);else{await(0,J.showHUD)(`\u{1F648} Hiding files in ${n}`),(0,Be.spawn)("chflags",["hidden",`${t.replaceAll(" ",'" "')}*`],{shell:!0});let i=Yr(t);await fo(i)}return r}catch(t){(0,J.captureException)(t),await(0,J.showHUD)(`\u{1F6A8} ${String(t)}`),console.error(String(t));return}};function Kr(){let{stdout:e}=(0,me.spawnSync)("sw_vers",["-productVersion"],{encoding:"utf-8"});return parseInt(e.trim().split(".")[0])>=14}var Qr=()=>{if(Kr()){let{stdout:e}=(0,me.spawnSync)("defaults",["read","com.apple.WindowManager","StandardHideWidgets"],{encoding:"utf-8"});return e.trim()==="0"}else return};var xe=e=>{try{Kr()&&(0,me.spawnSync)("defaults",["write","com.apple.WindowManager","StandardHideWidgets","-bool",e])}catch(t){console.error(String(t))}};var zr=require("@raycast/api"),{rememberTag:mc,hideWidgets:Xr}=(0,zr.getPreferenceValues)();var po=async()=>{await(0,en.closeMainWindow)();let e=await Gr((0,Zr.homedir)()+"/Desktop/");if(Xr)if(typeof e=="boolean")xe(e?"false":"true");else{let t=Qr();typeof t=="boolean"&&xe(t?"true":"false")}else xe("false")};
