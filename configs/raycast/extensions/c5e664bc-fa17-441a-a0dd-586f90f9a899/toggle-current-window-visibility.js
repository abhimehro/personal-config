"use strict";var tn=Object.create;var me=Object.defineProperty;var rn=Object.getOwnPropertyDescriptor;var nn=Object.getOwnPropertyNames;var on=Object.getPrototypeOf,cn=Object.prototype.hasOwnProperty;var d=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),an=(e,t)=>{for(var r in t)me(e,r,{get:t[r],enumerable:!0})},Ge=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of nn(t))!cn.call(e,i)&&i!==r&&me(e,i,{get:()=>t[i],enumerable:!(n=rn(t,i))||n.enumerable});return e};var xe=(e,t,r)=>(r=e!=null?tn(on(e)):{},Ge(t||!e||!e.__esModule?me(r,"default",{value:e,enumerable:!0}):r,e)),sn=e=>Ge(me({},"__esModule",{value:!0}),e);var q=d(Pe=>{"use strict";Pe.fromCallback=function(e){return Object.defineProperty(function(...t){if(typeof t[t.length-1]=="function")e.apply(this,t);else return new Promise((r,n)=>{t.push((i,o)=>i!=null?n(i):r(o)),e.apply(this,t)})},"name",{value:e.name})};Pe.fromPromise=function(e){return Object.defineProperty(function(...t){let r=t[t.length-1];if(typeof r!="function")return e.apply(this,t);t.pop(),e.apply(this,t).then(n=>r(null,n),r)},"name",{value:e.name})}});var Qe=d((xo,Ke)=>{var U=require("constants"),un=process.cwd,de=null,ln=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return de||(de=un.call(process)),de};try{process.cwd()}catch{}typeof process.chdir=="function"&&(qe=process.chdir,process.chdir=function(e){de=null,qe.call(process,e)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,qe));var qe;Ke.exports=fn;function fn(e){U.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&t(e),e.lutimes||r(e),e.chown=o(e.chown),e.fchown=o(e.fchown),e.lchown=o(e.lchown),e.chmod=n(e.chmod),e.fchmod=n(e.fchmod),e.lchmod=n(e.lchmod),e.chownSync=c(e.chownSync),e.fchownSync=c(e.fchownSync),e.lchownSync=c(e.lchownSync),e.chmodSync=i(e.chmodSync),e.fchmodSync=i(e.fchmodSync),e.lchmodSync=i(e.lchmodSync),e.stat=s(e.stat),e.fstat=s(e.fstat),e.lstat=s(e.lstat),e.statSync=p(e.statSync),e.fstatSync=p(e.fstatSync),e.lstatSync=p(e.lstatSync),e.chmod&&!e.lchmod&&(e.lchmod=function(a,m,f){f&&process.nextTick(f)},e.lchmodSync=function(){}),e.chown&&!e.lchown&&(e.lchown=function(a,m,f,u){u&&process.nextTick(u)},e.lchownSync=function(){}),ln==="win32"&&(e.rename=typeof e.rename!="function"?e.rename:(function(a){function m(f,u,y){var v=Date.now(),S=0;a(f,u,function F(j){if(j&&(j.code==="EACCES"||j.code==="EPERM"||j.code==="EBUSY")&&Date.now()-v<6e4){setTimeout(function(){e.stat(u,function($,ie){$&&$.code==="ENOENT"?a(f,u,F):y(j)})},S),S<100&&(S+=10);return}y&&y(j)})}return Object.setPrototypeOf&&Object.setPrototypeOf(m,a),m})(e.rename)),e.read=typeof e.read!="function"?e.read:(function(a){function m(f,u,y,v,S,F){var j;if(F&&typeof F=="function"){var $=0;j=function(ie,Ue,Ve){if(ie&&ie.code==="EAGAIN"&&$<10)return $++,a.call(e,f,u,y,v,S,j);F.apply(this,arguments)}}return a.call(e,f,u,y,v,S,j)}return Object.setPrototypeOf&&Object.setPrototypeOf(m,a),m})(e.read),e.readSync=typeof e.readSync!="function"?e.readSync:(function(a){return function(m,f,u,y,v){for(var S=0;;)try{return a.call(e,m,f,u,y,v)}catch(F){if(F.code==="EAGAIN"&&S<10){S++;continue}throw F}}})(e.readSync);function t(a){a.lchmod=function(m,f,u){a.open(m,U.O_WRONLY|U.O_SYMLINK,f,function(y,v){if(y){u&&u(y);return}a.fchmod(v,f,function(S){a.close(v,function(F){u&&u(S||F)})})})},a.lchmodSync=function(m,f){var u=a.openSync(m,U.O_WRONLY|U.O_SYMLINK,f),y=!0,v;try{v=a.fchmodSync(u,f),y=!1}finally{if(y)try{a.closeSync(u)}catch{}else a.closeSync(u)}return v}}function r(a){U.hasOwnProperty("O_SYMLINK")&&a.futimes?(a.lutimes=function(m,f,u,y){a.open(m,U.O_SYMLINK,function(v,S){if(v){y&&y(v);return}a.futimes(S,f,u,function(F){a.close(S,function(j){y&&y(F||j)})})})},a.lutimesSync=function(m,f,u){var y=a.openSync(m,U.O_SYMLINK),v,S=!0;try{v=a.futimesSync(y,f,u),S=!1}finally{if(S)try{a.closeSync(y)}catch{}else a.closeSync(y)}return v}):a.futimes&&(a.lutimes=function(m,f,u,y){y&&process.nextTick(y)},a.lutimesSync=function(){})}function n(a){return a&&function(m,f,u){return a.call(e,m,f,function(y){_(y)&&(y=null),u&&u.apply(this,arguments)})}}function i(a){return a&&function(m,f){try{return a.call(e,m,f)}catch(u){if(!_(u))throw u}}}function o(a){return a&&function(m,f,u,y){return a.call(e,m,f,u,function(v){_(v)&&(v=null),y&&y.apply(this,arguments)})}}function c(a){return a&&function(m,f,u){try{return a.call(e,m,f,u)}catch(y){if(!_(y))throw y}}}function s(a){return a&&function(m,f,u){typeof f=="function"&&(u=f,f=null);function y(v,S){S&&(S.uid<0&&(S.uid+=4294967296),S.gid<0&&(S.gid+=4294967296)),u&&u.apply(this,arguments)}return f?a.call(e,m,f,y):a.call(e,m,y)}}function p(a){return a&&function(m,f){var u=f?a.call(e,m,f):a.call(e,m);return u&&(u.uid<0&&(u.uid+=4294967296),u.gid<0&&(u.gid+=4294967296)),u}}function _(a){if(!a||a.code==="ENOSYS")return!0;var m=!process.getuid||process.getuid()!==0;return!!(m&&(a.code==="EINVAL"||a.code==="EPERM"))}}});var Ze=d((Po,ze)=>{var Xe=require("stream").Stream;ze.exports=yn;function yn(e){return{ReadStream:t,WriteStream:r};function t(n,i){if(!(this instanceof t))return new t(n,i);Xe.call(this);var o=this;this.path=n,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,i=i||{};for(var c=Object.keys(i),s=0,p=c.length;s<p;s++){var _=c[s];this[_]=i[_]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){o._read()});return}e.open(this.path,this.flags,this.mode,function(a,m){if(a){o.emit("error",a),o.readable=!1;return}o.fd=m,o.emit("open",m),o._read()})}function r(n,i){if(!(this instanceof r))return new r(n,i);Xe.call(this),this.path=n,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,i=i||{};for(var o=Object.keys(i),c=0,s=o.length;c<s;c++){var p=o[c];this[p]=i[p]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=e.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}});var tt=d((qo,et)=>{"use strict";et.exports=dn;var mn=Object.getPrototypeOf||function(e){return e.__proto__};function dn(e){if(e===null||typeof e!="object")return e;if(e instanceof Object)var t={__proto__:mn(e)};else var t=Object.create(null);return Object.getOwnPropertyNames(e).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}),t}});var ee=d((Oo,Ie)=>{var D=require("fs"),hn=Qe(),pn=Ze(),wn=tt(),he=require("util"),C,we;typeof Symbol=="function"&&typeof Symbol.for=="function"?(C=Symbol.for("graceful-fs.queue"),we=Symbol.for("graceful-fs.previous")):(C="___graceful-fs.queue",we="___graceful-fs.previous");function Sn(){}function it(e,t){Object.defineProperty(e,C,{get:function(){return t}})}var X=Sn;he.debuglog?X=he.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(X=function(){var e=he.format.apply(he,arguments);e="GFS4: "+e.split(/\n/).join(`
GFS4: `),console.error(e)});D[C]||(rt=global[C]||[],it(D,rt),D.close=(function(e){function t(r,n){return e.call(D,r,function(i){i||nt(),typeof n=="function"&&n.apply(this,arguments)})}return Object.defineProperty(t,we,{value:e}),t})(D.close),D.closeSync=(function(e){function t(r){e.apply(D,arguments),nt()}return Object.defineProperty(t,we,{value:e}),t})(D.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){X(D[C]),require("assert").equal(D[C].length,0)}));var rt;global[C]||it(global,D[C]);Ie.exports=Oe(wn(D));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!D.__patched&&(Ie.exports=Oe(D),D.__patched=!0);function Oe(e){hn(e),e.gracefulify=Oe,e.createReadStream=Ue,e.createWriteStream=Ve;var t=e.readFile;e.readFile=r;function r(l,w,h){return typeof w=="function"&&(h=w,w=null),b(l,w,h);function b(I,P,k,x){return t(I,P,function(g){g&&(g.code==="EMFILE"||g.code==="ENFILE")?Z([b,[I,P,k],g,x||Date.now(),Date.now()]):typeof k=="function"&&k.apply(this,arguments)})}}var n=e.writeFile;e.writeFile=i;function i(l,w,h,b){return typeof h=="function"&&(b=h,h=null),I(l,w,h,b);function I(P,k,x,g,L){return n(P,k,x,function(E){E&&(E.code==="EMFILE"||E.code==="ENFILE")?Z([I,[P,k,x,g],E,L||Date.now(),Date.now()]):typeof g=="function"&&g.apply(this,arguments)})}}var o=e.appendFile;o&&(e.appendFile=c);function c(l,w,h,b){return typeof h=="function"&&(b=h,h=null),I(l,w,h,b);function I(P,k,x,g,L){return o(P,k,x,function(E){E&&(E.code==="EMFILE"||E.code==="ENFILE")?Z([I,[P,k,x,g],E,L||Date.now(),Date.now()]):typeof g=="function"&&g.apply(this,arguments)})}}var s=e.copyFile;s&&(e.copyFile=p);function p(l,w,h,b){return typeof h=="function"&&(b=h,h=0),I(l,w,h,b);function I(P,k,x,g,L){return s(P,k,x,function(E){E&&(E.code==="EMFILE"||E.code==="ENFILE")?Z([I,[P,k,x,g],E,L||Date.now(),Date.now()]):typeof g=="function"&&g.apply(this,arguments)})}}var _=e.readdir;e.readdir=m;var a=/^v[0-5]\./;function m(l,w,h){typeof w=="function"&&(h=w,w=null);var b=a.test(process.version)?function(k,x,g,L){return _(k,I(k,x,g,L))}:function(k,x,g,L){return _(k,x,I(k,x,g,L))};return b(l,w,h);function I(P,k,x,g){return function(L,E){L&&(L.code==="EMFILE"||L.code==="ENFILE")?Z([b,[P,k,x],L,g||Date.now(),Date.now()]):(E&&E.sort&&E.sort(),typeof x=="function"&&x.call(this,L,E))}}}if(process.version.substr(0,4)==="v0.8"){var f=pn(e);F=f.ReadStream,$=f.WriteStream}var u=e.ReadStream;u&&(F.prototype=Object.create(u.prototype),F.prototype.open=j);var y=e.WriteStream;y&&($.prototype=Object.create(y.prototype),$.prototype.open=ie),Object.defineProperty(e,"ReadStream",{get:function(){return F},set:function(l){F=l},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WriteStream",{get:function(){return $},set:function(l){$=l},enumerable:!0,configurable:!0});var v=F;Object.defineProperty(e,"FileReadStream",{get:function(){return v},set:function(l){v=l},enumerable:!0,configurable:!0});var S=$;Object.defineProperty(e,"FileWriteStream",{get:function(){return S},set:function(l){S=l},enumerable:!0,configurable:!0});function F(l,w){return this instanceof F?(u.apply(this,arguments),this):F.apply(Object.create(F.prototype),arguments)}function j(){var l=this;De(l.path,l.flags,l.mode,function(w,h){w?(l.autoClose&&l.destroy(),l.emit("error",w)):(l.fd=h,l.emit("open",h),l.read())})}function $(l,w){return this instanceof $?(y.apply(this,arguments),this):$.apply(Object.create($.prototype),arguments)}function ie(){var l=this;De(l.path,l.flags,l.mode,function(w,h){w?(l.destroy(),l.emit("error",w)):(l.fd=h,l.emit("open",h))})}function Ue(l,w){return new e.ReadStream(l,w)}function Ve(l,w){return new e.WriteStream(l,w)}var en=e.open;e.open=De;function De(l,w,h,b){return typeof h=="function"&&(b=h,h=null),I(l,w,h,b);function I(P,k,x,g,L){return en(P,k,x,function(E,go){E&&(E.code==="EMFILE"||E.code==="ENFILE")?Z([I,[P,k,x,g],E,L||Date.now(),Date.now()]):typeof g=="function"&&g.apply(this,arguments)})}}return e}function Z(e){X("ENQUEUE",e[0].name,e[1]),D[C].push(e),be()}var pe;function nt(){for(var e=Date.now(),t=0;t<D[C].length;++t)D[C][t].length>2&&(D[C][t][3]=e,D[C][t][4]=e);be()}function be(){if(clearTimeout(pe),pe=void 0,D[C].length!==0){var e=D[C].shift(),t=e[0],r=e[1],n=e[2],i=e[3],o=e[4];if(i===void 0)X("RETRY",t.name,r),t.apply(null,r);else if(Date.now()-i>=6e4){X("TIMEOUT",t.name,r);var c=r.pop();typeof c=="function"&&c.call(null,n)}else{var s=Date.now()-o,p=Math.max(o-i,1),_=Math.min(p*1.2,100);s>=_?(X("RETRY",t.name,r),t.apply(null,r.concat([i]))):D[C].push(e)}pe===void 0&&(pe=setTimeout(be,0))}}});var R=d(Y=>{"use strict";var ot=q().fromCallback,T=ee(),gn=["access","appendFile","chmod","chown","close","copyFile","cp","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","glob","lchmod","lchown","lutimes","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","statfs","symlink","truncate","unlink","utimes","writeFile"].filter(e=>typeof T[e]=="function");Object.assign(Y,T);gn.forEach(e=>{Y[e]=ot(T[e])});Y.exists=function(e,t){return typeof t=="function"?T.exists(e,t):new Promise(r=>T.exists(e,r))};Y.read=function(e,t,r,n,i,o){return typeof o=="function"?T.read(e,t,r,n,i,o):new Promise((c,s)=>{T.read(e,t,r,n,i,(p,_,a)=>{if(p)return s(p);c({bytesRead:_,buffer:a})})})};Y.write=function(e,t,...r){return typeof r[r.length-1]=="function"?T.write(e,t,...r):new Promise((n,i)=>{T.write(e,t,...r,(o,c,s)=>{if(o)return i(o);n({bytesWritten:c,buffer:s})})})};Y.readv=function(e,t,...r){return typeof r[r.length-1]=="function"?T.readv(e,t,...r):new Promise((n,i)=>{T.readv(e,t,...r,(o,c,s)=>{if(o)return i(o);n({bytesRead:c,buffers:s})})})};Y.writev=function(e,t,...r){return typeof r[r.length-1]=="function"?T.writev(e,t,...r):new Promise((n,i)=>{T.writev(e,t,...r,(o,c,s)=>{if(o)return i(o);n({bytesWritten:c,buffers:s})})})};typeof T.realpath.native=="function"?Y.realpath.native=ot(T.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")});var at=d((Io,ct)=>{"use strict";var vn=require("path");ct.exports.checkPath=function(t){if(process.platform==="win32"&&/[<>:"|?*]/.test(t.replace(vn.parse(t).root,""))){let n=new Error(`Path contains invalid characters: ${t}`);throw n.code="EINVAL",n}}});var ft=d((Lo,Le)=>{"use strict";var st=R(),{checkPath:ut}=at(),lt=e=>{let t={mode:511};return typeof e=="number"?e:{...t,...e}.mode};Le.exports.makeDir=async(e,t)=>(ut(e),st.mkdir(e,{mode:lt(t),recursive:!0}));Le.exports.makeDirSync=(e,t)=>(ut(e),st.mkdirSync(e,{mode:lt(t),recursive:!0}))});var M=d((Co,yt)=>{"use strict";var En=q().fromPromise,{makeDir:Fn,makeDirSync:Ce}=ft(),_e=En(Fn);yt.exports={mkdirs:_e,mkdirsSync:Ce,mkdirp:_e,mkdirpSync:Ce,ensureDir:_e,ensureDirSync:Ce}});var V=d((_o,dt)=>{"use strict";var kn=q().fromPromise,mt=R();function Dn(e){return mt.access(e).then(()=>!0).catch(()=>!1)}dt.exports={pathExists:kn(Dn),pathExistsSync:mt.existsSync}});var Ne=d((No,ht)=>{"use strict";var te=R(),xn=q().fromPromise;async function Pn(e,t,r){let n=await te.open(e,"r+"),i=null;try{await te.futimes(n,t,r)}finally{try{await te.close(n)}catch(o){i=o}}if(i)throw i}function qn(e,t,r){let n=te.openSync(e,"r+");return te.futimesSync(n,t,r),te.closeSync(n)}ht.exports={utimesMillis:xn(Pn),utimesMillisSync:qn}});var z=d(($o,gt)=>{"use strict";var re=R(),O=require("path"),pt=q().fromPromise;function On(e,t,r){let n=r.dereference?i=>re.stat(i,{bigint:!0}):i=>re.lstat(i,{bigint:!0});return Promise.all([n(e),n(t).catch(i=>{if(i.code==="ENOENT")return null;throw i})]).then(([i,o])=>({srcStat:i,destStat:o}))}function bn(e,t,r){let n,i=r.dereference?c=>re.statSync(c,{bigint:!0}):c=>re.lstatSync(c,{bigint:!0}),o=i(e);try{n=i(t)}catch(c){if(c.code==="ENOENT")return{srcStat:o,destStat:null};throw c}return{srcStat:o,destStat:n}}async function In(e,t,r,n){let{srcStat:i,destStat:o}=await On(e,t,n);if(o){if(oe(i,o)){let c=O.basename(e),s=O.basename(t);if(r==="move"&&c!==s&&c.toLowerCase()===s.toLowerCase())return{srcStat:i,destStat:o,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(i.isDirectory()&&!o.isDirectory())throw new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`);if(!i.isDirectory()&&o.isDirectory())throw new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`)}if(i.isDirectory()&&$e(e,t))throw new Error(Se(e,t,r));return{srcStat:i,destStat:o}}function Ln(e,t,r,n){let{srcStat:i,destStat:o}=bn(e,t,n);if(o){if(oe(i,o)){let c=O.basename(e),s=O.basename(t);if(r==="move"&&c!==s&&c.toLowerCase()===s.toLowerCase())return{srcStat:i,destStat:o,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(i.isDirectory()&&!o.isDirectory())throw new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`);if(!i.isDirectory()&&o.isDirectory())throw new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`)}if(i.isDirectory()&&$e(e,t))throw new Error(Se(e,t,r));return{srcStat:i,destStat:o}}async function wt(e,t,r,n){let i=O.resolve(O.dirname(e)),o=O.resolve(O.dirname(r));if(o===i||o===O.parse(o).root)return;let c;try{c=await re.stat(o,{bigint:!0})}catch(s){if(s.code==="ENOENT")return;throw s}if(oe(t,c))throw new Error(Se(e,r,n));return wt(e,t,o,n)}function St(e,t,r,n){let i=O.resolve(O.dirname(e)),o=O.resolve(O.dirname(r));if(o===i||o===O.parse(o).root)return;let c;try{c=re.statSync(o,{bigint:!0})}catch(s){if(s.code==="ENOENT")return;throw s}if(oe(t,c))throw new Error(Se(e,r,n));return St(e,t,o,n)}function oe(e,t){return t.ino&&t.dev&&t.ino===e.ino&&t.dev===e.dev}function $e(e,t){let r=O.resolve(e).split(O.sep).filter(i=>i),n=O.resolve(t).split(O.sep).filter(i=>i);return r.every((i,o)=>n[o]===i)}function Se(e,t,r){return`Cannot ${r} '${e}' to a subdirectory of itself, '${t}'.`}gt.exports={checkPaths:pt(In),checkPathsSync:Ln,checkParentPaths:pt(wt),checkParentPathsSync:St,isSrcSubdir:$e,areIdentical:oe}});var Dt=d((To,kt)=>{"use strict";var N=R(),ce=require("path"),{mkdirs:Cn}=M(),{pathExists:_n}=V(),{utimesMillis:Nn}=Ne(),ae=z();async function $n(e,t,r={}){typeof r=="function"&&(r={filter:r}),r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0001");let{srcStat:n,destStat:i}=await ae.checkPaths(e,t,"copy",r);if(await ae.checkParentPaths(e,n,t,"copy"),!await Et(e,t,r))return;let c=ce.dirname(t);await _n(c)||await Cn(c),await Ft(i,e,t,r)}async function Et(e,t,r){return r.filter?r.filter(e,t):!0}async function Ft(e,t,r,n){let o=await(n.dereference?N.stat:N.lstat)(t);if(o.isDirectory())return Wn(o,e,t,r,n);if(o.isFile()||o.isCharacterDevice()||o.isBlockDevice())return Tn(o,e,t,r,n);if(o.isSymbolicLink())return jn(e,t,r,n);throw o.isSocket()?new Error(`Cannot copy a socket file: ${t}`):o.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${t}`):new Error(`Unknown file: ${t}`)}async function Tn(e,t,r,n,i){if(!t)return vt(e,r,n,i);if(i.overwrite)return await N.unlink(n),vt(e,r,n,i);if(i.errorOnExist)throw new Error(`'${n}' already exists`)}async function vt(e,t,r,n){if(await N.copyFile(t,r),n.preserveTimestamps){Rn(e.mode)&&await An(r,e.mode);let i=await N.stat(t);await Nn(r,i.atime,i.mtime)}return N.chmod(r,e.mode)}function Rn(e){return(e&128)===0}function An(e,t){return N.chmod(e,t|128)}async function Wn(e,t,r,n,i){t||await N.mkdir(n);let o=[];for await(let c of await N.opendir(r)){let s=ce.join(r,c.name),p=ce.join(n,c.name);o.push(Et(s,p,i).then(_=>{if(_)return ae.checkPaths(s,p,"copy",i).then(({destStat:a})=>Ft(a,s,p,i))}))}await Promise.all(o),t||await N.chmod(n,e.mode)}async function jn(e,t,r,n){let i=await N.readlink(t);if(n.dereference&&(i=ce.resolve(process.cwd(),i)),!e)return N.symlink(i,r);let o=null;try{o=await N.readlink(r)}catch(c){if(c.code==="EINVAL"||c.code==="UNKNOWN")return N.symlink(i,r);throw c}if(n.dereference&&(o=ce.resolve(process.cwd(),o)),ae.isSrcSubdir(i,o))throw new Error(`Cannot copy '${i}' to a subdirectory of itself, '${o}'.`);if(ae.isSrcSubdir(o,i))throw new Error(`Cannot overwrite '${o}' with '${i}'.`);return await N.unlink(r),N.symlink(i,r)}kt.exports=$n});var bt=d((Ro,Ot)=>{"use strict";var A=ee(),se=require("path"),Mn=M().mkdirsSync,Jn=Ne().utimesMillisSync,ue=z();function Hn(e,t,r){typeof r=="function"&&(r={filter:r}),r=r||{},r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0002");let{srcStat:n,destStat:i}=ue.checkPathsSync(e,t,"copy",r);if(ue.checkParentPathsSync(e,n,t,"copy"),r.filter&&!r.filter(e,t))return;let o=se.dirname(t);return A.existsSync(o)||Mn(o),xt(i,e,t,r)}function xt(e,t,r,n){let o=(n.dereference?A.statSync:A.lstatSync)(t);if(o.isDirectory())return Qn(o,e,t,r,n);if(o.isFile()||o.isCharacterDevice()||o.isBlockDevice())return Yn(o,e,t,r,n);if(o.isSymbolicLink())return Zn(e,t,r,n);throw o.isSocket()?new Error(`Cannot copy a socket file: ${t}`):o.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${t}`):new Error(`Unknown file: ${t}`)}function Yn(e,t,r,n,i){return t?Bn(e,r,n,i):Pt(e,r,n,i)}function Bn(e,t,r,n){if(n.overwrite)return A.unlinkSync(r),Pt(e,t,r,n);if(n.errorOnExist)throw new Error(`'${r}' already exists`)}function Pt(e,t,r,n){return A.copyFileSync(t,r),n.preserveTimestamps&&Un(e.mode,t,r),Te(r,e.mode)}function Un(e,t,r){return Vn(e)&&Gn(r,e),Kn(t,r)}function Vn(e){return(e&128)===0}function Gn(e,t){return Te(e,t|128)}function Te(e,t){return A.chmodSync(e,t)}function Kn(e,t){let r=A.statSync(e);return Jn(t,r.atime,r.mtime)}function Qn(e,t,r,n,i){return t?qt(r,n,i):Xn(e.mode,r,n,i)}function Xn(e,t,r,n){return A.mkdirSync(r),qt(t,r,n),Te(r,e)}function qt(e,t,r){let n=A.opendirSync(e);try{let i;for(;(i=n.readSync())!==null;)zn(i.name,e,t,r)}finally{n.closeSync()}}function zn(e,t,r,n){let i=se.join(t,e),o=se.join(r,e);if(n.filter&&!n.filter(i,o))return;let{destStat:c}=ue.checkPathsSync(i,o,"copy",n);return xt(c,i,o,n)}function Zn(e,t,r,n){let i=A.readlinkSync(t);if(n.dereference&&(i=se.resolve(process.cwd(),i)),e){let o;try{o=A.readlinkSync(r)}catch(c){if(c.code==="EINVAL"||c.code==="UNKNOWN")return A.symlinkSync(i,r);throw c}if(n.dereference&&(o=se.resolve(process.cwd(),o)),ue.isSrcSubdir(i,o))throw new Error(`Cannot copy '${i}' to a subdirectory of itself, '${o}'.`);if(ue.isSrcSubdir(o,i))throw new Error(`Cannot overwrite '${o}' with '${i}'.`);return ei(i,r)}else return A.symlinkSync(i,r)}function ei(e,t){return A.unlinkSync(t),A.symlinkSync(e,t)}Ot.exports=Hn});var ge=d((Ao,It)=>{"use strict";var ti=q().fromPromise;It.exports={copy:ti(Dt()),copySync:bt()}});var le=d((Wo,Ct)=>{"use strict";var Lt=ee(),ri=q().fromCallback;function ni(e,t){Lt.rm(e,{recursive:!0,force:!0},t)}function ii(e){Lt.rmSync(e,{recursive:!0,force:!0})}Ct.exports={remove:ri(ni),removeSync:ii}});var jt=d((jo,Wt)=>{"use strict";var oi=q().fromPromise,$t=R(),Tt=require("path"),Rt=M(),At=le(),_t=oi(async function(t){let r;try{r=await $t.readdir(t)}catch{return Rt.mkdirs(t)}return Promise.all(r.map(n=>At.remove(Tt.join(t,n))))});function Nt(e){let t;try{t=$t.readdirSync(e)}catch{return Rt.mkdirsSync(e)}t.forEach(r=>{r=Tt.join(e,r),At.removeSync(r)})}Wt.exports={emptyDirSync:Nt,emptydirSync:Nt,emptyDir:_t,emptydir:_t}});var Yt=d((Mo,Ht)=>{"use strict";var ci=q().fromPromise,Mt=require("path"),B=R(),Jt=M();async function ai(e){let t;try{t=await B.stat(e)}catch{}if(t&&t.isFile())return;let r=Mt.dirname(e),n=null;try{n=await B.stat(r)}catch(i){if(i.code==="ENOENT"){await Jt.mkdirs(r),await B.writeFile(e,"");return}else throw i}n.isDirectory()?await B.writeFile(e,""):await B.readdir(r)}function si(e){let t;try{t=B.statSync(e)}catch{}if(t&&t.isFile())return;let r=Mt.dirname(e);try{B.statSync(r).isDirectory()||B.readdirSync(r)}catch(n){if(n&&n.code==="ENOENT")Jt.mkdirsSync(r);else throw n}B.writeFileSync(e,"")}Ht.exports={createFile:ci(ai),createFileSync:si}});var Kt=d((Jo,Gt)=>{"use strict";var ui=q().fromPromise,Bt=require("path"),G=R(),Ut=M(),{pathExists:li}=V(),{areIdentical:Vt}=z();async function fi(e,t){let r;try{r=await G.lstat(t)}catch{}let n;try{n=await G.lstat(e)}catch(c){throw c.message=c.message.replace("lstat","ensureLink"),c}if(r&&Vt(n,r))return;let i=Bt.dirname(t);await li(i)||await Ut.mkdirs(i),await G.link(e,t)}function yi(e,t){let r;try{r=G.lstatSync(t)}catch{}try{let o=G.lstatSync(e);if(r&&Vt(o,r))return}catch(o){throw o.message=o.message.replace("lstat","ensureLink"),o}let n=Bt.dirname(t);return G.existsSync(n)||Ut.mkdirsSync(n),G.linkSync(e,t)}Gt.exports={createLink:ui(fi),createLinkSync:yi}});var Xt=d((Ho,Qt)=>{"use strict";var K=require("path"),fe=R(),{pathExists:mi}=V(),di=q().fromPromise;async function hi(e,t){if(K.isAbsolute(e)){try{await fe.lstat(e)}catch(o){throw o.message=o.message.replace("lstat","ensureSymlink"),o}return{toCwd:e,toDst:e}}let r=K.dirname(t),n=K.join(r,e);if(await mi(n))return{toCwd:n,toDst:e};try{await fe.lstat(e)}catch(o){throw o.message=o.message.replace("lstat","ensureSymlink"),o}return{toCwd:e,toDst:K.relative(r,e)}}function pi(e,t){if(K.isAbsolute(e)){if(!fe.existsSync(e))throw new Error("absolute srcpath does not exist");return{toCwd:e,toDst:e}}let r=K.dirname(t),n=K.join(r,e);if(fe.existsSync(n))return{toCwd:n,toDst:e};if(!fe.existsSync(e))throw new Error("relative srcpath does not exist");return{toCwd:e,toDst:K.relative(r,e)}}Qt.exports={symlinkPaths:di(hi),symlinkPathsSync:pi}});var er=d((Yo,Zt)=>{"use strict";var zt=R(),wi=q().fromPromise;async function Si(e,t){if(t)return t;let r;try{r=await zt.lstat(e)}catch{return"file"}return r&&r.isDirectory()?"dir":"file"}function gi(e,t){if(t)return t;let r;try{r=zt.lstatSync(e)}catch{return"file"}return r&&r.isDirectory()?"dir":"file"}Zt.exports={symlinkType:wi(Si),symlinkTypeSync:gi}});var ir=d((Bo,nr)=>{"use strict";var vi=q().fromPromise,tr=require("path"),H=R(),{mkdirs:Ei,mkdirsSync:Fi}=M(),{symlinkPaths:ki,symlinkPathsSync:Di}=Xt(),{symlinkType:xi,symlinkTypeSync:Pi}=er(),{pathExists:qi}=V(),{areIdentical:rr}=z();async function Oi(e,t,r){let n;try{n=await H.lstat(t)}catch{}if(n&&n.isSymbolicLink()){let[s,p]=await Promise.all([H.stat(e),H.stat(t)]);if(rr(s,p))return}let i=await ki(e,t);e=i.toDst;let o=await xi(i.toCwd,r),c=tr.dirname(t);return await qi(c)||await Ei(c),H.symlink(e,t,o)}function bi(e,t,r){let n;try{n=H.lstatSync(t)}catch{}if(n&&n.isSymbolicLink()){let s=H.statSync(e),p=H.statSync(t);if(rr(s,p))return}let i=Di(e,t);e=i.toDst,r=Pi(i.toCwd,r);let o=tr.dirname(t);return H.existsSync(o)||Fi(o),H.symlinkSync(e,t,r)}nr.exports={createSymlink:vi(Oi),createSymlinkSync:bi}});var yr=d((Uo,fr)=>{"use strict";var{createFile:or,createFileSync:cr}=Yt(),{createLink:ar,createLinkSync:sr}=Kt(),{createSymlink:ur,createSymlinkSync:lr}=ir();fr.exports={createFile:or,createFileSync:cr,ensureFile:or,ensureFileSync:cr,createLink:ar,createLinkSync:sr,ensureLink:ar,ensureLinkSync:sr,createSymlink:ur,createSymlinkSync:lr,ensureSymlink:ur,ensureSymlinkSync:lr}});var ve=d((Vo,mr)=>{function Ii(e,{EOL:t=`
`,finalEOL:r=!0,replacer:n=null,spaces:i}={}){let o=r?t:"";return JSON.stringify(e,n,i).replace(/\n/g,t)+o}function Li(e){return Buffer.isBuffer(e)&&(e=e.toString("utf8")),e.replace(/^\uFEFF/,"")}mr.exports={stringify:Ii,stripBom:Li}});var wr=d((Go,pr)=>{var ne;try{ne=ee()}catch{ne=require("fs")}var Ee=q(),{stringify:dr,stripBom:hr}=ve();async function Ci(e,t={}){typeof t=="string"&&(t={encoding:t});let r=t.fs||ne,n="throws"in t?t.throws:!0,i=await Ee.fromCallback(r.readFile)(e,t);i=hr(i);let o;try{o=JSON.parse(i,t?t.reviver:null)}catch(c){if(n)throw c.message=`${e}: ${c.message}`,c;return null}return o}var _i=Ee.fromPromise(Ci);function Ni(e,t={}){typeof t=="string"&&(t={encoding:t});let r=t.fs||ne,n="throws"in t?t.throws:!0;try{let i=r.readFileSync(e,t);return i=hr(i),JSON.parse(i,t.reviver)}catch(i){if(n)throw i.message=`${e}: ${i.message}`,i;return null}}async function $i(e,t,r={}){let n=r.fs||ne,i=dr(t,r);await Ee.fromCallback(n.writeFile)(e,i,r)}var Ti=Ee.fromPromise($i);function Ri(e,t,r={}){let n=r.fs||ne,i=dr(t,r);return n.writeFileSync(e,i,r)}var Ai={readFile:_i,readFileSync:Ni,writeFile:Ti,writeFileSync:Ri};pr.exports=Ai});var gr=d((Ko,Sr)=>{"use strict";var Fe=wr();Sr.exports={readJson:Fe.readFile,readJsonSync:Fe.readFileSync,writeJson:Fe.writeFile,writeJsonSync:Fe.writeFileSync}});var ke=d((Qo,Fr)=>{"use strict";var Wi=q().fromPromise,Re=R(),vr=require("path"),Er=M(),ji=V().pathExists;async function Mi(e,t,r="utf-8"){let n=vr.dirname(e);return await ji(n)||await Er.mkdirs(n),Re.writeFile(e,t,r)}function Ji(e,...t){let r=vr.dirname(e);Re.existsSync(r)||Er.mkdirsSync(r),Re.writeFileSync(e,...t)}Fr.exports={outputFile:Wi(Mi),outputFileSync:Ji}});var Dr=d((Xo,kr)=>{"use strict";var{stringify:Hi}=ve(),{outputFile:Yi}=ke();async function Bi(e,t,r={}){let n=Hi(t,r);await Yi(e,n,r)}kr.exports=Bi});var Pr=d((zo,xr)=>{"use strict";var{stringify:Ui}=ve(),{outputFileSync:Vi}=ke();function Gi(e,t,r){let n=Ui(t,r);Vi(e,n,r)}xr.exports=Gi});var Or=d((Zo,qr)=>{"use strict";var Ki=q().fromPromise,W=gr();W.outputJson=Ki(Dr());W.outputJsonSync=Pr();W.outputJSON=W.outputJson;W.outputJSONSync=W.outputJsonSync;W.writeJSON=W.writeJson;W.writeJSONSync=W.writeJsonSync;W.readJSON=W.readJson;W.readJSONSync=W.readJsonSync;qr.exports=W});var _r=d((ec,Cr)=>{"use strict";var Qi=R(),br=require("path"),{copy:Xi}=ge(),{remove:Lr}=le(),{mkdirp:zi}=M(),{pathExists:Zi}=V(),Ir=z();async function eo(e,t,r={}){let n=r.overwrite||r.clobber||!1,{srcStat:i,isChangingCase:o=!1}=await Ir.checkPaths(e,t,"move",r);await Ir.checkParentPaths(e,i,t,"move");let c=br.dirname(t);return br.parse(c).root!==c&&await zi(c),to(e,t,n,o)}async function to(e,t,r,n){if(!n){if(r)await Lr(t);else if(await Zi(t))throw new Error("dest already exists.")}try{await Qi.rename(e,t)}catch(i){if(i.code!=="EXDEV")throw i;await ro(e,t,r)}}async function ro(e,t,r){return await Xi(e,t,{overwrite:r,errorOnExist:!0,preserveTimestamps:!0}),Lr(e)}Cr.exports=eo});var Ar=d((tc,Rr)=>{"use strict";var $r=ee(),We=require("path"),no=ge().copySync,Tr=le().removeSync,io=M().mkdirpSync,Nr=z();function oo(e,t,r){r=r||{};let n=r.overwrite||r.clobber||!1,{srcStat:i,isChangingCase:o=!1}=Nr.checkPathsSync(e,t,"move",r);return Nr.checkParentPathsSync(e,i,t,"move"),co(t)||io(We.dirname(t)),ao(e,t,n,o)}function co(e){let t=We.dirname(e);return We.parse(t).root===t}function ao(e,t,r,n){if(n)return Ae(e,t,r);if(r)return Tr(t),Ae(e,t,r);if($r.existsSync(t))throw new Error("dest already exists.");return Ae(e,t,r)}function Ae(e,t,r){try{$r.renameSync(e,t)}catch(n){if(n.code!=="EXDEV")throw n;return so(e,t,r)}}function so(e,t,r){return no(e,t,{overwrite:r,errorOnExist:!0,preserveTimestamps:!0}),Tr(e)}Rr.exports=oo});var jr=d((rc,Wr)=>{"use strict";var uo=q().fromPromise;Wr.exports={move:uo(_r()),moveSync:Ar()}});var je=d((nc,Mr)=>{"use strict";Mr.exports={...R(),...ge(),...jt(),...yr(),...Or(),...M(),...jr(),...ke(),...V(),...le()}});var So={};an(So,{default:()=>wo});module.exports=sn(So);var Zr=require("@raycast/api");var J=require("@raycast/api");var Jr=require("@raycast/api");var Q=require("os");var Fo=[{title:"Desktop",value:`${(0,Q.homedir)()}/Desktop`},{title:"Documents",value:`${(0,Q.homedir)()}/Documents`},{title:"Movies",value:`${(0,Q.homedir)()}/Movies`},{title:"Music",value:`${(0,Q.homedir)()}/Music`},{title:"Pictures",value:`${(0,Q.homedir)()}/Pictures`},{title:"Downloads",value:`${(0,Q.homedir)()}/Downloads`}];var Me=xe(je()),Je=async e=>{let t=await Jr.LocalStorage.getItem(e);return typeof t>"u"?"":t},He=e=>!(e!=null&&String(e).length>0);var Hr=e=>{try{let t=Me.default.lstatSync(e);if(t.isDirectory())return"Directory";if(t.isFile())return"File"}catch(t){return console.error(`Error checking path ${e}:`,t),"File"}return"File"};var Yr=(e,t)=>{let r=!1;return t.forEach(n=>{if(n.path===e){r=!0;return}}),r},Br=e=>{let t=[];try{return Me.default.readdirSync(e).forEach(n=>{n.startsWith(".")||t.push(e+n)}),t}catch(r){return console.error(`Error reading directory ${e}:`,r),t}};var ye=require("path"),Ye=require("child_process");var Ur=require("node:child_process"),Vr=xe(je()),lo=async e=>{try{let t=await Je("localHideDirectory"),r=He(t)?[]:JSON.parse(t),n=new Date().getTime(),i=[];e.sort((c,s)=>c.localeCompare(s)).map((c,s)=>{let p=(0,ye.parse)(c);Yr(p.dir+"/"+p.base,r)||i.push({id:"directory_"+(n+s),name:p.base,path:p.dir+"/"+p.base,type:Hr(c),valid:!0,date:n+s})});let o=[...i,...r].sort((c,s)=>s.date-c.date);await J.LocalStorage.setItem("localHideDirectory",JSON.stringify(o))}catch(t){console.error(String(t))}},fo=async e=>{let t=await Je("localHideDirectory"),r=[];He(t)||(r=JSON.parse(t));let n=(0,ye.parse)(e),i=r.filter(o=>(0,ye.parse)(o.path).dir!==n.dir+"/"+n.base);await J.LocalStorage.setItem("localHideDirectory",JSON.stringify(i))};var yo=e=>{let t=Array.isArray(e)?e[0]:e;return(0,Ur.spawnSync)("ls",["-lOd",t]).stdout.toString().split(RegExp("\\s+"))[4]!=="-"},mo=e=>{let t=Array.isArray(e)?e[0]:e,r=Vr.default.readdirSync(t).filter(n=>!n.startsWith("."));if(r.length!==0)return yo(t.endsWith("/")?t+r[0]:`${t}/${r[0]}`)},Gr=async e=>{try{let t=e.endsWith("/")?e:`${e}/`,r=mo(t),{name:n}=(0,ye.parse)(t);if(typeof r>"u"){await(0,J.showHUD)(`\u{1F4C2} No files in ${n}`);return}if(r)await(0,J.showHUD)(`\u{1F435} Unhiding files in ${n}`),(0,Ye.spawn)("chflags",["nohidden",`${t.replaceAll(" ",'" "')}*`],{shell:!0}),await fo(t);else{await(0,J.showHUD)(`\u{1F648} Hiding files in ${n}`),(0,Ye.spawn)("chflags",["hidden",`${t.replaceAll(" ",'" "')}*`],{shell:!0});let i=Br(t);await lo(i)}return r}catch(t){(0,J.captureException)(t),await(0,J.showHUD)(`\u{1F6A8} ${String(t)}`),console.error(String(t));return}};var Kr=xe(require("node:process"),1),Qr=require("node:util"),Be=require("node:child_process"),ho=(0,Qr.promisify)(Be.execFile);async function Xr(e,{humanReadableOutput:t=!0}={}){if(Kr.default.platform!=="darwin")throw new Error("macOS only");let r=t?[]:["-ss"],{stdout:n}=await ho("osascript",["-e",e,r]);return n.trim()}var po=`
if application "Finder" is not running then
    return "Finder not running"
end if

tell application "Finder"
    return POSIX path of ((insertion location) as alias)
end tell
`,zr=async()=>{try{return await Xr(po)}catch(e){return console.error("Error getting Finder path:",e),"Finder not running"}};var wo=async()=>{await(0,Zr.closeMainWindow)();let e=await zr();await Gr(e)};
