{
  "version": 3,
  "sources": ["../src/import_configs.tsx", "../src/conifgs.tsx", "../src/arg_repository.tsx", "../src/arg_value_repository.tsx", "../src/constants.tsx", "../src/url_repository.tsx"],
  "sourcesContent": ["import { Action, ActionPanel, Form, popToRoot, showToast, Toast } from \"@raycast/api\";\nimport { ImportInput } from \"./models\";\nimport { useState } from \"react\";\nimport { importConfigs } from \"./conifgs\";\nimport Style = Toast.Style;\n\nexport default function ImportConfigsCommand() {\n  const [json, setJson] = useState<string>(\"\");\n  const [jsonErr, setJsonErr] = useState<string | undefined>();\n\n  function validateJson(s: string | undefined) {\n    if (s == undefined || s.trim().length == 0) {\n      setJsonErr(\"The configs can't be blank\");\n      return;\n    } else {\n      setJsonErr(undefined);\n    }\n\n    let parseSuccess = false;\n    try {\n      JSON.parse(s);\n      parseSuccess = true;\n    } catch (err) {\n      console.log(err);\n    }\n    if (!parseSuccess) {\n      setJsonErr(\"invalid json\");\n    } else {\n      setJsonErr(undefined);\n    }\n  }\n\n  return (\n    <Form\n      actions={\n        <ActionPanel>\n          <Action.SubmitForm\n            onSubmit={(values: ImportInput) => {\n              // console.log(\"import config onSubmit\", values);\n              importConfigs(values.importedConfig).then(() => {\n                popToRoot().finally(() => showToast(Style.Success, \"import success\"));\n              });\n            }}\n          />\n        </ActionPanel>\n      }\n    >\n      <Form.Description\n        text=\"Best to save the old configs first! This import action will overide the old configs!\"\n        title=\"!!!ATTETION!!!\"\n      />\n      <Form.TextArea\n        id=\"importedConfig\"\n        title=\"Configs\"\n        error={jsonErr}\n        placeholder=\"!Attention! Best to save the old configs first. This import action will overide the old configs\"\n        info=\"!Attention! Best to save the old configs first. This import action will overide the old configs\"\n        onChange={(newValue) => {\n          setJson(newValue);\n          validateJson(newValue);\n        }}\n        value={json}\n        onBlur={(event) => {\n          validateJson(event.target.value?.trim());\n        }}\n      />\n    </Form>\n  );\n}\n", "import { LocalStorage } from \"@raycast/api\";\nimport { importArgConfigs, queryArgList } from \"./arg_repository\";\nimport { queryArgValueList } from \"./arg_value_repository\";\nimport { importUrlConfig, queryUrlConfigs, UrlConfigs, UrlConfigValue } from \"./url_repository\";\n\nexport async function platformNameExists(platformName: string | undefined) {\n  if (platformName == undefined) {\n    return true;\n  }\n  const val = await LocalStorage.getItem<string>(platformName);\n  return val && val?.trim().length > 0;\n}\n\nexport async function exportAllConfigs() {\n  const argConfigs = new ArgConfigs();\n  const argList = await queryArgList();\n\n  for (const arg of argList) {\n    const argValueList = await queryArgValueList(arg);\n    argConfigs.addPair(arg, argValueList);\n  }\n\n  const urlConfigs = await queryUrlConfigs();\n\n  const resObj = {\n    urlConfigs: Object.fromEntries(urlConfigs.urlConfigs),\n    argConfigs: Object.fromEntries(argConfigs.arg2ValuesMap),\n  };\n  return JSON.stringify(resObj, null, \"\\t\");\n}\n\nexport async function importConfigs(s: string) {\n  await LocalStorage.clear();\n  const parsed: AllConfigs = JSON.parse(s);\n\n  const urlConfigs = new UrlConfigs(JSON.stringify(parsed.urlConfigs));\n  await importUrlConfig(urlConfigs);\n\n  const argConfigs = new Map<string, string[]>(Object.entries(parsed.argConfigs || \"\"));\n  console.log(argConfigs);\n  await importArgConfigs(argConfigs);\n}\n\ninterface AllConfigs {\n  urlConfigs: Map<string, UrlConfigValue>;\n  argConfigs: Map<string, string[]>;\n}\n\nclass ArgConfigs {\n  arg2ValuesMap: Map<string, string[]>;\n\n  constructor() {\n    this.arg2ValuesMap = new Map<string, string[]>();\n  }\n\n  setMap(map: Map<string, string[]>) {\n    this.arg2ValuesMap = map;\n  }\n\n  addPair(arg: string, valueList: string[] | undefined) {\n    if (valueList == undefined) {\n      this.arg2ValuesMap.set(arg, []);\n    } else {\n      this.arg2ValuesMap.set(arg, valueList);\n    }\n  }\n\n  parse(s: string) {\n    if (s == undefined || s == \"\") {\n      this.arg2ValuesMap = new Map<string, string[]>();\n    }\n    const map: Map<string, string[]> = JSON.parse(s);\n    this.setMap(map);\n  }\n\n  toString() {\n    return JSON.stringify(Object.fromEntries(this.arg2ValuesMap), null, 4);\n  }\n}\n", "import { Alert, confirmAlert, LocalStorage, showToast, Toast } from \"@raycast/api\";\nimport { importArgValueList } from \"./arg_value_repository\";\nimport { ArgNameKeyPrefix, ArgNameListConfigKey } from \"./constants\";\nimport ActionStyle = Alert.ActionStyle;\n\nexport function buildArgNameKey(argName: string) {\n  return ArgNameKeyPrefix + argName;\n}\n\nexport async function queryArgList() {\n  const s = await LocalStorage.getItem<string>(ArgNameListConfigKey);\n  if (s == undefined) {\n    return [];\n  }\n  const argList: string[] = JSON.parse(s);\n  return argList;\n}\n\nexport async function addNewArg(newArgName: string) {\n  if (await argExist(newArgName)) {\n    return showToast(Toast.Style.Failure, \"arg name exists!\", \"consider chang a arg name\");\n  }\n  await LocalStorage.setItem(buildArgNameKey(newArgName), \"[]\");\n  const argList = await queryArgList();\n  console.log(\"arg list before add: \" + JSON.stringify(argList));\n  argList.push(newArgName);\n  console.log(\"arg list after add: \" + JSON.stringify(argList));\n  await LocalStorage.setItem(ArgNameListConfigKey, JSON.stringify(argList));\n\n  return showToast(Toast.Style.Success, \"Success\");\n}\n\nexport async function argExist(argName: string | undefined) {\n  if (argName == undefined) {\n    return false;\n  }\n  const argList = await queryArgList();\n  for (const arg of argList) {\n    if (argName == arg) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nexport async function updateArg(newArgName: string, oldArgName: string) {\n  const oldList = await queryArgList();\n  const newList: string[] = [];\n  for (const arg of oldList) {\n    if (arg == oldArgName) {\n      newList.push(newArgName);\n    } else {\n      newList.push(arg);\n    }\n  }\n  await LocalStorage.setItem(ArgNameListConfigKey, JSON.stringify(newList));\n  const argValueList = (await LocalStorage.getItem<string>(buildArgNameKey(oldArgName))) || \"[]\";\n  await LocalStorage.removeItem(buildArgNameKey(oldArgName));\n  await LocalStorage.setItem(buildArgNameKey(newArgName), argValueList);\n}\n\nexport async function deleteArg(argName: string) {\n  const argList = await queryArgList();\n  const newArgList: string[] = [];\n  for (const arg of argList) {\n    if (arg != argName) {\n      newArgList.push(arg);\n    }\n  }\n  return await confirmAlert({\n    title: \"Delete Arg: \" + argName + \"?\",\n    message: \"\",\n    primaryAction: {\n      title: \"Delete\",\n      style: ActionStyle.Destructive,\n      onAction: async () => {\n        await LocalStorage.setItem(ArgNameListConfigKey, JSON.stringify(newArgList));\n        await LocalStorage.removeItem(buildArgNameKey(argName));\n      },\n    },\n  });\n}\n\nexport async function importArgConfigs(map: Map<string, string[]>) {\n  const allArgNames: string[] = [];\n  map.forEach((argValueList, argName) => {\n    allArgNames.push(argName);\n    importArgValueList(argName, argValueList);\n  });\n\n  await LocalStorage.setItem(ArgNameListConfigKey, JSON.stringify(allArgNames));\n}\n", "import { Alert, confirmAlert, LocalStorage, popToRoot, showToast, Toast } from \"@raycast/api\";\nimport { buildArgNameKey } from \"./arg_repository\";\nimport Style = Toast.Style;\nimport ActionStyle = Alert.ActionStyle;\n\nexport async function argValueExists(argName: string, value: string) {\n  const valueList = await queryArgValueList(argName);\n  if (valueList == undefined) {\n    return false;\n  }\n  for (const v of valueList) {\n    if (v == value) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport async function queryArgValueList(argName: string) {\n  const key = buildArgNameKey(argName);\n\n  const val = await LocalStorage.getItem<string>(key);\n  if (val == undefined) {\n    return undefined;\n  }\n  const argValueList: string[] = JSON.parse(val);\n  return argValueList;\n}\n\nexport async function queryArgValueListErrIfNotExistOrEmpty(argName: string, webNameList: string[] | undefined) {\n  const argValueList = await queryArgValueList(argName);\n  let webName = \"Url\";\n  if (webNameList != undefined && webName.length > 0) {\n    webName = webNameList[0];\n  }\n  if (argValueList == undefined || argValueList.length == 0) {\n    await showToast(Style.Failure, '\"' + webName + '\" contains invalid Arg: ' + argName, \"Arg dose not exist\");\n    await popToRoot();\n  }\n  if (argValueList?.length == 0) {\n    await showToast(Style.Failure, '\"' + webName + '\" contains invalid Arg: ' + argName, \"Arg is empty\");\n    await popToRoot();\n  }\n  return argValueList;\n}\n\nexport async function updateArgValue(argName: string, oldArgValue: string, newArgValue: string) {\n  const key = buildArgNameKey(argName);\n  const val = await LocalStorage.getItem<string>(key);\n  let argValueList: string[] = [];\n  if (val != undefined) {\n    argValueList = JSON.parse(val);\n  }\n  console.log(\"arg value before update: \", argValueList);\n  let newArgValueList = [];\n  if (oldArgValue == \"\") {\n    // add new one\n    newArgValueList = argValueList;\n    newArgValueList.push(newArgValue);\n  } else {\n    // replace old\n    for (const argValue of argValueList) {\n      if (argValue == oldArgValue) {\n        newArgValueList.push(newArgValue);\n      } else {\n        newArgValueList.push(argValue);\n      }\n    }\n  }\n\n  const s = JSON.stringify(newArgValueList);\n  console.log(\"arg value before update: \", newArgValueList);\n  await LocalStorage.setItem(key, s);\n  return showToast(Style.Success, \"success\");\n}\n\nexport async function importArgValueList(argName: string, argValueList: string[]) {\n  await LocalStorage.setItem(buildArgNameKey(argName), JSON.stringify(argValueList));\n}\n\nexport async function deleteArgValue(argName: string, argValueToDelete: string) {\n  return await confirmAlert({\n    title: \"Delete Arg Value: \" + argValueToDelete + \"?\",\n    message: \"\",\n    primaryAction: {\n      title: \"Delete\",\n      style: ActionStyle.Destructive,\n      onAction: () => {\n        executeArgValueDeletion(argName, argValueToDelete);\n      },\n    },\n  });\n}\n\nasync function executeArgValueDeletion(argName: string, argValueToDelete: string) {\n  const key = buildArgNameKey(argName);\n\n  const val = await LocalStorage.getItem<string>(key);\n  let argValueList: string[] = [];\n  if (val != undefined) {\n    argValueList = JSON.parse(val);\n  }\n  const newArgValueList = [];\n  for (const argValue of argValueList) {\n    if (argValue != argValueToDelete) {\n      newArgValueList.push(argValue);\n    }\n  }\n  const s = JSON.stringify(newArgValueList);\n  await LocalStorage.setItem(key, s);\n}\n", "export const ArgNameListConfigKey = \"$arg_name_list\";\nexport const ArgNameKeyPrefix = \"arg_name:\";\nexport const WebNameConfigKey = \"$web_name_configs\";\n", "import { Alert, confirmAlert, LocalStorage, showToast, Toast } from \"@raycast/api\";\nimport { WebNameConfigKey } from \"./constants\";\nimport { ConfigInfo } from \"./models\";\nimport ActionStyle = Alert.ActionStyle;\n\nexport async function queryUrlConfigs() {\n  const s = await LocalStorage.getItem<string>(WebNameConfigKey);\n  return new UrlConfigs(s);\n}\n\nexport async function webNameExists(webName: string) {\n  const webConfigs = await queryUrlConfigs();\n  return webConfigs.webNameExists(webName);\n}\n\nexport async function addUrlConfig(urlInfo: ConfigInfo) {\n  const webConfigs = await queryUrlConfigs();\n  if (webConfigs.webNameExists(urlInfo.configName)) {\n    return await showToast(Toast.Style.Failure, \"platform name exists!\", \"consider change a name\");\n  }\n\n  console.log(\"url config before add\", webConfigs.toString());\n  webConfigs.set(urlInfo.configName, urlInfo.itemValue, urlInfo.argList);\n  const str = webConfigs.toString();\n  console.log(str);\n  await LocalStorage.setItem(WebNameConfigKey, str);\n}\n\nexport async function updateUrlConfig(urlInfo: ConfigInfo, oldWebName: string) {\n  const webConfigs = await queryUrlConfigs();\n\n  console.log(\"url config before update\", webConfigs.toString());\n  webConfigs.delete(oldWebName);\n  webConfigs.set(urlInfo.configName, urlInfo.itemValue, urlInfo.argList);\n  const str = webConfigs.toString();\n  console.log(str);\n  await LocalStorage.setItem(WebNameConfigKey, str);\n}\n\nexport async function deleteUrlConfig(webName: string, urlConfigs: UrlConfigs) {\n  return await confirmAlert({\n    title: \"Delete Url Config: \" + webName + \"?\",\n    message: \"\",\n    primaryAction: {\n      title: \"Delete\",\n      style: ActionStyle.Destructive,\n      onAction: async () => {\n        console.log(\"url config before deletion:\", urlConfigs.toString());\n        urlConfigs.urlConfigs.delete(webName);\n        console.log(\"url config after deletion:\", urlConfigs.toString());\n        await LocalStorage.setItem(WebNameConfigKey, urlConfigs.toString());\n      },\n    },\n  });\n}\n\nexport async function importUrlConfig(urlConfigs: UrlConfigs) {\n  await LocalStorage.setItem(WebNameConfigKey, urlConfigs.toString());\n}\n\nexport class UrlConfigs {\n  urlConfigs: Map<string, UrlConfigValue>;\n\n  constructor(s: string | undefined) {\n    this.urlConfigs = this.parse(s);\n  }\n\n  parse(s: string | undefined) {\n    if (s == undefined || s.trim().length == 0) {\n      return new Map<string, UrlConfigValue>();\n    }\n\n    return new Map<string, UrlConfigValue>(Object.entries(JSON.parse(s)));\n  }\n\n  webNameExists(webName: string) {\n    return this.urlConfigs.has(webName);\n  }\n\n  set(webName: string, urlPattern: string, argList: string[]) {\n    this.urlConfigs.set(webName, new UrlConfigValue(urlPattern, argList));\n  }\n\n  delete(webName: string) {\n    this.urlConfigs.delete(webName);\n  }\n\n  toString() {\n    return JSON.stringify(Object.fromEntries(this.urlConfigs));\n  }\n}\n\nexport class UrlConfigValue {\n  urlPattern: string;\n  args: string[];\n\n  constructor(urlPattern: string, args: string[]) {\n    this.urlPattern = urlPattern;\n    this.args = args;\n  }\n}\n"],
  "mappings": "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",
  "names": ["import_configs_exports", "__export", "ImportConfigsCommand", "__toCommonJS", "import_api", "import_react", "import_api", "import_api", "import_api", "importArgValueList", "argName", "argValueList", "buildArgNameKey", "ArgNameListConfigKey", "ArgNameKeyPrefix", "WebNameConfigKey", "buildArgNameKey", "argName", "ArgNameKeyPrefix", "importArgConfigs", "map", "allArgNames", "argValueList", "argName", "importArgValueList", "ArgNameListConfigKey", "import_api", "importUrlConfig", "urlConfigs", "WebNameConfigKey", "UrlConfigs", "s", "webName", "urlPattern", "argList", "UrlConfigValue", "args", "importConfigs", "s", "parsed", "urlConfigs", "UrlConfigs", "importUrlConfig", "argConfigs", "importArgConfigs", "import_jsx_runtime", "Style", "ImportConfigsCommand", "json", "setJson", "jsonErr", "setJsonErr", "validateJson", "parseSuccess", "err", "values", "importConfigs", "newValue", "event"]
}
