{
  "version": 3,
  "sources": ["../src/export_configs.tsx", "../src/conifgs.tsx", "../src/arg_repository.tsx", "../src/arg_value_repository.tsx", "../src/constants.tsx", "../src/url_repository.tsx"],
  "sourcesContent": ["import { useEffect, useState } from \"react\";\nimport { exportAllConfigs } from \"./conifgs\";\nimport { Action, ActionPanel, Clipboard, Detail, showHUD } from \"@raycast/api\";\n\nexport default function ExportCommand() {\n  const [configsString, setConfigsString] = useState<string>(\"\");\n  const [isLoading, setIsLoading] = useState<boolean>(true);\n  useEffect(() => {\n    async function f() {\n      setConfigsString(await exportAllConfigs());\n    }\n\n    f().finally(() => setIsLoading(false));\n  }, []);\n  const markdown = \"```json\\n\" + configsString + \"\\n```\";\n  console.log(markdown);\n  return (\n    <Detail\n      isLoading={isLoading}\n      markdown={markdown}\n      actions={\n        <ActionPanel>\n          <Action\n            title=\"Copy to Clipboard\"\n            onAction={() => {\n              Clipboard.copy(configsString).then(() => showHUD(\"copied to clipboard\"));\n            }}\n          />\n        </ActionPanel>\n      }\n    />\n  );\n}\n", "import { LocalStorage } from \"@raycast/api\";\nimport { importArgConfigs, queryArgList } from \"./arg_repository\";\nimport { queryArgValueList } from \"./arg_value_repository\";\nimport { importUrlConfig, queryUrlConfigs, UrlConfigs, UrlConfigValue } from \"./url_repository\";\n\nexport async function platformNameExists(platformName: string | undefined) {\n  if (platformName == undefined) {\n    return true;\n  }\n  const val = await LocalStorage.getItem<string>(platformName);\n  return val && val?.trim().length > 0;\n}\n\nexport async function exportAllConfigs() {\n  const argConfigs = new ArgConfigs();\n  const argList = await queryArgList();\n\n  for (const arg of argList) {\n    const argValueList = await queryArgValueList(arg);\n    argConfigs.addPair(arg, argValueList);\n  }\n\n  const urlConfigs = await queryUrlConfigs();\n\n  const resObj = {\n    urlConfigs: Object.fromEntries(urlConfigs.urlConfigs),\n    argConfigs: Object.fromEntries(argConfigs.arg2ValuesMap),\n  };\n  return JSON.stringify(resObj, null, \"\\t\");\n}\n\nexport async function importConfigs(s: string) {\n  await LocalStorage.clear();\n  const parsed: AllConfigs = JSON.parse(s);\n\n  const urlConfigs = new UrlConfigs(JSON.stringify(parsed.urlConfigs));\n  await importUrlConfig(urlConfigs);\n\n  const argConfigs = new Map<string, string[]>(Object.entries(parsed.argConfigs || \"\"));\n  console.log(argConfigs);\n  await importArgConfigs(argConfigs);\n}\n\ninterface AllConfigs {\n  urlConfigs: Map<string, UrlConfigValue>;\n  argConfigs: Map<string, string[]>;\n}\n\nclass ArgConfigs {\n  arg2ValuesMap: Map<string, string[]>;\n\n  constructor() {\n    this.arg2ValuesMap = new Map<string, string[]>();\n  }\n\n  setMap(map: Map<string, string[]>) {\n    this.arg2ValuesMap = map;\n  }\n\n  addPair(arg: string, valueList: string[] | undefined) {\n    if (valueList == undefined) {\n      this.arg2ValuesMap.set(arg, []);\n    } else {\n      this.arg2ValuesMap.set(arg, valueList);\n    }\n  }\n\n  parse(s: string) {\n    if (s == undefined || s == \"\") {\n      this.arg2ValuesMap = new Map<string, string[]>();\n    }\n    const map: Map<string, string[]> = JSON.parse(s);\n    this.setMap(map);\n  }\n\n  toString() {\n    return JSON.stringify(Object.fromEntries(this.arg2ValuesMap), null, 4);\n  }\n}\n", "import { Alert, confirmAlert, LocalStorage, showToast, Toast } from \"@raycast/api\";\nimport { importArgValueList } from \"./arg_value_repository\";\nimport { ArgNameKeyPrefix, ArgNameListConfigKey } from \"./constants\";\nimport ActionStyle = Alert.ActionStyle;\n\nexport function buildArgNameKey(argName: string) {\n  return ArgNameKeyPrefix + argName;\n}\n\nexport async function queryArgList() {\n  const s = await LocalStorage.getItem<string>(ArgNameListConfigKey);\n  if (s == undefined) {\n    return [];\n  }\n  const argList: string[] = JSON.parse(s);\n  return argList;\n}\n\nexport async function addNewArg(newArgName: string) {\n  if (await argExist(newArgName)) {\n    return showToast(Toast.Style.Failure, \"arg name exists!\", \"consider chang a arg name\");\n  }\n  await LocalStorage.setItem(buildArgNameKey(newArgName), \"[]\");\n  const argList = await queryArgList();\n  console.log(\"arg list before add: \" + JSON.stringify(argList));\n  argList.push(newArgName);\n  console.log(\"arg list after add: \" + JSON.stringify(argList));\n  await LocalStorage.setItem(ArgNameListConfigKey, JSON.stringify(argList));\n\n  return showToast(Toast.Style.Success, \"Success\");\n}\n\nexport async function argExist(argName: string | undefined) {\n  if (argName == undefined) {\n    return false;\n  }\n  const argList = await queryArgList();\n  for (const arg of argList) {\n    if (argName == arg) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nexport async function updateArg(newArgName: string, oldArgName: string) {\n  const oldList = await queryArgList();\n  const newList: string[] = [];\n  for (const arg of oldList) {\n    if (arg == oldArgName) {\n      newList.push(newArgName);\n    } else {\n      newList.push(arg);\n    }\n  }\n  await LocalStorage.setItem(ArgNameListConfigKey, JSON.stringify(newList));\n  const argValueList = (await LocalStorage.getItem<string>(buildArgNameKey(oldArgName))) || \"[]\";\n  await LocalStorage.removeItem(buildArgNameKey(oldArgName));\n  await LocalStorage.setItem(buildArgNameKey(newArgName), argValueList);\n}\n\nexport async function deleteArg(argName: string) {\n  const argList = await queryArgList();\n  const newArgList: string[] = [];\n  for (const arg of argList) {\n    if (arg != argName) {\n      newArgList.push(arg);\n    }\n  }\n  return await confirmAlert({\n    title: \"Delete Arg: \" + argName + \"?\",\n    message: \"\",\n    primaryAction: {\n      title: \"Delete\",\n      style: ActionStyle.Destructive,\n      onAction: async () => {\n        await LocalStorage.setItem(ArgNameListConfigKey, JSON.stringify(newArgList));\n        await LocalStorage.removeItem(buildArgNameKey(argName));\n      },\n    },\n  });\n}\n\nexport async function importArgConfigs(map: Map<string, string[]>) {\n  const allArgNames: string[] = [];\n  map.forEach((argValueList, argName) => {\n    allArgNames.push(argName);\n    importArgValueList(argName, argValueList);\n  });\n\n  await LocalStorage.setItem(ArgNameListConfigKey, JSON.stringify(allArgNames));\n}\n", "import { Alert, confirmAlert, LocalStorage, popToRoot, showToast, Toast } from \"@raycast/api\";\nimport { buildArgNameKey } from \"./arg_repository\";\nimport Style = Toast.Style;\nimport ActionStyle = Alert.ActionStyle;\n\nexport async function argValueExists(argName: string, value: string) {\n  const valueList = await queryArgValueList(argName);\n  if (valueList == undefined) {\n    return false;\n  }\n  for (const v of valueList) {\n    if (v == value) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport async function queryArgValueList(argName: string) {\n  const key = buildArgNameKey(argName);\n\n  const val = await LocalStorage.getItem<string>(key);\n  if (val == undefined) {\n    return undefined;\n  }\n  const argValueList: string[] = JSON.parse(val);\n  return argValueList;\n}\n\nexport async function queryArgValueListErrIfNotExistOrEmpty(argName: string, webNameList: string[] | undefined) {\n  const argValueList = await queryArgValueList(argName);\n  let webName = \"Url\";\n  if (webNameList != undefined && webName.length > 0) {\n    webName = webNameList[0];\n  }\n  if (argValueList == undefined || argValueList.length == 0) {\n    await showToast(Style.Failure, '\"' + webName + '\" contains invalid Arg: ' + argName, \"Arg dose not exist\");\n    await popToRoot();\n  }\n  if (argValueList?.length == 0) {\n    await showToast(Style.Failure, '\"' + webName + '\" contains invalid Arg: ' + argName, \"Arg is empty\");\n    await popToRoot();\n  }\n  return argValueList;\n}\n\nexport async function updateArgValue(argName: string, oldArgValue: string, newArgValue: string) {\n  const key = buildArgNameKey(argName);\n  const val = await LocalStorage.getItem<string>(key);\n  let argValueList: string[] = [];\n  if (val != undefined) {\n    argValueList = JSON.parse(val);\n  }\n  console.log(\"arg value before update: \", argValueList);\n  let newArgValueList = [];\n  if (oldArgValue == \"\") {\n    // add new one\n    newArgValueList = argValueList;\n    newArgValueList.push(newArgValue);\n  } else {\n    // replace old\n    for (const argValue of argValueList) {\n      if (argValue == oldArgValue) {\n        newArgValueList.push(newArgValue);\n      } else {\n        newArgValueList.push(argValue);\n      }\n    }\n  }\n\n  const s = JSON.stringify(newArgValueList);\n  console.log(\"arg value before update: \", newArgValueList);\n  await LocalStorage.setItem(key, s);\n  return showToast(Style.Success, \"success\");\n}\n\nexport async function importArgValueList(argName: string, argValueList: string[]) {\n  await LocalStorage.setItem(buildArgNameKey(argName), JSON.stringify(argValueList));\n}\n\nexport async function deleteArgValue(argName: string, argValueToDelete: string) {\n  return await confirmAlert({\n    title: \"Delete Arg Value: \" + argValueToDelete + \"?\",\n    message: \"\",\n    primaryAction: {\n      title: \"Delete\",\n      style: ActionStyle.Destructive,\n      onAction: () => {\n        executeArgValueDeletion(argName, argValueToDelete);\n      },\n    },\n  });\n}\n\nasync function executeArgValueDeletion(argName: string, argValueToDelete: string) {\n  const key = buildArgNameKey(argName);\n\n  const val = await LocalStorage.getItem<string>(key);\n  let argValueList: string[] = [];\n  if (val != undefined) {\n    argValueList = JSON.parse(val);\n  }\n  const newArgValueList = [];\n  for (const argValue of argValueList) {\n    if (argValue != argValueToDelete) {\n      newArgValueList.push(argValue);\n    }\n  }\n  const s = JSON.stringify(newArgValueList);\n  await LocalStorage.setItem(key, s);\n}\n", "export const ArgNameListConfigKey = \"$arg_name_list\";\nexport const ArgNameKeyPrefix = \"arg_name:\";\nexport const WebNameConfigKey = \"$web_name_configs\";\n", "import { Alert, confirmAlert, LocalStorage, showToast, Toast } from \"@raycast/api\";\nimport { WebNameConfigKey } from \"./constants\";\nimport { ConfigInfo } from \"./models\";\nimport ActionStyle = Alert.ActionStyle;\n\nexport async function queryUrlConfigs() {\n  const s = await LocalStorage.getItem<string>(WebNameConfigKey);\n  return new UrlConfigs(s);\n}\n\nexport async function webNameExists(webName: string) {\n  const webConfigs = await queryUrlConfigs();\n  return webConfigs.webNameExists(webName);\n}\n\nexport async function addUrlConfig(urlInfo: ConfigInfo) {\n  const webConfigs = await queryUrlConfigs();\n  if (webConfigs.webNameExists(urlInfo.configName)) {\n    return await showToast(Toast.Style.Failure, \"platform name exists!\", \"consider change a name\");\n  }\n\n  console.log(\"url config before add\", webConfigs.toString());\n  webConfigs.set(urlInfo.configName, urlInfo.itemValue, urlInfo.argList);\n  const str = webConfigs.toString();\n  console.log(str);\n  await LocalStorage.setItem(WebNameConfigKey, str);\n}\n\nexport async function updateUrlConfig(urlInfo: ConfigInfo, oldWebName: string) {\n  const webConfigs = await queryUrlConfigs();\n\n  console.log(\"url config before update\", webConfigs.toString());\n  webConfigs.delete(oldWebName);\n  webConfigs.set(urlInfo.configName, urlInfo.itemValue, urlInfo.argList);\n  const str = webConfigs.toString();\n  console.log(str);\n  await LocalStorage.setItem(WebNameConfigKey, str);\n}\n\nexport async function deleteUrlConfig(webName: string, urlConfigs: UrlConfigs) {\n  return await confirmAlert({\n    title: \"Delete Url Config: \" + webName + \"?\",\n    message: \"\",\n    primaryAction: {\n      title: \"Delete\",\n      style: ActionStyle.Destructive,\n      onAction: async () => {\n        console.log(\"url config before deletion:\", urlConfigs.toString());\n        urlConfigs.urlConfigs.delete(webName);\n        console.log(\"url config after deletion:\", urlConfigs.toString());\n        await LocalStorage.setItem(WebNameConfigKey, urlConfigs.toString());\n      },\n    },\n  });\n}\n\nexport async function importUrlConfig(urlConfigs: UrlConfigs) {\n  await LocalStorage.setItem(WebNameConfigKey, urlConfigs.toString());\n}\n\nexport class UrlConfigs {\n  urlConfigs: Map<string, UrlConfigValue>;\n\n  constructor(s: string | undefined) {\n    this.urlConfigs = this.parse(s);\n  }\n\n  parse(s: string | undefined) {\n    if (s == undefined || s.trim().length == 0) {\n      return new Map<string, UrlConfigValue>();\n    }\n\n    return new Map<string, UrlConfigValue>(Object.entries(JSON.parse(s)));\n  }\n\n  webNameExists(webName: string) {\n    return this.urlConfigs.has(webName);\n  }\n\n  set(webName: string, urlPattern: string, argList: string[]) {\n    this.urlConfigs.set(webName, new UrlConfigValue(urlPattern, argList));\n  }\n\n  delete(webName: string) {\n    this.urlConfigs.delete(webName);\n  }\n\n  toString() {\n    return JSON.stringify(Object.fromEntries(this.urlConfigs));\n  }\n}\n\nexport class UrlConfigValue {\n  urlPattern: string;\n  args: string[];\n\n  constructor(urlPattern: string, args: string[]) {\n    this.urlPattern = urlPattern;\n    this.args = args;\n  }\n}\n"],
  "mappings": "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",
  "names": ["export_configs_exports", "__export", "ExportCommand", "__toCommonJS", "import_react", "import_api", "import_api", "import_api", "queryArgValueList", "argName", "key", "buildArgNameKey", "val", "ArgNameListConfigKey", "ArgNameKeyPrefix", "WebNameConfigKey", "buildArgNameKey", "argName", "ArgNameKeyPrefix", "queryArgList", "s", "ArgNameListConfigKey", "import_api", "queryUrlConfigs", "s", "WebNameConfigKey", "UrlConfigs", "UrlConfigs", "s", "webName", "urlPattern", "argList", "UrlConfigValue", "args", "exportAllConfigs", "argConfigs", "ArgConfigs", "argList", "queryArgList", "arg", "argValueList", "queryArgValueList", "urlConfigs", "queryUrlConfigs", "resObj", "ArgConfigs", "map", "arg", "valueList", "s", "import_api", "import_jsx_runtime", "ExportCommand", "configsString", "setConfigsString", "isLoading", "setIsLoading", "f", "exportAllConfigs", "markdown"]
}
