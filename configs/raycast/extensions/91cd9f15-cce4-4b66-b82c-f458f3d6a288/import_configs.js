"use strict";var u=Object.defineProperty;var N=Object.getOwnPropertyDescriptor;var I=Object.getOwnPropertyNames;var v=Object.prototype.hasOwnProperty;var J=(e,t)=>{for(var n in t)u(e,n,{get:t[n],enumerable:!0})},M=(e,t,n,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of I(t))!v.call(e,o)&&o!==n&&u(e,o,{get:()=>t[o],enumerable:!(i=N(t,o))||i.enumerable});return e};var E=e=>M(u({},"__esModule",{value:!0}),e);var U={};J(U,{default:()=>O});module.exports=E(U);var r=require("@raycast/api"),m=require("react");var L=require("@raycast/api");var f=require("@raycast/api");var a=require("@raycast/api");async function y(e,t){await a.LocalStorage.setItem(w(e),JSON.stringify(t))}var S="$arg_name_list",h="arg_name:",C="$web_name_configs";function w(e){return h+e}async function A(e){let t=[];e.forEach((n,i)=>{t.push(i),y(i,n)}),await f.LocalStorage.setItem(S,JSON.stringify(t))}var l=require("@raycast/api");async function x(e){await l.LocalStorage.setItem(C,e.toString())}var c=class{constructor(t){this.urlConfigs=this.parse(t)}parse(t){return t==null||t.trim().length==0?new Map:new Map(Object.entries(JSON.parse(t)))}webNameExists(t){return this.urlConfigs.has(t)}set(t,n,i){this.urlConfigs.set(t,new p(n,i))}delete(t){this.urlConfigs.delete(t)}toString(){return JSON.stringify(Object.fromEntries(this.urlConfigs))}},p=class{constructor(t,n){this.urlPattern=t,this.args=n}};async function V(e){await L.LocalStorage.clear();let t=JSON.parse(e),n=new c(JSON.stringify(t.urlConfigs));await x(n);let i=new Map(Object.entries(t.argConfigs||""));console.log(i),await A(i)}var g=require("react/jsx-runtime"),T=r.Toast.Style;function O(){let[e,t]=(0,m.useState)(""),[n,i]=(0,m.useState)();function o(s){if(s==null||s.trim().length==0){i("The configs can't be blank");return}else i(void 0);let d=!1;try{JSON.parse(s),d=!0}catch(b){console.log(b)}i(d?void 0:"invalid json")}return(0,g.jsxs)(r.Form,{actions:(0,g.jsx)(r.ActionPanel,{children:(0,g.jsx)(r.Action.SubmitForm,{onSubmit:s=>{V(s.importedConfig).then(()=>{(0,r.popToRoot)().finally(()=>(0,r.showToast)(T.Success,"import success"))})}})}),children:[(0,g.jsx)(r.Form.Description,{text:"Best to save the old configs first! This import action will overide the old configs!",title:"!!!ATTETION!!!"}),(0,g.jsx)(r.Form.TextArea,{id:"importedConfig",title:"Configs",error:n,placeholder:"!Attention! Best to save the old configs first. This import action will overide the old configs",info:"!Attention! Best to save the old configs first. This import action will overide the old configs",onChange:s=>{t(s),o(s)},value:e,onBlur:s=>{o(s.target.value?.trim())}})]})}
