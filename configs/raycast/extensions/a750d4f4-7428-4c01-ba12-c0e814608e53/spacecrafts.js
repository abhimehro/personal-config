"use strict";var Be=Object.create;var K=Object.defineProperty;var Ge=Object.getOwnPropertyDescriptor;var Ke=Object.getOwnPropertyNames;var He=Object.getPrototypeOf,Ze=Object.prototype.hasOwnProperty;var U=(e,n)=>()=>(n||e((n={exports:{}}).exports,n),n.exports),Je=(e,n)=>{for(var t in n)K(e,t,{get:n[t],enumerable:!0})},pe=(e,n,t,r)=>{if(n&&typeof n=="object"||typeof n=="function")for(let a of Ke(n))!Ze.call(e,a)&&a!==t&&K(e,a,{get:()=>n[a],enumerable:!(r=Ge(n,a))||r.enumerable});return e};var F=(e,n,t)=>(t=e!=null?Be(He(e)):{},pe(n||!e||!e.__esModule?K(t,"default",{value:e,enumerable:!0}):t,e)),qe=e=>pe(K({},"__esModule",{value:!0}),e);var Te=U(ne=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});var mt=["second","minute","hour","day","week","month","year"];function bt(e,n){if(n===0)return["just now","right now"];var t=mt[Math.floor(n/2)];return e>1&&(t+="s"),[e+" "+t+" ago","in "+e+" "+t]}ne.default=bt});var Re=U(ae=>{"use strict";Object.defineProperty(ae,"__esModule",{value:!0});var gt=["\u79D2","\u5206\u949F","\u5C0F\u65F6","\u5929","\u5468","\u4E2A\u6708","\u5E74"];function $t(e,n){if(n===0)return["\u521A\u521A","\u7247\u523B\u540E"];var t=gt[~~(n/2)];return[e+" "+t+"\u524D",e+" "+t+"\u540E"]}ae.default=$t});var Y=U(q=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0});var se={};q.register=function(e,n){se[e]=n};q.getLocale=function(e){return se[e]||se.en_US}});var oe=U(W=>{"use strict";Object.defineProperty(W,"__esModule",{value:!0});var M=[60,60,24,7,365/7/12,12];function ie(e){return e instanceof Date?e:!isNaN(e)||/^\d+$/.test(e)?new Date(parseInt(e)):(e=(e||"").trim().replace(/\.\d+/,"").replace(/-/,"/").replace(/-/,"/").replace(/(\d)T(\d)/,"$1 $2").replace(/Z/," UTC").replace(/([+-]\d\d):?(\d\d)/," $1$2"),new Date(e))}W.toDate=ie;function yt(e,n){var t=e<0?1:0;e=Math.abs(e);for(var r=e,a=0;e>=M[a]&&a<M.length;a++)e/=M[a];return e=Math.floor(e),a*=2,e>(a===0?9:1)&&(a+=1),n(e,a,r)[t].replace("%s",e.toString())}W.formatDiff=yt;function wt(e,n){var t=n?ie(n):new Date;return(+t-+ie(e))/1e3}W.diffSec=wt;function kt(e){for(var n=1,t=0,r=Math.abs(e);e>=M[t]&&t<M.length;t++)e/=M[t],n*=M[t];return r=r%n,r=r?n-r:n,Math.ceil(r)}W.nextInterval=kt});var Pe=U(ce=>{"use strict";Object.defineProperty(ce,"__esModule",{value:!0});var Ie=oe(),xt=Y();ce.format=function(e,n,t){var r=Ie.diffSec(e,t&&t.relativeDate);return Ie.formatDiff(r,xt.getLocale(n))}});var Ce=U(B=>{"use strict";Object.defineProperty(B,"__esModule",{value:!0});var Ue="timeago-id";function vt(e){return e.getAttribute("datetime")}B.getDateAttribute=vt;function St(e,n){e.setAttribute(Ue,n)}B.setTimerId=St;function Et(e){return parseInt(e.getAttribute(Ue))}B.getTimerId=Et});var De=U(Q=>{"use strict";Object.defineProperty(Q,"__esModule",{value:!0});var X=Ce(),le=oe(),_t=Y(),fe={},ue=function(e){clearTimeout(e),delete fe[e]};function Oe(e,n,t,r){ue(X.getTimerId(e));var a=r.relativeDate,o=r.minInterval,s=le.diffSec(n,a);e.innerText=le.formatDiff(s,t);var l=setTimeout(function(){Oe(e,n,t,r)},Math.min(Math.max(le.nextInterval(s),o||1)*1e3,2147483647));fe[l]=0,X.setTimerId(e,l)}function At(e){e?ue(X.getTimerId(e)):Object.keys(fe).forEach(ue)}Q.cancel=At;function Tt(e,n,t){var r=e.length?e:[e];return r.forEach(function(a){Oe(a,X.getDateAttribute(a),_t.getLocale(n),t||{})}),r}Q.render=Tt});var Ne=U(C=>{"use strict";var Me=C&&C.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(C,"__esModule",{value:!0});var Rt=Me(Te()),It=Me(Re()),de=Y();C.register=de.register;de.register("en_US",Rt.default);de.register("zh_CN",It.default);var Pt=Pe();C.format=Pt.format;var Le=De();C.render=Le.render;C.cancel=Le.cancel});var Ct={};Je(Ct,{default:()=>Ve});module.exports=qe(Ct);var We=require("@raycast/api");var i=F(require("react")),f=require("@raycast/api");var me=Object.prototype.hasOwnProperty;function H(e,n){var t,r;if(e===n)return!0;if(e&&n&&(t=e.constructor)===n.constructor){if(t===Date)return e.getTime()===n.getTime();if(t===RegExp)return e.toString()===n.toString();if(t===Array){if((r=e.length)===n.length)for(;r--&&H(e[r],n[r]););return r===-1}if(!t||typeof e=="object"){r=0;for(t in e)if(me.call(e,t)&&++r&&!me.call(n,t)||!(t in n)||!H(e[t],n[t]))return!1;return Object.keys(n).length===r}}return e!==e&&n!==n}var D=F(require("node:fs")),J=F(require("node:path")),ye=F(require("node:crypto"));var we=require("react/jsx-runtime");function Ye(e){let n=(0,i.useRef)(e),t=(0,i.useRef)(0);return H(e,n.current)||(n.current=e,t.current+=1),(0,i.useMemo)(()=>n.current,[t.current])}function w(e){let n=(0,i.useRef)(e);return n.current=e,n}function Xe(e,n){let t=e instanceof Error?e.message:String(e);return(0,f.showToast)({style:f.Toast.Style.Failure,title:n?.title??"Something went wrong",message:n?.message??t,primaryAction:n?.primaryAction??be(e),secondaryAction:n?.primaryAction?be(e):void 0})}var be=e=>{let n=!0,t="[Extension Name]...",r="";try{let s=JSON.parse((0,D.readFileSync)((0,J.join)(f.environment.assetsPath,"..","package.json"),"utf8"));t=`[${s.title}]...`,r=`https://raycast.com/${s.owner||s.author}/${s.name}`,(!s.owner||s.access==="public")&&(n=!1)}catch{}let a=f.environment.isDevelopment||n,o=e instanceof Error?e?.stack||e?.message||"":String(e);return{title:a?"Copy Logs":"Report Error",onAction(s){s.hide(),a?f.Clipboard.copy(o):(0,f.open)(`https://github.com/raycast/extensions/issues/new?&labels=extension%2Cbug&template=extension_bug_report.yml&title=${encodeURIComponent(t)}&extension-url=${encodeURI(r)}&description=${encodeURIComponent(`#### Error:
\`\`\`
${o}
\`\`\`
`)}`)}}};function Qe(e,n,t){let r=(0,i.useRef)(0),[a,o]=(0,i.useState)({isLoading:!0}),s=w(e),l=w(t?.abortable),c=w(n||[]),m=w(t?.onError),p=w(t?.onData),b=w(t?.onWillExecute),x=w(t?.failureToastOptions),v=w(a.data),y=(0,i.useRef)(null),d=(0,i.useRef)({page:0}),g=(0,i.useRef)(!1),S=(0,i.useRef)(!0),R=(0,i.useRef)(50),$=(0,i.useCallback)(()=>(l.current&&(l.current.current?.abort(),l.current.current=new AbortController),++r.current),[l]),h=(0,i.useCallback)((...P)=>{let k=$();b.current?.(P),o(u=>({...u,isLoading:!0}));let L=et(s.current)(...P);function N(u){return u.name=="AbortError"||k===r.current&&(m.current?m.current(u):f.environment.launchType!==f.LaunchType.Background&&Xe(u,{title:"Failed to fetch latest data",primaryAction:{title:"Retry",onAction(O){O.hide(),y.current?.(...c.current||[])}},...x.current}),o({error:u,isLoading:!1})),u}return typeof L=="function"?(g.current=!0,L(d.current).then(({data:u,hasMore:O,cursor:je})=>(k===r.current&&(d.current&&(d.current.cursor=je,d.current.lastItem=u?.[u.length-1]),p.current&&p.current(u,d.current),O&&(R.current=u.length),S.current=O,o(Fe=>d.current.page===0?{data:u,isLoading:!1}:{data:(Fe.data||[])?.concat(u),isLoading:!1})),u),u=>(S.current=!1,N(u)))):(g.current=!1,L.then(u=>(k===r.current&&(p.current&&p.current(u),o({data:u,isLoading:!1})),u),N))},[p,m,c,s,o,y,b,d,x,$]);y.current=h;let _=(0,i.useCallback)(()=>{d.current={page:0};let P=c.current||[];return h(...P)},[h,c]),A=(0,i.useCallback)(async(P,k)=>{let L;try{if(k?.optimisticUpdate){$(),typeof k?.rollbackOnError!="function"&&k?.rollbackOnError!==!1&&(L=structuredClone(v.current?.value));let N=k.optimisticUpdate;o(u=>({...u,data:N(u.data)}))}return await P}catch(N){if(typeof k?.rollbackOnError=="function"){let u=k.rollbackOnError;o(O=>({...O,data:u(O.data)}))}else k?.optimisticUpdate&&k?.rollbackOnError!==!1&&o(u=>({...u,data:L}));throw N}finally{k?.shouldRevalidateAfter!==!1&&(f.environment.launchType===f.LaunchType.Background||f.environment.commandMode==="menu-bar"?await _():_())}},[_,v,o,$]),I=(0,i.useCallback)(()=>{d.current.page+=1;let P=c.current||[];h(...P)},[d,c,h]);(0,i.useEffect)(()=>{d.current={page:0},t?.execute!==!1?h(...n||[]):$()},[Ye([n,t?.execute,h]),l,d]),(0,i.useEffect)(()=>()=>{$()},[$]);let V=t?.execute!==!1?a.isLoading:!1,j={...a,isLoading:V},G=g.current?{pageSize:R.current,hasMore:S.current,onLoadMore:I}:void 0;return{...j,revalidate:_,mutate:A,pagination:G}}function et(e){return e===Promise.all||e===Promise.race||e===Promise.resolve||e===Promise.reject?e.bind(Promise):e}function ge(e){return typeof e!="function"?!1:/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(e))!==null}function tt(e){return e instanceof URLSearchParams?e.toString():e}function ke(e,n=[]){function t(r){return"update"in e?e.update(r,"utf8"):e.write(r)}return{dispatch:function(r){r=tt(r),r===null?this._null():this["_"+typeof r](r)},_object:function(r){let a=/\[object (.*)\]/i,o=Object.prototype.toString.call(r),s=a.exec(o)?.[1]??"unknown:["+o+"]";s=s.toLowerCase();let l=null;if((l=n.indexOf(r))>=0){this.dispatch("[CIRCULAR:"+l+"]");return}else n.push(r);if(Buffer.isBuffer(r))return t("buffer:"),t(r.toString("utf8"));if(s!=="object"&&s!=="function"&&s!=="asyncfunction")if(this["_"+s])this["_"+s](r);else throw new Error('Unknown object type "'+s+'"');else{let c=Object.keys(r);c=c.sort(),ge(r)||c.splice(0,0,"prototype","__proto__","constructor"),t("object:"+c.length+":");let m=this;return c.forEach(function(p){m.dispatch(p),t(":"),m.dispatch(r[p]),t(",")})}},_array:function(r,a){a=typeof a<"u"?a:!1;let o=this;if(t("array:"+r.length+":"),!a||r.length<=1){r.forEach(function(c){o.dispatch(c)});return}let s=[],l=r.map(function(c){let m=rt(),p=n.slice();return ke(m,p).dispatch(c),s=s.concat(p.slice(n.length)),m.read().toString()});n=n.concat(s),l.sort(),this._array(l,!1)},_date:function(r){t("date:"+r.toJSON())},_symbol:function(r){t("symbol:"+r.toString())},_error:function(r){t("error:"+r.toString())},_boolean:function(r){t("bool:"+r.toString())},_string:function(r){t("string:"+r.length+":"),t(r.toString())},_function:function(r){t("fn:"),ge(r)?this.dispatch("[native]"):this.dispatch(r.toString()),this.dispatch("function-name:"+String(r.name)),this._object(r)},_number:function(r){t("number:"+r.toString())},_xml:function(r){t("xml:"+r.toString())},_null:function(){t("Null")},_undefined:function(){t("Undefined")},_regexp:function(r){t("regex:"+r.toString())},_uint8array:function(r){t("uint8array:"),this.dispatch(Array.prototype.slice.call(r))},_uint8clampedarray:function(r){t("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(r))},_int8array:function(r){t("int8array:"),this.dispatch(Array.prototype.slice.call(r))},_uint16array:function(r){t("uint16array:"),this.dispatch(Array.prototype.slice.call(r))},_int16array:function(r){t("int16array:"),this.dispatch(Array.prototype.slice.call(r))},_uint32array:function(r){t("uint32array:"),this.dispatch(Array.prototype.slice.call(r))},_int32array:function(r){t("int32array:"),this.dispatch(Array.prototype.slice.call(r))},_float32array:function(r){t("float32array:"),this.dispatch(Array.prototype.slice.call(r))},_float64array:function(r){t("float64array:"),this.dispatch(Array.prototype.slice.call(r))},_arraybuffer:function(r){t("arraybuffer:"),this.dispatch(new Uint8Array(r))},_url:function(r){t("url:"+r.toString())},_map:function(r){t("map:");let a=Array.from(r);this._array(a,!0)},_set:function(r){t("set:");let a=Array.from(r);this._array(a,!0)},_file:function(r){t("file:"),this.dispatch([r.name,r.size,r.type,r.lastModified])},_blob:function(){throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){t("domwindow")},_bigint:function(r){t("bigint:"+r.toString())},_process:function(){t("process")},_timer:function(){t("timer")},_pipe:function(){t("pipe")},_tcp:function(){t("tcp")},_udp:function(){t("udp")},_tty:function(){t("tty")},_statwatcher:function(){t("statwatcher")},_securecontext:function(){t("securecontext")},_connection:function(){t("connection")},_zlib:function(){t("zlib")},_context:function(){t("context")},_nodescript:function(){t("nodescript")},_httpparser:function(){t("httpparser")},_dataview:function(){t("dataview")},_signal:function(){t("signal")},_fsevent:function(){t("fsevent")},_tlswrap:function(){t("tlswrap")}}}function rt(){return{buf:"",write:function(e){this.buf+=e},end:function(e){this.buf+=e},read:function(){return this.buf}}}function nt(e,n){let t=this[e];return t instanceof Date?`__raycast_cached_date__${t.toISOString()}`:Buffer.isBuffer(t)?`__raycast_cached_buffer__${t.toString("base64")}`:n}function at(e,n){return typeof n=="string"&&n.startsWith("__raycast_cached_date__")?new Date(n.replace("__raycast_cached_date__","")):typeof n=="string"&&n.startsWith("__raycast_cached_buffer__")?Buffer.from(n.replace("__raycast_cached_buffer__",""),"base64"):n}function Z(e){let n=ye.default.createHash("sha1");return ke(n).dispatch(e),n.digest("hex")}var st=Symbol("cache without namespace"),$e=new Map;function it(e,n,t){let r=t?.cacheNamespace||st,a=$e.get(r)||$e.set(r,new f.Cache({namespace:t?.cacheNamespace})).get(r);if(!a)throw new Error("Missing cache");let o=w(e),s=w(n),l=(0,i.useSyncExternalStore)(a.subscribe,()=>{try{return a.get(o.current)}catch(b){console.error("Could not get Cache data:",b);return}}),c=(0,i.useMemo)(()=>{if(typeof l<"u"){if(l==="undefined")return;try{return JSON.parse(l,at)}catch(b){return console.warn("The cached data is corrupted",b),s.current}}else return s.current},[l,s]),m=w(c),p=(0,i.useCallback)(b=>{let x=typeof b=="function"?b(m.current):b;if(typeof x>"u")a.set(o.current,"undefined");else{let v=JSON.stringify(x,nt);a.set(o.current,v)}return x},[a,o,m]);return[c,p]}var z=Symbol();function ot(e,n,t){let{initialData:r,keepPreviousData:a,internal_cacheKeySuffix:o,...s}=t||{},l=(0,i.useRef)(null),[c,m]=it(Z(n||[])+o,z,{cacheNamespace:Z(e)}),p=(0,i.useRef)(c!==z?c:r),b=(0,i.useRef)(void 0),{mutate:x,revalidate:v,...y}=Qe(e,n||[],{...s,onData($,h){b.current=h,s.onData&&s.onData($,h),!(h&&h.page>0)&&(l.current="promise",p.current=$,m($))}}),d,g=y.pagination;b.current&&b.current.page>0&&y.data?d=y.data:l.current==="promise"?d=p.current:a&&c!==z?(d=c,g&&(g.hasMore=!0,g.pageSize=c.length)):a&&c===z?d=p.current:c!==z?(d=c,g&&(g.hasMore=!0,g.pageSize=c.length)):d=r;let S=w(d),R=(0,i.useCallback)(async($,h)=>{let _;try{if(h?.optimisticUpdate){typeof h?.rollbackOnError!="function"&&h?.rollbackOnError!==!1&&(_=structuredClone(S.current));let A=h.optimisticUpdate(S.current);l.current="cache",p.current=A,m(A)}return await x($,{shouldRevalidateAfter:h?.shouldRevalidateAfter})}catch(A){if(typeof h?.rollbackOnError=="function"){let I=h.rollbackOnError(S.current);l.current="cache",p.current=I,m(I)}else h?.optimisticUpdate&&h?.rollbackOnError!==!1&&(l.current="cache",p.current=_,m(_));throw A}},[m,x,S,p,l]);return(0,i.useEffect)(()=>{c!==z&&(l.current="cache",p.current=c)},[c]),{data:d,isLoading:y.isLoading,error:y.error,mutate:b.current&&b.current.page>0?x:R,pagination:g,revalidate:v}}function ct(e){if(e){let n=ut(e);if(!n)return!1;if(n.subtype==="json"||n.suffix==="json"||n.suffix&&/\bjson\b/i.test(n.suffix)||n.subtype&&/\bjson\b/i.test(n.subtype))return!0}return!1}var lt=/^([A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126})\/([A-Za-z0-9][A-Za-z0-9!#$&^_.+-]{0,126});?$/;function ut(e){let n=e.indexOf(";"),t=n!==-1?e.slice(0,n).trim():e.trim(),r=lt.exec(t.toLowerCase().toLowerCase());if(!r)return;let a=r[1],o=r[2],s,l=o.lastIndexOf("+");return l!==-1&&(s=o.substring(l+1),o=o.substring(0,l)),{type:a,subtype:o,suffix:s}}async function ft(e){if(!e.ok)throw new Error(e.statusText);let n=e.headers.get("content-type");return n&&ct(n)?await e.json():await e.text()}function dt(e){return{data:e,hasMore:!1}}function xe(e,n){let{parseResponse:t,mapResult:r,initialData:a,execute:o,keepPreviousData:s,onError:l,onData:c,onWillExecute:m,failureToastOptions:p,...b}=n||{},x={initialData:a,execute:o,keepPreviousData:s,onError:l,onData:c,onWillExecute:m,failureToastOptions:p},v=w(t||ft),y=w(r||dt),d=(0,i.useRef)(null),g=(0,i.useRef)(null),S=typeof e=="function"?e({page:0}):void 0;(!d.current||typeof g.current>"u"||g.current!==S)&&(d.current=e),g.current=S;let R=(0,i.useRef)(null),$=(0,i.useCallback)((A,I)=>async V=>{let j=await fetch(A(V),{signal:R.current?.signal,...I}),G=await v.current(j);return y.current?.(G)},[v,y]),h=(0,i.useCallback)(async(A,I)=>{let V=await fetch(A,{signal:R.current?.signal,...I}),j=await v.current(V);return y.current(j)?.data},[v,y]),_=(0,i.useMemo)(()=>g.current?$:h,[g,h,$]);return ot(_,[d.current,b],{...x,internal_cacheKeySuffix:g.current+Z(y.current)+Z(v.current),abortable:R})}var ve=require("@raycast/api"),ht=(0,ve.getPreferenceValues)(),Nt=ht.apiKey,pt="https://api.nasa.gov",te="https://ll.thespacedevs.com/2.2.0",Se={APOD:`${pt}/planetary/apod?api_key=APIKEY`,RSS:"https://www.nasa.gov/news-release/feed/",ASTRONAUTS:`${te}/astronaut/?in_space=true&limit=100`,SPACECRAFTS:`${te}/spacecraft/?in_space=true&limit=100`,LAUNCHES:`${te}/launch/upcoming/?limit=100`},Ee={accept:"application/json"};var _e=require("@raycast/api"),Ae=require("react/jsx-runtime");function re({error:e}){let n=`  
  # An error occurred
  ${e.message}
  `;return(0,Ae.jsx)(_e.Detail,{markdown:n})}var T=require("@raycast/api");var Ut=F(Ne());function ze(e){let n=/P(?:(\d+)D)?T(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)S)?/,t=e.match(n);if(!t)throw new Error("Invalid duration format");let r=parseInt(t[1]||"0",10),a=parseInt(t[2]||"0",10),o=parseInt(t[3]||"0",10),s=parseInt(t[4]||"0",10);return r+" days, "+a+" hours, "+o+" minutes, "+s+" seconds"}var E=require("react/jsx-runtime");function he({spacecraft:e}){let n=`
  ![${e.name}](${e.spacecraft_config.image_url})
  
  ${e.description}
  `;return(0,E.jsx)(T.List.Item,{title:e.name,detail:(0,E.jsx)(T.List.Item.Detail,{markdown:n,metadata:(0,E.jsxs)(T.List.Item.Detail.Metadata,{children:[(0,E.jsx)(T.List.Item.Detail.Metadata.Label,{title:"Name ",text:e.name}),(0,E.jsx)(T.List.Item.Detail.Metadata.Label,{title:"Time in space \u{1F30C}",text:ze(e.time_in_space)}),(0,E.jsx)(T.List.Item.Detail.Metadata.Label,{title:"Type \u{1F680}",text:e.spacecraft_config.type.name}),(0,E.jsx)(T.List.Item.Detail.Metadata.Label,{title:"Agency \u{1F91D}",text:e.spacecraft_config.agency.name}),(0,E.jsx)(T.List.Item.Detail.Metadata.Label,{title:"Flights \u{1F680}",text:e.flights_count.toString()}),(0,E.jsx)(T.List.Item.Detail.Metadata.Label,{title:"Landings \u{1F6EC}",text:e.mission_ends_count.toString()})]})})})}var ee=require("react/jsx-runtime");function Ve(){let{isLoading:e,data:n,error:t}=xe(Se.SPACECRAFTS,{headers:Ee,mapResult(r){return{data:r}},initialData:[]});return t?(0,ee.jsx)(re,{error:t}):(0,ee.jsx)(We.List,{isShowingDetail:!0,isLoading:e,children:!e&&n.results.map(r=>(0,ee.jsx)(he,{spacecraft:r},r.id))})}
