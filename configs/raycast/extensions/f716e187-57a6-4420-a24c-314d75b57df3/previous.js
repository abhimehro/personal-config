"use strict";var s=Object.defineProperty;var u=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var h=Object.prototype.hasOwnProperty;var m=(t,e)=>{for(var n in e)s(t,n,{get:e[n],enumerable:!0})},f=(t,e,n,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of p(e))!h.call(t,a)&&a!==n&&s(t,a,{get:()=>e[a],enumerable:!(o=u(e,a))||o.enumerable});return t};var g=t=>f(s({},"__esModule",{value:!0}),t);var w={};m(w,{default:()=>d});module.exports=g(w);var c=require("@raycast/api");var r=require("@raycast/api");var S="http://localhost:3049",y=1e3;var i=(t,e="info")=>{console.log(`[TIDAL] [${e.toUpperCase()}] ${t}`)},v=()=>{let{localApiAuthToken:t}=(0,r.getPreferenceValues)();if(!t){let e="Auth token not found in Raycast preferences.";throw i(e,"error"),new Error(e)}return{"Content-Type":"application/json",Authorization:`Bearer ${t}`}};var l=async(t,e)=>{if(e&&e!=="connected")return(0,r.showToast)({style:r.Toast.Style.Failure,title:"Not Connected",message:"Server connection lost"}),!1;try{let n=await fetch(`${S}/send-command`,{method:"POST",headers:v(),body:JSON.stringify({action:t}),signal:AbortSignal.timeout(y)});if(n.ok)return i(`Command sent: ${t}`),!0;{let o=await n.text();throw new Error(`Command failed: ${n.status} - ${o}`)}}catch(n){return i(`Command error: ${n}`,"error"),(0,r.showToast)({style:r.Toast.Style.Failure,title:"Command Failed",message:String(n)}),!1}};async function d(){await l("previous")?await(0,c.showHUD)("\u23EE\uFE0F Previous track"):await(0,c.showHUD)("\u274C Failed to skip to previous track")}
