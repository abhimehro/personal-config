"use strict";var sn=Object.create;var mt=Object.defineProperty;var nn=Object.getOwnPropertyDescriptor;var an=Object.getOwnPropertyNames;var rn=Object.getPrototypeOf,on=Object.prototype.hasOwnProperty;var cn=(a,r)=>()=>(r||a((r={exports:{}}).exports,r),r.exports),ln=(a,r)=>{for(var l in r)mt(a,l,{get:r[l],enumerable:!0})},Xs=(a,r,l,f)=>{if(r&&typeof r=="object"||typeof r=="function")for(let p of an(r))!on.call(a,p)&&p!==l&&mt(a,p,{get:()=>r[p],enumerable:!(f=nn(r,p))||f.enumerable});return a};var ie=(a,r,l)=>(l=a!=null?sn(rn(a)):{},Xs(r||!a||!a.__esModule?mt(l,"default",{value:a,enumerable:!0}):l,a)),un=a=>Xs(mt({},"__esModule",{value:!0}),a);var ri=cn((yt,ai)=>{(function(a,r){typeof yt=="object"&&typeof ai<"u"?r(yt):typeof define=="function"&&define.amd?define("exifr",["exports"],r):r((a=typeof globalThis<"u"?globalThis:a||self).exifr={})})(yt,(function(a){"use strict";var r=typeof self<"u"?self:global;let l=typeof navigator<"u",f=l&&typeof HTMLImageElement>"u",p=!(typeof global>"u"||typeof process>"u"||!process.versions||!process.versions.node),h=r.Buffer,w=r.BigInt,D=!!h,L=i=>i;function k(i,e=L){if(p)try{return typeof require=="function"?Promise.resolve(e(require(i))):import(i).then(e)}catch{console.warn(`Couldn't load ${i}`)}}let re=r.fetch,b=i=>re=i;if(!r.fetch){let i=k("http",(s=>s)),e=k("https",(s=>s)),t=(s,{headers:n}={})=>new Promise((async(o,c)=>{let{port:u,hostname:g,pathname:C,protocol:v,search:x}=new URL(s),K={method:"GET",hostname:g,path:encodeURI(C)+x,headers:n};u!==""&&(K.port=Number(u));let ge=(v==="https:"?await e:await i).request(K,(ye=>{if(ye.statusCode===301||ye.statusCode===302){let qt=new URL(ye.headers.location,s).toString();return t(qt,{headers:n}).then(o).catch(c)}o({status:ye.statusCode,arrayBuffer:()=>new Promise((qt=>{let qs=[];ye.on("data",(tn=>qs.push(tn))),ye.on("end",(()=>qt(Buffer.concat(qs))))}))})}));ge.on("error",c),ge.end()}));b(t)}function m(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}let U=i=>Ye(i)?void 0:i,Ve=i=>i!==void 0;function Ye(i){return i===void 0||(i instanceof Map?i.size===0:Object.values(i).filter(Ve).length===0)}function I(i){let e=new Error(i);throw delete e.stack,e}function T(i){return(i=(function(e){for(;e.endsWith("\0");)e=e.slice(0,-1);return e})(i).trim())===""?void 0:i}function A(i){let e=(function(t){let s=0;return t.ifd0.enabled&&(s+=1024),t.exif.enabled&&(s+=2048),t.makerNote&&(s+=2048),t.userComment&&(s+=1024),t.gps.enabled&&(s+=512),t.interop.enabled&&(s+=100),t.ifd1.enabled&&(s+=1024),s+2048})(i);return i.jfif.enabled&&(e+=50),i.xmp.enabled&&(e+=2e4),i.iptc.enabled&&(e+=14e3),i.icc.enabled&&(e+=6e3),e}let B=i=>String.fromCharCode.apply(null,i),oe=typeof TextDecoder<"u"?new TextDecoder("utf-8"):void 0;function H(i){return oe?oe.decode(i):D?Buffer.from(i).toString("utf8"):decodeURIComponent(escape(B(i)))}class M{static from(e,t){return e instanceof this&&e.le===t?e:new M(e,void 0,void 0,t)}constructor(e,t=0,s,n){if(typeof n=="boolean"&&(this.le=n),Array.isArray(e)&&(e=new Uint8Array(e)),e===0)this.byteOffset=0,this.byteLength=0;else if(e instanceof ArrayBuffer){s===void 0&&(s=e.byteLength-t);let o=new DataView(e,t,s);this._swapDataView(o)}else if(e instanceof Uint8Array||e instanceof DataView||e instanceof M){s===void 0&&(s=e.byteLength-t),(t+=e.byteOffset)+s>e.byteOffset+e.byteLength&&I("Creating view outside of available memory in ArrayBuffer");let o=new DataView(e.buffer,t,s);this._swapDataView(o)}else if(typeof e=="number"){let o=new DataView(new ArrayBuffer(e));this._swapDataView(o)}else I("Invalid input argument for BufferView: "+e)}_swapArrayBuffer(e){this._swapDataView(new DataView(e))}_swapBuffer(e){this._swapDataView(new DataView(e.buffer,e.byteOffset,e.byteLength))}_swapDataView(e){this.dataView=e,this.buffer=e.buffer,this.byteOffset=e.byteOffset,this.byteLength=e.byteLength}_lengthToEnd(e){return this.byteLength-e}set(e,t,s=M){return e instanceof DataView||e instanceof M?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer&&(e=new Uint8Array(e)),e instanceof Uint8Array||I("BufferView.set(): Invalid data argument."),this.toUint8().set(e,t),new s(this,t,e.byteLength)}subarray(e,t){return t=t||this._lengthToEnd(e),new M(this,e,t)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(e,t){return new Uint8Array(this.buffer,this.byteOffset+e,t)}getString(e=0,t=this.byteLength){return H(this.getUint8Array(e,t))}getLatin1String(e=0,t=this.byteLength){let s=this.getUint8Array(e,t);return B(s)}getUnicodeString(e=0,t=this.byteLength){let s=[];for(let n=0;n<t&&e+n<this.byteLength;n+=2)s.push(this.getUint16(e+n));return B(s)}getInt8(e){return this.dataView.getInt8(e)}getUint8(e){return this.dataView.getUint8(e)}getInt16(e,t=this.le){return this.dataView.getInt16(e,t)}getInt32(e,t=this.le){return this.dataView.getInt32(e,t)}getUint16(e,t=this.le){return this.dataView.getUint16(e,t)}getUint32(e,t=this.le){return this.dataView.getUint32(e,t)}getFloat32(e,t=this.le){return this.dataView.getFloat32(e,t)}getFloat64(e,t=this.le){return this.dataView.getFloat64(e,t)}getFloat(e,t=this.le){return this.dataView.getFloat32(e,t)}getDouble(e,t=this.le){return this.dataView.getFloat64(e,t)}getUintBytes(e,t,s){switch(t){case 1:return this.getUint8(e,s);case 2:return this.getUint16(e,s);case 4:return this.getUint32(e,s);case 8:return this.getUint64&&this.getUint64(e,s)}}getUint(e,t,s){switch(t){case 8:return this.getUint8(e,s);case 16:return this.getUint16(e,s);case 32:return this.getUint32(e,s);case 64:return this.getUint64&&this.getUint64(e,s)}}toString(e){return this.dataView.toString(e,this.constructor.name)}ensureChunk(){}}function Rt(i,e){I(`${i} '${e}' was not loaded, try using full build of exifr.`)}class Ft extends Map{constructor(e){super(),this.kind=e}get(e,t){return this.has(e)||Rt(this.kind,e),t&&(e in t||(function(s,n){I(`Unknown ${s} '${n}'.`)})(this.kind,e),t[e].enabled||Rt(this.kind,e)),super.get(e)}keyList(){return Array.from(this.keys())}}var J=new Ft("file parser"),F=new Ft("segment parser"),q=new Ft("file reader");let ms="Invalid input argument";function gs(i,e){return typeof i=="string"?ys(i,e):l&&!f&&i instanceof HTMLImageElement?ys(i.src,e):i instanceof Uint8Array||i instanceof ArrayBuffer||i instanceof DataView?new M(i):l&&i instanceof Blob?$t(i,e,"blob",Ae):void I(ms)}function ys(i,e){return(t=i).startsWith("data:")||t.length>1e4?Tt(i,e,"base64"):p&&i.includes("://")?$t(i,e,"url",ke):p?Tt(i,e,"fs"):l?$t(i,e,"url",ke):void I(ms);var t}async function $t(i,e,t,s){return q.has(t)?Tt(i,e,t):s?(async function(n,o){let c=await o(n);return new M(c)})(i,s):void I(`Parser ${t} is not loaded`)}async function Tt(i,e,t){let s=new(q.get(t))(i,e);return await s.read(),s}let ke=i=>re(i).then((e=>e.arrayBuffer())),Ae=i=>new Promise(((e,t)=>{let s=new FileReader;s.onloadend=()=>e(s.result||new ArrayBuffer),s.onerror=t,s.readAsArrayBuffer(i)}));class Mi extends Map{get tagKeys(){return this.allKeys||(this.allKeys=Array.from(this.keys())),this.allKeys}get tagValues(){return this.allValues||(this.allValues=Array.from(this.values())),this.allValues}}function E(i,e,t){let s=new Mi;for(let[n,o]of t)s.set(n,o);if(Array.isArray(e))for(let n of e)i.set(n,s);else i.set(e,s);return s}function xe(i,e,t){let s,n=i.get(e);for(s of t)n.set(s[0],s[1])}let O=new Map,W=new Map,ce=new Map,Ze=37500,Qe=37510,et=700,tt=33723,st=34675,Et=34665,Mt=34853,Me=40965,le=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],Re=["jfif","xmp","icc","iptc","ihdr"],De=["tiff",...Re],$=["ifd0","ifd1","exif","gps","interop"],ue=[...De,...$],de=["makerNote","userComment"],Fe=["translateKeys","translateValues","reviveValues","multiSegment"],fe=[...Fe,"sanitize","mergeOutput","silentErrors"];class bs{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}}class _e extends bs{get needed(){return this.enabled||this.deps.size>0}constructor(e,t,s,n){if(super(),m(this,"enabled",!1),m(this,"skip",new Set),m(this,"pick",new Set),m(this,"deps",new Set),m(this,"translateKeys",!1),m(this,"translateValues",!1),m(this,"reviveValues",!1),this.key=e,this.enabled=t,this.parse=this.enabled,this.applyInheritables(n),this.canBeFiltered=$.includes(e),this.canBeFiltered&&(this.dict=O.get(e)),s!==void 0)if(Array.isArray(s))this.parse=this.enabled=!0,this.canBeFiltered&&s.length>0&&this.translateTagSet(s,this.pick);else if(typeof s=="object"){if(this.enabled=!0,this.parse=s.parse!==!1,this.canBeFiltered){let{pick:o,skip:c}=s;o&&o.length>0&&this.translateTagSet(o,this.pick),c&&c.length>0&&this.translateTagSet(c,this.skip)}this.applyInheritables(s)}else s===!0||s===!1?this.parse=this.enabled=s:I(`Invalid options argument: ${s}`)}applyInheritables(e){let t,s;for(t of Fe)s=e[t],s!==void 0&&(this[t]=s)}translateTagSet(e,t){if(this.dict){let s,n,{tagKeys:o,tagValues:c}=this.dict;for(s of e)typeof s=="string"?(n=c.indexOf(s),n===-1&&(n=o.indexOf(Number(s))),n!==-1&&t.add(Number(o[n]))):t.add(s)}else for(let s of e)t.add(s)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,it(this.pick,this.deps)):this.enabled&&this.pick.size>0&&it(this.pick,this.deps)}}var V={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},Ss=new Map;class pe extends bs{static useCached(e){let t=Ss.get(e);return t!==void 0||(t=new this(e),Ss.set(e,t)),t}constructor(e){super(),e===!0?this.setupFromTrue():e===void 0?this.setupFromUndefined():Array.isArray(e)?this.setupFromArray(e):typeof e=="object"?this.setupFromObject(e):I(`Invalid options argument ${e}`),this.firstChunkSize===void 0&&(this.firstChunkSize=l?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let e;for(e of le)this[e]=V[e];for(e of fe)this[e]=V[e];for(e of de)this[e]=V[e];for(e of ue)this[e]=new _e(e,V[e],void 0,this)}setupFromTrue(){let e;for(e of le)this[e]=V[e];for(e of fe)this[e]=V[e];for(e of de)this[e]=!0;for(e of ue)this[e]=new _e(e,!0,void 0,this)}setupFromArray(e){let t;for(t of le)this[t]=V[t];for(t of fe)this[t]=V[t];for(t of de)this[t]=V[t];for(t of ue)this[t]=new _e(t,!1,void 0,this);this.setupGlobalFilters(e,void 0,$)}setupFromObject(e){let t;for(t of($.ifd0=$.ifd0||$.image,$.ifd1=$.ifd1||$.thumbnail,Object.assign(this,e),le))this[t]=Ot(e[t],V[t]);for(t of fe)this[t]=Ot(e[t],V[t]);for(t of de)this[t]=Ot(e[t],V[t]);for(t of De)this[t]=new _e(t,V[t],e[t],this);for(t of $)this[t]=new _e(t,V[t],e[t],this.tiff);this.setupGlobalFilters(e.pick,e.skip,$,ue),e.tiff===!0?this.batchEnableWithBool($,!0):e.tiff===!1?this.batchEnableWithUserValue($,e):Array.isArray(e.tiff)?this.setupGlobalFilters(e.tiff,void 0,$):typeof e.tiff=="object"&&this.setupGlobalFilters(e.tiff.pick,e.tiff.skip,$)}batchEnableWithBool(e,t){for(let s of e)this[s].enabled=t}batchEnableWithUserValue(e,t){for(let s of e){let n=t[s];this[s].enabled=n!==!1&&n!==void 0}}setupGlobalFilters(e,t,s,n=s){if(e&&e.length){for(let c of n)this[c].enabled=!1;let o=ws(e,s);for(let[c,u]of o)it(this[c].pick,u),this[c].enabled=!0}else if(t&&t.length){let o=ws(t,s);for(let[c,u]of o)it(this[c].skip,u)}}filterNestedSegmentTags(){let{ifd0:e,exif:t,xmp:s,iptc:n,icc:o}=this;this.makerNote?t.deps.add(Ze):t.skip.add(Ze),this.userComment?t.deps.add(Qe):t.skip.add(Qe),s.enabled||e.skip.add(et),n.enabled||e.skip.add(tt),o.enabled||e.skip.add(st)}traverseTiffDependencyTree(){let{ifd0:e,exif:t,gps:s,interop:n}=this;n.needed&&(t.deps.add(Me),e.deps.add(Me)),t.needed&&e.deps.add(Et),s.needed&&e.deps.add(Mt),this.tiff.enabled=$.some((o=>this[o].enabled===!0))||this.makerNote||this.userComment;for(let o of $)this[o].finalizeFilters()}get onlyTiff(){return!Re.map((e=>this[e].enabled)).some((e=>e===!0))&&this.tiff.enabled}checkLoadedPlugins(){for(let e of De)this[e].enabled&&!F.has(e)&&Rt("segment parser",e)}}function ws(i,e){let t,s,n,o,c=[];for(n of e){for(o of(t=O.get(n),s=[],t))(i.includes(o[0])||i.includes(o[1]))&&s.push(o[0]);s.length&&c.push([n,s])}return c}function Ot(i,e){return i!==void 0?i:e!==void 0?e:void 0}function it(i,e){for(let t of e)i.add(t)}m(pe,"default",V);class he{constructor(e){m(this,"parsers",{}),m(this,"output",{}),m(this,"errors",[]),m(this,"pushToErrors",(t=>this.errors.push(t))),this.options=pe.useCached(e)}async read(e){this.file=await gs(e,this.options)}setup(){if(this.fileParser)return;let{file:e}=this,t=e.getUint16(0);for(let[s,n]of J)if(n.canHandle(e,t))return this.fileParser=new n(this.options,this.file,this.parsers),e[s]=!0;this.file.close&&this.file.close(),I("Unknown file format")}async parse(){let{output:e,errors:t}=this;return this.setup(),this.options.silentErrors?(await this.executeParsers().catch(this.pushToErrors),t.push(...this.fileParser.errors)):await this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&t.length>0&&(e.errors=t),U(e)}async executeParsers(){let{output:e}=this;await this.fileParser.parse();let t=Object.values(this.parsers).map((async s=>{let n=await s.parse();s.assignToOutput(e,n)}));this.options.silentErrors&&(t=t.map((s=>s.catch(this.pushToErrors)))),await Promise.all(t)}async extractThumbnail(){this.setup();let{options:e,file:t}=this,s=F.get("tiff",e);var n;if(t.tiff?n={start:0,type:"tiff"}:t.jpeg&&(n=await this.fileParser.getOrFindSegment("tiff")),n===void 0)return;let o=await this.fileParser.ensureSegmentChunk(n),c=this.parsers.tiff=new s(o,e,t),u=await c.extractThumbnail();return t.close&&t.close(),u}}async function We(i,e){let t=new he(e);return await t.read(i),t.parse()}var Oi=Object.freeze({__proto__:null,parse:We,Exifr:he,fileParsers:J,segmentParsers:F,fileReaders:q,tagKeys:O,tagValues:W,tagRevivers:ce,createDictionary:E,extendDictionary:xe,fetchUrlAsArrayBuffer:ke,readBlobAsArrayBuffer:Ae,chunkedProps:le,otherSegments:Re,segments:De,tiffBlocks:$,segmentsAndBlocks:ue,tiffExtractables:de,inheritables:Fe,allFormatters:fe,Options:pe});class nt{constructor(e,t,s){m(this,"errors",[]),m(this,"ensureSegmentChunk",(async n=>{let o=n.start,c=n.size||65536;if(this.file.chunked)if(this.file.available(o,c))n.chunk=this.file.subarray(o,c);else try{n.chunk=await this.file.readChunk(o,c)}catch(u){I(`Couldn't read segment: ${JSON.stringify(n)}. ${u.message}`)}else this.file.byteLength>o+c?n.chunk=this.file.subarray(o,c):n.size===void 0?n.chunk=this.file.subarray(o):I("Segment unreachable: "+JSON.stringify(n));return n.chunk})),this.extendOptions&&this.extendOptions(e),this.options=e,this.file=t,this.parsers=s}injectSegment(e,t){this.options[e].enabled&&this.createParser(e,t)}createParser(e,t){let s=new(F.get(e))(t,this.options,this.file);return this.parsers[e]=s}createParsers(e){for(let t of e){let{type:s,chunk:n}=t,o=this.options[s];if(o&&o.enabled){let c=this.parsers[s];c&&c.append||c||this.createParser(s,n)}}}async readSegments(e){let t=e.map(this.ensureSegmentChunk);await Promise.all(t)}}class X{static findPosition(e,t){let s=e.getUint16(t+2)+2,n=typeof this.headerLength=="function"?this.headerLength(e,t,s):this.headerLength,o=t+n,c=s-n;return{offset:t,length:s,headerLength:n,start:o,size:c,end:o+c}}static parse(e,t={}){return new this(e,new pe({[this.type]:t}),e).parse()}normalizeInput(e){return e instanceof M?e:new M(e)}constructor(e,t={},s){m(this,"errors",[]),m(this,"raw",new Map),m(this,"handleError",(n=>{if(!this.options.silentErrors)throw n;this.errors.push(n.message)})),this.chunk=this.normalizeInput(e),this.file=s,this.type=this.constructor.type,this.globalOptions=this.options=t,this.localOptions=t[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(e,t){let s=ce.get(t),n=W.get(t),o=O.get(t),c=this.options[t],u=c.reviveValues&&!!s,g=c.translateValues&&!!n,C=c.translateKeys&&!!o,v={};for(let[x,K]of e)u&&s.has(x)?K=s.get(x)(K):g&&n.has(x)&&(K=this.translateValue(K,n.get(x))),C&&o.has(x)&&(x=o.get(x)||x),v[x]=K;return v}translateValue(e,t){return t[e]||t.DEFAULT||e}assignToOutput(e,t){this.assignObjectToOutput(e,this.constructor.type,t)}assignObjectToOutput(e,t,s){if(this.globalOptions.mergeOutput)return Object.assign(e,s);e[t]?Object.assign(e[t],s):e[t]=s}}m(X,"headerLength",4),m(X,"type",void 0),m(X,"multiSegment",!1),m(X,"canHandle",(()=>!1));function Li(i){return i===192||i===194||i===196||i===219||i===221||i===218||i===254}function Ui(i){return i>=224&&i<=239}function Ni(i,e,t){for(let[s,n]of F)if(n.canHandle(i,e,t))return s}class Cs extends nt{constructor(...e){super(...e),m(this,"appSegments",[]),m(this,"jpegSegments",[]),m(this,"unknownSegments",[])}static canHandle(e,t){return t===65496}async parse(){await this.findAppSegments(),await this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)}setupSegmentFinderArgs(e){e===!0?(this.findAll=!0,this.wanted=new Set(F.keyList())):(e=e===void 0?F.keyList().filter((t=>this.options[t].enabled)):e.filter((t=>this.options[t].enabled&&F.has(t))),this.findAll=!1,this.remaining=new Set(e),this.wanted=new Set(e)),this.unfinishedMultiSegment=!1}async findAppSegments(e=0,t){this.setupSegmentFinderArgs(t);let{file:s,findAll:n,wanted:o,remaining:c}=this;if(!n&&this.file.chunked&&(n=Array.from(o).some((u=>{let g=F.get(u),C=this.options[u];return g.multiSegment&&C.multiSegment})),n&&await this.file.readWhole()),e=this.findAppSegmentsInRange(e,s.byteLength),!this.options.onlyTiff&&s.chunked){let u=!1;for(;c.size>0&&!u&&(s.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:g}=s,C=this.appSegments.some((v=>!this.file.available(v.offset||v.start,v.length||v.size)));if(u=e>g&&!C?!await s.readNextChunk(e):!await s.readNextChunk(g),(e=this.findAppSegmentsInRange(e,s.byteLength))===void 0)return}}}findAppSegmentsInRange(e,t){t-=2;let s,n,o,c,u,g,{file:C,findAll:v,wanted:x,remaining:K,options:ge}=this;for(;e<t;e++)if(C.getUint8(e)===255){if(s=C.getUint8(e+1),Ui(s)){if(n=C.getUint16(e+2),o=Ni(C,e,n),o&&x.has(o)&&(c=F.get(o),u=c.findPosition(C,e),g=ge[o],u.type=o,this.appSegments.push(u),!v&&(c.multiSegment&&g.multiSegment?(this.unfinishedMultiSegment=u.chunkNumber<u.chunkCount,this.unfinishedMultiSegment||K.delete(o)):K.delete(o),K.size===0)))break;ge.recordUnknownSegments&&(u=X.findPosition(C,e),u.marker=s,this.unknownSegments.push(u)),e+=n+1}else if(Li(s)){if(n=C.getUint16(e+2),s===218&&ge.stopAfterSos!==!1)return;ge.recordJpegSegments&&this.jpegSegments.push({offset:e,length:n,marker:s}),e+=n+1}}return e}mergeMultiSegments(){if(!this.appSegments.some((t=>t.multiSegment)))return;let e=(function(t,s){let n,o,c,u=new Map;for(let g=0;g<t.length;g++)n=t[g],o=n[s],u.has(o)?c=u.get(o):u.set(o,c=[]),c.push(n);return Array.from(u)})(this.appSegments,"type");this.mergedAppSegments=e.map((([t,s])=>{let n=F.get(t,this.options);return n.handleMultiSegments?{type:t,chunk:n.handleMultiSegments(s)}:s[0]}))}getSegment(e){return this.appSegments.find((t=>t.type===e))}async getOrFindSegment(e){let t=this.getSegment(e);return t===void 0&&(await this.findAppSegments(0,[e]),t=this.getSegment(e)),t}}m(Cs,"type","jpeg"),J.set("jpeg",Cs);let ji=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4];class Bi extends X{parseHeader(){var e=this.chunk.getUint16();e===18761?this.le=!0:e===19789&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(e,t,s=new Map){let{pick:n,skip:o}=this.options[t];n=new Set(n);let c=n.size>0,u=o.size===0,g=this.chunk.getUint16(e);e+=2;for(let C=0;C<g;C++){let v=this.chunk.getUint16(e);if(c){if(n.has(v)&&(s.set(v,this.parseTag(e,v,t)),n.delete(v),n.size===0))break}else!u&&o.has(v)||s.set(v,this.parseTag(e,v,t));e+=12}return s}parseTag(e,t,s){let{chunk:n}=this,o=n.getUint16(e+2),c=n.getUint32(e+4),u=ji[o];if(u*c<=4?e+=8:e=n.getUint32(e+8),(o<1||o>13)&&I(`Invalid TIFF value type. block: ${s.toUpperCase()}, tag: ${t.toString(16)}, type: ${o}, offset ${e}`),e>n.byteLength&&I(`Invalid TIFF value offset. block: ${s.toUpperCase()}, tag: ${t.toString(16)}, type: ${o}, offset ${e} is outside of chunk size ${n.byteLength}`),o===1)return n.getUint8Array(e,c);if(o===2)return T(n.getString(e,c));if(o===7)return n.getUint8Array(e,c);if(c===1)return this.parseTagValue(o,e);{let g=new((function(v){switch(v){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 10:return Array;case 11:return Float32Array;case 12:return Float64Array;default:return Array}})(o))(c),C=u;for(let v=0;v<c;v++)g[v]=this.parseTagValue(o,e),e+=C;return g}}parseTagValue(e,t){let{chunk:s}=this;switch(e){case 1:return s.getUint8(t);case 3:return s.getUint16(t);case 4:return s.getUint32(t);case 5:return s.getUint32(t)/s.getUint32(t+4);case 6:return s.getInt8(t);case 8:return s.getInt16(t);case 9:return s.getInt32(t);case 10:return s.getInt32(t)/s.getInt32(t+4);case 11:return s.getFloat(t);case 12:return s.getDouble(t);case 13:return s.getUint32(t);default:I(`Invalid tiff type ${e}`)}}}class Lt extends Bi{static canHandle(e,t){return e.getUint8(t+1)===225&&e.getUint32(t+4)===1165519206&&e.getUint16(t+8)===0}async parse(){this.parseHeader();let{options:e}=this;return e.ifd0.enabled&&await this.parseIfd0Block(),e.exif.enabled&&await this.safeParse("parseExifBlock"),e.gps.enabled&&await this.safeParse("parseGpsBlock"),e.interop.enabled&&await this.safeParse("parseInteropBlock"),e.ifd1.enabled&&await this.safeParse("parseThumbnailBlock"),this.createOutput()}safeParse(e){let t=this[e]();return t.catch!==void 0&&(t=t.catch(this.handleError)),t}findIfd0Offset(){this.ifd0Offset===void 0&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(this.ifd1Offset===void 0){this.findIfd0Offset();let e=this.chunk.getUint16(this.ifd0Offset),t=this.ifd0Offset+2+12*e;this.ifd1Offset=this.chunk.getUint32(t)}}parseBlock(e,t){let s=new Map;return this[t]=s,this.parseTags(e,t,s),s}async parseIfd0Block(){if(this.ifd0)return;let{file:e}=this;this.findIfd0Offset(),this.ifd0Offset<8&&I("Malformed EXIF data"),!e.chunked&&this.ifd0Offset>e.byteLength&&I(`IFD0 offset points to outside of file.
this.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${e.byteLength}`),e.tiff&&await e.ensureChunk(this.ifd0Offset,A(this.options));let t=this.parseBlock(this.ifd0Offset,"ifd0");return t.size!==0?(this.exifOffset=t.get(Et),this.interopOffset=t.get(Me),this.gpsOffset=t.get(Mt),this.xmp=t.get(et),this.iptc=t.get(tt),this.icc=t.get(st),this.options.sanitize&&(t.delete(Et),t.delete(Me),t.delete(Mt),t.delete(et),t.delete(tt),t.delete(st)),t):void 0}async parseExifBlock(){if(this.exif||(this.ifd0||await this.parseIfd0Block(),this.exifOffset===void 0))return;this.file.tiff&&await this.file.ensureChunk(this.exifOffset,A(this.options));let e=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=e.get(Me)),this.makerNote=e.get(Ze),this.userComment=e.get(Qe),this.options.sanitize&&(e.delete(Me),e.delete(Ze),e.delete(Qe)),this.unpack(e,41728),this.unpack(e,41729),e}unpack(e,t){let s=e.get(t);s&&s.length===1&&e.set(t,s[0])}async parseGpsBlock(){if(this.gps||(this.ifd0||await this.parseIfd0Block(),this.gpsOffset===void 0))return;let e=this.parseBlock(this.gpsOffset,"gps");return e&&e.has(2)&&e.has(4)&&(e.set("latitude",vs(...e.get(2),e.get(1))),e.set("longitude",vs(...e.get(4),e.get(3)))),e}async parseInteropBlock(){if(!this.interop&&(this.ifd0||await this.parseIfd0Block(),this.interopOffset!==void 0||this.exif||await this.parseExifBlock(),this.interopOffset!==void 0))return this.parseBlock(this.interopOffset,"interop")}async parseThumbnailBlock(e=!1){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||e))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1}async extractThumbnail(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||await this.parseThumbnailBlock(!0),this.ifd1===void 0)return;let e=this.ifd1.get(513),t=this.ifd1.get(514);return this.chunk.getUint8Array(e,t)}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let e,t,s,n={};for(t of $)if(e=this[t],!Ye(e))if(s=this.canTranslate?this.translateBlock(e,t):Object.fromEntries(e),this.options.mergeOutput){if(t==="ifd1")continue;Object.assign(n,s)}else n[t]=s;return this.makerNote&&(n.makerNote=this.makerNote),this.userComment&&(n.userComment=this.userComment),n}assignToOutput(e,t){if(this.globalOptions.mergeOutput)Object.assign(e,t);else for(let[s,n]of Object.entries(t))this.assignObjectToOutput(e,s,n)}}function vs(i,e,t,s){var n=i+e/60+t/3600;return s!=="S"&&s!=="W"||(n*=-1),n}m(Lt,"type","tiff"),m(Lt,"headerLength",10),F.set("tiff",Lt);var Ki=Object.freeze({__proto__:null,default:Oi,Exifr:he,fileParsers:J,segmentParsers:F,fileReaders:q,tagKeys:O,tagValues:W,tagRevivers:ce,createDictionary:E,extendDictionary:xe,fetchUrlAsArrayBuffer:ke,readBlobAsArrayBuffer:Ae,chunkedProps:le,otherSegments:Re,segments:De,tiffBlocks:$,segmentsAndBlocks:ue,tiffExtractables:de,inheritables:Fe,allFormatters:fe,Options:pe,parse:We});let Ut={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1},at=Object.assign({},Ut,{firstChunkSize:4e4,gps:[1,2,3,4]});async function Nt(i){let e=new he(at);await e.read(i);let t=await e.parse();if(t&&t.gps){let{latitude:s,longitude:n}=t.gps;return{latitude:s,longitude:n}}}let rt=Object.assign({},Ut,{tiff:!1,ifd1:!0,mergeOutput:!1});async function jt(i){let e=new he(rt);await e.read(i);let t=await e.extractThumbnail();return t&&D?h.from(t):t}async function Bt(i){let e=await this.thumbnail(i);if(e!==void 0){let t=new Blob([e]);return URL.createObjectURL(t)}}let ot=Object.assign({},Ut,{firstChunkSize:4e4,ifd0:[274]});async function ct(i){let e=new he(ot);await e.read(i);let t=await e.parse();if(t&&t.ifd0)return t.ifd0[274]}let lt=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}});if(a.rotateCanvas=!0,a.rotateCss=!0,typeof navigator=="object"){let i=navigator.userAgent;if(i.includes("iPad")||i.includes("iPhone")){let e=i.match(/OS (\d+)_(\d+)/);if(e){let[,t,s]=e,n=Number(t)+.1*Number(s);a.rotateCanvas=n<13.4,a.rotateCss=!1}}else if(i.includes("OS X 10")){let[,e]=i.match(/OS X 10[_.](\d+)/);a.rotateCanvas=a.rotateCss=Number(e)<15}if(i.includes("Chrome/")){let[,e]=i.match(/Chrome\/(\d+)/);a.rotateCanvas=a.rotateCss=Number(e)<81}else if(i.includes("Firefox/")){let[,e]=i.match(/Firefox\/(\d+)/);a.rotateCanvas=a.rotateCss=Number(e)<77}}async function Kt(i){let e=await ct(i);return Object.assign({canvas:a.rotateCanvas,css:a.rotateCss},lt[e])}class zi extends M{constructor(...e){super(...e),m(this,"ranges",new Vi),this.byteLength!==0&&this.ranges.add(0,this.byteLength)}_tryExtend(e,t,s){if(e===0&&this.byteLength===0&&s){let n=new DataView(s.buffer||s,s.byteOffset,s.byteLength);this._swapDataView(n)}else{let n=e+t;if(n>this.byteLength){let{dataView:o}=this._extend(n);this._swapDataView(o)}}}_extend(e){let t;t=D?h.allocUnsafe(e):new Uint8Array(e);let s=new DataView(t.buffer,t.byteOffset,t.byteLength);return t.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:t,dataView:s}}subarray(e,t,s=!1){return t=t||this._lengthToEnd(e),s&&this._tryExtend(e,t),this.ranges.add(e,t),super.subarray(e,t)}set(e,t,s=!1){s&&this._tryExtend(t,e.byteLength,e);let n=super.set(e,t);return this.ranges.add(t,n.byteLength),n}async ensureChunk(e,t){this.chunked&&(this.ranges.available(e,t)||await this.readChunk(e,t))}available(e,t){return this.ranges.available(e,t)}}class Vi{constructor(){m(this,"list",[])}get length(){return this.list.length}add(e,t,s=0){let n=e+t,o=this.list.filter((c=>ks(e,c.offset,n)||ks(e,c.end,n)));if(o.length>0){e=Math.min(e,...o.map((u=>u.offset))),n=Math.max(n,...o.map((u=>u.end))),t=n-e;let c=o.shift();c.offset=e,c.length=t,c.end=n,this.list=this.list.filter((u=>!o.includes(u)))}else this.list.push({offset:e,length:t,end:n})}available(e,t){let s=e+t;return this.list.some((n=>n.offset<=e&&s<=n.end))}}function ks(i,e,t){return i<=e&&e<=t}class ut extends zi{constructor(e,t){super(0),m(this,"chunksRead",0),this.input=e,this.options=t}async readWhole(){this.chunked=!1,await this.readChunk(this.nextChunkOffset)}async readChunked(){this.chunked=!0,await this.readChunk(0,this.options.firstChunkSize)}async readNextChunk(e=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let t=this.options.chunkSize,s=await this.readChunk(e,t);return!!s&&s.byteLength===t}async readChunk(e,t){if(this.chunksRead++,(t=this.safeWrapAddress(e,t))!==0)return this._readChunk(e,t)}safeWrapAddress(e,t){return this.size!==void 0&&e+t>this.size?Math.max(0,this.size-e):t}get nextChunkOffset(){if(this.ranges.list.length!==0)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return this.size!==void 0&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}}q.set("blob",class extends ut{async readWhole(){this.chunked=!1;let i=await Ae(this.input);this._swapArrayBuffer(i)}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}async _readChunk(i,e){let t=e?i+e:void 0,s=this.input.slice(i,t),n=await Ae(s);return this.set(n,i,!0)}});var _i=Object.freeze({__proto__:null,default:Ki,Exifr:he,fileParsers:J,segmentParsers:F,fileReaders:q,tagKeys:O,tagValues:W,tagRevivers:ce,createDictionary:E,extendDictionary:xe,fetchUrlAsArrayBuffer:ke,readBlobAsArrayBuffer:Ae,chunkedProps:le,otherSegments:Re,segments:De,tiffBlocks:$,segmentsAndBlocks:ue,tiffExtractables:de,inheritables:Fe,allFormatters:fe,Options:pe,parse:We,gpsOnlyOptions:at,gps:Nt,thumbnailOnlyOptions:rt,thumbnail:jt,thumbnailUrl:Bt,orientationOnlyOptions:ot,orientation:ct,rotations:lt,get rotateCanvas(){return a.rotateCanvas},get rotateCss(){return a.rotateCss},rotation:Kt});q.set("url",class extends ut{async readWhole(){this.chunked=!1;let i=await ke(this.input);i instanceof ArrayBuffer?this._swapArrayBuffer(i):i instanceof Uint8Array&&this._swapBuffer(i)}async _readChunk(i,e){let t=e?i+e-1:void 0,s=this.options.httpHeaders||{};(i||t)&&(s.range=`bytes=${[i,t].join("-")}`);let n=await re(this.input,{headers:s}),o=await n.arrayBuffer(),c=o.byteLength;if(n.status!==416)return c!==e&&(this.size=i+c),this.set(o,i,!0)}}),M.prototype.getUint64=function(i){let e=this.getUint32(i),t=this.getUint32(i+4);return e<1048575?e<<32|t:typeof w!==void 0?(console.warn("Using BigInt because of type 64uint but JS can only handle 53b numbers."),w(e)<<w(32)|w(t)):void I("Trying to read 64b value but JS can only handle 53b numbers.")};class Wi extends nt{parseBoxes(e=0){let t=[];for(;e<this.file.byteLength-4;){let s=this.parseBoxHead(e);if(t.push(s),s.length===0)break;e+=s.length}return t}parseSubBoxes(e){e.boxes=this.parseBoxes(e.start)}findBox(e,t){return e.boxes===void 0&&this.parseSubBoxes(e),e.boxes.find((s=>s.kind===t))}parseBoxHead(e){let t=this.file.getUint32(e),s=this.file.getString(e+4,4),n=e+8;return t===1&&(t=this.file.getUint64(e+8),n+=8),{offset:e,length:t,kind:s,start:n}}parseBoxFullHead(e){if(e.version!==void 0)return;let t=this.file.getUint32(e.start);e.version=t>>24,e.start+=4}}class As extends Wi{static canHandle(e,t){if(t!==0)return!1;let s=e.getUint16(2);if(s>50)return!1;let n=16,o=[];for(;n<s;)o.push(e.getString(n,4)),n+=4;return o.includes(this.type)}async parse(){let e=this.file.getUint32(0),t=this.parseBoxHead(e);for(;t.kind!=="meta";)e+=t.length,await this.file.ensureChunk(e,16),t=this.parseBoxHead(e);await this.file.ensureChunk(t.offset,t.length),this.parseBoxFullHead(t),this.parseSubBoxes(t),this.options.icc.enabled&&await this.findIcc(t),this.options.tiff.enabled&&await this.findExif(t)}async registerSegment(e,t,s){await this.file.ensureChunk(t,s);let n=this.file.subarray(t,s);this.createParser(e,n)}async findIcc(e){let t=this.findBox(e,"iprp");if(t===void 0)return;let s=this.findBox(t,"ipco");if(s===void 0)return;let n=this.findBox(s,"colr");n!==void 0&&await this.registerSegment("icc",n.offset+12,n.length)}async findExif(e){let t=this.findBox(e,"iinf");if(t===void 0)return;let s=this.findBox(e,"iloc");if(s===void 0)return;let n=this.findExifLocIdInIinf(t),o=this.findExtentInIloc(s,n);if(o===void 0)return;let[c,u]=o;await this.file.ensureChunk(c,u);let g=4+this.file.getUint32(c);c+=g,u-=g,await this.registerSegment("tiff",c,u)}findExifLocIdInIinf(e){this.parseBoxFullHead(e);let t,s,n,o,c=e.start,u=this.file.getUint16(c);for(c+=2;u--;){if(t=this.parseBoxHead(c),this.parseBoxFullHead(t),s=t.start,t.version>=2&&(n=t.version===3?4:2,o=this.file.getString(s+n+2,4),o==="Exif"))return this.file.getUintBytes(s,n);c+=t.length}}get8bits(e){let t=this.file.getUint8(e);return[t>>4,15&t]}findExtentInIloc(e,t){this.parseBoxFullHead(e);let s=e.start,[n,o]=this.get8bits(s++),[c,u]=this.get8bits(s++),g=e.version===2?4:2,C=e.version===1||e.version===2?2:0,v=u+n+o,x=e.version===2?4:2,K=this.file.getUintBytes(s,x);for(s+=x;K--;){let ge=this.file.getUintBytes(s,g);s+=g+C+2+c;let ye=this.file.getUint16(s);if(s+=2,ge===t)return ye>1&&console.warn(`ILOC box has more than one extent but we're only processing one
Please create an issue at https://github.com/MikeKovarik/exifr with this file`),[this.file.getUintBytes(s+u,n),this.file.getUintBytes(s+u+n,o)];s+=ye*v}}}class xs extends As{}m(xs,"type","heic");class Ds extends As{}m(Ds,"type","avif"),J.set("heic",xs),J.set("avif",Ds),E(O,["ifd0","ifd1"],[[256,"ImageWidth"],[257,"ImageHeight"],[258,"BitsPerSample"],[259,"Compression"],[262,"PhotometricInterpretation"],[270,"ImageDescription"],[271,"Make"],[272,"Model"],[273,"StripOffsets"],[274,"Orientation"],[277,"SamplesPerPixel"],[278,"RowsPerStrip"],[279,"StripByteCounts"],[282,"XResolution"],[283,"YResolution"],[284,"PlanarConfiguration"],[296,"ResolutionUnit"],[301,"TransferFunction"],[305,"Software"],[306,"ModifyDate"],[315,"Artist"],[316,"HostComputer"],[317,"Predictor"],[318,"WhitePoint"],[319,"PrimaryChromaticities"],[513,"ThumbnailOffset"],[514,"ThumbnailLength"],[529,"YCbCrCoefficients"],[530,"YCbCrSubSampling"],[531,"YCbCrPositioning"],[532,"ReferenceBlackWhite"],[700,"ApplicationNotes"],[33432,"Copyright"],[33723,"IPTC"],[34665,"ExifIFD"],[34675,"ICC"],[34853,"GpsIFD"],[330,"SubIFD"],[40965,"InteropIFD"],[40091,"XPTitle"],[40092,"XPComment"],[40093,"XPAuthor"],[40094,"XPKeywords"],[40095,"XPSubject"]]),E(O,"exif",[[33434,"ExposureTime"],[33437,"FNumber"],[34850,"ExposureProgram"],[34852,"SpectralSensitivity"],[34855,"ISO"],[34858,"TimeZoneOffset"],[34859,"SelfTimerMode"],[34864,"SensitivityType"],[34865,"StandardOutputSensitivity"],[34866,"RecommendedExposureIndex"],[34867,"ISOSpeed"],[34868,"ISOSpeedLatitudeyyy"],[34869,"ISOSpeedLatitudezzz"],[36864,"ExifVersion"],[36867,"DateTimeOriginal"],[36868,"CreateDate"],[36873,"GooglePlusUploadCode"],[36880,"OffsetTime"],[36881,"OffsetTimeOriginal"],[36882,"OffsetTimeDigitized"],[37121,"ComponentsConfiguration"],[37122,"CompressedBitsPerPixel"],[37377,"ShutterSpeedValue"],[37378,"ApertureValue"],[37379,"BrightnessValue"],[37380,"ExposureCompensation"],[37381,"MaxApertureValue"],[37382,"SubjectDistance"],[37383,"MeteringMode"],[37384,"LightSource"],[37385,"Flash"],[37386,"FocalLength"],[37393,"ImageNumber"],[37394,"SecurityClassification"],[37395,"ImageHistory"],[37396,"SubjectArea"],[37500,"MakerNote"],[37510,"UserComment"],[37520,"SubSecTime"],[37521,"SubSecTimeOriginal"],[37522,"SubSecTimeDigitized"],[37888,"AmbientTemperature"],[37889,"Humidity"],[37890,"Pressure"],[37891,"WaterDepth"],[37892,"Acceleration"],[37893,"CameraElevationAngle"],[40960,"FlashpixVersion"],[40961,"ColorSpace"],[40962,"ExifImageWidth"],[40963,"ExifImageHeight"],[40964,"RelatedSoundFile"],[41483,"FlashEnergy"],[41486,"FocalPlaneXResolution"],[41487,"FocalPlaneYResolution"],[41488,"FocalPlaneResolutionUnit"],[41492,"SubjectLocation"],[41493,"ExposureIndex"],[41495,"SensingMethod"],[41728,"FileSource"],[41729,"SceneType"],[41730,"CFAPattern"],[41985,"CustomRendered"],[41986,"ExposureMode"],[41987,"WhiteBalance"],[41988,"DigitalZoomRatio"],[41989,"FocalLengthIn35mmFormat"],[41990,"SceneCaptureType"],[41991,"GainControl"],[41992,"Contrast"],[41993,"Saturation"],[41994,"Sharpness"],[41996,"SubjectDistanceRange"],[42016,"ImageUniqueID"],[42032,"OwnerName"],[42033,"SerialNumber"],[42034,"LensInfo"],[42035,"LensMake"],[42036,"LensModel"],[42037,"LensSerialNumber"],[42080,"CompositeImage"],[42081,"CompositeImageCount"],[42082,"CompositeImageExposureTimes"],[42240,"Gamma"],[59932,"Padding"],[59933,"OffsetSchema"],[65e3,"OwnerName"],[65001,"SerialNumber"],[65002,"Lens"],[65100,"RawFile"],[65101,"Converter"],[65102,"WhiteBalance"],[65105,"Exposure"],[65106,"Shadows"],[65107,"Brightness"],[65108,"Contrast"],[65109,"Saturation"],[65110,"Sharpness"],[65111,"Smoothness"],[65112,"MoireFilter"],[40965,"InteropIFD"]]),E(O,"gps",[[0,"GPSVersionID"],[1,"GPSLatitudeRef"],[2,"GPSLatitude"],[3,"GPSLongitudeRef"],[4,"GPSLongitude"],[5,"GPSAltitudeRef"],[6,"GPSAltitude"],[7,"GPSTimeStamp"],[8,"GPSSatellites"],[9,"GPSStatus"],[10,"GPSMeasureMode"],[11,"GPSDOP"],[12,"GPSSpeedRef"],[13,"GPSSpeed"],[14,"GPSTrackRef"],[15,"GPSTrack"],[16,"GPSImgDirectionRef"],[17,"GPSImgDirection"],[18,"GPSMapDatum"],[19,"GPSDestLatitudeRef"],[20,"GPSDestLatitude"],[21,"GPSDestLongitudeRef"],[22,"GPSDestLongitude"],[23,"GPSDestBearingRef"],[24,"GPSDestBearing"],[25,"GPSDestDistanceRef"],[26,"GPSDestDistance"],[27,"GPSProcessingMethod"],[28,"GPSAreaInformation"],[29,"GPSDateStamp"],[30,"GPSDifferential"],[31,"GPSHPositioningError"]]),E(W,["ifd0","ifd1"],[[274,{1:"Horizontal (normal)",2:"Mirror horizontal",3:"Rotate 180",4:"Mirror vertical",5:"Mirror horizontal and rotate 270 CW",6:"Rotate 90 CW",7:"Mirror horizontal and rotate 90 CW",8:"Rotate 270 CW"}],[296,{1:"None",2:"inches",3:"cm"}]]);let Ge=E(W,"exif",[[34850,{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"}],[37121,{0:"-",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}],[37383,{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"}],[37384,{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"}],[37385,{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"}],[41495,{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"}],[41728,{1:"Film Scanner",2:"Reflection Print Scanner",3:"Digital Camera"}],[41729,{1:"Directly photographed"}],[41985,{0:"Normal",1:"Custom",2:"HDR (no original saved)",3:"HDR (original saved)",4:"Original (for HDR)",6:"Panorama",7:"Portrait HDR",8:"Portrait"}],[41986,{0:"Auto",1:"Manual",2:"Auto bracket"}],[41987,{0:"Auto",1:"Manual"}],[41990,{0:"Standard",1:"Landscape",2:"Portrait",3:"Night",4:"Other"}],[41991,{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"}],[41996,{0:"Unknown",1:"Macro",2:"Close",3:"Distant"}],[42080,{0:"Unknown",1:"Not a Composite Image",2:"General Composite Image",3:"Composite Image Captured While Shooting"}]]),Is={1:"No absolute unit of measurement",2:"Inch",3:"Centimeter"};Ge.set(37392,Is),Ge.set(41488,Is);let zt={0:"Normal",1:"Low",2:"High"};function Ps(i){return typeof i=="object"&&i.length!==void 0?i[0]:i}function Rs(i){let e=Array.from(i).slice(1);return e[1]>15&&(e=e.map((t=>String.fromCharCode(t)))),e[2]!=="0"&&e[2]!==0||e.pop(),e.join(".")}function Vt(i){if(typeof i=="string"){var[e,t,s,n,o,c]=i.trim().split(/[-: ]/g).map(Number),u=new Date(e,t-1,s);return Number.isNaN(n)||Number.isNaN(o)||Number.isNaN(c)||(u.setHours(n),u.setMinutes(o),u.setSeconds(c)),Number.isNaN(+u)?i:u}}function He(i){if(typeof i=="string")return i;let e=[];if(i[1]===0&&i[i.length-1]===0)for(let t=0;t<i.length;t+=2)e.push(Fs(i[t+1],i[t]));else for(let t=0;t<i.length;t+=2)e.push(Fs(i[t],i[t+1]));return T(String.fromCodePoint(...e))}function Fs(i,e){return i<<8|e}Ge.set(41992,zt),Ge.set(41993,zt),Ge.set(41994,zt),E(ce,["ifd0","ifd1"],[[50827,function(i){return typeof i!="string"?H(i):i}],[306,Vt],[40091,He],[40092,He],[40093,He],[40094,He],[40095,He]]),E(ce,"exif",[[40960,Rs],[36864,Rs],[36867,Vt],[36868,Vt],[40962,Ps],[40963,Ps]]),E(ce,"gps",[[0,i=>Array.from(i).join(".")],[7,i=>Array.from(i).join(":")]]);let $s="http://ns.adobe.com/",Ts="http://ns.adobe.com/xmp/extension/";class _t extends X{static canHandle(e,t){return e.getUint8(t+1)===225&&e.getUint32(t+4)===1752462448&&e.getString(t+4,$s.length)===$s}static headerLength(e,t){return e.getString(t+4,Ts.length)===Ts?79:33}static findPosition(e,t){let s=super.findPosition(e,t);return s.multiSegment=s.extended=s.headerLength===79,s.multiSegment?(s.chunkCount=e.getUint8(t+72),s.chunkNumber=e.getUint8(t+76),e.getUint8(t+77)!==0&&s.chunkNumber++):(s.chunkCount=1/0,s.chunkNumber=-1),s}static handleMultiSegments(e){return e.map((t=>t.chunk.getString())).join("")}normalizeInput(e){return typeof e=="string"?e:M.from(e).getString()}parse(e=this.chunk){if(!this.localOptions.parse)return e;e=(function(o){let c={},u={};for(let g of Us)c[g]=[],u[g]=0;return o.replace(qi,((g,C,v)=>{if(C==="<"){let x=++u[v];return c[v].push(x),`${g}#${x}`}return`${g}#${c[v].pop()}`}))})(e);let t=Oe.findAll(e,"rdf","Description");t.length===0&&t.push(new Oe("rdf","Description",void 0,e));let s,n={};for(let o of t)for(let c of o.properties)s=Ji(c.ns,n),Ms(c,s);return(function(o){let c;for(let u in o)c=o[u]=U(o[u]),c===void 0&&delete o[u];return U(o)})(n)}assignToOutput(e,t){if(this.localOptions.parse)for(let[s,n]of Object.entries(t))switch(s){case"tiff":this.assignObjectToOutput(e,"ifd0",n);break;case"exif":this.assignObjectToOutput(e,"exif",n);break;case"xmlns":break;default:this.assignObjectToOutput(e,s,n)}else e.xmp=t}}m(_t,"type","xmp"),m(_t,"multiSegment",!0),F.set("xmp",_t);class dt{static findAll(e){return Os(e,/([a-zA-Z0-9-]+):([a-zA-Z0-9-]+)=("[^"]*"|'[^']*')/gm).map(dt.unpackMatch)}static unpackMatch(e){let t=e[1],s=e[2],n=e[3].slice(1,-1);return n=Ls(n),new dt(t,s,n)}constructor(e,t,s){this.ns=e,this.name=t,this.value=s}serialize(){return this.value}}let Es="[\\w\\d-]+";class Oe{static findAll(e,t,s){if(t!==void 0||s!==void 0){t=t||Es,s=s||Es;var n=new RegExp(`<(${t}):(${s})(#\\d+)?((\\s+?[\\w\\d-:]+=("[^"]*"|'[^']*'))*\\s*)(\\/>|>([\\s\\S]*?)<\\/\\1:\\2\\3>)`,"gm")}else n=/<([\w\d-]+):([\w\d-]+)(#\d+)?((\s+?[\w\d-:]+=("[^"]*"|'[^']*'))*\s*)(\/>|>([\s\S]*?)<\/\1:\2\3>)/gm;return Os(e,n).map(Oe.unpackMatch)}static unpackMatch(e){let t=e[1],s=e[2],n=e[4],o=e[8];return new Oe(t,s,n,o)}constructor(e,t,s,n){this.ns=e,this.name=t,this.attrString=s,this.innerXml=n,this.attrs=dt.findAll(s),this.children=Oe.findAll(n),this.value=this.children.length===0?Ls(n):void 0,this.properties=[...this.attrs,...this.children]}get isPrimitive(){return this.value!==void 0&&this.attrs.length===0&&this.children.length===0}get isListContainer(){return this.children.length===1&&this.children[0].isList}get isList(){let{ns:e,name:t}=this;return e==="rdf"&&(t==="Seq"||t==="Bag"||t==="Alt")}get isListItem(){return this.ns==="rdf"&&this.name==="li"}serialize(){if(this.properties.length===0&&this.value===void 0)return;if(this.isPrimitive)return this.value;if(this.isListContainer)return this.children[0].serialize();if(this.isList)return Hi(this.children.map(Gi));if(this.isListItem&&this.children.length===1&&this.attrs.length===0)return this.children[0].serialize();let e={};for(let t of this.properties)Ms(t,e);return this.value!==void 0&&(e.value=this.value),U(e)}}function Ms(i,e){let t=i.serialize();t!==void 0&&(e[i.name]=t)}var Gi=i=>i.serialize(),Hi=i=>i.length===1?i[0]:i,Ji=(i,e)=>e[i]?e[i]:e[i]={};function Os(i,e){let t,s=[];if(!i)return s;for(;(t=e.exec(i))!==null;)s.push(t);return s}function Ls(i){if((function(s){return s==null||s==="null"||s==="undefined"||s===""||s.trim()===""})(i))return;let e=Number(i);if(!Number.isNaN(e))return e;let t=i.toLowerCase();return t==="true"||t!=="false"&&i.trim()}let Us=["rdf:li","rdf:Seq","rdf:Bag","rdf:Alt","rdf:Description"],qi=new RegExp(`(<|\\/)(${Us.join("|")})`,"g");var Xi=Object.freeze({__proto__:null,default:_i,Exifr:he,fileParsers:J,segmentParsers:F,fileReaders:q,tagKeys:O,tagValues:W,tagRevivers:ce,createDictionary:E,extendDictionary:xe,fetchUrlAsArrayBuffer:ke,readBlobAsArrayBuffer:Ae,chunkedProps:le,otherSegments:Re,segments:De,tiffBlocks:$,segmentsAndBlocks:ue,tiffExtractables:de,inheritables:Fe,allFormatters:fe,Options:pe,parse:We,gpsOnlyOptions:at,gps:Nt,thumbnailOnlyOptions:rt,thumbnail:jt,thumbnailUrl:Bt,orientationOnlyOptions:ot,orientation:ct,rotations:lt,get rotateCanvas(){return a.rotateCanvas},get rotateCss(){return a.rotateCss},rotation:Kt});let Wt=["xmp","icc","iptc","tiff"],Yi=()=>{};async function Gt(i,e,t){let s=t[i];return s.enabled=!0,s.parse=!0,F.get(i).parse(e,s)}let Ns=k("fs",(i=>i.promises));q.set("fs",class extends ut{async readWhole(){this.chunked=!1,this.fs=await Ns;let i=await this.fs.readFile(this.input);this._swapBuffer(i)}async readChunked(){this.chunked=!0,this.fs=await Ns,await this.open(),await this.readChunk(0,this.options.firstChunkSize)}async open(){this.fh===void 0&&(this.fh=await this.fs.open(this.input,"r"),this.size=(await this.fh.stat(this.input)).size)}async _readChunk(i,e){this.fh===void 0&&await this.open(),i+e>this.size&&(e=this.size-i);var t=this.subarray(i,e,!0);return await this.fh.read(t.dataView,0,e,i),t}async close(){if(this.fh){let i=this.fh;this.fh=void 0,await i.close()}}}),q.set("base64",class extends ut{constructor(...i){super(...i),this.input=this.input.replace(/^data:([^;]+);base64,/gim,""),this.size=this.input.length/4*3,this.input.endsWith("==")?this.size-=2:this.input.endsWith("=")&&(this.size-=1)}async _readChunk(i,e){let t,s,n=this.input;i===void 0?(i=0,t=0,s=0):(t=4*Math.floor(i/3),s=i-t/4*3),e===void 0&&(e=this.size);let o=i+e,c=t+4*Math.ceil(o/3);n=n.slice(t,c);let u=Math.min(e,this.size-i);if(D){let g=h.from(n,"base64").slice(s,s+u);return this.set(g,i,!0)}{let g=this.subarray(i,u,!0),C=atob(n),v=g.toUint8();for(let x=0;x<u;x++)v[x]=C.charCodeAt(s+x);return g}}});class js extends nt{static canHandle(e,t){return t===18761||t===19789}extendOptions(e){let{ifd0:t,xmp:s,iptc:n,icc:o}=e;s.enabled&&t.deps.add(et),n.enabled&&t.deps.add(tt),o.enabled&&t.deps.add(st),t.finalizeFilters()}async parse(){let{tiff:e,xmp:t,iptc:s,icc:n}=this.options;if(e.enabled||t.enabled||s.enabled||n.enabled){let o=Math.max(A(this.options),this.options.chunkSize);await this.file.ensureChunk(0,o),this.createParser("tiff",this.file),this.parsers.tiff.parseHeader(),await this.parsers.tiff.parseIfd0Block(),this.adaptTiffPropAsSegment("xmp"),this.adaptTiffPropAsSegment("iptc"),this.adaptTiffPropAsSegment("icc")}}adaptTiffPropAsSegment(e){if(this.parsers.tiff[e]){let t=this.parsers.tiff[e];this.injectSegment(e,t)}}}m(js,"type","tiff"),J.set("tiff",js);let Zi=k("zlib"),Bs="XML:com.adobe.xmp",Ht="ihdr",Ks="iccp",zs="text",Vs="itxt",Qi=[Ht,Ks,zs,Vs,"exif"];class _s extends nt{constructor(...e){super(...e),m(this,"catchError",(t=>this.errors.push(t))),m(this,"metaChunks",[]),m(this,"unknownChunks",[])}static canHandle(e,t){return t===35152&&e.getUint32(0)===2303741511&&e.getUint32(4)===218765834}async parse(){let{file:e}=this;await this.findPngChunksInRange(8,e.byteLength),await this.readSegments(this.metaChunks),this.findIhdr(),this.parseTextChunks(),await this.findExif().catch(this.catchError),await this.findXmp().catch(this.catchError),await this.findIcc().catch(this.catchError)}async findPngChunksInRange(e,t){let{file:s}=this;for(;e<t;){let n=s.getUint32(e),o=s.getUint32(e+4),c=s.getString(e+4,4).toLowerCase(),u=n+4+4+4,g={type:c,offset:e,length:u,start:e+4+4,size:n,marker:o};Qi.includes(c)?this.metaChunks.push(g):this.unknownChunks.push(g),e+=u}}parseTextChunks(){let e=this.metaChunks.filter((t=>t.type===zs));for(let t of e){let[s,n]=this.file.getString(t.start,t.size).split("\0");this.injectKeyValToIhdr(s,n)}}injectKeyValToIhdr(e,t){let s=this.parsers.ihdr;s&&s.raw.set(e,t)}findIhdr(){let e=this.metaChunks.find((t=>t.type===Ht));e&&this.options.ihdr.enabled!==!1&&this.createParser(Ht,e.chunk)}async findExif(){let e=this.metaChunks.find((t=>t.type==="exif"));e&&this.injectSegment("tiff",e.chunk)}async findXmp(){let e=this.metaChunks.filter((t=>t.type===Vs));for(let t of e)t.chunk.getString(0,Bs.length)===Bs&&this.injectSegment("xmp",t.chunk)}async findIcc(){let e=this.metaChunks.find((u=>u.type===Ks));if(!e)return;let{chunk:t}=e,s=t.getUint8Array(0,81),n=0;for(;n<80&&s[n]!==0;)n++;let o=n+2,c=t.getString(0,n);if(this.injectKeyValToIhdr("ProfileName",c),p){let u=await Zi,g=t.getUint8Array(o);g=u.inflateSync(g),this.injectSegment("icc",g)}}}m(_s,"type","png"),J.set("png",_s),E(O,"interop",[[1,"InteropIndex"],[2,"InteropVersion"],[4096,"RelatedImageFileFormat"],[4097,"RelatedImageWidth"],[4098,"RelatedImageHeight"]]),xe(O,"ifd0",[[11,"ProcessingSoftware"],[254,"SubfileType"],[255,"OldSubfileType"],[263,"Thresholding"],[264,"CellWidth"],[265,"CellLength"],[266,"FillOrder"],[269,"DocumentName"],[280,"MinSampleValue"],[281,"MaxSampleValue"],[285,"PageName"],[286,"XPosition"],[287,"YPosition"],[290,"GrayResponseUnit"],[297,"PageNumber"],[321,"HalftoneHints"],[322,"TileWidth"],[323,"TileLength"],[332,"InkSet"],[337,"TargetPrinter"],[18246,"Rating"],[18249,"RatingPercent"],[33550,"PixelScale"],[34264,"ModelTransform"],[34377,"PhotoshopSettings"],[50706,"DNGVersion"],[50707,"DNGBackwardVersion"],[50708,"UniqueCameraModel"],[50709,"LocalizedCameraModel"],[50736,"DNGLensInfo"],[50739,"ShadowScale"],[50740,"DNGPrivateData"],[33920,"IntergraphMatrix"],[33922,"ModelTiePoint"],[34118,"SEMInfo"],[34735,"GeoTiffDirectory"],[34736,"GeoTiffDoubleParams"],[34737,"GeoTiffAsciiParams"],[50341,"PrintIM"],[50721,"ColorMatrix1"],[50722,"ColorMatrix2"],[50723,"CameraCalibration1"],[50724,"CameraCalibration2"],[50725,"ReductionMatrix1"],[50726,"ReductionMatrix2"],[50727,"AnalogBalance"],[50728,"AsShotNeutral"],[50729,"AsShotWhiteXY"],[50730,"BaselineExposure"],[50731,"BaselineNoise"],[50732,"BaselineSharpness"],[50734,"LinearResponseLimit"],[50735,"CameraSerialNumber"],[50741,"MakerNoteSafety"],[50778,"CalibrationIlluminant1"],[50779,"CalibrationIlluminant2"],[50781,"RawDataUniqueID"],[50827,"OriginalRawFileName"],[50828,"OriginalRawFileData"],[50831,"AsShotICCProfile"],[50832,"AsShotPreProfileMatrix"],[50833,"CurrentICCProfile"],[50834,"CurrentPreProfileMatrix"],[50879,"ColorimetricReference"],[50885,"SRawType"],[50898,"PanasonicTitle"],[50899,"PanasonicTitle2"],[50931,"CameraCalibrationSig"],[50932,"ProfileCalibrationSig"],[50933,"ProfileIFD"],[50934,"AsShotProfileName"],[50936,"ProfileName"],[50937,"ProfileHueSatMapDims"],[50938,"ProfileHueSatMapData1"],[50939,"ProfileHueSatMapData2"],[50940,"ProfileToneCurve"],[50941,"ProfileEmbedPolicy"],[50942,"ProfileCopyright"],[50964,"ForwardMatrix1"],[50965,"ForwardMatrix2"],[50966,"PreviewApplicationName"],[50967,"PreviewApplicationVersion"],[50968,"PreviewSettingsName"],[50969,"PreviewSettingsDigest"],[50970,"PreviewColorSpace"],[50971,"PreviewDateTime"],[50972,"RawImageDigest"],[50973,"OriginalRawFileDigest"],[50981,"ProfileLookTableDims"],[50982,"ProfileLookTableData"],[51043,"TimeCodes"],[51044,"FrameRate"],[51058,"TStop"],[51081,"ReelName"],[51089,"OriginalDefaultFinalSize"],[51090,"OriginalBestQualitySize"],[51091,"OriginalDefaultCropSize"],[51105,"CameraLabel"],[51107,"ProfileHueSatMapEncoding"],[51108,"ProfileLookTableEncoding"],[51109,"BaselineExposureOffset"],[51110,"DefaultBlackRender"],[51111,"NewRawImageDigest"],[51112,"RawToPreviewGain"]]);let Ws=[[273,"StripOffsets"],[279,"StripByteCounts"],[288,"FreeOffsets"],[289,"FreeByteCounts"],[291,"GrayResponseCurve"],[292,"T4Options"],[293,"T6Options"],[300,"ColorResponseUnit"],[320,"ColorMap"],[324,"TileOffsets"],[325,"TileByteCounts"],[326,"BadFaxLines"],[327,"CleanFaxData"],[328,"ConsecutiveBadFaxLines"],[330,"SubIFD"],[333,"InkNames"],[334,"NumberofInks"],[336,"DotRange"],[338,"ExtraSamples"],[339,"SampleFormat"],[340,"SMinSampleValue"],[341,"SMaxSampleValue"],[342,"TransferRange"],[343,"ClipPath"],[344,"XClipPathUnits"],[345,"YClipPathUnits"],[346,"Indexed"],[347,"JPEGTables"],[351,"OPIProxy"],[400,"GlobalParametersIFD"],[401,"ProfileType"],[402,"FaxProfile"],[403,"CodingMethods"],[404,"VersionYear"],[405,"ModeNumber"],[433,"Decode"],[434,"DefaultImageColor"],[435,"T82Options"],[437,"JPEGTables"],[512,"JPEGProc"],[515,"JPEGRestartInterval"],[517,"JPEGLosslessPredictors"],[518,"JPEGPointTransforms"],[519,"JPEGQTables"],[520,"JPEGDCTables"],[521,"JPEGACTables"],[559,"StripRowCounts"],[999,"USPTOMiscellaneous"],[18247,"XP_DIP_XML"],[18248,"StitchInfo"],[28672,"SonyRawFileType"],[28688,"SonyToneCurve"],[28721,"VignettingCorrection"],[28722,"VignettingCorrParams"],[28724,"ChromaticAberrationCorrection"],[28725,"ChromaticAberrationCorrParams"],[28726,"DistortionCorrection"],[28727,"DistortionCorrParams"],[29895,"SonyCropTopLeft"],[29896,"SonyCropSize"],[32781,"ImageID"],[32931,"WangTag1"],[32932,"WangAnnotation"],[32933,"WangTag3"],[32934,"WangTag4"],[32953,"ImageReferencePoints"],[32954,"RegionXformTackPoint"],[32955,"WarpQuadrilateral"],[32956,"AffineTransformMat"],[32995,"Matteing"],[32996,"DataType"],[32997,"ImageDepth"],[32998,"TileDepth"],[33300,"ImageFullWidth"],[33301,"ImageFullHeight"],[33302,"TextureFormat"],[33303,"WrapModes"],[33304,"FovCot"],[33305,"MatrixWorldToScreen"],[33306,"MatrixWorldToCamera"],[33405,"Model2"],[33421,"CFARepeatPatternDim"],[33422,"CFAPattern2"],[33423,"BatteryLevel"],[33424,"KodakIFD"],[33445,"MDFileTag"],[33446,"MDScalePixel"],[33447,"MDColorTable"],[33448,"MDLabName"],[33449,"MDSampleInfo"],[33450,"MDPrepDate"],[33451,"MDPrepTime"],[33452,"MDFileUnits"],[33589,"AdventScale"],[33590,"AdventRevision"],[33628,"UIC1Tag"],[33629,"UIC2Tag"],[33630,"UIC3Tag"],[33631,"UIC4Tag"],[33918,"IntergraphPacketData"],[33919,"IntergraphFlagRegisters"],[33921,"INGRReserved"],[34016,"Site"],[34017,"ColorSequence"],[34018,"IT8Header"],[34019,"RasterPadding"],[34020,"BitsPerRunLength"],[34021,"BitsPerExtendedRunLength"],[34022,"ColorTable"],[34023,"ImageColorIndicator"],[34024,"BackgroundColorIndicator"],[34025,"ImageColorValue"],[34026,"BackgroundColorValue"],[34027,"PixelIntensityRange"],[34028,"TransparencyIndicator"],[34029,"ColorCharacterization"],[34030,"HCUsage"],[34031,"TrapIndicator"],[34032,"CMYKEquivalent"],[34152,"AFCP_IPTC"],[34232,"PixelMagicJBIGOptions"],[34263,"JPLCartoIFD"],[34306,"WB_GRGBLevels"],[34310,"LeafData"],[34687,"TIFF_FXExtensions"],[34688,"MultiProfiles"],[34689,"SharedData"],[34690,"T88Options"],[34732,"ImageLayer"],[34750,"JBIGOptions"],[34856,"Opto-ElectricConvFactor"],[34857,"Interlace"],[34908,"FaxRecvParams"],[34909,"FaxSubAddress"],[34910,"FaxRecvTime"],[34929,"FedexEDR"],[34954,"LeafSubIFD"],[37387,"FlashEnergy"],[37388,"SpatialFrequencyResponse"],[37389,"Noise"],[37390,"FocalPlaneXResolution"],[37391,"FocalPlaneYResolution"],[37392,"FocalPlaneResolutionUnit"],[37397,"ExposureIndex"],[37398,"TIFF-EPStandardID"],[37399,"SensingMethod"],[37434,"CIP3DataFile"],[37435,"CIP3Sheet"],[37436,"CIP3Side"],[37439,"StoNits"],[37679,"MSDocumentText"],[37680,"MSPropertySetStorage"],[37681,"MSDocumentTextPosition"],[37724,"ImageSourceData"],[40965,"InteropIFD"],[40976,"SamsungRawPointersOffset"],[40977,"SamsungRawPointersLength"],[41217,"SamsungRawByteOrder"],[41218,"SamsungRawUnknown"],[41484,"SpatialFrequencyResponse"],[41485,"Noise"],[41489,"ImageNumber"],[41490,"SecurityClassification"],[41491,"ImageHistory"],[41494,"TIFF-EPStandardID"],[41995,"DeviceSettingDescription"],[42112,"GDALMetadata"],[42113,"GDALNoData"],[44992,"ExpandSoftware"],[44993,"ExpandLens"],[44994,"ExpandFilm"],[44995,"ExpandFilterLens"],[44996,"ExpandScanner"],[44997,"ExpandFlashLamp"],[46275,"HasselbladRawImage"],[48129,"PixelFormat"],[48130,"Transformation"],[48131,"Uncompressed"],[48132,"ImageType"],[48256,"ImageWidth"],[48257,"ImageHeight"],[48258,"WidthResolution"],[48259,"HeightResolution"],[48320,"ImageOffset"],[48321,"ImageByteCount"],[48322,"AlphaOffset"],[48323,"AlphaByteCount"],[48324,"ImageDataDiscard"],[48325,"AlphaDataDiscard"],[50215,"OceScanjobDesc"],[50216,"OceApplicationSelector"],[50217,"OceIDNumber"],[50218,"OceImageLogic"],[50255,"Annotations"],[50459,"HasselbladExif"],[50547,"OriginalFileName"],[50560,"USPTOOriginalContentType"],[50656,"CR2CFAPattern"],[50710,"CFAPlaneColor"],[50711,"CFALayout"],[50712,"LinearizationTable"],[50713,"BlackLevelRepeatDim"],[50714,"BlackLevel"],[50715,"BlackLevelDeltaH"],[50716,"BlackLevelDeltaV"],[50717,"WhiteLevel"],[50718,"DefaultScale"],[50719,"DefaultCropOrigin"],[50720,"DefaultCropSize"],[50733,"BayerGreenSplit"],[50737,"ChromaBlurRadius"],[50738,"AntiAliasStrength"],[50752,"RawImageSegmentation"],[50780,"BestQualityScale"],[50784,"AliasLayerMetadata"],[50829,"ActiveArea"],[50830,"MaskedAreas"],[50935,"NoiseReductionApplied"],[50974,"SubTileBlockSize"],[50975,"RowInterleaveFactor"],[51008,"OpcodeList1"],[51009,"OpcodeList2"],[51022,"OpcodeList3"],[51041,"NoiseProfile"],[51114,"CacheVersion"],[51125,"DefaultUserCrop"],[51157,"NikonNEFInfo"],[65024,"KdcIFD"]];xe(O,"ifd0",Ws),xe(O,"exif",Ws),E(W,"gps",[[23,{M:"Magnetic North",T:"True North"}],[25,{K:"Kilometers",M:"Miles",N:"Nautical Miles"}]]);class Jt extends X{static canHandle(e,t){return e.getUint8(t+1)===224&&e.getUint32(t+4)===1246120262&&e.getUint8(t+8)===0}parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint16(0)],[2,this.chunk.getUint8(2)],[3,this.chunk.getUint16(3)],[5,this.chunk.getUint16(5)],[7,this.chunk.getUint8(7)],[8,this.chunk.getUint8(8)]])}}m(Jt,"type","jfif"),m(Jt,"headerLength",9),F.set("jfif",Jt),E(O,"jfif",[[0,"JFIFVersion"],[2,"ResolutionUnit"],[3,"XResolution"],[5,"YResolution"],[7,"ThumbnailWidth"],[8,"ThumbnailHeight"]]);class Gs extends X{parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint32(0)],[4,this.chunk.getUint32(4)],[8,this.chunk.getUint8(8)],[9,this.chunk.getUint8(9)],[10,this.chunk.getUint8(10)],[11,this.chunk.getUint8(11)],[12,this.chunk.getUint8(12)],...Array.from(this.raw)])}}m(Gs,"type","ihdr"),F.set("ihdr",Gs),E(O,"ihdr",[[0,"ImageWidth"],[4,"ImageHeight"],[8,"BitDepth"],[9,"ColorType"],[10,"Compression"],[11,"Filter"],[12,"Interlace"]]),E(W,"ihdr",[[9,{0:"Grayscale",2:"RGB",3:"Palette",4:"Grayscale with Alpha",6:"RGB with Alpha",DEFAULT:"Unknown"}],[10,{0:"Deflate/Inflate",DEFAULT:"Unknown"}],[11,{0:"Adaptive",DEFAULT:"Unknown"}],[12,{0:"Noninterlaced",1:"Adam7 Interlace",DEFAULT:"Unknown"}]]);let Hs="\0\0\0\0";class ft extends X{static canHandle(e,t){return e.getUint8(t+1)===226&&e.getUint32(t+4)===1229144927}static findPosition(e,t){let s=super.findPosition(e,t);return s.chunkNumber=e.getUint8(t+16),s.chunkCount=e.getUint8(t+17),s.multiSegment=s.chunkCount>1,s}static handleMultiSegments(e){return(function(t){let s=(function(n){let o=n[0].constructor,c=0;for(let C of n)c+=C.length;let u=new o(c),g=0;for(let C of n)u.set(C,g),g+=C.length;return u})(t.map((n=>n.chunk.toUint8())));return new M(s)})(e)}parse(){return this.raw=new Map,this.parseHeader(),this.parseTags(),this.translate(),this.output}parseHeader(){let{raw:e}=this;this.chunk.byteLength<84&&I("ICC header is too short");for(let[t,s]of Object.entries(en)){t=parseInt(t,10);let n=s(this.chunk,t);n!==Hs&&e.set(t,n)}}parseTags(){let e,t,s,n,o,{raw:c}=this,u=this.chunk.getUint32(128),g=132,C=this.chunk.byteLength;for(;u--;){if(e=this.chunk.getString(g,4),t=this.chunk.getUint32(g+4),s=this.chunk.getUint32(g+8),n=this.chunk.getString(t,4),t+s>C)return void console.warn("reached the end of the first ICC chunk. Enable options.tiff.multiSegment to read all ICC segments.");o=this.parseTag(n,t,s),o!==void 0&&o!==Hs&&c.set(e,o),g+=12}}parseTag(e,t,s){switch(e){case"desc":return this.parseDesc(t);case"mluc":return this.parseMluc(t);case"text":return this.parseText(t,s);case"sig ":return this.parseSig(t)}if(!(t+s>this.chunk.byteLength))return this.chunk.getUint8Array(t,s)}parseDesc(e){let t=this.chunk.getUint32(e+8)-1;return T(this.chunk.getString(e+12,t))}parseText(e,t){return T(this.chunk.getString(e+8,t-8))}parseSig(e){return T(this.chunk.getString(e+8,4))}parseMluc(e){let{chunk:t}=this,s=t.getUint32(e+8),n=t.getUint32(e+12),o=e+16,c=[];for(let u=0;u<s;u++){let g=t.getString(o+0,2),C=t.getString(o+2,2),v=t.getUint32(o+4),x=t.getUint32(o+8)+e,K=T(t.getUnicodeString(x,v));c.push({lang:g,country:C,text:K}),o+=n}return s===1?c[0].text:c}translateValue(e,t){return typeof e=="string"?t[e]||t[e.toLowerCase()]||e:t[e]||e}}m(ft,"type","icc"),m(ft,"multiSegment",!0),m(ft,"headerLength",18);let en={4:me,8:function(i,e){return[i.getUint8(e),i.getUint8(e+1)>>4,i.getUint8(e+1)%16].map((t=>t.toString(10))).join(".")},12:me,16:me,20:me,24:function(i,e){let t=i.getUint16(e),s=i.getUint16(e+2)-1,n=i.getUint16(e+4),o=i.getUint16(e+6),c=i.getUint16(e+8),u=i.getUint16(e+10);return new Date(Date.UTC(t,s,n,o,c,u))},36:me,40:me,48:me,52:me,64:(i,e)=>i.getUint32(e),80:me};function me(i,e){return T(i.getString(e,4))}F.set("icc",ft),E(O,"icc",[[4,"ProfileCMMType"],[8,"ProfileVersion"],[12,"ProfileClass"],[16,"ColorSpaceData"],[20,"ProfileConnectionSpace"],[24,"ProfileDateTime"],[36,"ProfileFileSignature"],[40,"PrimaryPlatform"],[44,"CMMFlags"],[48,"DeviceManufacturer"],[52,"DeviceModel"],[56,"DeviceAttributes"],[64,"RenderingIntent"],[68,"ConnectionSpaceIlluminant"],[80,"ProfileCreator"],[84,"ProfileID"],["Header","ProfileHeader"],["MS00","WCSProfiles"],["bTRC","BlueTRC"],["bXYZ","BlueMatrixColumn"],["bfd","UCRBG"],["bkpt","MediaBlackPoint"],["calt","CalibrationDateTime"],["chad","ChromaticAdaptation"],["chrm","Chromaticity"],["ciis","ColorimetricIntentImageState"],["clot","ColorantTableOut"],["clro","ColorantOrder"],["clrt","ColorantTable"],["cprt","ProfileCopyright"],["crdi","CRDInfo"],["desc","ProfileDescription"],["devs","DeviceSettings"],["dmdd","DeviceModelDesc"],["dmnd","DeviceMfgDesc"],["dscm","ProfileDescriptionML"],["fpce","FocalPlaneColorimetryEstimates"],["gTRC","GreenTRC"],["gXYZ","GreenMatrixColumn"],["gamt","Gamut"],["kTRC","GrayTRC"],["lumi","Luminance"],["meas","Measurement"],["meta","Metadata"],["mmod","MakeAndModel"],["ncl2","NamedColor2"],["ncol","NamedColor"],["ndin","NativeDisplayInfo"],["pre0","Preview0"],["pre1","Preview1"],["pre2","Preview2"],["ps2i","PS2RenderingIntent"],["ps2s","PostScript2CSA"],["psd0","PostScript2CRD0"],["psd1","PostScript2CRD1"],["psd2","PostScript2CRD2"],["psd3","PostScript2CRD3"],["pseq","ProfileSequenceDesc"],["psid","ProfileSequenceIdentifier"],["psvm","PS2CRDVMSize"],["rTRC","RedTRC"],["rXYZ","RedMatrixColumn"],["resp","OutputResponse"],["rhoc","ReflectionHardcopyOrigColorimetry"],["rig0","PerceptualRenderingIntentGamut"],["rig2","SaturationRenderingIntentGamut"],["rpoc","ReflectionPrintOutputColorimetry"],["sape","SceneAppearanceEstimates"],["scoe","SceneColorimetryEstimates"],["scrd","ScreeningDesc"],["scrn","Screening"],["targ","CharTarget"],["tech","Technology"],["vcgt","VideoCardGamma"],["view","ViewingConditions"],["vued","ViewingCondDesc"],["wtpt","MediaWhitePoint"]]);let pt={"4d2p":"Erdt Systems",AAMA:"Aamazing Technologies",ACER:"Acer",ACLT:"Acolyte Color Research",ACTI:"Actix Sytems",ADAR:"Adara Technology",ADBE:"Adobe",ADI:"ADI Systems",AGFA:"Agfa Graphics",ALMD:"Alps Electric",ALPS:"Alps Electric",ALWN:"Alwan Color Expertise",AMTI:"Amiable Technologies",AOC:"AOC International",APAG:"Apago",APPL:"Apple Computer",AST:"AST","AT&T":"AT&T",BAEL:"BARBIERI electronic",BRCO:"Barco NV",BRKP:"Breakpoint",BROT:"Brother",BULL:"Bull",BUS:"Bus Computer Systems","C-IT":"C-Itoh",CAMR:"Intel",CANO:"Canon",CARR:"Carroll Touch",CASI:"Casio",CBUS:"Colorbus PL",CEL:"Crossfield",CELx:"Crossfield",CGS:"CGS Publishing Technologies International",CHM:"Rochester Robotics",CIGL:"Colour Imaging Group, London",CITI:"Citizen",CL00:"Candela",CLIQ:"Color IQ",CMCO:"Chromaco",CMiX:"CHROMiX",COLO:"Colorgraphic Communications",COMP:"Compaq",COMp:"Compeq/Focus Technology",CONR:"Conrac Display Products",CORD:"Cordata Technologies",CPQ:"Compaq",CPRO:"ColorPro",CRN:"Cornerstone",CTX:"CTX International",CVIS:"ColorVision",CWC:"Fujitsu Laboratories",DARI:"Darius Technology",DATA:"Dataproducts",DCP:"Dry Creek Photo",DCRC:"Digital Contents Resource Center, Chung-Ang University",DELL:"Dell Computer",DIC:"Dainippon Ink and Chemicals",DICO:"Diconix",DIGI:"Digital","DL&C":"Digital Light & Color",DPLG:"Doppelganger",DS:"Dainippon Screen",DSOL:"DOOSOL",DUPN:"DuPont",EPSO:"Epson",ESKO:"Esko-Graphics",ETRI:"Electronics and Telecommunications Research Institute",EVER:"Everex Systems",EXAC:"ExactCODE",Eizo:"Eizo",FALC:"Falco Data Products",FF:"Fuji Photo Film",FFEI:"FujiFilm Electronic Imaging",FNRD:"Fnord Software",FORA:"Fora",FORE:"Forefront Technology",FP:"Fujitsu",FPA:"WayTech Development",FUJI:"Fujitsu",FX:"Fuji Xerox",GCC:"GCC Technologies",GGSL:"Global Graphics Software",GMB:"Gretagmacbeth",GMG:"GMG",GOLD:"GoldStar Technology",GOOG:"Google",GPRT:"Giantprint",GTMB:"Gretagmacbeth",GVC:"WayTech Development",GW2K:"Sony",HCI:"HCI",HDM:"Heidelberger Druckmaschinen",HERM:"Hermes",HITA:"Hitachi America",HP:"Hewlett-Packard",HTC:"Hitachi",HiTi:"HiTi Digital",IBM:"IBM",IDNT:"Scitex",IEC:"Hewlett-Packard",IIYA:"Iiyama North America",IKEG:"Ikegami Electronics",IMAG:"Image Systems",IMI:"Ingram Micro",INTC:"Intel",INTL:"N/A (INTL)",INTR:"Intra Electronics",IOCO:"Iocomm International Technology",IPS:"InfoPrint Solutions Company",IRIS:"Scitex",ISL:"Ichikawa Soft Laboratory",ITNL:"N/A (ITNL)",IVM:"IVM",IWAT:"Iwatsu Electric",Idnt:"Scitex",Inca:"Inca Digital Printers",Iris:"Scitex",JPEG:"Joint Photographic Experts Group",JSFT:"Jetsoft Development",JVC:"JVC Information Products",KART:"Scitex",KFC:"KFC Computek Components",KLH:"KLH Computers",KMHD:"Konica Minolta",KNCA:"Konica",KODA:"Kodak",KYOC:"Kyocera",Kart:"Scitex",LCAG:"Leica",LCCD:"Leeds Colour",LDAK:"Left Dakota",LEAD:"Leading Technology",LEXM:"Lexmark International",LINK:"Link Computer",LINO:"Linotronic",LITE:"Lite-On",Leaf:"Leaf",Lino:"Linotronic",MAGC:"Mag Computronic",MAGI:"MAG Innovision",MANN:"Mannesmann",MICN:"Micron Technology",MICR:"Microtek",MICV:"Microvitec",MINO:"Minolta",MITS:"Mitsubishi Electronics America",MITs:"Mitsuba",MNLT:"Minolta",MODG:"Modgraph",MONI:"Monitronix",MONS:"Monaco Systems",MORS:"Morse Technology",MOTI:"Motive Systems",MSFT:"Microsoft",MUTO:"MUTOH INDUSTRIES",Mits:"Mitsubishi Electric",NANA:"NANAO",NEC:"NEC",NEXP:"NexPress Solutions",NISS:"Nissei Sangyo America",NKON:"Nikon",NONE:"none",OCE:"Oce Technologies",OCEC:"OceColor",OKI:"Oki",OKID:"Okidata",OKIP:"Okidata",OLIV:"Olivetti",OLYM:"Olympus",ONYX:"Onyx Graphics",OPTI:"Optiquest",PACK:"Packard Bell",PANA:"Matsushita Electric Industrial",PANT:"Pantone",PBN:"Packard Bell",PFU:"PFU",PHIL:"Philips Consumer Electronics",PNTX:"HOYA",POne:"Phase One A/S",PREM:"Premier Computer Innovations",PRIN:"Princeton Graphic Systems",PRIP:"Princeton Publishing Labs",QLUX:"Hong Kong",QMS:"QMS",QPCD:"QPcard AB",QUAD:"QuadLaser",QUME:"Qume",RADI:"Radius",RDDx:"Integrated Color Solutions",RDG:"Roland DG",REDM:"REDMS Group",RELI:"Relisys",RGMS:"Rolf Gierling Multitools",RICO:"Ricoh",RNLD:"Edmund Ronald",ROYA:"Royal",RPC:"Ricoh Printing Systems",RTL:"Royal Information Electronics",SAMP:"Sampo",SAMS:"Samsung",SANT:"Jaime Santana Pomares",SCIT:"Scitex",SCRN:"Dainippon Screen",SDP:"Scitex",SEC:"Samsung",SEIK:"Seiko Instruments",SEIk:"Seikosha",SGUY:"ScanGuy.com",SHAR:"Sharp Laboratories",SICC:"International Color Consortium",SONY:"Sony",SPCL:"SpectraCal",STAR:"Star",STC:"Sampo Technology",Scit:"Scitex",Sdp:"Scitex",Sony:"Sony",TALO:"Talon Technology",TAND:"Tandy",TATU:"Tatung",TAXA:"TAXAN America",TDS:"Tokyo Denshi Sekei",TECO:"TECO Information Systems",TEGR:"Tegra",TEKT:"Tektronix",TI:"Texas Instruments",TMKR:"TypeMaker",TOSB:"Toshiba",TOSH:"Toshiba",TOTK:"TOTOKU ELECTRIC",TRIU:"Triumph",TSBT:"Toshiba",TTX:"TTX Computer Products",TVM:"TVM Professional Monitor",TW:"TW Casper",ULSX:"Ulead Systems",UNIS:"Unisys",UTZF:"Utz Fehlau & Sohn",VARI:"Varityper",VIEW:"Viewsonic",VISL:"Visual communication",VIVO:"Vivo Mobile Communication",WANG:"Wang",WLBR:"Wilbur Imaging",WTG2:"Ware To Go",WYSE:"WYSE Technology",XERX:"Xerox",XRIT:"X-Rite",ZRAN:"Zoran",Zebr:"Zebra Technologies",appl:"Apple Computer",bICC:"basICColor",berg:"bergdesign",ceyd:"Integrated Color Solutions",clsp:"MacDermid ColorSpan",ds:"Dainippon Screen",dupn:"DuPont",ffei:"FujiFilm Electronic Imaging",flux:"FluxData",iris:"Scitex",kart:"Scitex",lcms:"Little CMS",lino:"Linotronic",none:"none",ob4d:"Erdt Systems",obic:"Medigraph",quby:"Qubyx Sarl",scit:"Scitex",scrn:"Dainippon Screen",sdp:"Scitex",siwi:"SIWI GRAFIKA",yxym:"YxyMaster"},Js={scnr:"Scanner",mntr:"Monitor",prtr:"Printer",link:"Device Link",abst:"Abstract",spac:"Color Space Conversion Profile",nmcl:"Named Color",cenc:"ColorEncodingSpace profile",mid:"MultiplexIdentification profile",mlnk:"MultiplexLink profile",mvis:"MultiplexVisualization profile",nkpf:"Nikon Input Device Profile (NON-STANDARD!)"};E(W,"icc",[[4,pt],[12,Js],[40,Object.assign({},pt,Js)],[48,pt],[80,pt],[64,{0:"Perceptual",1:"Relative Colorimetric",2:"Saturation",3:"Absolute Colorimetric"}],["tech",{amd:"Active Matrix Display",crt:"Cathode Ray Tube Display",kpcd:"Photo CD",pmd:"Passive Matrix Display",dcam:"Digital Camera",dcpj:"Digital Cinema Projector",dmpc:"Digital Motion Picture Camera",dsub:"Dye Sublimation Printer",epho:"Electrophotographic Printer",esta:"Electrostatic Printer",flex:"Flexography",fprn:"Film Writer",fscn:"Film Scanner",grav:"Gravure",ijet:"Ink Jet Printer",imgs:"Photo Image Setter",mpfr:"Motion Picture Film Recorder",mpfs:"Motion Picture Film Scanner",offs:"Offset Lithography",pjtv:"Projection Television",rpho:"Photographic Paper Printer",rscn:"Reflective Scanner",silk:"Silkscreen",twax:"Thermal Wax Printer",vidc:"Video Camera",vidm:"Video Monitor"}]]);class ht extends X{static canHandle(e,t,s){return e.getUint8(t+1)===237&&e.getString(t+4,9)==="Photoshop"&&this.containsIptc8bim(e,t,s)!==void 0}static headerLength(e,t,s){let n,o=this.containsIptc8bim(e,t,s);if(o!==void 0)return n=e.getUint8(t+o+7),n%2!=0&&(n+=1),n===0&&(n=4),o+8+n}static containsIptc8bim(e,t,s){for(let n=0;n<s;n++)if(this.isIptcSegmentHead(e,t+n))return n}static isIptcSegmentHead(e,t){return e.getUint8(t)===56&&e.getUint32(t)===943868237&&e.getUint16(t+4)===1028}parse(){let{raw:e}=this,t=this.chunk.byteLength-1,s=!1;for(let n=0;n<t;n++)if(this.chunk.getUint8(n)===28&&this.chunk.getUint8(n+1)===2){s=!0;let o=this.chunk.getUint16(n+3),c=this.chunk.getUint8(n+2),u=this.chunk.getLatin1String(n+5,o);e.set(c,this.pluralizeValue(e.get(c),u)),n+=4+o}else if(s)break;return this.translate(),this.output}pluralizeValue(e,t){return e!==void 0?e instanceof Array?(e.push(t),e):[e,t]:t}}m(ht,"type","iptc"),m(ht,"translateValues",!1),m(ht,"reviveValues",!1),F.set("iptc",ht),E(O,"iptc",[[0,"ApplicationRecordVersion"],[3,"ObjectTypeReference"],[4,"ObjectAttributeReference"],[5,"ObjectName"],[7,"EditStatus"],[8,"EditorialUpdate"],[10,"Urgency"],[12,"SubjectReference"],[15,"Category"],[20,"SupplementalCategories"],[22,"FixtureIdentifier"],[25,"Keywords"],[26,"ContentLocationCode"],[27,"ContentLocationName"],[30,"ReleaseDate"],[35,"ReleaseTime"],[37,"ExpirationDate"],[38,"ExpirationTime"],[40,"SpecialInstructions"],[42,"ActionAdvised"],[45,"ReferenceService"],[47,"ReferenceDate"],[50,"ReferenceNumber"],[55,"DateCreated"],[60,"TimeCreated"],[62,"DigitalCreationDate"],[63,"DigitalCreationTime"],[65,"OriginatingProgram"],[70,"ProgramVersion"],[75,"ObjectCycle"],[80,"Byline"],[85,"BylineTitle"],[90,"City"],[92,"Sublocation"],[95,"State"],[100,"CountryCode"],[101,"Country"],[103,"OriginalTransmissionReference"],[105,"Headline"],[110,"Credit"],[115,"Source"],[116,"CopyrightNotice"],[118,"Contact"],[120,"Caption"],[121,"LocalCaption"],[122,"Writer"],[125,"RasterizedCaption"],[130,"ImageType"],[131,"ImageOrientation"],[135,"LanguageIdentifier"],[150,"AudioType"],[151,"AudioSamplingRate"],[152,"AudioSamplingResolution"],[153,"AudioDuration"],[154,"AudioOutcue"],[184,"JobID"],[185,"MasterDocumentID"],[186,"ShortDocumentID"],[187,"UniqueDocumentID"],[188,"OwnerID"],[200,"ObjectPreviewFileFormat"],[201,"ObjectPreviewFileVersion"],[202,"ObjectPreviewData"],[221,"Prefs"],[225,"ClassifyState"],[228,"SimilarityIndex"],[230,"DocumentNotes"],[231,"DocumentHistory"],[232,"ExifCameraInfo"],[255,"CatalogSets"]]),E(W,"iptc",[[10,{0:"0 (reserved)",1:"1 (most urgent)",2:"2",3:"3",4:"4",5:"5 (normal urgency)",6:"6",7:"7",8:"8 (least urgent)",9:"9 (user-defined priority)"}],[75,{a:"Morning",b:"Both Morning and Evening",p:"Evening"}],[131,{L:"Landscape",P:"Portrait",S:"Square"}]]),a.Exifr=he,a.Options=pe,a.allFormatters=fe,a.chunkedProps=le,a.createDictionary=E,a.default=Xi,a.extendDictionary=xe,a.fetchUrlAsArrayBuffer=ke,a.fileParsers=J,a.fileReaders=q,a.gps=Nt,a.gpsOnlyOptions=at,a.inheritables=Fe,a.orientation=ct,a.orientationOnlyOptions=ot,a.otherSegments=Re,a.parse=We,a.readBlobAsArrayBuffer=Ae,a.rotation=Kt,a.rotations=lt,a.segmentParsers=F,a.segments=De,a.segmentsAndBlocks=ue,a.sidecar=async function(i,e,t){let s=new pe(e);s.chunked=!1,t===void 0&&typeof i=="string"&&(t=(function(o){let c=o.toLowerCase().split(".").pop();if((function(u){return u==="exif"||u==="tiff"||u==="tif"})(c))return"tiff";if(Wt.includes(c))return c})(i));let n=await gs(i,s);if(t){if(Wt.includes(t))return Gt(t,n,s);I("Invalid segment type")}else{if((function(o){let c=o.getString(0,50).trim();return c.includes("<?xpacket")||c.includes("<x:")})(n))return Gt("xmp",n,s);for(let[o]of F){if(!Wt.includes(o))continue;let c=await Gt(o,n,s).catch(Yi);if(c)return c}I("Unknown file format")}},a.tagKeys=O,a.tagRevivers=ce,a.tagValues=W,a.thumbnail=jt,a.thumbnailOnlyOptions=rt,a.thumbnailUrl=Bt,a.tiffBlocks=$,a.tiffExtractables=de,Object.defineProperty(a,"__esModule",{value:!0})}))});var yn={};ln(yn,{default:()=>Ei});module.exports=un(yn);var j=require("@raycast/api");var Ue=require("react"),Ce=require("@raycast/api");var be=require("@raycast/api"),Se=ie(require("fs"));var Ys={"Suggest PromptLab Commands":{name:"Suggest PromptLab Commands",prompt:"Based on my current commands for the PromptLab extension, suggest new commands to create. Provide suggestions for titles as well prompts. The prompts must be relevant to an AI that can read the content of files, get information about the system, and get outside  data such as calendar events. The commands must be unique. Format the response as a single markdown list. Here are the commands I currently have: {{promptlabCommands}}",icon:"desktop-16",iconColor:"raycast-magenta",minNumFiles:"0",acceptedFileExtensions:"",useMetadata:!1,useAudioDetails:!1,useSoundClassification:!1,useSubjectClassification:!1,useRectangleDetection:!1,useBarcodeDetection:!1,useFaceDetection:!1,outputKind:"detail",actionScript:"",showResponse:!0,description:"Lists new prompt ideas based on all of your current prompts.",useSaliencyAnalysis:!1,author:"",website:"",version:"",requirements:"",scriptKind:"applescript",categories:["Meta"],temperature:"1.0",installedFromStore:!1,setupLocked:!1,useSpeech:!1,speakResponse:!1,showInMenuBar:!1,favorited:!1},"Create Notes":{name:"Create Notes",prompt:"I want you to act as a notetaker. I will provide file names and their contents, and you will respond with a multi-level markdown list of well-structured, concise notes. The notes should be in your own words and should make connections between topics and ideas. Each list item should be at most 20 words long. Minimize the notes as much as possible. Here are the files:",icon:"bullet-points-16",iconColor:"raycast-red",minNumFiles:"1",acceptedFileExtensions:"",useMetadata:!1,useAudioDetails:!0,useSoundClassification:!0,useSubjectClassification:!0,useRectangleDetection:!1,useBarcodeDetection:!0,useFaceDetection:!1,outputKind:"detail",actionScript:"",showResponse:!0,description:"Provides notes on the subject matter of the selected files",useSaliencyAnalysis:!1,author:"",website:"",version:"",requirements:"",scriptKind:"applescript",categories:["Utilities"],temperature:"1.0",installedFromStore:!1,setupLocked:!1,useSpeech:!1,speakResponse:!1,showInMenuBar:!1,favorited:!1},"Table Of Contents":{name:"Table Of Contents",prompt:"Generate a table of contents for each of the following files based on their content. Use the file names as headings. For each item in the table, provide an percent estimation of how far into the document the associated content occurs. Format the tables as markdown tables.",icon:"bullet-points-16",iconColor:"raycast-red",minNumFiles:"1",acceptedFileExtensions:"",useMetadata:!1,useAudioDetails:!0,useSoundClassification:!0,useSubjectClassification:!0,useRectangleDetection:!1,useBarcodeDetection:!0,useFaceDetection:!1,outputKind:"detail",actionScript:"",showResponse:!0,description:"Generates a markdown table of contents for the selected files",useSaliencyAnalysis:!1,author:"",website:"",version:"",requirements:"",scriptKind:"applescript",categories:["Writing","Utilities"],temperature:"1.0",installedFromStore:!1,setupLocked:!1,useSpeech:!1,speakResponse:!1,showInMenuBar:!1,favorited:!1},"Summarize Clipboard":{useSoundClassification:!1,icon:"copy-clipboard-16",prompt:`Summarize the following text, providing specific details.
###
{{clipboardText}}
###`,name:"Summarize Clipboard",minNumFiles:"0",acceptedFileExtensions:"",useSubjectClassification:!1,useFaceDetection:!1,showResponse:!0,outputKind:"detail",useAudioDetails:!1,useMetadata:!1,useBarcodeDetection:!1,useRectangleDetection:!1,description:"",iconColor:"raycast-orange",actionScript:""},"Write Conclusion":{name:"Write Conclusion",prompt:"Write conclusions for the following files in the style of the rest of their content, using the file names as headers. The conclusion should wrap up the meaning, purpose, significance, pitfalls, room to improvement, and suggest plans for future work.",icon:"text-cursor-16",iconColor:"raycast-yellow",minNumFiles:"1",acceptedFileExtensions:"",useMetadata:!1,useAudioDetails:!0,useSoundClassification:!0,useSubjectClassification:!0,useRectangleDetection:!1,useBarcodeDetection:!0,useFaceDetection:!1,outputKind:"detail",actionScript:"",showResponse:!0,description:"Drafts conclusions for papers (or files) in their existing style",useSaliencyAnalysis:!1,author:"",website:"",version:"",requirements:"",scriptKind:"applescript",categories:["Writing","Education","Utilities"],temperature:"1.0",installedFromStore:!1,setupLocked:!1,useSpeech:!1,speakResponse:!1,showInMenuBar:!1,favorited:!1},"Summarize Selected Files":{name:"Summarize Selected Files",prompt:`I want you to derive insights from the following information about some files. You will respond with a descriptive discussion of each file, its main topics, and its significance. You will use all information provided to infer more insights. Provide several insights derived from metadata or EXIF data. Give an overview of lists, content, objects, etc. without listing specific details. Discuss the general position of any objects, points, or rectangles within images and videos without using numbers. Don't repeat yourself. Don't list properties without describing their value.{{images:
Discuss the payload of any barcodes or QR codes, if relevant. For images, use the general size and arrangement of objects to help predict what the file is about.}}{{videos:
For videos, discuss what they are about in friendly paragraphs without listing off specific details. You must summarize any transcribed text in 100 words or fewer, while limited the entire output to two paragraphs.}}{{svg:
For SVGs, predict what object(s) the overall code will render as based on shapes, colors, and other details.}} Draw connections between different pieces of information and discuss the significance of any relationships therein. Use the file names as headings. Limit your discussion to one short paragraph. At the end, include a list of relevant links formatted as a markdown list. Here are the files:`,icon:"speech-bubble-important-16",iconColor:"raycast-primary-text",minNumFiles:"1",acceptedFileExtensions:"",useMetadata:!0,useAudioDetails:!0,useSoundClassification:!0,useSubjectClassification:!0,useRectangleDetection:!0,useBarcodeDetection:!0,useFaceDetection:!0,outputKind:"detail",actionScript:"",showResponse:!0,description:"",useSaliencyAnalysis:!0,author:"",website:"",version:"1.0.0",requirements:"",scriptKind:"applescript",categories:["Other"],temperature:"1.0",installedFromStore:!1,setupLocked:!0,useSpeech:!1,speakResponse:!1,showInMenuBar:!0,favorited:!1},"Extract Visible Text":{name:"Extract Visible Text",prompt:"I want you to output the text content identified below. Preserve the original format of the content as best as possible. Always output something.",icon:"text-16",iconColor:"raycast-purple",minNumFiles:"1",acceptedFileExtensions:"png, jpg, jpeg, gif, bmp, astc, tiff",useMetadata:!1,useAudioDetails:!1,useSoundClassification:!1,useSubjectClassification:!1,useRectangleDetection:!1,useBarcodeDetection:!0,useFaceDetection:!1,outputKind:"detail",actionScript:"",showResponse:!0,description:"Obtains the text within an image using OCR",useSaliencyAnalysis:!1,author:"",website:"",version:"",requirements:"",scriptKind:"applescript",categories:["Data"],temperature:"1.0",installedFromStore:!1,setupLocked:!1,useSpeech:!1,speakResponse:!1,showInMenuBar:!1,favorited:!1},"Respond To Last Email":{name:"Respond To Last Email",prompt:`Generate a response to the following email:
###
{{lastEmail}}
###`,icon:"envelope-16",iconColor:"raycast-yellow",minNumFiles:"0",acceptedFileExtensions:"",useMetadata:!1,useAudioDetails:!1,useSoundClassification:!1,useSubjectClassification:!1,useRectangleDetection:!1,useBarcodeDetection:!1,useFaceDetection:!1,outputKind:"detail",actionScript:"",showResponse:!0,description:"Drafts a response to the last email you received",useSaliencyAnalysis:!1,author:"",website:"",version:"",requirements:"",scriptKind:"applescript",categories:["Social","Writing"],temperature:"1.0",installedFromStore:!1,setupLocked:!1,useSpeech:!1,speakResponse:!1,showInMenuBar:!1,favorited:!1},"Summarize Last Email":{name:"Summarize Last Email",prompt:`Summarize my most recent email and discuss its significance. I am the recipient. Format the response as a paragraph directed to me. Here is the email:
###
{{lastEmail}}
###`,icon:"envelope-16",iconColor:"raycast-orange",minNumFiles:"0",acceptedFileExtensions:"",useMetadata:!1,useAudioDetails:!1,useSoundClassification:!1,useSubjectClassification:!1,useRectangleDetection:!1,useBarcodeDetection:!1,useFaceDetection:!1,outputKind:"detail",actionScript:"",showResponse:!0,description:"",useSaliencyAnalysis:!1,author:"",website:"",version:"",requirements:"",scriptKind:"applescript",categories:["Social"],temperature:"1.0",installedFromStore:!1,setupLocked:!1,useSpeech:!1,speakResponse:!1,showInMenuBar:!1,favorited:!1},"Identify Relationships":{useSubjectClassification:!0,acceptedFileExtensions:"",description:"Identifies various relationships between two or more files",useFaceDetection:!1,name:"Identify Relationships",useBarcodeDetection:!0,useMetadata:!0,actionScript:"",showResponse:!0,minNumFiles:"2",useSoundClassification:!0,outputKind:"detail",useAudioDetails:!0,useRectangleDetection:!0,prompt:"In one paragraph, identify any relationships that might exist between the following files based on their content and the topics they mention. Always identify some relationship, even if it is very general. Explain a use for the files together that none of them have individually.",iconColor:"raycast-primary-text",icon:"box-16"},"Create Action Items":{name:"Create Action Items",prompt:`Generate a markdown list of action items from the following files, using a unique identifier for each item as bold headings. If there are any errors in the files, make actions items to fix them. In a sublist of each item, provide a description, priority, estimated level of difficulty, reasonable duration for the task, and due date based on the the duration and today's date, "{{date}}". Here are the files:`,icon:"app-window-list-16",iconColor:"raycast-red",minNumFiles:"1",acceptedFileExtensions:"",useMetadata:!1,useAudioDetails:!0,useSoundClassification:!0,useSubjectClassification:!0,useRectangleDetection:!1,useBarcodeDetection:!0,useFaceDetection:!1,outputKind:"detail",actionScript:"",showResponse:!0,description:"Provides an itemized list of tasks relevant to the selected files",useSaliencyAnalysis:!1,author:"",website:"",version:"",requirements:"",scriptKind:"applescript",categories:["Calendar","Development"],temperature:"1.0",installedFromStore:!1,setupLocked:!1,useSpeech:!1,speakResponse:!1,showInMenuBar:!1,favorited:!1},"Suggest Hashtags":{name:"Suggest Hashtags",prompt:"Suggest hashtags for the following files based on their contents. Use the file names as markdown headings.",icon:"hashtag-16",iconColor:"raycast-magenta",minNumFiles:"1",acceptedFileExtensions:"",useMetadata:!1,useAudioDetails:!0,useSoundClassification:!0,useSubjectClassification:!0,useRectangleDetection:!1,useBarcodeDetection:!0,useFaceDetection:!0,outputKind:"detail",actionScript:"",showResponse:!0,description:"Provides a list of hashtags related to the selected files",useSaliencyAnalysis:!1,author:"",website:"",version:"",requirements:"",scriptKind:"applescript",categories:["Social"],temperature:"1.0",installedFromStore:!1,setupLocked:!1,useSpeech:!1,speakResponse:!1,showInMenuBar:!1,favorited:!1},"Write Caption":{name:"Write Caption",prompt:"Write a two-sentence caption for these files in the style of a typical image caption, based on their contents. Use the file names as headings. The caption should summarize the content and describe its overall purpose and significance.",icon:"text-cursor-16",iconColor:"raycast-yellow",minNumFiles:"1",acceptedFileExtensions:"",useMetadata:!1,useAudioDetails:!0,useSoundClassification:!0,useSubjectClassification:!0,useRectangleDetection:!1,useBarcodeDetection:!0,useFaceDetection:!1,outputKind:"detail",actionScript:"",showResponse:!0,description:"Drafts a brief caption for files",useSaliencyAnalysis:!1,author:"",website:"",version:"",requirements:"",scriptKind:"applescript",categories:["Writing","Media"],temperature:"1.0",installedFromStore:!1,setupLocked:!1,useSpeech:!1,speakResponse:!1,showInMenuBar:!1,favorited:!1},"Suggest Fonts":{useMetadata:!1,acceptedFileExtensions:"",iconColor:"raycast-magenta",useRectangleDetection:!0,useAudioDetails:!1,prompt:`Here are spme fonts I have installed. Identify some trends in my font choices, then recommend 5 unique fonts that I might like based on those trends. For each recommendation, explain why I might like it in relation to other fonts I have installed.
Here are the fonts:
{{as:use framework "Foundation"\rset fontManager to current application's NSFontManager's sharedFontManager()\rset allFonts to fontManager's availableFonts() as list\rset randomFonts to {}\rrepeat 25 times\r	copy some item of allFonts to end of randomFonts\rend repeat\rreturn randomFonts}}`,actionScript:"",name:"Suggest Fonts",useSubjectClassification:!0,useFaceDetection:!0,useBarcodeDetection:!0,useSoundClassification:!0,outputKind:"detail",showResponse:!0,description:"Lists fonts you might like based on the fonts you have installed",icon:"text-16",minNumFiles:"0"},"Generate Questions":{useAudioDetails:!0,description:"Lists questions related to the selected files",actionScript:"",useFaceDetection:!0,outputKind:"detail",useRectangleDetection:!0,prompt:"Generate questions based on the content of each of the following files, their metadata, filename, type, and other information. Format the response as a markdown list.",useMetadata:!0,iconColor:"raycast-red",showResponse:!0,icon:"question-mark-circle-16",acceptedFileExtensions:"",useSubjectClassification:!0,minNumFiles:"1",useBarcodeDetection:!0,name:"Generate Questions",useSoundClassification:!0},"Extend File":{name:"Extend File",prompt:"Generate new content for the following files using the same style as the rest of the file's content. Explain how the new content fits with the rest. Do not repeat the current content. Use the file names as headings.",icon:"arrows-expand-16",iconColor:"raycast-yellow",minNumFiles:"1",acceptedFileExtensions:"",useMetadata:!1,useAudioDetails:!0,useSoundClassification:!1,useSubjectClassification:!1,useRectangleDetection:!1,useBarcodeDetection:!1,useFaceDetection:!1,outputKind:"detail",actionScript:"",showResponse:!0,description:"Gets text for a longer form of each selected file",useSaliencyAnalysis:!1,author:"",website:"",version:"",requirements:"",scriptKind:"applescript",categories:["Writing","Utilities"],temperature:"1.0",installedFromStore:!1,setupLocked:!1,useSpeech:!1,speakResponse:!1,showInMenuBar:!1,favorited:!1},"Pattern Analysis":{useFaceDetection:!0,useRectangleDetection:!0,useAudioDetails:!0,acceptedFileExtensions:"",description:"Identify and describe any patterns or trends in the content of the following files. Use the file names as headers. Discuss patterns formed by any coordinates, rectangles, etc. Do not mention coordinates.",useSoundClassification:!0,iconColor:"raycast-primary-text",name:"Pattern Analysis",minNumFiles:"1",useBarcodeDetection:!0,showResponse:!0,icon:"line-chart-16",useSubjectClassification:!0,actionScript:"",outputKind:"detail",useMetadata:!0,prompt:"Identify and describe any patterns or trends in the content of the following files. Use the file names as headers. Discuss patterns formed by any coordinates, rectangles, etc. Do not mention coordinates."},"Extract Code":{name:"Extract Code",prompt:"Extract lines of code written in programming languages from the following files. Format the response as markdown code blocks. Place the programming language used in each block as the heading above it. Provide a brief description of what the code does below each block. Do not provide any other commentary.",icon:"code-16",iconColor:"raycast-purple",minNumFiles:"1",acceptedFileExtensions:"",useMetadata:!1,useAudioDetails:!1,useSoundClassification:!1,useSubjectClassification:!1,useRectangleDetection:!1,useBarcodeDetection:!1,useFaceDetection:!1,outputKind:"detail",actionScript:"",showResponse:!0,description:"",useSaliencyAnalysis:!1,author:"",website:"",version:"",requirements:"",scriptKind:"applescript",categories:["Development"],temperature:"1.0",installedFromStore:!1,setupLocked:!1,useSpeech:!1,speakResponse:!1,showInMenuBar:!1,favorited:!1},"Make Song":{name:"Make Song",prompt:"Make a song based on the content of the following files. Provide a name for the song.",icon:"music-16",iconColor:"raycast-red",minNumFiles:"1",acceptedFileExtensions:"",useMetadata:!1,useAudioDetails:!0,useSoundClassification:!0,useSubjectClassification:!0,useRectangleDetection:!1,useBarcodeDetection:!0,useFaceDetection:!0,outputKind:"detail",actionScript:"",showResponse:!0,description:"Generates a song based on the selected files",useSaliencyAnalysis:!1,author:"",website:"",version:"",requirements:"",scriptKind:"applescript",categories:["Media"],temperature:"1.0",installedFromStore:!1,setupLocked:!1,useSpeech:!1,speakResponse:!1,showInMenuBar:!1,favorited:!1},"Extract URLs":{name:"Extract URLs",prompt:"Extract URLs from the following files and list them as markdown links",icon:"link-16",iconColor:"raycast-purple",minNumFiles:"1",acceptedFileExtensions:"",useMetadata:!1,useAudioDetails:!0,useSoundClassification:!1,useSubjectClassification:!1,useRectangleDetection:!1,useBarcodeDetection:!0,useFaceDetection:!1,outputKind:"detail",actionScript:"",showResponse:!0,description:"",useSaliencyAnalysis:!1,author:"",website:"",version:"",requirements:"",scriptKind:"applescript",categories:["Data"],temperature:"1.0",installedFromStore:!1,setupLocked:!1,useSpeech:!1,speakResponse:!1,showInMenuBar:!1,favorited:!1},"Recommend Apps":{useRectangleDetection:!1,useFaceDetection:!1,useBarcodeDetection:!1,minNumFiles:"0",outputKind:"detail",icon:"app-window-grid-3x3-16",name:"Recommend Apps",showResponse:!0,prompt:`Based on the list of apps I have installed, recommend 10 additional macOS applications that I might enjoy. Explain the significance of the relationship between each recommendation and my installed apps. Use any knowledge you have about the apps to inform your suggestions. Format the output as a markdown list. At the start, provide a paragraph analyzing common themes of my apps, directed at me.

Here is the list of apps I have installed:
###
{{installedApps}}
###`,useMetadata:!1,useSubjectClassification:!1,actionScript:"",acceptedFileExtensions:"",description:"Provides a list of apps you might like based on the apps you have installed",iconColor:"raycast-magenta",useAudioDetails:!1,useSoundClassification:!1},"Metadata Analysis":{useBarcodeDetection:!0,icon:"magnifying-glass-16",showResponse:!0,outputKind:"detail",minNumFiles:"1",prompt:`I want you to give several insights about files based on their metadata and file type. Do not summarize the file content, but instead relate the metadata to the content in a meaningful way. Use metadata to suggest improvements to the content. Provide detailed explanations for your suggestions. Format your response as a paragraph summary. Use the file names as headings.
Here's the metadata:
{{metadata}}

Here are the files:`,useSoundClassification:!0,iconColor:"raycast-primary-text",actionScript:"",useFaceDetection:!0,acceptedFileExtensions:"",useMetadata:!0,description:"Discusses insights derived from the metadata of selected files",useSubjectClassification:!0,name:"Metadata Analysis",useRectangleDetection:!0,useAudioDetails:!0},"Summarize Current Tab":{acceptedFileExtensions:"",useRectangleDetection:!1,useBarcodeDetection:!1,useSoundClassification:!1,outputKind:"detail",showResponse:!0,iconColor:"raycast-orange",actionScript:"",name:"Summarize Current Tab",useFaceDetection:!1,prompt:`Based on the following text obtained from the active browser tab, what am I looking at? In your answer, discuss the content and meaning of the website. If the URL or the text are blank, report an error. For context, here is the url: {{currentURL}}:

And here is the text:
###
{{currentTabText}}
###`,minNumFiles:"0",useAudioDetails:!1,description:"",useSubjectClassification:!1,icon:"app-window-16",useMetadata:!1,showInMenuBar:!0},"Compose Tweet":{name:"Compose Tweet",prompt:"Compose a tweet based on the following files:",icon:"bird-16",iconColor:"raycast-blue",minNumFiles:"1",acceptedFileExtensions:"",useMetadata:!1,useAudioDetails:!0,useSoundClassification:!0,useSubjectClassification:!0,useRectangleDetection:!1,useBarcodeDetection:!0,useFaceDetection:!1,outputKind:"detail",actionScript:"",showResponse:!0,description:"Drafts a tweet based on the contents of selected files.",useSaliencyAnalysis:!1,author:"",website:"",version:"",requirements:"",scriptKind:"applescript",categories:["Social"],temperature:"1.0",installedFromStore:!1,setupLocked:!1,useSpeech:!1,speakResponse:!1,showInMenuBar:!1,favorited:!1},"Assess File Overlap":{name:"Assess File Overlap",prompt:"What overlaps in content or ideas exists between the following files? What are the similarities?",icon:"contrast-16",iconColor:"raycast-primary-text",minNumFiles:"2",acceptedFileExtensions:"",useMetadata:!1,useAudioDetails:!0,useSoundClassification:!0,useSubjectClassification:!0,useRectangleDetection:!1,useBarcodeDetection:!0,useFaceDetection:!1,outputKind:"detail",actionScript:"",showResponse:!0,description:"Identifies similarities in content among selected files",useSaliencyAnalysis:!1,author:"",website:"",version:"",requirements:"",scriptKind:"applescript",categories:["Utilities"],temperature:"1.0",installedFromStore:!1,setupLocked:!1,useSpeech:!1,speakResponse:!1,showInMenuBar:!1,favorited:!1},"Identify Gaps":{icon:"arrows-expand-16",minNumFiles:"1",iconColor:"raycast-primary-text",useSubjectClassification:!1,useSoundClassification:!1,showResponse:!0,useRectangleDetection:!1,acceptedFileExtensions:"",useBarcodeDetection:!0,prompt:"Identify any gaps in understanding or content that occur in the following files. Use the file names as headings. Provide content to fill in the gaps.",useAudioDetails:!0,description:"",actionScript:"",name:"Identify Gaps",outputKind:"detail",useFaceDetection:!1,useMetadata:!1},"Identify Selected Files":{iconColor:"raycast-primary-text",useSoundClassification:!0,useSubjectClassification:!0,useRectangleDetection:!0,showResponse:!0,useFaceDetection:!0,actionScript:"",description:"Identifies the type, purpose, category, and use of selected files",useAudioDetails:!0,name:"Identify Selected Files",outputKind:"detail",icon:"magnifying-glass-16",prompt:`Identify the file type and most significant features of the following files based on their content. Discuss the primary purpose of the file based on its content. Categorize the content into relevant topics. Provide an assessment of the file's utility as well a list of relevant links and brief descriptions of them. Format the response as a markdown list using "## File Type", "## Topics", "## Defining Features", "## Purpose and Potential Usage", and "## Relevant Links" as headings.`,minNumFiles:"1",acceptedFileExtensions:"",useBarcodeDetection:!0,useMetadata:!0},"Extract Vocabulary":{name:"Extract Vocabulary",prompt:"Extract the most difficult vocabulary words from the following files and define them. Format the response as a markdown list.",icon:"book-16",iconColor:"raycast-purple",minNumFiles:"1",acceptedFileExtensions:"",useMetadata:!1,useAudioDetails:!0,useSoundClassification:!1,useSubjectClassification:!1,useRectangleDetection:!1,useBarcodeDetection:!0,useFaceDetection:!1,outputKind:"detail",actionScript:"",showResponse:!0,description:"Defines the difficult vocabulary in selected files",useSaliencyAnalysis:!1,author:"",website:"",version:"",requirements:"",scriptKind:"applescript",categories:["Reference","Data"],temperature:"1.0",installedFromStore:!1,setupLocked:!1,useSpeech:!1,speakResponse:!1,showInMenuBar:!1,favorited:!1},"Detect Bias":{name:"Detect Bias",prompt:"Identify and explain the significance of any biases in the content of the following files. Discuss what the risks and dangers of those biases are, and discuss how those risks could be minimized.",icon:"chevron-right-16",iconColor:"raycast-primary-text",minNumFiles:"1",acceptedFileExtensions:"",useMetadata:!1,useAudioDetails:!0,useSoundClassification:!1,useSubjectClassification:!1,useRectangleDetection:!1,useBarcodeDetection:!1,useFaceDetection:!1,outputKind:"detail",actionScript:"",showResponse:!0,description:"Discusses any biases in the selected files",useSaliencyAnalysis:!1,author:"",website:"",version:"",requirements:"",scriptKind:"applescript",categories:["Data"],temperature:"1.0",installedFromStore:!1,setupLocked:!1,useSpeech:!1,speakResponse:!1,showInMenuBar:!1,favorited:!1},"Translate Files To English":{showResponse:!0,useBarcodeDetection:!0,actionScript:"",useAudioDetails:!0,minNumFiles:"1",useMetadata:!1,icon:"text-16",prompt:"Translate the following files to English, using the file names as headings. Reword the translations so that they make sense in plain English. If the phrase is well known in either English or the source language, use the most commonly accepted translation.",useSubjectClassification:!1,useRectangleDetection:!1,useSoundClassification:!1,acceptedFileExtensions:"",outputKind:"detail",useFaceDetection:!1,description:"Translates selected files from any language to English",iconColor:"raycast-yellow",name:"Translate Files To English"},"Write Abstract":{name:"Write Abstract",prompt:"Write an abstract for the following files in the style of an academic research paper. Use the file names as headings. If the abstract includes a list, briefly describe it instead of listing all elements.",icon:"text-cursor-16",iconColor:"raycast-yellow",minNumFiles:"1",acceptedFileExtensions:"",useMetadata:!1,useAudioDetails:!0,useSoundClassification:!0,useSubjectClassification:!0,useRectangleDetection:!1,useBarcodeDetection:!0,useFaceDetection:!1,outputKind:"detail",actionScript:"",showResponse:!0,description:"Drafts abtracts for papers (or files) in their existing style",useSaliencyAnalysis:!1,author:"",website:"",version:"",requirements:"",scriptKind:"applescript",categories:["Writing","Education","Utilities"],temperature:"1.0",installedFromStore:!1,setupLocked:!1,useSpeech:!1,speakResponse:!1,showInMenuBar:!1,favorited:!1},"What Is This?":{showResponse:!0,useBarcodeDetection:!0,actionScript:"",useAudioDetails:!0,minNumFiles:"1",icon:"question-mark-circle-16",useMetadata:!0,useSubjectClassification:!0,prompt:"Based on the content of the following files, answer this question: What is this? Use the file names as headings.",useRectangleDetection:!0,useSoundClassification:!0,acceptedFileExtensions:"",outputKind:"detail",useFaceDetection:!0,description:"Explain what the selected files are and are for",iconColor:"raycast-primary-text",name:"What Is This?"},"Find Errors":{name:"Find Errors",prompt:"What errors and inconsistencies in the following files, why are they significant, and how can I fix them? Format the response as markdown list of sentences with the file names in bold. Use the file names as headings.",icon:"bug-16",iconColor:"raycast-primary-text",minNumFiles:"1",acceptedFileExtensions:"",useMetadata:!1,useAudioDetails:!0,useSoundClassification:!1,useSubjectClassification:!1,useRectangleDetection:!1,useBarcodeDetection:!0,useFaceDetection:!1,outputKind:"detail",actionScript:"",showResponse:!0,description:"Identifies semantic and syntactic errors in selected files",useSaliencyAnalysis:!1,author:"",website:"",version:"",requirements:"",scriptKind:"applescript",categories:["Development"],temperature:"1.0",installedFromStore:!1,setupLocked:!1,useSpeech:!1,speakResponse:!1,showInMenuBar:!1,favorited:!1},"Suggest Related Prompts":{name:"Suggest Related Prompts",prompt:"Suggest a list of 5 prompts for an AI that can read the content of selected files. The AI can't modify or create files. Give prompts based on the topic and structure of the following files. Don't refer to the AI. Prompts must be more than retrieving contents. Each prompt must be different. Each prompt must operate on selected files. Don't use the file names in the prompts. Give a paragraph identifying key relationships between your prompts and the topics of the provided files.",icon:"paragraph-16",iconColor:"raycast-magenta",minNumFiles:"1",acceptedFileExtensions:"",useMetadata:!1,useAudioDetails:!0,useSoundClassification:!0,useSubjectClassification:!0,useRectangleDetection:!1,useBarcodeDetection:!0,useFaceDetection:!1,outputKind:"detail",actionScript:"",showResponse:!0,description:"Lists 5 possible PromptLab prompts related to the selected files",useSaliencyAnalysis:!1,author:"",website:"",version:"",requirements:"",scriptKind:"applescript",categories:["Meta"],temperature:"1.0",installedFromStore:!1,setupLocked:!1,useSpeech:!1,speakResponse:!1,showInMenuBar:!1,favorited:!1},"Extract Named Entities":{name:"Extract Named Entities",prompt:"What are the named entities in the following files, and what are their meanings and purpose? Clarify any abbreviations. Format the response as markdown list of sentences with the entity terms in bold. Use the file names as headings.",icon:"person-lines-16",iconColor:"raycast-purple",minNumFiles:"1",acceptedFileExtensions:"",useMetadata:!1,useAudioDetails:!0,useSoundClassification:!1,useSubjectClassification:!1,useRectangleDetection:!1,useBarcodeDetection:!0,useFaceDetection:!1,outputKind:"detail",actionScript:"",showResponse:!0,description:"Identifies and defines people, places, and organizations in the contents of selected files",useSaliencyAnalysis:!1,author:"",website:"",version:"",requirements:"",scriptKind:"applescript",categories:["Data"],temperature:"1.0",installedFromStore:!1,setupLocked:!1,useSpeech:!1,speakResponse:!1,showInMenuBar:!1,favorited:!1},"Write Introduction":{name:"Write Introduction",prompt:"Write improved introduction sections for the following files in the style of an academic research paper. Use the file names as headings. The introductions must be at least 3 paragraphs long and describe what the file's contents are about, in future tense, as well as provide background information and a summary of the results. If the introduction includes a list, briefly describe the list instead of listing all elements.",icon:"text-cursor-16",iconColor:"raycast-yellow",minNumFiles:"1",acceptedFileExtensions:"",useMetadata:!1,useAudioDetails:!0,useSoundClassification:!0,useSubjectClassification:!0,useRectangleDetection:!1,useBarcodeDetection:!0,useFaceDetection:!1,outputKind:"detail",actionScript:"",showResponse:!0,description:"Drafts introduction sections for papers (or files) in their existing style",useSaliencyAnalysis:!1,author:"",website:"",version:"",requirements:"",scriptKind:"applescript",categories:["Writing","Education","Utilities"],temperature:"1.0",installedFromStore:!1,setupLocked:!1,useSpeech:!1,speakResponse:!1,showInMenuBar:!1,favorited:!1},"Performance Summary":{name:"Performance Summary",prompt:"Give me an analysis of my CPU and RAM usage. Output two friendly paragraphs along with two markdown tables. Use this data to guide your response: ###{{shell:top -stats command,cpu,rsize -n 10 -l 2 -s 1 -e | tail -20 | grep -iE '(PhysMem|CPU Usage)'}}###",icon:"computer-chip-16",iconColor:"raycast-blue",minNumFiles:"0",acceptedFileExtensions:"",useMetadata:!1,useAudioDetails:!1,useSoundClassification:!1,useSubjectClassification:!1,useRectangleDetection:!1,useBarcodeDetection:!1,useFaceDetection:!1,outputKind:"detail",actionScript:"",showResponse:!0,description:"Provides an overview of your current CPU and RAM usage",useSaliencyAnalysis:!1,author:"",website:"",version:"",requirements:"",scriptKind:"applescript",categories:["Data"],temperature:"1.0",installedFromStore:!1,setupLocked:!1,useSpeech:!1,speakResponse:!1,showInMenuBar:!0,favorited:!1},"Extract Phone Numbers":{name:"Extract Phone Numbers",prompt:"Identify all phone numbers in the following files and list them using markdown. Include anything that might be a phone number. If possible, provide the name of the person or company to which the phone number belongs.",icon:"phone-16",iconColor:"raycast-purple",minNumFiles:"1",acceptedFileExtensions:"",useMetadata:!1,useAudioDetails:!0,useSoundClassification:!1,useSubjectClassification:!1,useRectangleDetection:!1,useBarcodeDetection:!0,useFaceDetection:!1,outputKind:"detail",actionScript:"",showResponse:!0,description:"",useSaliencyAnalysis:!1,author:"",website:"",version:"",requirements:"",scriptKind:"applescript",categories:["Data"],temperature:"1.0",installedFromStore:!1,setupLocked:!1,useSpeech:!1,speakResponse:!1,showInMenuBar:!1,favorited:!1},"Extract Email Addresses":{name:"Extract Email Addresses",prompt:"Extract email addresses from the following files and list them as markdown links:",icon:"envelope-16",iconColor:"raycast-purple",minNumFiles:"1",acceptedFileExtensions:"",useMetadata:!1,useAudioDetails:!1,useSoundClassification:!1,useSubjectClassification:!1,useRectangleDetection:!1,useBarcodeDetection:!1,useFaceDetection:!1,outputKind:"detail",actionScript:"",showResponse:!0,description:"",useSaliencyAnalysis:!1,author:"",website:"",version:"",requirements:"",scriptKind:"applescript",categories:["Data"],temperature:"1.0",installedFromStore:!1,setupLocked:!1,useSpeech:!1,speakResponse:!1,showInMenuBar:!1,favorited:!1},"Compare Selected Files":{name:"Compare Selected Files",prompt:"Compare and contrast the content, purpose, and significance of the following files. What are the similarities and differences between them? Format the response as one markdown paragraph.",icon:"contrast-16",iconColor:"raycast-primary-text",minNumFiles:"2",acceptedFileExtensions:"",useMetadata:!0,useAudioDetails:!0,useSoundClassification:!0,useSubjectClassification:!0,useRectangleDetection:!0,useBarcodeDetection:!0,useFaceDetection:!0,outputKind:"detail",actionScript:"",showResponse:!0,description:"Provides a detailed comparison of selected files",useSaliencyAnalysis:!1,author:"",website:"",version:"",requirements:"",scriptKind:"applescript",categories:["Utilities"],temperature:"1.0",installedFromStore:!1,setupLocked:!1,useSpeech:!1,speakResponse:!1,showInMenuBar:!0,favorited:!1},"Historical Context":{name:"Historical Context",prompt:"Based on the topics mentioned in the following files, provide a list of the top 5 most significant relevant historical facts. Ensure all facts are truthful. Do not make up anything. Additionally, provide a paragraph discussing a historical fact that relates to the entire content of the file.",icon:"rewind-16",iconColor:"raycast-primary-text",minNumFiles:"1",acceptedFileExtensions:"",useMetadata:!1,useAudioDetails:!0,useSoundClassification:!0,useSubjectClassification:!0,useRectangleDetection:!1,useBarcodeDetection:!0,useFaceDetection:!1,outputKind:"detail",actionScript:"",showResponse:!0,description:"Discusses the historical significance of the selected files and their subject matter",useSaliencyAnalysis:!1,author:"",website:"",version:"",requirements:"",scriptKind:"applescript",categories:["Reference","Education"],temperature:"1.0",installedFromStore:!1,setupLocked:!1,useSpeech:!1,speakResponse:!1,showInMenuBar:!1,favorited:!1},"Create Flashcards":{name:"Create Flashcards",prompt:"Create 3 Anki flashcards based on the content of the following files. Format the response as markdown with the bold questions and plaintext answers. Separate each entry with '---'.",icon:"blank-document-16",iconColor:"raycast-red",minNumFiles:"1",acceptedFileExtensions:"",useMetadata:!1,useAudioDetails:!0,useSoundClassification:!0,useSubjectClassification:!0,useRectangleDetection:!1,useBarcodeDetection:!0,useFaceDetection:!1,outputKind:"detail",actionScript:"",showResponse:!0,description:"Provides 3 Anki flashcards related to the selected files",useSaliencyAnalysis:!1,author:"",website:"",version:"",requirements:"",scriptKind:"applescript",categories:["Education","Utilities"],temperature:"1.0",installedFromStore:!1,setupLocked:!1,useSpeech:!1,speakResponse:!1,showInMenuBar:!1,favorited:!1},"Weather Forecast":{useFaceDetection:!1,name:"Weather Forecast",useMetadata:!1,showResponse:!0,useSubjectClassification:!1,outputKind:"detail",prompt:`Provide a weather report based on the following forecast data for the next 7 days in {{location}}: ###{{weekWeather}}###

Discuss how this might affect my events over the next week. Consider the purpose and type of each event. My events are: ###{{weekEvents}}###`,icon:"cloud-sun-16",useSoundClassification:!1,useRectangleDetection:!1,description:"Summarizes the forecast for the next 7 days and discusses any impacts on scheduled calendar events",acceptedFileExtensions:"",actionScript:"",minNumFiles:"0",useBarcodeDetection:!1,useAudioDetails:!1,iconColor:"raycast-blue",categories:["Weather","Data"],showInMenuBar:!0,favorited:!1},"Make Jingle":{name:"Make Jingle",prompt:"Create short, memorable jingles summarizing the main ideas in each of the following files, using the file names as headings.",icon:"music-16",iconColor:"raycast-red",minNumFiles:"1",acceptedFileExtensions:"",useMetadata:!1,useAudioDetails:!0,useSoundClassification:!0,useSubjectClassification:!0,useRectangleDetection:!1,useBarcodeDetection:!1,useFaceDetection:!0,outputKind:"detail",actionScript:"",showResponse:!0,description:"Generates a memorable tune based on the selected files",useSaliencyAnalysis:!1,author:"",website:"",version:"",requirements:"",scriptKind:"applescript",categories:["Media"],temperature:"1.0",installedFromStore:!1,setupLocked:!1,useSpeech:!1,speakResponse:!1,showInMenuBar:!1,favorited:!1},"Suggest Project Ideas":{name:"Suggest Project Ideas",prompt:"I want you to act as a project idea generator. I will provide file names and their contents, and you will response with a list of project ideas based on the content of each file. Format the response as a markdown list. Use the file names as headings. Here are the files:",icon:"hammer-16",iconColor:"raycast-magenta",minNumFiles:"1",acceptedFileExtensions:"",useMetadata:!1,useAudioDetails:!0,useSoundClassification:!0,useSubjectClassification:!0,useRectangleDetection:!1,useBarcodeDetection:!0,useFaceDetection:!0,outputKind:"detail",actionScript:"",showResponse:!0,description:"Lists ideas for projects based on the selected files",useSaliencyAnalysis:!1,author:"",website:"",version:"",requirements:"",scriptKind:"applescript",categories:["Development"],temperature:"1.0",installedFromStore:!1,setupLocked:!1,useSpeech:!1,speakResponse:!1,showInMenuBar:!1,favorited:!1},"Today's Agenda":{name:"Today's Agenda",prompt:`Make an agenda for my day using the following list of events. Format the output as friendly paragraph, directed at my, explaining when there is time for breaks or other activities that you recommend. Use today's date ({{date}}) as a markdown header. Here are the events:

###
{{todayEvents}}
{{todayReminders}}
###`,icon:"calendar-16",iconColor:"raycast-blue",minNumFiles:"0",acceptedFileExtensions:"",useMetadata:!1,useAudioDetails:!1,useSoundClassification:!1,useSubjectClassification:!1,useRectangleDetection:!1,useBarcodeDetection:!1,useFaceDetection:!1,outputKind:"detail",actionScript:"",showResponse:!0,description:"Creates an itemized agenda for today",useSaliencyAnalysis:!1,author:"",website:"",version:"",requirements:"",scriptKind:"applescript",categories:["Calendar"],temperature:"1.0",installedFromStore:!1,setupLocked:!1,useSpeech:!1,speakResponse:!1,showInMenuBar:!1,favorited:!1},"Location Significance":{name:"Location Significance",prompt:"What is the significance and history of {{location}}? Format your response as a friendly paragraph.",icon:"geopin-16",iconColor:"raycast-blue",minNumFiles:"0",acceptedFileExtensions:"",useMetadata:!1,useAudioDetails:!1,useSoundClassification:!1,useSubjectClassification:!1,useRectangleDetection:!1,useBarcodeDetection:!1,useFaceDetection:!1,outputKind:"detail",actionScript:"",showResponse:!0,description:"Provides an overview of the history of your current location",useSaliencyAnalysis:!1,author:"",website:"",version:"",requirements:"",scriptKind:"applescript",categories:["Education","Reference"],temperature:"1.0",installedFromStore:!1,setupLocked:!1,useSpeech:!1,speakResponse:!1,showInMenuBar:!1,favorited:!1},"Suggest Improvements":{name:"Suggest Improvements",prompt:"Suggest improvements to the content of the following files. Use the file names as headings. Format the response as a markdown list.",icon:"stars-16",iconColor:"raycast-magenta",minNumFiles:"1",acceptedFileExtensions:"",useMetadata:!0,useAudioDetails:!0,useSoundClassification:!0,useSubjectClassification:!0,useRectangleDetection:!0,useBarcodeDetection:!0,useFaceDetection:!0,outputKind:"detail",actionScript:"",showResponse:!0,description:"Lists possible improvements to the selected files",useSaliencyAnalysis:!1,author:"",website:"",version:"",requirements:"",scriptKind:"applescript",categories:["Writing"],temperature:"1.0",installedFromStore:!1,setupLocked:!1,useSpeech:!1,speakResponse:!1,showInMenuBar:!1,favorited:!1},"Summarize Spoken Audio":{name:"Summarize Spoken Audio",prompt:"Summarize and assess the the following audio files using the file names as headings. Discuss the transcribed text's purpose and significance. Here are the audio transcriptions:",icon:"speaker-on-16",iconColor:"raycast-orange",minNumFiles:"1",acceptedFileExtensions:"mp3, wav, m4a, ogg, aiff, aac, flac, mp4",useMetadata:!1,useAudioDetails:!0,useSoundClassification:!1,useSubjectClassification:!1,useRectangleDetection:!1,useBarcodeDetection:!1,useFaceDetection:!1,outputKind:"detail",actionScript:"",showResponse:!0,description:"Summarizes the spoken content of audio files",useSaliencyAnalysis:!1,author:"",website:"",version:"",requirements:"",scriptKind:"applescript",categories:["Media"],temperature:"1.0",installedFromStore:!1,setupLocked:!1,useSpeech:!1,speakResponse:!1,showInMenuBar:!1,favorited:!1},"Suggest Tools":{name:"Suggest Tools",prompt:"Suggest tools to use based on the topics discussed in the following files. Explain why each tool is relevant. Use the file names as headings. Do not provide any commentary other than the list of tools and their explanations.",icon:"wrench-screwdriver-16",iconColor:"raycast-magenta",minNumFiles:"1",acceptedFileExtensions:"",useMetadata:!0,useAudioDetails:!0,useSoundClassification:!0,useSubjectClassification:!0,useRectangleDetection:!1,useBarcodeDetection:!0,useFaceDetection:!1,outputKind:"detail",actionScript:"",showResponse:!0,description:"Lists and describes various tools relevant to the selected files",useSaliencyAnalysis:!1,author:"",website:"",version:"",requirements:"",scriptKind:"applescript",categories:["Reference","Utilities"],temperature:"1.0",installedFromStore:!1,setupLocked:!1,useSpeech:!1,speakResponse:!1,showInMenuBar:!1,favorited:!1},"Condense File":{name:"Condense File",prompt:"Condense the content of the following files as much as possible. Summarize sentences. Use abbreviations where possible. If the response includes any lists, remove them and briefly describe them instead. Condense clarifying language as much as possible. Use the file names as headings.",icon:"arrows-contract-16",iconColor:"raycast-yellow",minNumFiles:"1",acceptedFileExtensions:"",useMetadata:!1,useAudioDetails:!0,useSoundClassification:!1,useSubjectClassification:!1,useRectangleDetection:!1,useBarcodeDetection:!1,useFaceDetection:!1,outputKind:"detail",actionScript:"",showResponse:!0,description:"Gets text for a greatly shortened form of each selected file",useSaliencyAnalysis:!1,author:"",website:"",version:"",requirements:"",scriptKind:"applescript",categories:["Writing","Utilities"],temperature:"1.0",installedFromStore:!1,setupLocked:!1,useSpeech:!1,speakResponse:!1,showInMenuBar:!1,favorited:!1},"Split Into Text Files":{useRectangleDetection:!1,showResponse:!0,name:"Split Into Text Files",useSubjectClassification:!1,description:"Splits the contents of files into sections and creates a text file for each section in the current directory",iconColor:"raycast-green",minNumFiles:"1",useSoundClassification:!1,outputKind:"detail",useFaceDetection:!1,useMetadata:!1,acceptedFileExtensions:"",actionScript:`set parts to split(response, "$$$$$")

tell application "Finder"
	set currentDir to POSIX path of (insertion location as alias)
end tell

repeat with i from 1 to length of parts
    set theFile to open for access currentDir & (word 1 of item i of parts) & i & ".txt" with write permission
    write item i of parts to theFile
    close access theFile
end repeat`,prompt:'Split the content of the following file into multiple logical sections. Do not put headings in their own section. Output the text of each section. Write "$$$$$" between each section.',icon:"new-document-16",useAudioDetails:!1,useBarcodeDetection:!1},"Make Poem":{name:"Make Poem",prompt:"Make rhyming poems about the the following files. Be creative and include references to the content and purpose of the file in unexpected ways. Do not summarize the file. Make each poem at least 3 stanzas long, but longer for longer files. Use the file names as markdown headings.",icon:"short-paragraph-16",iconColor:"raycast-red",minNumFiles:"1",acceptedFileExtensions:"",useMetadata:!1,useAudioDetails:!0,useSoundClassification:!0,useSubjectClassification:!0,useRectangleDetection:!1,useBarcodeDetection:!0,useFaceDetection:!0,outputKind:"detail",actionScript:"",showResponse:!0,description:"Generates a poem based on the selected files",useSaliencyAnalysis:!1,author:"",website:"",version:"",requirements:"",scriptKind:"applescript",categories:["Writing"],temperature:"1.0",installedFromStore:!1,setupLocked:!1,useSpeech:!1,speakResponse:!1,showInMenuBar:!1,favorited:!1},"Create Slides":{name:"Create Slides",prompt:"Generate 3 or more slideshow slides for each of the following files based on their content. Each slide should have 3 or 4 meaningful bullet points. Organize the slides by topic. Format the slides as markdown lists with '---' separating each slide. Describe an image to include with each slide. Suggest links related to each slide's content. Provide an appropriate title for the slideshow at the beginning of the response.",icon:"play-16",iconColor:"raycast-red",minNumFiles:"1",acceptedFileExtensions:"",useMetadata:!1,useAudioDetails:!0,useSoundClassification:!0,useSubjectClassification:!0,useRectangleDetection:!1,useBarcodeDetection:!0,useFaceDetection:!1,outputKind:"detail",actionScript:"",showResponse:!0,description:"Separates the subject matter of the selected files into slides. Outputs text and suggested images with each slide separated by three dashes.",useSaliencyAnalysis:!1,author:"",website:"",version:"",requirements:"",scriptKind:"applescript",categories:["Utilities","Media"],temperature:"1.0",installedFromStore:!1,setupLocked:!1,useSpeech:!1,speakResponse:!1,showInMenuBar:!1,favorited:!1},"Create Meeting Agenda":{name:"Create Meeting Agenda",prompt:"Create a meeting agenda covering the contents of the following files. Use today's date and time, {{date}}, to provide headings and structure to the agenda.",icon:"app-window-list-16",iconColor:"raycast-red",minNumFiles:"1",acceptedFileExtensions:"",useMetadata:!1,useAudioDetails:!0,useSoundClassification:!1,useSubjectClassification:!1,useRectangleDetection:!1,useBarcodeDetection:!1,useFaceDetection:!1,outputKind:"detail",actionScript:"",showResponse:!0,description:"Generates a meeting agenda based on the contents of selected files",useSaliencyAnalysis:!1,author:"",website:"",version:"",requirements:"",scriptKind:"applescript",categories:["Utilities"],temperature:"1.0",installedFromStore:!1,setupLocked:!1,useSpeech:!1,speakResponse:!1,showInMenuBar:!1,favorited:!1},"Assess Academic Validity":{name:"Assess Academic Validity",prompt:"Assess the academic validity of the following files based on their contents, the methodologies described within, and any results obtained. Use the file names as headings.",icon:"book-16",iconColor:"raycast-primary-text",minNumFiles:"1",acceptedFileExtensions:"",useMetadata:!1,useAudioDetails:!0,useSoundClassification:!1,useSubjectClassification:!0,useRectangleDetection:!1,useBarcodeDetection:!1,useFaceDetection:!1,outputKind:"detail",actionScript:"",showResponse:!0,description:"Provides a review of the truthiness, integrity, and overall value of selected files",useSaliencyAnalysis:!1,author:"",website:"",version:"",requirements:"",scriptKind:"applescript",categories:["Education"],temperature:"1.0",installedFromStore:!1,setupLocked:!1,useSpeech:!1,speakResponse:!1,showInMenuBar:!1,favorited:!1},"Compose Response":{name:"Compose Response",prompt:'Compose a response to the following files in the style of an email. Sign the email with the name "{{user}}"',icon:"text-cursor-16",iconColor:"raycast-yellow",minNumFiles:"1",acceptedFileExtensions:"",useMetadata:!1,useAudioDetails:!0,useSoundClassification:!0,useSubjectClassification:!0,useRectangleDetection:!1,useBarcodeDetection:!0,useFaceDetection:!1,outputKind:"detail",actionScript:"",showResponse:!0,description:"Drafts a signed email response to selected files",useSaliencyAnalysis:!1,author:"",website:"",version:"",requirements:"",scriptKind:"applescript",categories:["Writing","Social"],temperature:"1.0",installedFromStore:!1,setupLocked:!1,useSpeech:!1,speakResponse:!1,showInMenuBar:!1,favorited:!1},"Recent Headlines From 68k News":{name:"Recent Headlines From 68k News",prompt:`Discuss the recent headlines from 68k News:
###
{{http://68k.news}}
###`,icon:"important-01-16",iconColor:"raycast-blue",minNumFiles:"0",acceptedFileExtensions:"",useMetadata:!1,useAudioDetails:!1,useSoundClassification:!1,useSubjectClassification:!1,useRectangleDetection:!1,useBarcodeDetection:!1,useFaceDetection:!1,outputKind:"detail",actionScript:"",showResponse:!0,description:"Summarizes headlines from 68k news",useSaliencyAnalysis:!1,author:"",website:"",version:"",requirements:"",scriptKind:"applescript",categories:["News"],temperature:"1.0",installedFromStore:!1,setupLocked:!1,useSpeech:!1,speakResponse:!1,showInMenuBar:!1,favorited:!1},"Write Discussion":{name:"Write Discussion",prompt:"Write a new discussion section for each of the following files in the style of an academic research paper. The discussion should be past tense and highlight the paper's successes. Use the file names as headings.",icon:"text-cursor-16",iconColor:"raycast-yellow",minNumFiles:"1",acceptedFileExtensions:"",useMetadata:!1,useAudioDetails:!0,useSoundClassification:!0,useSubjectClassification:!0,useRectangleDetection:!1,useBarcodeDetection:!0,useFaceDetection:!1,outputKind:"detail",actionScript:"",showResponse:!0,description:"Drafts discussion sections for papers (or files) in their existing style",useSaliencyAnalysis:!1,author:"",website:"",version:"",requirements:"",scriptKind:"applescript",categories:["Writing","Education","Utilities"],temperature:"1.0",installedFromStore:!1,setupLocked:!1,useSpeech:!1,speakResponse:!1,showInMenuBar:!1,favorited:!1},"Suggest Title":{name:"Suggest Title",prompt:"Suggest new titles for the following files based on their content and topics mentioned. Use the file names as headings.",icon:"text-16",iconColor:"raycast-magenta",minNumFiles:"1",acceptedFileExtensions:"",useMetadata:!1,useAudioDetails:!0,useSoundClassification:!0,useSubjectClassification:!0,useRectangleDetection:!1,useBarcodeDetection:!0,useFaceDetection:!1,outputKind:"detail",actionScript:"",showResponse:!0,description:"Provides possible titles for each selected file",useSaliencyAnalysis:!1,author:"",website:"",version:"",requirements:"",scriptKind:"applescript",categories:["Writing"],temperature:"1.0",installedFromStore:!1,setupLocked:!1,useSpeech:!1,speakResponse:!1,showInMenuBar:!1,favorited:!1}};var Le=require("@raycast/api"),Zs={"--model-GPT-3.5-Turbo via Raycast AI":{name:"GPT-3.5-Turbo via Raycast AI",description:"Most capable GPT-3.5 model and optimized for chat.",endpoint:"Raycast AI 3.5",authType:"",apiKey:"",inputSchema:"",outputKeyPath:"",outputTiming:"async",lengthLimit:"2500",favorited:!1,id:"",icon:Le.Icon.Rocket,iconColor:Le.Color.Red,notes:"",isDefault:!1,temperature:"1.0"},"--model-GPT-3.5-Turbo-Instruct Via Raycast AI":{name:"GPT-3.5-Turbo-Instruct Via Raycast AI",description:"Can do any language task with better quality, longer output, and consistent instruction-following than the curie, babbage, or ada models.",endpoint:"Raycast AI",authType:"",apiKey:"",inputSchema:"",outputKeyPath:"",outputTiming:"async",lengthLimit:"2500",favorited:!1,id:"",icon:Le.Icon.TextInput,iconColor:Le.Color.Blue,notes:"",isDefault:!0,temperature:"1.0"},"--model-claude-instant-1-100k":{authType:"x-api-key",id:"",favorited:!1,iconColor:"raycast-yellow",icon:"brush-16",outputKeyPath:"completion",notes:"",outputTiming:"async",apiKey:"",endpoint:"https://api.anthropic.com/v1/complete",isDefault:!1,name:"claude-instant-1-100k",lengthLimit:"95000",inputSchema:'{"prompt": "\\n\\nHuman: {{prompt}} \\n\\nAssistant:", "model": "claude-instant-1-100k", "max_tokens_to_sample": 3000, "stream": true }',description:"An enhanced version of claude-instant-v1 with a 100,000 token context window that retains its performance. Well-suited for high throughput use cases needing both speed and additional context, allowing deeper understanding from extended conversations and documents.",temperature:"1.0"},"--model-GPT-3.5-Turbo Via OpenAI":{endpoint:"https://api.openai.com/v1/chat/completions",apiKey:"",inputSchema:'{ "model": "gpt-3.5-turbo", "messages": [{"role": "user", "content": "{prompt}"}], "stream": true }',iconColor:"raycast-green",notes:"",temperature:"1.0",lengthLimit:"2500",icon:"speech-bubble-16",isDefault:!1,id:"",authType:"bearerToken",favorited:!1,description:"Optimized for chat but works well for traditional completions tasks as well.",name:"GPT-3.5-Turbo Via OpenAI",outputKeyPath:"choices[0].delta.content",outputTiming:"async"}};var oi=require("crypto"),Yt=ie(require("path"));var y=require("@raycast/api");var Qs="placeholders_guide.md",gt="custom_placeholders.json",Ie="advanced_settings.json";var Cn=[{name:"Other",icon:y.Icon.Circle,color:y.Color.SecondaryText},{name:"Calendar",icon:y.Icon.Calendar,color:y.Color.Red},{name:"Data",icon:y.Icon.List,color:y.Color.Blue},{name:"Development",icon:y.Icon.Terminal,color:y.Color.PrimaryText},{name:"Education",icon:y.Icon.Bookmark,color:y.Color.Orange},{name:"Entertainment",icon:y.Icon.Video,color:y.Color.Red},{name:"Files",icon:y.Icon.Folder,color:y.Color.Blue},{name:"Finance",icon:y.Icon.Coin,color:y.Color.Green},{name:"Health",icon:y.Icon.Heartbeat,color:y.Color.Red},{name:"Lifestyle",icon:y.Icon.Person,color:y.Color.Green},{name:"Media",icon:y.Icon.Image,color:y.Color.Magenta},{name:"Meta",icon:y.Icon.Info,color:y.Color.SecondaryText},{name:"News",icon:y.Icon.Important,color:y.Color.Blue},{name:"Productivity",icon:y.Icon.Checkmark,color:y.Color.Green},{name:"Reference",icon:y.Icon.Book,color:y.Color.Red},{name:"Shopping",icon:y.Icon.Cart,color:y.Color.Purple},{name:"Social",icon:y.Icon.TwoPeople,color:y.Color.Green},{name:"Sports",icon:y.Icon.SoccerBall,color:y.Color.PrimaryText},{name:"Travel",icon:y.Icon.Airplane,color:y.Color.Yellow},{name:"Utilities",icon:y.Icon.Calculator,color:y.Color.Blue},{name:"Weather",icon:y.Icon.CloudSun,color:y.Color.Blue},{name:"Web",icon:y.Icon.Network,color:y.Color.Red},{name:"Writing",icon:y.Icon.Pencil,color:y.Color.Yellow}];var ei={"{{showDialog:(([^{]|{(?!{)|{{[\\s\\S]*?}})*?)}}":{name:"showDialog",description:"Displays a dialog window with the given text as its message.",value:'{{as:display dialog "$1"}}',example:"{{showDialog:Hello world!}}",hintRepresentation:"{{showDialog:...}}"},"{{showAlert:([\\s\\S]*?)(:([\\s\\S]*?))?}}":{name:"showAlert",description:"Displays an alert with the given message and optional title.",value:'{{as:display alert "$1" message "$3"}}',example:"{{showAlert:Hello:World!}}",hintRepresentation:"{{showAlert:...}}"},"{{showList((:([^{])+?)*?)}}":{name:"showList",description:"Displays a list of items for the user to choose from and waits for their response. The placeholder will be replaced with the user's selection.",value:`{{js:const result = '$1'; const regex = /((?<=:)[^:]*?(?=(:|$)))+/g; const matches = result.match(regex); const ls = matches.join('", "'); as(\`set theAnswer to choose from list {"\${ls}"}
return theAnswer\`).then((answer) => { as(\`tell application "System Events"
open location "raycast://"
end tell\`); return answer });}}`,example:"Tell me a true story about {{showList:AI:Steve Jobs:Computer History}}",hintRepresentation:"{{showList:...:...:...}}"},"{{localSummary( sentences=(\\d+))?:(([^{]|{(?!{)|{{[\\s\\S]*?}})*?)}}":{name:"localSummary",description:"Summarizes text using macOS' native summarization tool. Accepts sentence count as an optional parameter.",value:`{{as:set numSentences to "$2" 
 if length of numSentences is 0 then set numSentences to 2 
 set numSentences to (numSentences as number) 
 summarize "$3" in numSentences}}`,example:"{{localSummary sentences=1:There's a snake in my boot!}}",hintRepresentation:"{{localSummary:...}}"}};var dn=require("@raycast/api");var mn=require("@raycast/api");var pn=require("@raycast/api");var N=ie(require("react")),z=require("@raycast/api");var si=require("react/jsx-runtime");function ti(a){let r=(0,N.useRef)(a);return r.current=a,r}var ii=(function(a){return a.Required="required",a})({});function Xt(a,r){if(a){if(typeof a=="function")return a(r);if(a==="required"){let l=typeof r<"u"&&r!==null;if(l)switch(typeof r){case"string":l=r.length>0;break;case"object":Array.isArray(r)?l=r.length>0:r instanceof Date&&(l=r.getTime()>0);break;default:break}if(!l)return"The item is required"}}}function ni(a){let{onSubmit:r,validation:l,initialValues:f={}}=a,[p,h]=(0,N.useState)(f),[w,D]=(0,N.useState)({}),L=(0,N.useRef)({}),k=ti(l||{}),re=ti(r),b=(0,N.useCallback)(T=>{L.current[T]?.focus()},[L]),m=(0,N.useCallback)(async T=>{let A=!1;for(let[oe,H]of Object.entries(k.current)){let M=Xt(H,T[oe]);M&&(A||(A={},b(oe)),A[oe]=M)}if(A)return D(A),!1;let B=await re.current(T);return typeof B=="boolean"?B:!0},[k,re,b]),U=(0,N.useCallback)((T,A)=>{D(B=>({...B,[T]:A}))},[D]),Ve=(0,N.useCallback)(function(T,A){h(B=>({...B,[T]:typeof A=="function"?A(B[T]):A}))},[h]),Ye=(0,N.useMemo)(()=>new Proxy({},{get(T,A){let B=k.current[A],oe=p[A];return{onChange(H){w[A]&&(Xt(B,H)||U(A,void 0)),Ve(A,H)},onBlur(H){let M=Xt(B,H.target.value);M&&U(A,M)},error:w[A],id:A,value:typeof oe>"u"?null:oe,ref:H=>{L.current[A]=H}}}}),[w,k,U,p,L,Ve]),I=(0,N.useCallback)(T=>{D({}),Object.entries(L.current).forEach(([A,B])=>{T?.[A]||B?.reset()}),T&&h(T)},[h,D,L]);return{handleSubmit:m,setValidationError:U,setValue:Ve,values:p,itemProps:Ye,focus:b,reset:I}}var gn=ie(ri());var Pe=require("@raycast/api"),$e={settingsVersion:1.13,commandDefaults:{name:"",prompt:"",icon:Pe.Icon.CommandSymbol,iconColor:Pe.Color.Red,minNumFiles:"0",useMetadata:!1,acceptedFileExtensions:"",useAudioDetails:!1,useSoundClassification:!1,useSubjectClassification:!1,useRectangleDetection:!1,useBarcodeDetection:!1,useFaceDetection:!1,outputKind:"detail",actionScript:"",showResponse:!0,description:"",useSaliencyAnalysis:!1,useHorizonDetection:!1,author:"",website:"",version:"1.0.0",requirements:"",scriptKind:"applescript",categories:["Other"],temperature:"1.0",favorited:!1,model:"",useSpeech:!1,speakResponse:!1,showInMenuBar:!0,recordRuns:!0},modelDefaults:{name:"",description:"",endpoint:"",authType:"apiKey",apiKey:"",inputSchema:"",outputKeyPath:"",outputTiming:"async",lengthLimit:"2500",favorited:!1,icon:Pe.Icon.Cog,iconColor:Pe.Color.Red,notes:"",isDefault:!1,temperature:"1.0"},chatDefaults:{icon:Pe.Icon.Message,iconColor:Pe.Color.Red,favorited:!1,condensingStrategy:"summarize",summaryLength:"100",showBasePrompt:!0,useSelectedFilesContext:!1,useConversationContext:!0,allowAutonomy:!1},placeholderSettings:{processPlaceholders:!0,allowCustomPlaceholders:!0,allowCustomPlaceholderPaths:!0,useUserShellEnvironment:!0},fileAnalysisSettings:{videoSampleCount:15,singlePreviewForKeynote:!1},actionSettings:{RunCommandAction:{enabled:["search-commands"],shortcut:{key:"r",modifiers:["cmd"]}},ShareCommandAction:{enabled:["search-commands"],shortcut:{key:"s",modifiers:["cmd","shift"]}},OpenPlaceholdersGuideAction:{enabled:["search-commands","create-command","chat"],openIn:"default",shortcut:{key:"g",modifiers:["cmd","shift"]}},OpenAdvancedSettingsAction:{enabled:["search-commands","create-command","chat"],openIn:"default",shortcut:{key:"v",modifiers:["cmd","shift"]}},EditCustomPlaceholdersAction:{enabled:["create-command","search-commands","chat"],openIn:"default",shortcut:{key:"p",modifiers:["cmd","shift"]}},CopyCommandPromptAction:{enabled:["search-commands"],shortcut:{key:"p",modifiers:["cmd","shift"]}},CopyJSONAction:{enabled:["search-commands","manage-models","chat"],shortcut:{key:"j",modifiers:["cmd","shift"]}},CopyCommandIDAction:{enabled:["search-commands"],shortcut:{key:"i",modifiers:["cmd","shift"]}},ExportAllCommandsAction:{enabled:["search-commands"],shortcut:{key:"a",modifiers:["cmd","shift"]}},ToggleFavoriteAction:{enabled:["search-commands","manage-models","chat"],shortcut:{key:"f",modifiers:["cmd","shift"]}},CreateQuickLinkAction:{enabled:["search-commands"],shortcut:{key:"q",modifiers:["cmd","shift"]}},EditCommandAction:{enabled:["search-commands"],shortcut:{key:"e",modifiers:["cmd"]}},CreateDerivativeAction:{enabled:["search-commands","discover-commands"],shortcut:{key:"d",modifiers:["cmd"]}},InstallAllCommandsAction:{enabled:["discover-commands"],shortcut:{key:"i",modifiers:["cmd","shift"]}},InstallCommandAction:{enabled:["discover-commands"],shortcut:{key:"i",modifiers:["cmd"]}},ToggleSetupFieldsAction:{enabled:["search-commands","discover-commands","create-command"],shortcut:{key:"s",modifiers:["cmd","shift"]}},CopyChatResponseAction:{enabled:["search-commands","discover-commands","chat"],shortcut:{key:"c",modifiers:["cmd","shift"]}},CopyChatQueryAction:{enabled:["search-commands","discover-commands","chat"],shortcut:{key:"q",modifiers:["cmd","shift"]}},CopyChatBasePromptAction:{enabled:["search-commands","discover-commands","chat"],shortcut:{key:"p",modifiers:["cmd","shift"]}},ChatSettingsAction:{enabled:["search-commands","discover-commands","chat"],shortcut:{key:"e",modifiers:["cmd"]}},RegenerateChatAction:{enabled:["search-commands","discover-commands","chat"],shortcut:{key:"r",modifiers:["cmd"]}},ToggleChatFavoriteAction:{enabled:["search-commands","discover-commands","chat"],shortcut:{key:"f",modifiers:["cmd"]}},ExportChatAction:{enabled:["search-commands","discover-commands","chat"],shortcut:{key:"e",modifiers:["cmd","shift"]}},DeleteAction:{enabled:["search-commands","discover-commands","chat","manage-models"],shortcut:{key:"x",modifiers:["cmd"]}},DeleteAllAction:{enabled:["search-commands","discover-commands","chat","manage-models"],shortcut:{key:"x",modifiers:["cmd","opt","shift"]}},ToggleModelDefaultAction:{enabled:["manage-models"],shortcut:{key:"d",modifiers:["cmd","shift"]}},CreateModelDerivativeAction:{enabled:["manage-models"],shortcut:{key:"c",modifiers:["cmd","shift"]}},CopyAllJSONAction:{enabled:["manage-models","chat"],shortcut:{key:"j",modifiers:["cmd","opt","shift"]}},AddNewModelAction:{enabled:["manage-models"],shortcut:{key:"n",modifiers:["cmd"]}},EditModelAction:{enabled:["manage-models"],shortcut:{key:"e",modifiers:["cmd"]}},ViewPreviousRunsAction:{enabled:["search-commands"],shortcut:{key:"p",modifiers:["cmd","opt"]}}}};async function ci(){if(!await be.LocalStorage.getItem("--defaults-installed")){if(Object.keys(await be.LocalStorage.allItems()).length>0)return;for(let[p,h]of Object.entries(Ys))await be.LocalStorage.setItem(p,JSON.stringify(h));for(let[p,h]of Object.entries(Zs))await be.LocalStorage.setItem(p,JSON.stringify({...h,id:(0,oi.randomUUID)()}));let l=Yt.default.join(be.environment.supportPath,gt);Se.existsSync(l)||await Se.promises.writeFile(l,JSON.stringify(ei,null,2));let f=Yt.default.join(be.environment.supportPath,Ie);Se.existsSync(f)||await Se.promises.writeFile(f,JSON.stringify($e,null,2)),await be.LocalStorage.setItem("--defaults-installed","true")}}var bt=require("@raycast/api");async function we(a,r){a.name!==r.name&&await bt.LocalStorage.removeItem(`--model-${a.name}`),await bt.LocalStorage.setItem(`--model-${r.name}`,JSON.stringify(r))}async function St(a){await bt.LocalStorage.removeItem(`--model-${a.name}`)}function li(){let[a,r]=(0,Ue.useState)([]),[l,f]=(0,Ue.useState)(!0),[p,h]=(0,Ue.useState)(),w=async()=>{f(!0);let b=await Ce.LocalStorage.allItems(),m=Object.entries(b).filter(([U])=>U.startsWith("--model-")).map(([,U])=>JSON.parse(U));r(m),f(!1)};return(0,Ue.useEffect)(()=>{Promise.resolve(ci()).then(()=>{Promise.resolve(w())})},[]),{models:a,isLoading:l,error:p,revalidate:async()=>w(),createModel:async b=>{if(!b.name)return h("Name cannot be empty."),!1;if(a.find(U=>U.name==b.name))return h("A model with that name already exists."),!1;let m={name:b.name,description:b.description||"",icon:b.icon||Ce.Icon.Gear,iconColor:b.iconColor||Ce.Color.PrimaryText,favorited:!1,endpoint:b.endpoint||"",authType:b.authType||"",apiKey:b.apiKey||"",inputSchema:b.inputSchema||"",outputKeyPath:b.outputKeyPath||"",outputTiming:b.outputTiming||"sync",lengthLimit:b.lengthLimit||"2500",id:"",notes:b.notes||"",isDefault:b.isDefault,temperature:b.temperature||"1.0"};if(b.isDefault)for(let U of a)await we(U,{...U,isDefault:!1});return await Ce.LocalStorage.setItem(`--model-${b.name}`,JSON.stringify(m)),m},favorites:()=>a.filter(b=>b.favorited),dummyModel:()=>({name:"",description:"",icon:Ce.Icon.Gear,iconColor:Ce.Color.Red,favorited:!1,endpoint:"",authType:"",apiKey:"",inputSchema:"",outputKeyPath:"",outputTiming:"sync",lengthLimit:"2500",id:"",notes:"",isDefault:!1,temperature:"1.0"})}}var d=require("@raycast/api");var wt=require("react"),ui=require("crypto");var di=ie(require("path")),fi=ie(require("fs"));var S=require("react/jsx-runtime");function ve(a){let{models:r,currentModel:l,duplicate:f}=a,{pop:p}=(0,d.useNavigation)(),[h,w]=(0,wt.useState)(""),D=()=>{try{let b=JSON.parse(fi.default.readFileSync(di.default.join(d.environment.supportPath,Ie),"utf-8"));if("modelDefaults"in b)return b.modelDefaults}catch(b){console.error(b)}return r.dummyModel()};(0,wt.useEffect)(()=>{let b=(0,ui.randomUUID)();w(b),l&&!l.id&&Promise.resolve(we(l,{...l,id:b})).then(()=>r.revalidate())},[]);let{handleSubmit:L,itemProps:k,values:re}=ni({async onSubmit(b){await d.LocalStorage.setItem(`--model-${b.name}`,JSON.stringify(b)),l&&l.name!=b.name&&await d.LocalStorage.removeItem(`--model-${l.name}`),r.revalidate(),l&&!f?await(0,d.showToast)({title:"Models Saved"}):await(0,d.showToast)({title:"Added Model"}),p()},initialValues:l||D(),validation:{name:ii.Required}});return(0,S.jsxs)(d.Form,{actions:(0,S.jsx)(d.ActionPanel,{children:(0,S.jsx)(d.Action.SubmitForm,{title:"Save",onSubmit:L})}),children:[(0,S.jsx)(d.Form.TextField,{title:"Model Name",...k.name,info:"A recognizable name for the model."}),(0,S.jsx)(d.Form.Dropdown,{title:"Icon",...k.icon,children:Object.keys(d.Icon).map((b,m)=>(0,S.jsx)(d.Form.Dropdown.Item,{title:b,value:Object.values(d.Icon)[m],icon:Object.values(d.Icon)[m]},b))}),(0,S.jsxs)(d.Form.Dropdown,{title:"Icon Color",...k.iconColor,children:[(0,S.jsx)(d.Form.Dropdown.Item,{title:d.environment.appearance=="dark"?"White":"Black",value:d.Color.PrimaryText,icon:{source:d.Icon.CircleFilled,tintColor:d.Color.PrimaryText}}),(0,S.jsx)(d.Form.Dropdown.Item,{title:"Red",value:d.Color.Red,icon:{source:d.Icon.CircleFilled,tintColor:d.Color.Red}}),(0,S.jsx)(d.Form.Dropdown.Item,{title:"Orange",value:d.Color.Orange,icon:{source:d.Icon.CircleFilled,tintColor:d.Color.Orange}}),(0,S.jsx)(d.Form.Dropdown.Item,{title:"Yellow",value:d.Color.Yellow,icon:{source:d.Icon.CircleFilled,tintColor:d.Color.Yellow}}),(0,S.jsx)(d.Form.Dropdown.Item,{title:"Green",value:d.Color.Green,icon:{source:d.Icon.CircleFilled,tintColor:d.Color.Green}}),(0,S.jsx)(d.Form.Dropdown.Item,{title:"Blue",value:d.Color.Blue,icon:{source:d.Icon.CircleFilled,tintColor:d.Color.Blue}}),(0,S.jsx)(d.Form.Dropdown.Item,{title:"Purple",value:d.Color.Purple,icon:{source:d.Icon.CircleFilled,tintColor:d.Color.Purple}}),(0,S.jsx)(d.Form.Dropdown.Item,{title:"Magenta",value:d.Color.Magenta,icon:{source:d.Icon.CircleFilled,tintColor:d.Color.Magenta}})]}),(0,S.jsx)(d.Form.Checkbox,{label:"Default",...k.isDefault,info:"Whether to use this model as the default for all commands that don't specify a particular model"}),(0,S.jsx)(d.Form.Checkbox,{label:"Favorited",...k.favorited,info:"Whether to add this model to the favorited models list"}),(0,S.jsx)(d.Form.Separator,{}),(0,S.jsx)(d.Form.Description,{title:"Model Details",text:"The details of the model"}),(0,S.jsx)(d.Form.TextField,{title:"Endpoint",...k.endpoint,info:"The API endpoint of the model used to generate PromptLab command output."}),(0,S.jsxs)(d.Form.Dropdown,{title:"Auth Type",...k.authType,info:"The authorization type for the model endpoint, e.g. API Key or Bearer.",children:[(0,S.jsx)(d.Form.Dropdown.Item,{title:"API Key",value:"apiKey",icon:{source:d.Icon.Key}}),(0,S.jsx)(d.Form.Dropdown.Item,{title:"Bearer Token",value:"bearerToken",icon:{source:d.Icon.Lock}}),(0,S.jsx)(d.Form.Dropdown.Item,{title:"X-API-Key",value:"x-api-key",icon:{source:d.Icon.Key}})]}),(0,S.jsx)(d.Form.PasswordField,{title:`${re.authType}`,...k.apiKey,info:"The API key for the model source."}),(0,S.jsx)(d.Form.TextField,{title:"Input Schema",...k.inputSchema,info:"The JSON schema of the endpoint used to generate PromptLab command output. Use {prompt} to represent PromptLab's entire query to the model input, or {basePrompt} and {input} to represent the component parts."}),(0,S.jsx)(d.Form.TextField,{title:"Output Key Path",...k.outputKeyPath,info:"The key path to the text output in the JSON response from the model endpoint. For example, choices[0].message.content, for the OpenAI API."}),(0,S.jsx)(d.Form.TextField,{title:"Creativity",...k.temperature,info:"A measure of how much randomness and creativity the model will use in its outputs. Also called temperature."}),(0,S.jsxs)(d.Form.Dropdown,{title:"Output Timing",...k.outputTiming,info:"Whether output from the model endpoint should be processed synchronously or asynchronously. Often, this is also an option on the model API.",children:[(0,S.jsx)(d.Form.Dropdown.Item,{title:"Synchronous",value:"sync",icon:{source:d.Icon.Clock}}),(0,S.jsx)(d.Form.Dropdown.Item,{title:"Asynchronous",value:"async",icon:{source:d.Icon.QuestionMarkCircle}})]}),(0,S.jsx)(d.Form.TextField,{title:"Length Limit",...k.lengthLimit,info:"The maximum length of the prompt that will be sent to the model endpoint, beyond which it will be truncated. Larger values will support more content, but may result in token count errors. Adjust this value according to the model's token limit (but leave some space, e.g. 1000 characters, for additional input and placeholders)."}),(0,S.jsx)(d.Form.Separator,{}),(0,S.jsx)(d.Form.Description,{title:"Metadata",text:"Additional information that may come in useful"}),(0,S.jsx)(d.Form.TextArea,{title:"Description",...k.description,info:"A brief description for the model, e.g. what you are mainly using it for"}),(0,S.jsx)(d.Form.TextField,{title:"Notes",...k.notes,info:"Personal notes regarding this model"}),(0,S.jsx)(d.Form.TextField,{title:"ID",...k.id,value:l&&l.id?l.id:h,info:"The unique ID of this model"})]})}var Je=require("react");var Ne=ie(require("fs")),qe=require("@raycast/api");var pi=ie(require("path")),hi=()=>{let[a,r]=(0,Je.useState)($e),[l,f]=(0,Je.useState)(!0),p=pi.default.join(qe.environment.supportPath,Ie),h=async()=>{try{await Ne.promises.writeFile(p,JSON.stringify($e,null,2))}catch{await(0,qe.showToast)({title:"Error",message:"Could not create advanced settings file."})}},w=async()=>{Ne.existsSync(p)||await h();try{let L=JSON.parse(Ne.readFileSync(p,"utf-8"));r(L)}catch{await(0,qe.showToast)({title:"Error",message:"Could not load advanced settings file."})}},D=async()=>{f(!0),await w(),f(!1)};return(0,Je.useEffect)(()=>{D()},[]),{advancedSettings:a,revalidateAdvancedSettings:D,loadingAdvancedSettings:l}};var ps=require("@raycast/api");var Ct=require("@raycast/api");var Zt=require("@raycast/api");var P=(a,r)=>{let l=Zt.environment.commandName;return r.actionSettings[a]?.enabled.includes(l)??!0},mi=(a,r)=>{let l=Zt.environment.commandName;return a.some(f=>r.actionSettings[f]?.enabled.includes(l)??!0)};var R=(a,r)=>{let l=$e.actionSettings,f=r.actionSettings,p=l[a]?{modifiers:l[a].shortcut.modifiers,key:l[a].shortcut.key}:void 0;return r.actionSettings&&a in f&&p&&f[a]?.shortcut&&(p.modifiers=f[a].shortcut.modifiers??p.modifiers,p.key=f[a].shortcut.key??p.key),p};var Qt=require("react/jsx-runtime");function es(a){let{models:r,settings:l}=a;return P("AddNewModelAction",l)?(0,Qt.jsx)(Ct.Action.Push,{title:"Add New Model",icon:Ct.Icon.PlusCircle,shortcut:R("AddNewModelAction",l),target:(0,Qt.jsx)(ve,{models:r})}):null}var vt=require("@raycast/api");var ts=require("react/jsx-runtime");function ss(a){let{model:r,models:l,settings:f}=a;return P("EditModelAction",f)?(0,ts.jsx)(vt.Action.Push,{title:"Edit Model",icon:vt.Icon.Pencil,shortcut:R("EditModelAction",f),target:(0,ts.jsx)(ve,{models:l,currentModel:r})}):null}var Xe=require("@raycast/api");var gi=require("react/jsx-runtime");function is(a){let{model:r,models:l,settings:f}=a;return P("ToggleModelDefaultAction",f)?(0,gi.jsx)(Xe.Action,{title:`${r.isDefault?"Remove As Default":"Set As Default"}`,icon:r.isDefault?Xe.Icon.XMarkCircle:Xe.Icon.CheckCircle,shortcut:R("ToggleModelDefaultAction",f),onAction:async()=>{await we(r,{...r,isDefault:!r.isDefault});for(let p of l.models)p.id!=r.id&&await we(p,{...p,isDefault:!1});await l.revalidate()}}):null}var je=require("@raycast/api");var ns=require("react/jsx-runtime");function as(a){let{model:r,models:l,settings:f}=a,{push:p}=(0,je.useNavigation)();return P("CreateModelDerivativeAction",f)?(0,ns.jsx)(je.Action,{title:"Create Derivative",icon:je.Icon.EyeDropper,shortcut:R("CreateModelDerivativeAction",f),onAction:async()=>{let h=await l.createModel({...r,name:`${r.name} Copy`,isDefault:!1,favorited:!1});await l.revalidate(),h&&p((0,ns.jsx)(ve,{models:l,currentModel:h,duplicate:!0}))}}):null}var xt=require("@raycast/api");var Y=require("@raycast/api");var kt=ie(require("path"));var At=require("react/jsx-runtime");function yi(a){let{settings:r}=a;if(!P("OpenPlaceholdersGuideAction",r))return null;let l=r.actionSettings.OpenPlaceholdersGuideAction.openIn,f=kt.default.join(Y.environment.assetsPath,Qs);return(0,At.jsx)(Y.Action.Open,{title:"Open Placeholders Guide",target:f,application:l=="default"?void 0:l,shortcut:R("OpenPlaceholdersGuideAction",r)})}function bi(a){let{settings:r}=a;if(!P("EditCustomPlaceholdersAction",r))return null;let l=r.actionSettings.EditCustomPlaceholdersAction.openIn,f=kt.default.join(Y.environment.supportPath,gt);return(0,At.jsx)(Y.Action.Open,{title:"Edit Custom Placeholders",target:f,application:l=="default"?void 0:l,icon:Y.Icon.Underline,shortcut:R("EditCustomPlaceholdersAction",r)})}function Si(a){let{settings:r}=a;if(!P("OpenAdvancedSettingsAction",r))return null;let l=r.actionSettings.OpenAdvancedSettingsAction.openIn,f=kt.default.join(Y.environment.supportPath,Ie);return(0,At.jsx)(Y.Action.Open,{title:"Open Advanced Settings",target:f,icon:Y.Icon.Cog,shortcut:R("OpenAdvancedSettingsAction",r),application:l=="default"?void 0:l})}var Be=require("react/jsx-runtime"),wi=a=>{let{settings:r}=a;return(0,Be.jsxs)(xt.ActionPanel.Submenu,{title:"Advanced\u2026",icon:xt.Icon.CommandSymbol,shortcut:{modifiers:["cmd","shift"],key:"a"},children:[(0,Be.jsx)(bi,{settings:r}),(0,Be.jsx)(yi,{settings:r}),(0,Be.jsx)(Si,{settings:r})]})};var vi=require("@raycast/api");function Z(a){return"condensingStrategy"in a}var G=a=>!("exampleOutput"in a)&&"minNumFiles"in a,Ke=a=>"exampleOutput"in a,Dt=a=>"commandID"in a;function Q(a){return"endpoint"in a}function Ci(a){let r="item";G(a)||Ke(a)?r=a.name:Z(a)?r=`--chat-${a.name}`:Q(a)&&(r=`--model-${a.name}`);let l={[r]:a};return JSON.stringify(l).replaceAll(/\\([^"])/g,"\\\\$1")}function ne(a){return G(a)||Ke(a)?"Command":Dt(a)?"Run":Z(a)?"Chat":Q(a)?"Model":"Item"}var ki=require("react/jsx-runtime");function rs(a){let{object:r,settings:l}=a;if(!P("CopyJSONAction",l))return null;let f=ne(r);return(0,ki.jsx)(vi.Action.CopyToClipboard,{title:`Copy ${f} JSON`,content:Ci(r),shortcut:R("CopyJSONAction",l)})}var Ai=require("@raycast/api");var xi=require("react/jsx-runtime");function os(a){let{object:r,settings:l}=a;if(!P("CopyIDAction",l))return null;let f=ne(r);return(0,xi.jsx)(Ai.Action.CopyToClipboard,{title:`Copy ${f} ID`,content:r.id,shortcut:R("CopyIDAction",l)})}var Ee=require("@raycast/api");var ae=require("@raycast/api");var It=async a=>{await ae.LocalStorage.removeItem(a.name)};var cs=async(a,r,l)=>{let f=await ae.LocalStorage.allItems(),p=Object.values(f).filter((h,w)=>!Object.keys(f)[w].startsWith("--")&&!Object.keys(f)[w].startsWith("id-")&&(a==null||JSON.parse(h).name!=a.name));l?.([...p?.map(h=>JSON.parse(h))||[],r]),a!=null&&a.name!=r.name&&await ae.LocalStorage.removeItem(a.name),await ae.LocalStorage.setItem(r.name,JSON.stringify(r))};async function Di(a){let r=await ae.LocalStorage.allItems(),f=Object.values(r).filter((p,h)=>!Object.keys(r)[h].startsWith("--")&&!Object.keys(r)[h].startsWith("id-")).map(p=>JSON.parse(p)).find(p=>p.id==a.commandID);if(f&&f.runs){let p={...f,runs:f.runs.filter(h=>h.id!=a.id)};await cs(f,p)}}var ze=ie(require("fs")),Te=require("@raycast/api");async function Ii(a,r){let f=`${Te.environment.supportPath}/chats`;if(a.name!==r.name){let p=`${f}/${a.name}.txt`,h=`${f}/${r.name}.txt`;ze.renameSync(p,h),await Te.LocalStorage.removeItem(`--chat-${a.name}`)}await Te.LocalStorage.setItem(`--chat-${r.name}`,JSON.stringify(r))}async function Pt(a){let f=`${`${Te.environment.supportPath}/chats`}/${a.name}.txt`;ze.existsSync(f)&&ze.unlinkSync(f),await Te.LocalStorage.removeItem(`--chat-${a.name}`)}var Pi=require("react/jsx-runtime");function ls(a){let{object:r,settings:l,revalidateObjects:f}=a;return P("ToggleFavoriteAction",l)?(0,Pi.jsx)(Ee.Action,{title:r.favorited?"Remove from Favorites":"Add to Favorites",icon:r.favorited?Ee.Icon.StarDisabled:Ee.Icon.Star,shortcut:R("ToggleFavoriteAction",l),onAction:async()=>{let p={...r,favorited:!r.favorited};G(r)?await cs(r,p):Q(r)?await we(r,p):Z(r)&&Ii(r,p),await f(),await(0,Ee.showToast)({title:r.favorited?"Removed From Favorites":"Added To Favorites"})}}):null}var ee=require("@raycast/api");var Ri=require("react/jsx-runtime");function us(a){let{object:r,settings:l,revalidateObjects:f}=a;if(!P("DeleteAction",l))return null;let p=ne(r);return(0,Ri.jsx)(ee.Action,{title:`Delete ${p}`,icon:ee.Icon.Trash,style:ee.Action.Style.Destructive,shortcut:R("DeleteAction",l),onAction:async()=>{await(0,ee.confirmAlert)({title:`Delete ${p} '${"name"in r?r.name:r.id}'`,message:"Are you sure?",primaryAction:{title:"Delete",style:ee.Alert.ActionStyle.Destructive}})&&(G(r)?await It(r):Dt(r)?await Di(r):Q(r)?await St(r):Z(r)&&await Pt(r),await f(),await(0,ee.showToast)({title:`Deleted ${p}`}))}})}var te=require("@raycast/api");var Fi=require("react/jsx-runtime");function ds(a){let{objects:r,settings:l,revalidateObjects:f}=a;if(!P("DeleteAllAction",l)||r.length===0)return null;let h=`${ne(r[0])}${r.length>1?"s":""}`;return(0,Fi.jsx)(te.Action,{title:`Delete All ${h}`,icon:te.Icon.Trash,style:te.Action.Style.Destructive,shortcut:R("DeleteAllAction",l),onAction:async()=>{if(await(0,te.confirmAlert)({title:`Delete ${r.length} ${h}?`,message:"Are you sure?",primaryAction:{title:"Delete",style:te.Alert.ActionStyle.Destructive}})){for(let w of r)G(w)?await It(w):Q(w)?await St(w):Z(w)&&await Pt(w);await f(),await(0,te.showToast)({title:`Deleted ${r.length} ${h}`})}}})}var $i=require("@raycast/api");var Ti=require("react/jsx-runtime");function fs(a){let{objects:r,settings:l}=a;if(!P("CopyAllJSONAction",l)||r.length===0)return null;let p=`${ne(r[0])}${r.length>1?"s":""}`,h={};for(let D of r){let L="item";G(D)||Ke(D)?L=D.name:Z(D)?L=`--chat-${D.name}`:Q(D)&&(L=`--model-${D.name}`),h[L]=D}let w=JSON.stringify(h).replaceAll(/\\([^"])/g,"\\\\$1");return(0,Ti.jsx)($i.Action.CopyToClipboard,{title:`Copy JSON for All ${p}`,content:w,shortcut:R("CopyAllJSONAction",l)})}var _=require("react/jsx-runtime");function hs(a){let{model:r,models:l,settings:f}=a,p={...r,id:"",apiKey:""};return(0,_.jsxs)(ps.ActionPanel,{children:[(0,_.jsx)(es,{models:l,settings:f}),mi(["EditModelAction","ToggleFavoriteAction","ToggleModelDefaultAction","CopyIDAction","CopyJSONAction","CopyAllModelsJSONAction","CreateModelDerivativeAction","DeleteAction","DeleteAllAction"],f)?(0,_.jsxs)(ps.ActionPanel.Section,{title:"Model Actions",children:[(0,_.jsx)(ss,{model:r,models:l,settings:f}),(0,_.jsx)(ls,{object:r,settings:f,revalidateObjects:l.revalidate}),(0,_.jsx)(is,{model:r,models:l,settings:f}),(0,_.jsx)(os,{object:r,settings:f}),(0,_.jsx)(rs,{object:p,settings:f}),(0,_.jsx)(fs,{objects:l.models,settings:f}),(0,_.jsx)(as,{model:r,models:l,settings:f}),(0,_.jsx)(us,{object:r,settings:f,revalidateObjects:l.revalidate}),(0,_.jsx)(ds,{objects:l.models,settings:f,revalidateObjects:l.revalidate})]}):null,(0,_.jsx)(wi,{settings:f})]})}var se=require("react/jsx-runtime");function Ei(){let a=li(),{advancedSettings:r}=hi(),l=a.models.map(h=>(0,se.jsx)(j.List.Item,{title:h.name,subtitle:h.description,icon:{source:h.icon,tintColor:h.iconColor},accessories:[{icon:h.isDefault?j.Icon.Checkmark:void 0,tooltip:h.isDefault?"Default Model":void 0},{icon:h.favorited?{source:j.Icon.StarCircle,tintColor:j.Color.Yellow}:void 0,tooltip:h.favorited?"Favorited":void 0}],actions:(0,se.jsx)(hs,{model:h,models:a,settings:r})},h.id)),[f,p]=a.models.reduce((h,w)=>(w.favorited?h[0].push(w):h[1].push(w),h),[[],[]]);return(0,se.jsxs)(j.List,{isLoading:a.isLoading,actions:(0,se.jsx)(j.ActionPanel,{children:(0,se.jsx)(j.Action.Push,{title:"Add New Model",icon:j.Icon.PlusCircle,shortcut:{modifiers:["cmd"],key:"n"},target:(0,se.jsx)(ve,{models:a})})}),children:[(0,se.jsx)(j.List.EmptyView,{title:"No models yet, add one to get started.",icon:j.Icon.PlusCircle}),f.length?(0,se.jsx)(j.List.Section,{title:"Favorites",children:l.filter(h=>f.map(w=>w.name).includes(h.props.title))}):null,p.length?(0,se.jsx)(j.List.Section,{title:f.length?"Other Models":"All Models",children:l.filter(h=>p.map(w=>w.name).includes(h.props.title))}):null]})}
